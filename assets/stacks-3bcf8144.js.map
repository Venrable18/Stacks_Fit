{"version":3,"mappings":"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","names":["DEFAULT_BLOCKSTACK_HOST","DEFAULT_PROFILE","DEFAULT_SCOPE","LOCALSTORAGE_SESSION_KEY","config","ERROR_CODES","error","message","bugDetails","stack","e","MissingParameterError","BlockstackError","parameter","InvalidDIDError","LoginFailedError","reason","InvalidStateError","NoSessionDataError","levels","levelToInt","index","level","Logger","nextMonth","nextHour","isLaterVersion","v1","v2","v1tuple","x","v2tuple","makeUUID4","d","c","r","getGlobalScope","getAPIUsageErrorMessage","scopeObject","apiName","usageDesc","getGlobalObject","name","throwIfUnavailable","returnEmptyObject","globalScope","obj","errMsg","without0x","value","_","i","hexToBytes","hex","array","j","hexByte","byte","bytesToUtf8","arr","GAIA_URL","defaultFetchOpts","fetchWrapper","input","init","fetchOpts","argsForCreateFetchFn","args","fetchLib","middlewares","createFetchFn","url","fetchParams","middleware","response","AppConfig","scopes","appDomain","_a","redirectPath","manifestPath","coreNode","authenticatorURL","number","n","bool","b","bytes","lengths","hash","exists","instance","checkFinished","output","out","min","assert","crypto","createView","rotr","word","shift","isLE","v","utf8ToBytes","str","toBytes","data","Hash","wrapConstructor","hashConstructor","hashC","tmp","HMAC","_key","key","blockLen","pad","buf","to","oHash","iHash","finished","destroyed","outputLen","hmac","setBigUint64","view","byteOffset","_32n","_u32_max","wh","wl","h","SHA2","padOffset","buffer","len","pos","take","dataView","oview","outLen","state","res","length","Chi","a","Maj","SHA256_K","IV","SHA256_W","SHA256","A","B","C","D","E","F","G","H","offset","W15","W2","s0","s1","sigma1","T1","T2","SHA224","sha256","sha224","__viteBrowserExternal","_0n","_1n","_2n","_3n","_8n","CURVE","divNearest","endo","k","a1","b1","a2","b2","POW_2_128","c1","c2","k1","mod","k2","k1neg","k2neg","fieldLen","groupLen","hashLen","compressedLen","uncompressedLen","weierstrass","x2","x3","USE_ENDOMORPHISM","ShaError","assertJacPoint","other","JacobianPoint","y","z","p","Point","points","toInv","invertBatch","X1","Y1","Z1","X2","Y2","Z2","Z1Z1","Z2Z2","U1","U2","S1","S2","x1b","X3","Y3","Z3","HH","HHH","V","scalar","P0","normalizeScalar","k1p","k2p","W","windows","base","window","affinePoint","precomputes","pointPrecomputes","f","windowSize","mask","maxNumber","shiftBy","wbits","offset1","offset2","cond1","cond2","constTimeNegate","point","fake","f1p","f2p","invZ","is0","invert","iz1","iz2","iz3","ax","ay","zz","condition","item","neg","isShort","bytesToNumber","isValidFieldElement","y2","sqrtMod","isYOdd","ensureBytes","header","privateKey","normalizePrivateKey","msgHash","signature","recovery","s","normalizeSignature","truncateHash","radj","rinv","u1","u2","prefix","R","numTo32bStr","Q","isCompressed","msg","left","right","P","aP","bQ","sum","sliceDER","parseDERInt","bytesToHex","parseDERSignature","sBytes","rBytesLeft","Signature","hexToNumber","isWithinCurveOrder","HALF","sHex","numberToHexUnpadded","rHex","sHexL","rHexL","sLen","rLen","concatBytes","arrays","result","hexes","uint8a","POW_2_256","num","numTo32b","pow2","power","_6n","_11n","_22n","_23n","_44n","_88n","b3","b6","b9","b11","b22","b44","b88","b176","b220","b223","t1","t2","rt","modulo","u","q","m","nums","scratch","lastMultiplied","acc","inverted","bits2int_2","delta","truncateOnly","_sha256Sync","_hmacSha256Sync","HmacDrbg","qByteLen","values","utils","seed","sl","kmdToSig","kBytes","lowS","kinv","sig","normalizePublicKey","publicKey","getPublicKey","recoverPublicKey","isProbPub","getSharedSecret","privateA","publicB","bits2int","slice","bits2octets","z1","z2","int2octets","initSigArgs","extraEntropy","h1","seedArgs","finalizeSig","recSig","opts","der","recovered","hashed","sign","privKey","drbg","signSync","vopts","verify","sinv","schnorrChallengeFinalize","ch","SchnorrSignature","schnorrGetPublicKey","InternalSchnorrSignature","auxRand","priv","t0h","k0h","k0","rx","px","rand","tag","t","TAGS","schnorrVerify","schnorrVerifySync","schnorrSign","schnorrSignSync","initSchnorrVerify","raw","finalizeSchnorrVerify","schnorr","nodeCrypto","TAGGED_HASH_PREFIXES","minLen","bytesLength","randomBytes","cached","messages","createHash","ckey","createHmac","tagP","tagH","val","FailedDecryptionError","privateKeyToBytes","privateKeyBuffer","base64Js","byteLength","toByteArray_1","toByteArray","fromByteArray_1","fromByteArray","lookup","revLookup","Arr","code","getLens","b64","validLen","placeHoldersLen","lens","_byteLength","curByte","tripletToBase64","encodeChunk","uint8","start","end","extraBytes","parts","maxChunkLength","len2","isSubtleCryptoAvailable","NO_CRYPTO_LIB","getCryptoLib","NodeCryptoAesCipher","createCipher","createDecipher","algorithm","iv","cipher","WebCryptoAesCipher","subtleCrypto","algo","cryptoKey","cryptoLib","ALPHABET","BASE_MAP","xc","BASE","LEADER","FACTOR","iFACTOR","encode","source","zeroes","pbegin","pend","size","b58","carry","it1","it2","decodeUnsafe","psz","b256","charCode","it3","it4","vch","decode","string","src","basex","require$$0","bs58","Rho","Id","Pi","idxL","idxR","shifts","shiftsL","idx","shiftsR","Kl","Kr","rotl","group","BUF","RIPEMD160","h0","h2","h3","h4","al","ar","bl","br","cl","cr","dl","dr","el","er","rGroup","hbl","hbr","rl","rr","sr","tl","tr","ripemd160","hashRipemd160","U32_MASK64","fromBig","le","split","lst","Ah","Al","l","toBig","shrSH","shrSL","rotrSH","rotrSL","rotrBH","rotrBL","rotr32H","rotr32L","rotlSH","rotlSL","rotlBH","rotlBL","add","Bh","Bl","add3L","Cl","add3H","low","Ch","add4L","Dl","add4H","Dh","add5L","El","add5H","Eh","u64","SHA512_Kh","SHA512_Kl","SHA512_W_H","SHA512_W_L","SHA512","Fh","Fl","Gh","Gl","Hh","Hl","W15h","W15l","s0h","s0l","W2h","W2l","s1h","s1l","SUMl","SUMh","sigma1h","sigma1l","CHIh","CHIl","T1ll","T1h","T1l","sigma0h","sigma0l","MAJh","MAJl","All","SHA512_224","SHA512_256","SHA384","sha512","sha512_256","hashSha256Sync","hashSha512Sync","BITCOIN_PUBKEYHASH","msgs","makeECPrivateKey","base58Encode","checksum","base58","base58CheckEncode","version","publicKeyToBtcAddress","publicKeyBytes","publicKeyHash160","getPublicKeyFromPrivate","privateKeyBytes","nobleGetPublicKey","InvalidPublicKeyReason","aes256CbcEncrypt","plaintext","aes256CbcDecrypt","ciphertext","hmacSha256","content","equalsConstTime","sharedSecretToKeys","sharedSecret","hashedSecret","allHexChars","maybe","isValidPublicKey","pub","invalidFormat","invalidPoint","firstByte","encryptECIES","wasString","cipherTextEncoding","validity","ephemeralPrivateKey","ephemeralPublicKey","sharedKeys","initializationVector","cipherText","macData","mac","cipherTextString","decryptECIES","cipherObject","ephemeralPK","ivBytes","cipherTextBytes","actualMac","expectedMac","plainText","signECDSA","contentBytes","contentHash","encryptContent","options","cipherPayload","signatureObject","signedCipherObject","decryptContent","err","exports","crypto_1","u8","u32","nextTick","asyncLoop","iters","tick","cb","ts","diff","isPlainObject","checkOpts","defaults","wrapConstructorWithOpts","hashCons","base64Url","base64_js_1","base64","escape","unescape","ecdsaSigFormatter","base64Url_1","require$$1","getParamSize","keySize","paramBytesForAlg","getParamBytesForAlg","alg","paramBytes","MAX_OCTET","CLASS_UNIVERSAL","PRIMITIVE_BIT","TAG_SEQ","TAG_INT","ENCODED_TAG_SEQ","ENCODED_TAG_INT","signatureAsBytes","derToJose","signatureBytes","maxEncodedParamLength","inputLength","seqLength","rLength","rOffset","sLength","sOffset","rPadding","sPadding","dst","o","countPadding","stop","padding","joseToDer","rsBytes","shortLength","errors","MissingParametersError","InvalidTokenError","secp256k1","hmac_1","sha256_1","secp","require$$2","ecdsaSigFormatter_1","require$$3","errors_1","require$$4","utils_1","require$$5","SECP256K1Client","compressed","signingInputHash","format","derSignature","joseSignature","derSignatureBytes","secp256k1_1","cryptoClients","__awaiter","this","thisArg","_arguments","generator","adopt","resolve","reject","fulfilled","step","rejected","hashSha256","hashSha256Async","signer","base64url","cryptoClients_1","createSigningInput","payload","tokenParts","encodedHeader","encodedPayload","createUnsecuredToken","TokenSigner","signingAlgorithm","rawPrivateKey","defaultHeader","expanded","customHeader","signingInput","verifier","TokenVerifier","rawPublicKey","token","async","performVerify","verified","decodeToken","allHeaders","headerValue","__createBinding","desc","__exportStar","makeDIDFromAddress","address","getDIDType","decentralizedID","didParts","getAddressFromDID","VERSION","generateTransitKey","makeAuthRequestToken","transitPrivateKey","redirectURI","manifestURI","expiresAt","extraParams","getWindowOrigin","paramName","location","decryptPrivateKey","hexedEncrypted","unhexedString","encryptedObj","decrypted","doSignaturesMatchPublicKeys","publicKeys","doPublicKeysMatchIssuer","addressFromIssuer","isIssuanceDateValid","issuedAt","isExpirationDateValid","verifyAuthResponse","SESSION_VERSION","SessionData","json","SessionDataStore","sessionOptions","newSessionData","_session","InstanceDataStore","session","LocalStorageStore","sessionData","dataJSON","HIRO_MAINNET_URL","HIRO_TESTNET_URL","DEVNET_URL","ChainId","PeerNetworkId","TransactionVersion","AddressVersion","STACKS_MAINNET","STACKS_TESTNET","STACKS_DEVNET","STACKS_MOCKNET","networkFromName","networkFrom","network","PayloadType","ClarityVersion","AnchorMode","AnchorModeNames","PostConditionMode","PostConditionType","AuthType","AddressHashMode","PubKeyEncoding","FungibleConditionCode","NonFungibleConditionCode","PostConditionPrincipalId","AssetType","TenureChangeCause","AuthFieldType","TxRejectedReason","c32encode","inputHex","minLength","currentCode","nextCode","nextBits","nextLowBits","curC32Digit","C32leadingZeros","zeroPrefix","numLeadingZeroBytesInHex","count","c32normalize","c32input","c32decode","numLeadingZeroBytes","carryBits","currentValue","currentHexDigit","hexLeadingZeros","hexStr","encoding_1","c32checksum","dataHex","dataHash","c32checkEncode","versionHex","checksumHex","c32str","c32checkDecode","c32data","versionChar","base58check","dataBytes","prefixBytes","check","checksum_1","ADDR_BITCOIN_TO_STACKS","ADDR_STACKS_TO_BITCOIN","c32address","hash160hex","c32addressDecode","c32addr","b58ToC32","b58check","addrInfo","hash160String","addrVersion","stacksVersion","c32ToB58","c32string","bitcoinVersion","address_1","addressHashModeToVersion","hashMode","LARGE_ARRAY_SIZE","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","genTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reRegExpChar","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","freeSelf","root","freeExports","freeModule","module","moduleExports","addMapEntry","map","pair","addSetEntry","set","arrayEach","iteratee","arrayPush","arrayReduce","accumulator","initAccum","baseTimes","getValue","object","isHostObject","mapToArray","overArg","func","transform","arg","setToArray","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","uid","funcToString","hasOwnProperty","objectToString","reIsNative","Buffer","Symbol","Uint8Array","getPrototype","objectCreate","propertyIsEnumerable","splice","nativeGetSymbols","nativeIsBuffer","nativeKeys","DataView","getNative","Map","Promise","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","entries","entry","hashClear","hashDelete","hashGet","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","lastIndex","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","cache","pairs","arrayLikeKeys","inherited","isArray","isArguments","skipIndexes","isIndex","assignValue","objValue","eq","baseAssign","copyObject","keys","baseClone","isDeep","isFull","customizer","isObject","isArr","initCloneArray","copyArray","getTag","isFunc","isBuffer","cloneBuffer","initCloneObject","copySymbols","initCloneByTag","stacked","props","getAllKeys","subValue","baseCreate","proto","baseGetAllKeys","keysFunc","symbolsFunc","baseGetTag","baseIsNative","isMasked","pattern","isFunction","baseKeys","isPrototype","cloneArrayBuffer","arrayBuffer","cloneDataView","cloneMap","cloneFunc","cloneRegExp","regexp","cloneSet","cloneSymbol","symbol","cloneTypedArray","typedArray","newValue","getSymbols","isKeyable","stubArray","Ctor","ctorString","type","cloneDeep","isArrayLikeObject","isArrayLike","isLength","isObjectLike","stubFalse","StacksWireType","addressFromVersionHash","addressToString","hash160","hashP2PKH","getAddressFromPublicKey","addrVer","addr","verifyProfileToken","publicKeyOrAddress","decodedToken","issuerPublicKey","tokenVerifier","extractProfile","profile","GLOBAL_DETECTION_CACHE_KEY","ECHO_REPLY_PARAM","AUTH_CONTINUATION_PARAM","getQueryStringParams","query","params","param","protocolEchoReplyDetection","existingDetection","searchParams","echoReplyParam","echoReplyKey","authContinuationParam","UserSession","runningInBrowser","transitKey","appConfig","authMessages.makeAuthRequestToken","authMessages.generateTransitKey","search","authResponseToken","fetchFn","tokenPayload","appPrivateKey","coreSessionToken","authMessages.decryptPrivateKey","hubUrl","gaiaAssociationToken","userData","profileURL","responseText","wrappedProfile","redirectURL","getRegisteredProviders","getInstalledProviders","defaultProviders","registeredProviders","additionalInstalledProviders","defaultProvider","rp","getProviderFromId","id","part","LOCAL_STORAGE_KEY","getSelectedProviderId","setSelectedProviderId","provider","self","support","isDataView","viewClasses","isArrayBufferView","normalizeName","normalizeValue","iteratorFor","items","iterator","Headers","headers","oldValue","callback","consumed","body","fileReaderReady","reader","readBlobAsArrayBuffer","blob","promise","readBlobAsText","readArrayBufferAsText","chars","bufferClone","Body","methods","normalizeMethod","method","upcased","Request","form","parseHeaders","rawHeaders","preProcessedHeaders","line","Response","bodyInit","redirectStatuses","status","fetch","request","xhr","abortXhr","intToBytes","signed","bigIntToBytes","intToBigInt","parsedValue","bn","fromTwos","intToHex","integer","lengthBytes","toTwos","width","nthBit","paddedHex","asciiToBytes","byteArray","isNotOctet","octet","octetsToBytes","numbers","concatArray","elements","ChainID","PeerNetworkID","writeUInt32BE","destination","HIRO_MAINNET_DEFAULT","HIRO_TESTNET_DEFAULT","HIRO_MOCKNET_DEFAULT","StacksNetworks","StacksNetwork$1","networkConfig","contract","contractAddress","contractName","functionName","dataVarName","mapName","fullyQualifiedName","nameLookupURL","resp","nameInfo","StacksNetwork","networkName","StacksMainnet","StacksTestnet","StacksDevnet","StacksMocknet","isInstance","hexToBigInt","hexToInt","bytesToTwosBigInt","bytesToAscii","clazz","_b","PRIVATE_KEY_BYTES_COMPRESSED","COORDINATE_BYTES","parseRecoverableSignatureVrs","recoveryIdHex","readUInt16BE","writeUInt16BE","readUInt8","writeUInt8","readUInt32BE","createEnumChecker","enumVariable","enumValues","enumValueSet","enumCheckFunctions","isEnum","checker","newChecker","BytesReader","invalidEnumErrorFormatter","MAX_STRING_LENGTH_BYTES","CLARITY_INT_SIZE","CLARITY_INT_BYTE_SIZE","COINBASE_BYTES_LENGTH","VRF_PROOF_BYTES_LENGTH","RECOVERABLE_ECDSA_SIG_LENGTH_BYTES","COMPRESSED_PUBKEY_LENGTH_BYTES","UNCOMPRESSED_PUBKEY_LENGTH_BYTES","MEMO_MAX_LENGTH_BYTES","MAX_PAYLOAD_LEN","PREAMBLE_ENCODED_SIZE","MAX_RELAYERS_LEN","PEER_ADDRESS_ENCODED_SIZE","HASH160_ENCODED_SIZE","NEIGHBOR_ADDRESS_ENCODED_SIZE","RELAY_DATA_ENCODED_SIZE","STRING_MAX_LENGTH","TransactionError","DeserializationError","SigningError","VerificationError","ClarityType","ClarityWireType","clarityTypeToByte","trueCV","falseCV","bufferCV","MAX_U128","MIN_U128","MAX_I128","MIN_I128","intCV","bigInt","uintCV","listCV","noneCV","someCV","createEmptyAddress","createMemoString","exceedsMaxLengthBytes","createLPList","lengthPrefixBytes","createMessageSignature","createTokenTransferPayload","recipient","amount","memo","principalCV","createContractCallPayload","functionArgs","createLPString","createAddress","codeBodyString","createSmartContractPayload","codeBody","clarityVersion","createPoisonPayload","createCoinbasePayload","coinbaseBytes","altRecipient","createNakamotoCoinbasePayload","vrfProof","createTenureChangePayload","tenureHash","previousTenureHash","burnViewHash","previousTenureEnd","previousTenureBlocks","cause","publicKeyHash","maxLengthBytes","prefixLength","maxLength","createAsset","addressString","assetName","c32AddressString","addressData","createContractPrincipal","createStandardPrincipal","createTransactionAuthField","pubKeyEncoding","contents","serializeStacksWireBytes","wire","serializeAddressBytes","serializePrincipalBytes","serializeLPStringBytes","serializeMemoStringBytes","serializeAssetBytes","serializePostConditionWireBytes","serializePublicKeyBytes","serializeLPListBytes","serializePayloadBytes","serializeTransactionAuthFieldBytes","serializeMessageSignatureBytes","bytesArray","deserializeAddress","serialized","bytesReader","principal","deserializePrincipal","deserializeLPString","lps","memoString","paddedContent","rightPadHexToLength","deserializeMemoString","info","deserializeAsset","lpList","list","deserializeLPList","deserializePostConditionWire","deserializePublicKey","deserializeTransactionAuthField","serializePostConditionWire","postCondition","serializeCVBytes","SerializationError","postConditionType","conditionCode","asset","deserializeCV","numArgs","deserializePayload","contractCallName","numberOfArgs","clarityValue","smartContractName","deserializeMessageSignature","authFieldType","createStacksPublicKey","uncompressPublicKey","messageSignature","field","compressPublicKey","fieldId","keyLength","addressFromPublicKeys","numSigs","publicKeyIsCompressed","hashP2WPKH","hashP2SH","hashP2WSH","parseAssetString","assetAddress","assetContractName","assetTokenName","parsePrincipalString","principalString","contractPrincipalCV","standardPrincipalCV","standardPrincipalCVFromAddress","lengthPrefixedContractName","contractPrincipalCVFromAddress","responseErrorCV","responseOkCV","stringAsciiCV","stringUtf8CV","tupleCV","isClarityName","serializedClarityValue","hasHexPrefix","bufferLength","sAddress","cAddress","listLength","listContents","tupleLength","tupleContents","clarityName","asciiStrLen","asciiStr","utf8StrLen","utf8Str","bytesWithTypeID","typeId","serializeBoolCV","serializeOptionalCV","cv","serializeBufferCV","serializeIntCV","serializeUIntCV","serializeStandardPrincipalCV","serializeContractPrincipalCV","parseContractId","serializeResponseCV","serializeListCV","serializedValue","serializeTupleCV","lexicographicOrder","nameWithLength","serializeStringCV","encoding","serializeStringAsciiCV","serializeStringUtf8CV","serializeCV","leftPadHex","hexString","lodashCloneDeep","txidFromData","keyHash","redeemScript","redeemScriptHash","pubKeys","pubKey","scriptArray","script","digest","contractId","publicKeyFromSignatureVrs","messageHash","parsedSignature","privateKeyToHex","publicKeyToHex","privateKeyIsCompressed","privateKeyToPublic","signWithKey","rawSignature","recoveryId","emptyMessageSignature","createSingleSigSpendingCondition","nonce","fee","keyEncoding","isSingleSig","isSequentialMultiSig","isNonSequentialMultiSig","clearCondition","cloned","serializeSingleSigSpendingConditionBytes","serializeMultiSigSpendingConditionBytes","fields","deserializeSingleSigSpendingCondition","deserializeMultiSigSpendingCondition","haveUncompressed","signaturesRequired","serializeSpendingConditionBytes","deserializeSpendingCondition","sigHashPreSign","curSigHash","authType","sigHash","sigHashPostSign","hashLength","sigHashBytes","nextSignature","sigHashPre","nextSigHash","nextVerification","initialSigHash","newInitialSigHash","spendingCondition","verifySingleSig","verifyMultiSig","addrBytes","createStandardAuth","createSponsoredAuth","sponsorSpendingCondition","intoInitialSighashAuth","auth","verifyOrigin","setFee","setNonce","setSponsorNonce","setSponsor","sc","serializeAuthorizationBytes","deserializeAuthorization","StacksTransactionWire","postConditions","postConditionMode","transactionVersion","chainId","tx","cond","nextSig","chainIdBytes","deserializeTransaction","anchorMode","transaction","PostConditionCodeWireType","postConditionToWire","postcondition","conditionTypeToByte","postConditionToHex","StacksMessageType","PostConditionPrincipalID","serializeAddress","serializePrincipal","serializeLPString","serializeAssetInfo","serializePostCondition","NAMESPACE","scopeId","hostTagName","isSvgMode","queuePending","createTime","fnName","tagName","uniqueTime","measureText","HYDRATED_CSS","EMPTY_OBJ","SVG_NS","HTML_NS","isDef","isComplexType","queryNonceMetaTagContent","doc","_c","nodeName","vnodeData","children","child","simple","lastSimple","vNodeChildren","walk","newVNode","classData","vnode","text","Host","isHost","node","parsePropertyValue","propValue","propType","getElement","ref","getHostRef","emitEvent","elm","ev","plt","rootAppliedStyles","registerStyle","cssText","allowCS","style","styles","supportsConstructableStylesheets","addStyle","styleContainerNode","cmpMeta","mode","hostElm","getScopeId","appliedStyles","styleElm","attachStyles","hostRef","flags","endAttachStyles","cmp","setAccessor","memberName","isSvg","isProp","isMemberInElement","ln","classList","oldClasses","parseClassList","newClasses","win","isComplex","parseClassListRegex","updateElement","oldVnode","newVnode","oldVnodeAttrs","newVnodeAttrs","createElm","oldParentVNode","newParentVNode","childIndex","parentElm","childNode","addVnodes","before","parentVNode","vnodes","startIdx","endIdx","containerElm","removeVnodes","updateChildren","oldCh","newCh","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","isSameVnode","patch","leftVNode","rightVNode","oldVNode","oldChildren","newChildren","renderVdom","renderFnResults","rootVnode","attachToAncestor","ancestorComponent","scheduleUpdate","isInitialLoad","writeTask","dispatchHooks","endSchedule","then","updateComponent","endUpdate","rc","endRender","callRender","childrenPromises","postUpdate","postUpdateComponent","consoleError","endPostUpdate","addHydratedFlag","appDidLoad","who","thenFn","propName","setValue","newVal","oldVal","areBothNaN","didValueChange","proxyComponent","Cstr","members","prototype","memberFlags","attrNameToPropName","attrName","_oldValue","initializeComponent","hmrVersionId","loadModule","endLoad","endNewInstance","endRegisterStyles","schedule","connectedCallback","endConnected","disconnectedCallback","bootstrapLazy","lazyBundles","endBootstrap","cmpTags","exclude","customElements","head","metaCharset","visibilityStyle","deferredConnectedCallbacks","appLoadFallback","isBootstrapping","lazyBundle","compactMeta","HostElement","registerHost","host","hostRefs","registerInstance","lazyInstance","cmpModules","exportName","bundleId","processMod","importedModule","__vitePreload","eventName","listener","promiseResolve","queueDomReads","queueDomWrites","queueTask","queue","write","flush","consume","patchEsm","defineCustomElements","st","at","O","g","U","T","ot","St","yt","M","S","wt","Nt","w","Pt","mt","serializeCV$1","N","Y","ae","tt","$","ce","ie","et","nt","I","L","ge","boolCV","createSTXPostCondition","makeStandardSTXPostCondition"],"sources":["../../node_modules/@stacks/auth/dist/esm/constants.js","../../node_modules/@stacks/auth/node_modules/@stacks/common/dist/esm/config.js","../../node_modules/@stacks/auth/node_modules/@stacks/common/dist/esm/errors.js","../../node_modules/@stacks/auth/node_modules/@stacks/common/dist/esm/logger.js","../../node_modules/@stacks/auth/node_modules/@stacks/common/dist/esm/utils.js","../../node_modules/@stacks/auth/node_modules/@stacks/common/dist/esm/constants.js","../../node_modules/@stacks/auth/node_modules/@stacks/common/dist/esm/fetch.js","../../node_modules/@stacks/auth/dist/esm/appConfig.js","../../node_modules/@noble/hashes/esm/_assert.js","../../node_modules/@noble/hashes/esm/cryptoBrowser.js","../../node_modules/@noble/hashes/esm/utils.js","../../node_modules/@noble/hashes/esm/hmac.js","../../node_modules/@noble/hashes/esm/_sha2.js","../../node_modules/@noble/hashes/esm/sha256.js","../../__vite-browser-external","../../node_modules/@noble/secp256k1/lib/esm/index.js","../../node_modules/@stacks/encryption/node_modules/@stacks/common/dist/esm/errors.js","../../node_modules/@stacks/encryption/node_modules/@stacks/common/dist/esm/utils.js","../../node_modules/@stacks/encryption/node_modules/@stacks/common/dist/esm/keys.js","../../node_modules/base64-js/index.js","../../node_modules/@stacks/encryption/dist/esm/cryptoUtils.js","../../node_modules/@stacks/encryption/dist/esm/aesCipher.js","../../node_modules/base-x/src/index.js","../../node_modules/bs58/index.js","../../node_modules/@noble/hashes/esm/ripemd160.js","../../node_modules/@stacks/encryption/dist/esm/hashRipemd160.js","../../node_modules/@noble/hashes/esm/_u64.js","../../node_modules/@noble/hashes/esm/sha512.js","../../node_modules/@stacks/encryption/dist/esm/sha2Hash.js","../../node_modules/@stacks/encryption/dist/esm/keys.js","../../node_modules/@stacks/encryption/dist/esm/ec.js","../../node_modules/@stacks/encryption/dist/esm/encryption.js","../../node_modules/@noble/hashes/utils.js","../../node_modules/jsontokens/lib/base64Url.js","../../node_modules/jsontokens/lib/ecdsaSigFormatter.js","../../node_modules/jsontokens/lib/errors.js","../../node_modules/jsontokens/lib/cryptoClients/secp256k1.js","../../node_modules/jsontokens/lib/cryptoClients/index.js","../../node_modules/jsontokens/lib/cryptoClients/sha256.js","../../node_modules/jsontokens/lib/signer.js","../../node_modules/jsontokens/lib/verifier.js","../../node_modules/jsontokens/lib/decode.js","../../node_modules/jsontokens/lib/index.js","../../node_modules/@stacks/auth/dist/esm/dids.js","../../node_modules/@stacks/auth/dist/esm/messages.js","../../node_modules/@stacks/auth/dist/esm/verification.js","../../node_modules/@stacks/auth/dist/esm/sessionData.js","../../node_modules/@stacks/auth/dist/esm/sessionStore.js","../../node_modules/@stacks/profile/node_modules/@stacks/common/dist/esm/utils.js","../../node_modules/@stacks/profile/node_modules/@stacks/common/dist/esm/constants.js","../../node_modules/@stacks/profile/node_modules/@stacks/network/dist/esm/constants.js","../../node_modules/@stacks/profile/node_modules/@stacks/network/dist/esm/network.js","../../node_modules/@stacks/profile/node_modules/@stacks/transactions/dist/esm/constants.js","../../node_modules/c32check/lib/encoding.js","../../node_modules/c32check/lib/checksum.js","../../node_modules/c32check/lib/base58check.js","../../node_modules/c32check/lib/address.js","../../node_modules/c32check/lib/index.js","../../node_modules/@stacks/profile/node_modules/@stacks/transactions/dist/esm/address.js","../../node_modules/lodash.clonedeep/index.js","../../node_modules/@stacks/profile/node_modules/@stacks/transactions/dist/esm/wire/types.js","../../node_modules/@stacks/profile/node_modules/@stacks/transactions/dist/esm/wire/helpers.js","../../node_modules/@stacks/profile/node_modules/@stacks/transactions/dist/esm/utils.js","../../node_modules/@stacks/profile/node_modules/@stacks/transactions/dist/esm/keys.js","../../node_modules/@stacks/profile/dist/esm/profileTokens.js","../../node_modules/@stacks/auth/dist/esm/protocolEchoDetection.js","../../node_modules/@stacks/auth/dist/esm/userSession.js","../../node_modules/@stacks/connect-ui/dist/esm/session-9db1cb8a.js","../../node_modules/cross-fetch/dist/browser-polyfill.js","../../node_modules/@stacks/network-v6/dist/esm/fetch.js","../../node_modules/@stacks/common/dist/esm/utils.js","../../node_modules/@stacks/common/dist/esm/constants.js","../../node_modules/@stacks/common/dist/esm/buffer.js","../../node_modules/@stacks/network-v6/dist/esm/network.js","../../node_modules/@stacks/connect/node_modules/@stacks/network/dist/esm/constants.js","../../node_modules/@stacks/connect/node_modules/@stacks/common/dist/esm/utils.js","../../node_modules/@stacks/connect/node_modules/@stacks/common/dist/esm/constants.js","../../node_modules/@stacks/connect/node_modules/@stacks/common/dist/esm/signatures.js","../../node_modules/@stacks/connect/node_modules/@stacks/common/dist/esm/keys.js","../../node_modules/@stacks/connect/node_modules/@stacks/common/dist/esm/buffer.js","../../node_modules/@stacks/connect/node_modules/@stacks/network/dist/esm/network.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/BytesReader.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/constants.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/errors.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/clarity/constants.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/clarity/values/booleanCV.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/clarity/values/bufferCV.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/clarity/values/intCV.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/clarity/values/listCV.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/clarity/values/optionalCV.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/wire/types.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/wire/create.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/wire/serialization.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/wire/helpers.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/clarity/values/principalCV.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/clarity/values/responseCV.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/clarity/values/stringCV.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/clarity/values/tupleCV.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/clarity/deserialize.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/clarity/serialize.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/utils.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/keys.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/authorization.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/transaction.js","../../node_modules/@stacks/connect/node_modules/@stacks/transactions/dist/esm/postcondition.js","../../node_modules/@stacks/transactions-v6/dist/esm/constants.js","../../node_modules/@stacks/transactions-v6/dist/esm/postcondition-types.js","../../node_modules/@stacks/transactions-v6/dist/esm/clarity/constants.js","../../node_modules/@stacks/transactions-v6/dist/esm/errors.js","../../node_modules/@stacks/transactions-v6/dist/esm/types.js","../../node_modules/@stacks/transactions-v6/dist/esm/clarity/serialize.js","../../node_modules/@stacks/transactions-v6/dist/esm/utils.js","../../node_modules/@stacks/network/dist/esm/fetch.js","../../node_modules/@stacks/network/dist/esm/network.js","../../node_modules/@stacks/connect-ui/dist/esm/index-f9076013.js","../../node_modules/@stacks/connect-ui/dist/esm/loader.js","../../node_modules/@stacks/connect-ui/loader/index.js","../../node_modules/@stacks/connect/dist/index.mjs","../../node_modules/@stacks/transactions/dist/esm/constants.js","../../node_modules/@stacks/transactions/dist/esm/postcondition-types.js","../../node_modules/@stacks/transactions/dist/esm/clarity/constants.js","../../node_modules/@stacks/transactions/dist/esm/clarity/types/principalCV.js","../../node_modules/@stacks/transactions/dist/esm/clarity/types/booleanCV.js","../../node_modules/@stacks/transactions/dist/esm/clarity/types/intCV.js","../../node_modules/@stacks/transactions/dist/esm/clarity/types/stringCV.js","../../node_modules/@stacks/transactions/dist/esm/utils.js","../../node_modules/@stacks/transactions/dist/esm/postcondition.js","../../node_modules/@stacks/transactions/dist/esm/builders.js"],"sourcesContent":["export const BLOCKSTACK_HANDLER = 'blockstack';\nexport const BLOCKSTACK_STORAGE_LABEL = 'blockstack';\nexport const DEFAULT_BLOCKSTACK_HOST = 'https://browser.blockstack.org/auth';\nexport const DEFAULT_PROFILE = {\n    '@type': 'Person',\n    '@context': 'http://schema.org',\n};\nexport const DEFAULT_SCOPE = [\"store_write\"];\nexport const BLOCKSTACK_APP_PRIVATE_KEY_LABEL = 'blockstack-transit-private-key';\nexport const DEFAULT_CORE_NODE = 'https://api.hiro.so';\nexport const NAME_LOOKUP_PATH = '/v1/names';\nexport const LOCALSTORAGE_SESSION_KEY = 'blockstack-session';\n//# sourceMappingURL=constants.js.map","const config = {\n    network: {\n        layer1: 'placeholder',\n    },\n    logLevel: 'debug',\n};\nexport { config };\n//# sourceMappingURL=config.js.map","export const ERROR_CODES = {\n    MISSING_PARAMETER: 'missing_parameter',\n    REMOTE_SERVICE_ERROR: 'remote_service_error',\n    INVALID_STATE: 'invalid_state',\n    NO_SESSION_DATA: 'no_session_data',\n    DOES_NOT_EXIST: 'does_not_exist',\n    FAILED_DECRYPTION_ERROR: 'failed_decryption_error',\n    INVALID_DID_ERROR: 'invalid_did_error',\n    NOT_ENOUGH_FUNDS_ERROR: 'not_enough_error',\n    INVALID_AMOUNT_ERROR: 'invalid_amount_error',\n    LOGIN_FAILED_ERROR: 'login_failed',\n    SIGNATURE_VERIFICATION_ERROR: 'signature_verification_failure',\n    CONFLICT_ERROR: 'conflict_error',\n    NOT_ENOUGH_PROOF_ERROR: 'not_enough_proof_error',\n    BAD_PATH_ERROR: 'bad_path_error',\n    VALIDATION_ERROR: 'validation_error',\n    PAYLOAD_TOO_LARGE_ERROR: 'payload_too_large_error',\n    PRECONDITION_FAILED_ERROR: 'precondition_failed_error',\n    UNKNOWN: 'unknown',\n};\nObject.freeze(ERROR_CODES);\nexport class BlockstackError extends Error {\n    constructor(error) {\n        super();\n        let message = error.message;\n        let bugDetails = `Error Code: ${error.code}`;\n        let stack = this.stack;\n        if (!stack) {\n            try {\n                throw new Error();\n            }\n            catch (e) {\n                stack = e.stack;\n            }\n        }\n        else {\n            bugDetails += `Stack Trace:\\n${stack}`;\n        }\n        message += `\\nIf you believe this exception is caused by a bug in stacks.js,\n      please file a bug report: https://github.com/blockstack/stacks.js/issues\\n\\n${bugDetails}`;\n        this.message = message;\n        this.code = error.code;\n        this.parameter = error.parameter ? error.parameter : undefined;\n    }\n    toString() {\n        return `${super.toString()}\n    code: ${this.code} param: ${this.parameter ? this.parameter : 'n/a'}`;\n    }\n}\nexport class InvalidParameterError extends BlockstackError {\n    constructor(parameter, message = '') {\n        super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n        this.name = 'MissingParametersError';\n    }\n}\nexport class MissingParameterError extends BlockstackError {\n    constructor(parameter, message = '') {\n        super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n        this.name = 'MissingParametersError';\n    }\n}\nexport class RemoteServiceError extends BlockstackError {\n    constructor(response, message = '') {\n        super({ code: ERROR_CODES.REMOTE_SERVICE_ERROR, message });\n        this.response = response;\n    }\n}\nexport class InvalidDIDError extends BlockstackError {\n    constructor(message = '') {\n        super({ code: ERROR_CODES.INVALID_DID_ERROR, message });\n        this.name = 'InvalidDIDError';\n    }\n}\nexport class NotEnoughFundsError extends BlockstackError {\n    constructor(leftToFund) {\n        const message = `Not enough UTXOs to fund. Left to fund: ${leftToFund}`;\n        super({ code: ERROR_CODES.NOT_ENOUGH_FUNDS_ERROR, message });\n        this.leftToFund = leftToFund;\n        this.name = 'NotEnoughFundsError';\n        this.message = message;\n    }\n}\nexport class InvalidAmountError extends BlockstackError {\n    constructor(fees, specifiedAmount) {\n        const message = `Not enough coin to fund fees transaction fees. Fees would be ${fees},` +\n            ` specified spend is  ${specifiedAmount}`;\n        super({ code: ERROR_CODES.INVALID_AMOUNT_ERROR, message });\n        this.specifiedAmount = specifiedAmount;\n        this.fees = fees;\n        this.name = 'InvalidAmountError';\n        this.message = message;\n    }\n}\nexport class LoginFailedError extends BlockstackError {\n    constructor(reason) {\n        const message = `Failed to login: ${reason}`;\n        super({ code: ERROR_CODES.LOGIN_FAILED_ERROR, message });\n        this.message = message;\n        this.name = 'LoginFailedError';\n    }\n}\nexport class SignatureVerificationError extends BlockstackError {\n    constructor(reason) {\n        const message = `Failed to verify signature: ${reason}`;\n        super({ code: ERROR_CODES.SIGNATURE_VERIFICATION_ERROR, message });\n        this.message = message;\n        this.name = 'SignatureVerificationError';\n    }\n}\nexport class FailedDecryptionError extends BlockstackError {\n    constructor(message = 'Unable to decrypt cipher object.') {\n        super({ code: ERROR_CODES.FAILED_DECRYPTION_ERROR, message });\n        this.message = message;\n        this.name = 'FailedDecryptionError';\n    }\n}\nexport class InvalidStateError extends BlockstackError {\n    constructor(message) {\n        super({ code: ERROR_CODES.INVALID_STATE, message });\n        this.message = message;\n        this.name = 'InvalidStateError';\n    }\n}\nexport class NoSessionDataError extends BlockstackError {\n    constructor(message) {\n        super({ code: ERROR_CODES.INVALID_STATE, message });\n        this.message = message;\n        this.name = 'NoSessionDataError';\n    }\n}\nexport class GaiaHubError extends BlockstackError {\n    constructor(error, response) {\n        super(error);\n        if (response) {\n            this.hubError = {\n                statusCode: response.status,\n                statusText: response.statusText,\n            };\n            if (typeof response.body === 'string') {\n                this.hubError.message = response.body;\n            }\n            else if (typeof response.body === 'object') {\n                Object.assign(this.hubError, response.body);\n            }\n        }\n    }\n}\nexport class DoesNotExist extends GaiaHubError {\n    constructor(message, response) {\n        super({ message, code: ERROR_CODES.DOES_NOT_EXIST }, response);\n        this.name = 'DoesNotExist';\n    }\n}\nexport class ConflictError extends GaiaHubError {\n    constructor(message, response) {\n        super({ message, code: ERROR_CODES.CONFLICT_ERROR }, response);\n        this.name = 'ConflictError';\n    }\n}\nexport class NotEnoughProofError extends GaiaHubError {\n    constructor(message, response) {\n        super({ message, code: ERROR_CODES.NOT_ENOUGH_PROOF_ERROR }, response);\n        this.name = 'NotEnoughProofError';\n    }\n}\nexport class BadPathError extends GaiaHubError {\n    constructor(message, response) {\n        super({ message, code: ERROR_CODES.BAD_PATH_ERROR }, response);\n        this.name = 'BadPathError';\n    }\n}\nexport class ValidationError extends GaiaHubError {\n    constructor(message, response) {\n        super({ message, code: ERROR_CODES.VALIDATION_ERROR }, response);\n        this.name = 'ValidationError';\n    }\n}\nexport class PayloadTooLargeError extends GaiaHubError {\n    constructor(message, response, maxUploadByteSize) {\n        super({ message, code: ERROR_CODES.PAYLOAD_TOO_LARGE_ERROR }, response);\n        this.name = 'PayloadTooLargeError';\n        this.maxUploadByteSize = maxUploadByteSize;\n    }\n}\nexport class PreconditionFailedError extends GaiaHubError {\n    constructor(message, response) {\n        super({ message, code: ERROR_CODES.PRECONDITION_FAILED_ERROR }, response);\n        this.name = 'PreconditionFailedError';\n    }\n}\n//# sourceMappingURL=errors.js.map","import { config } from './config';\nconst levels = ['debug', 'info', 'warn', 'error', 'none'];\nconst levelToInt = {};\nconst intToLevel = {};\nfor (let index = 0; index < levels.length; index++) {\n    const level = levels[index];\n    levelToInt[level] = index;\n    intToLevel[index] = level;\n}\nexport class Logger {\n    static error(message) {\n        if (!this.shouldLog('error'))\n            return;\n        console.error(this.logMessage('error', message));\n    }\n    static warn(message) {\n        if (!this.shouldLog('warn'))\n            return;\n        console.warn(this.logMessage('warn', message));\n    }\n    static info(message) {\n        if (!this.shouldLog('info'))\n            return;\n        console.log(this.logMessage('info', message));\n    }\n    static debug(message) {\n        if (!this.shouldLog('debug'))\n            return;\n        console.log(this.logMessage('debug', message));\n    }\n    static logMessage(level, message) {\n        return `[${level.toUpperCase()}] ${message}`;\n    }\n    static shouldLog(level) {\n        const currentLevel = levelToInt[config.logLevel];\n        return currentLevel <= levelToInt[level];\n    }\n}\n//# sourceMappingURL=logger.js.map","import { Logger } from './logger';\nexport const BLOCKSTACK_HANDLER = 'blockstack';\nexport function nextYear() {\n    return new Date(new Date().setFullYear(new Date().getFullYear() + 1));\n}\nexport function nextMonth() {\n    return new Date(new Date().setMonth(new Date().getMonth() + 1));\n}\nexport function nextHour() {\n    return new Date(new Date().setHours(new Date().getHours() + 1));\n}\nexport function megabytesToBytes(megabytes) {\n    if (!Number.isFinite(megabytes)) {\n        return 0;\n    }\n    return Math.floor(megabytes * 1024 * 1024);\n}\nexport function getAesCbcOutputLength(inputByteLength) {\n    const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\n    return cipherTextLength;\n}\nexport function getBase64OutputLength(inputByteLength) {\n    const encodedLength = Math.ceil(inputByteLength / 3) * 4;\n    return encodedLength;\n}\nexport function updateQueryStringParameter(uri, key, value) {\n    const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i');\n    const separator = uri.indexOf('?') !== -1 ? '&' : '?';\n    if (uri.match(re)) {\n        return uri.replace(re, `$1${key}=${value}$2`);\n    }\n    else {\n        return `${uri}${separator}${key}=${value}`;\n    }\n}\nexport function isLaterVersion(v1, v2) {\n    if (v1 === undefined || v1 === '') {\n        v1 = '0.0.0';\n    }\n    if (v2 === undefined || v1 === '') {\n        v2 = '0.0.0';\n    }\n    const v1tuple = v1.split('.').map(x => parseInt(x, 10));\n    const v2tuple = v2.split('.').map(x => parseInt(x, 10));\n    for (let index = 0; index < v2.length; index++) {\n        if (index >= v1.length) {\n            v2tuple.push(0);\n        }\n        if (v1tuple[index] < v2tuple[index]) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function makeUUID4() {\n    let d = new Date().getTime();\n    if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n        d += performance.now();\n    }\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n        const r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n    });\n}\nexport function isSameOriginAbsoluteUrl(uri1, uri2) {\n    try {\n        const parsedUri1 = new URL(uri1);\n        const parsedUri2 = new URL(uri2);\n        const port1 = parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80);\n        const port2 = parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80);\n        const match = {\n            scheme: parsedUri1.protocol === parsedUri2.protocol,\n            hostname: parsedUri1.hostname === parsedUri2.hostname,\n            port: port1 === port2,\n            absolute: (uri1.includes('http://') || uri1.includes('https://')) &&\n                (uri2.includes('http://') || uri2.includes('https://')),\n        };\n        return match.scheme && match.hostname && match.port && match.absolute;\n    }\n    catch (error) {\n        console.log(error);\n        console.log('Parsing error in same URL origin check');\n        return false;\n    }\n}\nexport function getGlobalScope() {\n    if (typeof self !== 'undefined') {\n        return self;\n    }\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    throw new Error('Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available');\n}\nfunction getAPIUsageErrorMessage(scopeObject, apiName, usageDesc) {\n    if (usageDesc) {\n        return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n    }\n    else {\n        return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n    }\n}\nexport function getGlobalObject(name, { throwIfUnavailable, usageDesc, returnEmptyObject } = {}) {\n    let globalScope = undefined;\n    try {\n        globalScope = getGlobalScope();\n        if (globalScope) {\n            const obj = globalScope[name];\n            if (obj) {\n                return obj;\n            }\n        }\n    }\n    catch (error) {\n        Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`);\n    }\n    if (throwIfUnavailable) {\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n        Logger.error(errMsg);\n        throw new Error(errMsg);\n    }\n    if (returnEmptyObject) {\n        return {};\n    }\n    return undefined;\n}\nexport function getGlobalObjects(names, { throwIfUnavailable, usageDesc, returnEmptyObject } = {}) {\n    let globalScope;\n    try {\n        globalScope = getGlobalScope();\n    }\n    catch (error) {\n        Logger.error(`Error getting global scope: ${error}`);\n        if (throwIfUnavailable) {\n            const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc);\n            Logger.error(errMsg);\n            throw errMsg;\n        }\n        else if (returnEmptyObject) {\n            globalScope = {};\n        }\n    }\n    const result = {};\n    for (let i = 0; i < names.length; i++) {\n        const name = names[i];\n        try {\n            if (globalScope) {\n                const obj = globalScope[name];\n                if (obj) {\n                    result[name] = obj;\n                }\n                else if (throwIfUnavailable) {\n                    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n                    Logger.error(errMsg);\n                    throw new Error(errMsg);\n                }\n                else if (returnEmptyObject) {\n                    result[name] = {};\n                }\n            }\n        }\n        catch (error) {\n            if (throwIfUnavailable) {\n                const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n                Logger.error(errMsg);\n                throw new Error(errMsg);\n            }\n        }\n    }\n    return result;\n}\nexport function intToBytes(value, byteLength) {\n    return bigIntToBytes(intToBigInt(value), byteLength);\n}\nexport function intToBigInt(value) {\n    if (typeof value === 'bigint')\n        return value;\n    if (typeof value === 'string')\n        return BigInt(value);\n    if (typeof value === 'number') {\n        if (!Number.isInteger(value)) {\n            throw new RangeError(`Invalid value. Values of type 'number' must be an integer.`);\n        }\n        if (value > Number.MAX_SAFE_INTEGER) {\n            throw new RangeError(`Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`);\n        }\n        return BigInt(value);\n    }\n    if (isInstance(value, Uint8Array))\n        return BigInt(`0x${bytesToHex(value)}`);\n    throw new TypeError(`intToBigInt: Invalid value type. Must be a number, bigint, BigInt-compatible string, or Uint8Array.`);\n}\nexport function with0x(value) {\n    return /^0x/i.test(value)\n        ? value\n        : `0x${value}`;\n}\nexport function without0x(value) {\n    return /^0x/i.test(value)\n        ? value.slice(2)\n        : value;\n}\nexport function hexToBigInt(hex) {\n    if (typeof hex !== 'string')\n        throw new TypeError(`hexToBigInt: expected string, got ${typeof hex}`);\n    return BigInt(`0x${hex}`);\n}\nexport function intToHex(integer, byteLength = 8) {\n    const value = typeof integer === 'bigint' ? integer : intToBigInt(integer);\n    return value.toString(16).padStart(byteLength * 2, '0');\n}\nexport function hexToInt(hex) {\n    return parseInt(hex, 16);\n}\nexport function bigIntToBytes(value, length = 16) {\n    const hex = intToHex(value, length);\n    return hexToBytes(hex);\n}\nexport function toTwos(value, width) {\n    if (value < -(BigInt(1) << (width - BigInt(1))) ||\n        (BigInt(1) << (width - BigInt(1))) - BigInt(1) < value) {\n        throw `Unable to represent integer in width: ${width}`;\n    }\n    if (value >= BigInt(0)) {\n        return BigInt(value);\n    }\n    return value + (BigInt(1) << width);\n}\nfunction nthBit(value, n) {\n    return value & (BigInt(1) << n);\n}\nexport function bytesToTwosBigInt(bytes) {\n    return fromTwos(BigInt(`0x${bytesToHex(bytes)}`), BigInt(bytes.byteLength * 8));\n}\nexport function fromTwos(value, width) {\n    if (nthBit(value, width - BigInt(1))) {\n        return value - (BigInt(1) << width);\n    }\n    return value;\n}\nconst hexes = Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\nexport function bytesToHex(uint8a) {\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n    let hex = '';\n    for (const u of uint8a) {\n        hex += hexes[u];\n    }\n    return hex;\n}\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError(`hexToBytes: expected string, got ${typeof hex}`);\n    }\n    hex = without0x(hex);\n    hex = hex.length % 2 ? `0${hex}` : hex;\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\nexport function utf8ToBytes(str) {\n    return new TextEncoder().encode(str);\n}\nexport function bytesToUtf8(arr) {\n    return new TextDecoder().decode(arr);\n}\nexport function asciiToBytes(str) {\n    const byteArray = [];\n    for (let i = 0; i < str.length; i++) {\n        byteArray.push(str.charCodeAt(i) & 0xff);\n    }\n    return new Uint8Array(byteArray);\n}\nexport function bytesToAscii(arr) {\n    return String.fromCharCode.apply(null, arr);\n}\nfunction isNotOctet(octet) {\n    return !Number.isInteger(octet) || octet < 0 || octet > 255;\n}\nexport function octetsToBytes(numbers) {\n    if (numbers.some(isNotOctet))\n        throw new Error('Some values are invalid bytes.');\n    return new Uint8Array(numbers);\n}\nexport function concatBytes(...arrays) {\n    if (!arrays.every(a => a instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\nexport function concatArray(elements) {\n    return concatBytes(...elements.map(e => {\n        if (typeof e === 'number')\n            return octetsToBytes([e]);\n        if (e instanceof Array)\n            return octetsToBytes(e);\n        return e;\n    }));\n}\nexport function isInstance(object, clazz) {\n    return object instanceof clazz || object?.constructor?.name?.toLowerCase() === clazz.name;\n}\nexport function validateHash256(hex) {\n    hex = without0x(hex);\n    if (hex.length !== 64)\n        return false;\n    return /^[0-9a-fA-F]+$/.test(hex);\n}\n//# sourceMappingURL=utils.js.map","export const HIRO_MAINNET_URL = 'https://api.mainnet.hiro.so';\nexport const HIRO_TESTNET_URL = 'https://api.testnet.hiro.so';\nexport const DEVNET_URL = 'http://localhost:3999';\nexport const GAIA_URL = 'https://hub.blockstack.org';\nexport const PRIVATE_KEY_BYTES_COMPRESSED = 33;\nexport const PRIVATE_KEY_BYTES_UNCOMPRESSED = 32;\n//# sourceMappingURL=constants.js.map","const defaultFetchOpts = {\n    referrerPolicy: 'origin',\n    headers: {\n        'x-hiro-product': 'stacksjs',\n    },\n};\nexport const getFetchOptions = () => {\n    return defaultFetchOpts;\n};\nexport const setFetchOptions = (ops) => {\n    return Object.assign(defaultFetchOpts, ops);\n};\nexport async function fetchWrapper(input, init) {\n    const fetchOpts = {};\n    Object.assign(fetchOpts, defaultFetchOpts, init);\n    const fetchResult = await fetch(input, fetchOpts);\n    return fetchResult;\n}\nexport function hostMatches(host, pattern) {\n    if (typeof pattern === 'string')\n        return pattern === host;\n    return pattern.exec(host);\n}\nexport function createApiKeyMiddleware({ apiKey, host = /(.*)api(.*)(\\.stacks\\.co|\\.hiro\\.so)$/i, httpHeader = 'x-api-key', }) {\n    return {\n        pre: context => {\n            const reqUrl = new URL(context.url);\n            if (!hostMatches(reqUrl.host, host))\n                return;\n            const headers = context.init.headers instanceof Headers\n                ? context.init.headers\n                : (context.init.headers = new Headers(context.init.headers));\n            headers.set(httpHeader, apiKey);\n        },\n    };\n}\nfunction argsForCreateFetchFn(args) {\n    let fetchLib = fetchWrapper;\n    let middlewares = [];\n    if (args.length > 0 && typeof args[0] === 'function') {\n        fetchLib = args.shift();\n    }\n    if (args.length > 0) {\n        middlewares = args;\n    }\n    return { fetchLib, middlewares };\n}\nexport function createFetchFn(...args) {\n    const { fetchLib, middlewares } = argsForCreateFetchFn(args);\n    const fetchFn = async (url, init) => {\n        let fetchParams = { url, init: init ?? {} };\n        for (const middleware of middlewares) {\n            if (typeof middleware.pre === 'function') {\n                const result = await Promise.resolve(middleware.pre({\n                    fetch: fetchLib,\n                    ...fetchParams,\n                }));\n                fetchParams = result ?? fetchParams;\n            }\n        }\n        let response = await fetchLib(fetchParams.url, fetchParams.init);\n        for (const middleware of middlewares) {\n            if (typeof middleware.post === 'function') {\n                const result = await Promise.resolve(middleware.post({\n                    fetch: fetchLib,\n                    url: fetchParams.url,\n                    init: fetchParams.init,\n                    response: response?.clone() ?? response,\n                }));\n                response = result ?? response;\n            }\n        }\n        return response;\n    };\n    return fetchFn;\n}\n//# sourceMappingURL=fetch.js.map","import { DEFAULT_SCOPE, DEFAULT_BLOCKSTACK_HOST } from './constants';\nimport { getGlobalObject } from '@stacks/common';\nexport class AppConfig {\n    constructor(scopes = DEFAULT_SCOPE.slice(), appDomain = getGlobalObject('location', { returnEmptyObject: true })\n        ?.origin, redirectPath = '', manifestPath = '/manifest.json', coreNode = undefined, authenticatorURL = DEFAULT_BLOCKSTACK_HOST) {\n        this.appDomain = appDomain;\n        this.scopes = scopes;\n        this.redirectPath = redirectPath;\n        this.manifestPath = manifestPath;\n        this.coreNode = coreNode;\n        this.authenticatorURL = authenticatorURL;\n    }\n    redirectURI() {\n        return `${this.appDomain}${this.redirectPath}`;\n    }\n    manifestURI() {\n        return `${this.appDomain}${this.manifestPath}`;\n    }\n}\n//# sourceMappingURL=appConfig.js.map","export function number(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`Wrong positive integer: ${n}`);\n}\nexport function bool(b) {\n    if (typeof b !== 'boolean')\n        throw new Error(`Expected boolean, not ${b}`);\n}\nexport function bytes(b, ...lengths) {\n    if (!(b instanceof Uint8Array))\n        throw new TypeError('Expected Uint8Array');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new TypeError(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`);\n}\nexport function hash(hash) {\n    if (typeof hash !== 'function' || typeof hash.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    number(hash.outputLen);\n    number(hash.blockLen);\n}\nexport function exists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\nexport function output(out, instance) {\n    bytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n    }\n}\nconst assert = {\n    number,\n    bool,\n    bytes,\n    hash,\n    exists,\n    output,\n};\nexport default assert;\n","export const crypto = {\n    node: undefined,\n    web: typeof self === 'object' && 'crypto' in self ? self.crypto : undefined,\n};\n","/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// The import here is via the package name. This is to ensure\n// that exports mapping/resolution does fall into place.\nimport { crypto } from '@noble/hashes/crypto';\n// Cast array to different type\nexport const u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexport const u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n// Cast array to view\nexport const createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n// The rotate right (circular right shift) operation for uint32\nexport const rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\nexport const isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\n// There is almost no big endian hardware, but js typed arrays uses platform specific endianness.\n// So, just to be sure not to corrupt anything.\nif (!isLE)\n    throw new Error('Non little-endian hardware is not supported');\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef]))\n */\nexport function bytesToHex(uint8a) {\n    // pre-caching improves the speed 6x\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n    let hex = '';\n    for (let i = 0; i < uint8a.length; i++) {\n        hex += hexes[uint8a[i]];\n    }\n    return hex;\n}\n/**\n * @example hexToBytes('deadbeef')\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n    }\n    if (hex.length % 2)\n        throw new Error('hexToBytes: received invalid unpadded hex');\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\n// There is no setImmediate in browser and setTimeout is slow. However, call to async function will return Promise\n// which will be fullfiled only on next scheduler queue processing step and this is exactly what we need.\nexport const nextTick = async () => { };\n// Returns control to thread each 'tick' ms to avoid blocking\nexport async function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await nextTick();\n        ts += diff;\n    }\n}\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string') {\n        throw new TypeError(`utf8ToBytes expected string, got ${typeof str}`);\n    }\n    return new TextEncoder().encode(str);\n}\nexport function toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    if (!(data instanceof Uint8Array))\n        throw new TypeError(`Expected input type is Uint8Array (got ${typeof data})`);\n    return data;\n}\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n */\nexport function concatBytes(...arrays) {\n    if (!arrays.every((a) => a instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\n// For runtime check if class implements interface\nexport class Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\n// Check if object doens't have custom constructor (like Uint8Array/Array)\nconst isPlainObject = (obj) => Object.prototype.toString.call(obj) === '[object Object]' && obj.constructor === Object;\nexport function checkOpts(defaults, opts) {\n    if (opts !== undefined && (typeof opts !== 'object' || !isPlainObject(opts)))\n        throw new TypeError('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexport function wrapConstructor(hashConstructor) {\n    const hashC = (message) => hashConstructor().update(toBytes(message)).digest();\n    const tmp = hashConstructor();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashConstructor();\n    return hashC;\n}\nexport function wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\n/**\n * Secure PRNG\n */\nexport function randomBytes(bytesLength = 32) {\n    if (crypto.web) {\n        return crypto.web.getRandomValues(new Uint8Array(bytesLength));\n    }\n    else if (crypto.node) {\n        return new Uint8Array(crypto.node.randomBytes(bytesLength).buffer);\n    }\n    else {\n        throw new Error(\"The environment doesn't have randomBytes function\");\n    }\n}\n","import assert from './_assert.js';\nimport { Hash, toBytes } from './utils.js';\n// HMAC (RFC 2104)\nclass HMAC extends Hash {\n    constructor(hash, _key) {\n        super();\n        this.finished = false;\n        this.destroyed = false;\n        assert.hash(hash);\n        const key = toBytes(_key);\n        this.iHash = hash.create();\n        if (typeof this.iHash.update !== 'function')\n            throw new TypeError('Expected instance of class which extends utils.Hash');\n        this.blockLen = this.iHash.blockLen;\n        this.outputLen = this.iHash.outputLen;\n        const blockLen = this.blockLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        pad.fill(0);\n    }\n    update(buf) {\n        assert.exists(this);\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        assert.exists(this);\n        assert.bytes(out, this.outputLen);\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to || (to = Object.create(Object.getPrototypeOf(this), {}));\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n}\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n */\nexport const hmac = (hash, key, message) => new HMAC(hash, key).update(message).digest();\nhmac.create = (hash, key) => new HMAC(hash, key);\n","import assert from './_assert.js';\nimport { Hash, createView, toBytes } from './utils.js';\n// Polyfill for Safari 14\nfunction setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n// Base SHA2 class (RFC 6234)\nexport class SHA2 extends Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = createView(this.buffer);\n    }\n    update(data) {\n        assert.exists(this);\n        const { view, buffer, blockLen } = this;\n        data = toBytes(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = createView(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        assert.exists(this);\n        assert.output(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        this.buffer.subarray(pos).fill(0);\n        // we have less than padOffset left in buffer, so we cannot put length in current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = createView(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.length = length;\n        to.pos = pos;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n}\n","import { SHA2 } from './_sha2.js';\nimport { rotr, wrapConstructor } from './utils.js';\n// Choice: a ? b : c\nconst Chi = (a, b, c) => (a & b) ^ (~a & c);\n// Majority function, true if any two inpust is true\nconst Maj = (a, b, c) => (a & b) ^ (a & c) ^ (b & c);\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = new Uint32Array([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n// Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n// prettier-ignore\nconst IV = new Uint32Array([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = new Uint32Array(64);\nclass SHA256 extends SHA2 {\n    constructor() {\n        super(64, 32, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = IV[0] | 0;\n        this.B = IV[1] | 0;\n        this.C = IV[2] | 0;\n        this.D = IV[3] | 0;\n        this.E = IV[4] | 0;\n        this.F = IV[5] | 0;\n        this.G = IV[6] | 0;\n        this.H = IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n            const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        SHA256_W.fill(0);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        this.buffer.fill(0);\n    }\n}\n// Constants from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\nclass SHA224 extends SHA256 {\n    constructor() {\n        super();\n        this.A = 0xc1059ed8 | 0;\n        this.B = 0x367cd507 | 0;\n        this.C = 0x3070dd17 | 0;\n        this.D = 0xf70e5939 | 0;\n        this.E = 0xffc00b31 | 0;\n        this.F = 0x68581511 | 0;\n        this.G = 0x64f98fa7 | 0;\n        this.H = 0xbefa4fa4 | 0;\n        this.outputLen = 28;\n    }\n}\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexport const sha256 = wrapConstructor(() => new SHA256());\nexport const sha224 = wrapConstructor(() => new SHA224());\n","export default {}","/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */\nimport * as nodeCrypto from 'crypto';\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst _3n = BigInt(3);\nconst _8n = BigInt(8);\nconst CURVE = Object.freeze({\n    a: _0n,\n    b: BigInt(7),\n    P: BigInt('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f'),\n    n: BigInt('0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141'),\n    h: _1n,\n    Gx: BigInt('55066263022277343669578718895168534326250603453777594175500187360389116729240'),\n    Gy: BigInt('32670510020758816978083085130507043184471273380659243275938904335757337482424'),\n    beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n});\nconst divNearest = (a, b) => (a + b / _2n) / b;\nconst endo = {\n    beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n    splitScalar(k) {\n        const { n } = CURVE;\n        const a1 = BigInt('0x3086d221a7d46bcde86c90e49284eb15');\n        const b1 = -_1n * BigInt('0xe4437ed6010e88286f547fa90abfe4c3');\n        const a2 = BigInt('0x114ca50f7a8e2f3f657c1108d9d44cfd8');\n        const b2 = a1;\n        const POW_2_128 = BigInt('0x100000000000000000000000000000000');\n        const c1 = divNearest(b2 * k, n);\n        const c2 = divNearest(-b1 * k, n);\n        let k1 = mod(k - c1 * a1 - c2 * a2, n);\n        let k2 = mod(-c1 * b1 - c2 * b2, n);\n        const k1neg = k1 > POW_2_128;\n        const k2neg = k2 > POW_2_128;\n        if (k1neg)\n            k1 = n - k1;\n        if (k2neg)\n            k2 = n - k2;\n        if (k1 > POW_2_128 || k2 > POW_2_128) {\n            throw new Error('splitScalarEndo: Endomorphism failed, k=' + k);\n        }\n        return { k1neg, k1, k2neg, k2 };\n    },\n};\nconst fieldLen = 32;\nconst groupLen = 32;\nconst hashLen = 32;\nconst compressedLen = fieldLen + 1;\nconst uncompressedLen = 2 * fieldLen + 1;\nexport { CURVE };\nfunction weierstrass(x) {\n    const { a, b } = CURVE;\n    const x2 = mod(x * x);\n    const x3 = mod(x2 * x);\n    return mod(x3 + a * x + b);\n}\nconst USE_ENDOMORPHISM = CURVE.a === _0n;\nclass ShaError extends Error {\n    constructor(message) {\n        super(message);\n    }\n}\nfunction assertJacPoint(other) {\n    if (!(other instanceof JacobianPoint))\n        throw new TypeError('JacobianPoint expected');\n}\nclass JacobianPoint {\n    constructor(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n    static fromAffine(p) {\n        if (!(p instanceof Point)) {\n            throw new TypeError('JacobianPoint#fromAffine: expected Point');\n        }\n        if (p.equals(Point.ZERO))\n            return JacobianPoint.ZERO;\n        return new JacobianPoint(p.x, p.y, _1n);\n    }\n    static toAffineBatch(points) {\n        const toInv = invertBatch(points.map((p) => p.z));\n        return points.map((p, i) => p.toAffine(toInv[i]));\n    }\n    static normalizeZ(points) {\n        return JacobianPoint.toAffineBatch(points).map(JacobianPoint.fromAffine);\n    }\n    equals(other) {\n        assertJacPoint(other);\n        const { x: X1, y: Y1, z: Z1 } = this;\n        const { x: X2, y: Y2, z: Z2 } = other;\n        const Z1Z1 = mod(Z1 * Z1);\n        const Z2Z2 = mod(Z2 * Z2);\n        const U1 = mod(X1 * Z2Z2);\n        const U2 = mod(X2 * Z1Z1);\n        const S1 = mod(mod(Y1 * Z2) * Z2Z2);\n        const S2 = mod(mod(Y2 * Z1) * Z1Z1);\n        return U1 === U2 && S1 === S2;\n    }\n    negate() {\n        return new JacobianPoint(this.x, mod(-this.y), this.z);\n    }\n    double() {\n        const { x: X1, y: Y1, z: Z1 } = this;\n        const A = mod(X1 * X1);\n        const B = mod(Y1 * Y1);\n        const C = mod(B * B);\n        const x1b = X1 + B;\n        const D = mod(_2n * (mod(x1b * x1b) - A - C));\n        const E = mod(_3n * A);\n        const F = mod(E * E);\n        const X3 = mod(F - _2n * D);\n        const Y3 = mod(E * (D - X3) - _8n * C);\n        const Z3 = mod(_2n * Y1 * Z1);\n        return new JacobianPoint(X3, Y3, Z3);\n    }\n    add(other) {\n        assertJacPoint(other);\n        const { x: X1, y: Y1, z: Z1 } = this;\n        const { x: X2, y: Y2, z: Z2 } = other;\n        if (X2 === _0n || Y2 === _0n)\n            return this;\n        if (X1 === _0n || Y1 === _0n)\n            return other;\n        const Z1Z1 = mod(Z1 * Z1);\n        const Z2Z2 = mod(Z2 * Z2);\n        const U1 = mod(X1 * Z2Z2);\n        const U2 = mod(X2 * Z1Z1);\n        const S1 = mod(mod(Y1 * Z2) * Z2Z2);\n        const S2 = mod(mod(Y2 * Z1) * Z1Z1);\n        const H = mod(U2 - U1);\n        const r = mod(S2 - S1);\n        if (H === _0n) {\n            if (r === _0n) {\n                return this.double();\n            }\n            else {\n                return JacobianPoint.ZERO;\n            }\n        }\n        const HH = mod(H * H);\n        const HHH = mod(H * HH);\n        const V = mod(U1 * HH);\n        const X3 = mod(r * r - HHH - _2n * V);\n        const Y3 = mod(r * (V - X3) - S1 * HHH);\n        const Z3 = mod(Z1 * Z2 * H);\n        return new JacobianPoint(X3, Y3, Z3);\n    }\n    subtract(other) {\n        return this.add(other.negate());\n    }\n    multiplyUnsafe(scalar) {\n        const P0 = JacobianPoint.ZERO;\n        if (typeof scalar === 'bigint' && scalar === _0n)\n            return P0;\n        let n = normalizeScalar(scalar);\n        if (n === _1n)\n            return this;\n        if (!USE_ENDOMORPHISM) {\n            let p = P0;\n            let d = this;\n            while (n > _0n) {\n                if (n & _1n)\n                    p = p.add(d);\n                d = d.double();\n                n >>= _1n;\n            }\n            return p;\n        }\n        let { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n        let k1p = P0;\n        let k2p = P0;\n        let d = this;\n        while (k1 > _0n || k2 > _0n) {\n            if (k1 & _1n)\n                k1p = k1p.add(d);\n            if (k2 & _1n)\n                k2p = k2p.add(d);\n            d = d.double();\n            k1 >>= _1n;\n            k2 >>= _1n;\n        }\n        if (k1neg)\n            k1p = k1p.negate();\n        if (k2neg)\n            k2p = k2p.negate();\n        k2p = new JacobianPoint(mod(k2p.x * endo.beta), k2p.y, k2p.z);\n        return k1p.add(k2p);\n    }\n    precomputeWindow(W) {\n        const windows = USE_ENDOMORPHISM ? 128 / W + 1 : 256 / W + 1;\n        const points = [];\n        let p = this;\n        let base = p;\n        for (let window = 0; window < windows; window++) {\n            base = p;\n            points.push(base);\n            for (let i = 1; i < 2 ** (W - 1); i++) {\n                base = base.add(p);\n                points.push(base);\n            }\n            p = base.double();\n        }\n        return points;\n    }\n    wNAF(n, affinePoint) {\n        if (!affinePoint && this.equals(JacobianPoint.BASE))\n            affinePoint = Point.BASE;\n        const W = (affinePoint && affinePoint._WINDOW_SIZE) || 1;\n        if (256 % W) {\n            throw new Error('Point#wNAF: Invalid precomputation window, must be power of 2');\n        }\n        let precomputes = affinePoint && pointPrecomputes.get(affinePoint);\n        if (!precomputes) {\n            precomputes = this.precomputeWindow(W);\n            if (affinePoint && W !== 1) {\n                precomputes = JacobianPoint.normalizeZ(precomputes);\n                pointPrecomputes.set(affinePoint, precomputes);\n            }\n        }\n        let p = JacobianPoint.ZERO;\n        let f = JacobianPoint.BASE;\n        const windows = 1 + (USE_ENDOMORPHISM ? 128 / W : 256 / W);\n        const windowSize = 2 ** (W - 1);\n        const mask = BigInt(2 ** W - 1);\n        const maxNumber = 2 ** W;\n        const shiftBy = BigInt(W);\n        for (let window = 0; window < windows; window++) {\n            const offset = window * windowSize;\n            let wbits = Number(n & mask);\n            n >>= shiftBy;\n            if (wbits > windowSize) {\n                wbits -= maxNumber;\n                n += _1n;\n            }\n            const offset1 = offset;\n            const offset2 = offset + Math.abs(wbits) - 1;\n            const cond1 = window % 2 !== 0;\n            const cond2 = wbits < 0;\n            if (wbits === 0) {\n                f = f.add(constTimeNegate(cond1, precomputes[offset1]));\n            }\n            else {\n                p = p.add(constTimeNegate(cond2, precomputes[offset2]));\n            }\n        }\n        return { p, f };\n    }\n    multiply(scalar, affinePoint) {\n        let n = normalizeScalar(scalar);\n        let point;\n        let fake;\n        if (USE_ENDOMORPHISM) {\n            const { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n            let { p: k1p, f: f1p } = this.wNAF(k1, affinePoint);\n            let { p: k2p, f: f2p } = this.wNAF(k2, affinePoint);\n            k1p = constTimeNegate(k1neg, k1p);\n            k2p = constTimeNegate(k2neg, k2p);\n            k2p = new JacobianPoint(mod(k2p.x * endo.beta), k2p.y, k2p.z);\n            point = k1p.add(k2p);\n            fake = f1p.add(f2p);\n        }\n        else {\n            const { p, f } = this.wNAF(n, affinePoint);\n            point = p;\n            fake = f;\n        }\n        return JacobianPoint.normalizeZ([point, fake])[0];\n    }\n    toAffine(invZ) {\n        const { x, y, z } = this;\n        const is0 = this.equals(JacobianPoint.ZERO);\n        if (invZ == null)\n            invZ = is0 ? _8n : invert(z);\n        const iz1 = invZ;\n        const iz2 = mod(iz1 * iz1);\n        const iz3 = mod(iz2 * iz1);\n        const ax = mod(x * iz2);\n        const ay = mod(y * iz3);\n        const zz = mod(z * iz1);\n        if (is0)\n            return Point.ZERO;\n        if (zz !== _1n)\n            throw new Error('invZ was invalid');\n        return new Point(ax, ay);\n    }\n}\nJacobianPoint.BASE = new JacobianPoint(CURVE.Gx, CURVE.Gy, _1n);\nJacobianPoint.ZERO = new JacobianPoint(_0n, _1n, _0n);\nfunction constTimeNegate(condition, item) {\n    const neg = item.negate();\n    return condition ? neg : item;\n}\nconst pointPrecomputes = new WeakMap();\nexport class Point {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    _setWindowSize(windowSize) {\n        this._WINDOW_SIZE = windowSize;\n        pointPrecomputes.delete(this);\n    }\n    hasEvenY() {\n        return this.y % _2n === _0n;\n    }\n    static fromCompressedHex(bytes) {\n        const isShort = bytes.length === 32;\n        const x = bytesToNumber(isShort ? bytes : bytes.subarray(1));\n        if (!isValidFieldElement(x))\n            throw new Error('Point is not on curve');\n        const y2 = weierstrass(x);\n        let y = sqrtMod(y2);\n        const isYOdd = (y & _1n) === _1n;\n        if (isShort) {\n            if (isYOdd)\n                y = mod(-y);\n        }\n        else {\n            const isFirstByteOdd = (bytes[0] & 1) === 1;\n            if (isFirstByteOdd !== isYOdd)\n                y = mod(-y);\n        }\n        const point = new Point(x, y);\n        point.assertValidity();\n        return point;\n    }\n    static fromUncompressedHex(bytes) {\n        const x = bytesToNumber(bytes.subarray(1, fieldLen + 1));\n        const y = bytesToNumber(bytes.subarray(fieldLen + 1, fieldLen * 2 + 1));\n        const point = new Point(x, y);\n        point.assertValidity();\n        return point;\n    }\n    static fromHex(hex) {\n        const bytes = ensureBytes(hex);\n        const len = bytes.length;\n        const header = bytes[0];\n        if (len === fieldLen)\n            return this.fromCompressedHex(bytes);\n        if (len === compressedLen && (header === 0x02 || header === 0x03)) {\n            return this.fromCompressedHex(bytes);\n        }\n        if (len === uncompressedLen && header === 0x04)\n            return this.fromUncompressedHex(bytes);\n        throw new Error(`Point.fromHex: received invalid point. Expected 32-${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes, not ${len}`);\n    }\n    static fromPrivateKey(privateKey) {\n        return Point.BASE.multiply(normalizePrivateKey(privateKey));\n    }\n    static fromSignature(msgHash, signature, recovery) {\n        const { r, s } = normalizeSignature(signature);\n        if (![0, 1, 2, 3].includes(recovery))\n            throw new Error('Cannot recover: invalid recovery bit');\n        const h = truncateHash(ensureBytes(msgHash));\n        const { n } = CURVE;\n        const radj = recovery === 2 || recovery === 3 ? r + n : r;\n        const rinv = invert(radj, n);\n        const u1 = mod(-h * rinv, n);\n        const u2 = mod(s * rinv, n);\n        const prefix = recovery & 1 ? '03' : '02';\n        const R = Point.fromHex(prefix + numTo32bStr(radj));\n        const Q = Point.BASE.multiplyAndAddUnsafe(R, u1, u2);\n        if (!Q)\n            throw new Error('Cannot recover signature: point at infinify');\n        Q.assertValidity();\n        return Q;\n    }\n    toRawBytes(isCompressed = false) {\n        return hexToBytes(this.toHex(isCompressed));\n    }\n    toHex(isCompressed = false) {\n        const x = numTo32bStr(this.x);\n        if (isCompressed) {\n            const prefix = this.hasEvenY() ? '02' : '03';\n            return `${prefix}${x}`;\n        }\n        else {\n            return `04${x}${numTo32bStr(this.y)}`;\n        }\n    }\n    toHexX() {\n        return this.toHex(true).slice(2);\n    }\n    toRawX() {\n        return this.toRawBytes(true).slice(1);\n    }\n    assertValidity() {\n        const msg = 'Point is not on elliptic curve';\n        const { x, y } = this;\n        if (!isValidFieldElement(x) || !isValidFieldElement(y))\n            throw new Error(msg);\n        const left = mod(y * y);\n        const right = weierstrass(x);\n        if (mod(left - right) !== _0n)\n            throw new Error(msg);\n    }\n    equals(other) {\n        return this.x === other.x && this.y === other.y;\n    }\n    negate() {\n        return new Point(this.x, mod(-this.y));\n    }\n    double() {\n        return JacobianPoint.fromAffine(this).double().toAffine();\n    }\n    add(other) {\n        return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(other)).toAffine();\n    }\n    subtract(other) {\n        return this.add(other.negate());\n    }\n    multiply(scalar) {\n        return JacobianPoint.fromAffine(this).multiply(scalar, this).toAffine();\n    }\n    multiplyAndAddUnsafe(Q, a, b) {\n        const P = JacobianPoint.fromAffine(this);\n        const aP = a === _0n || a === _1n || this !== Point.BASE ? P.multiplyUnsafe(a) : P.multiply(a);\n        const bQ = JacobianPoint.fromAffine(Q).multiplyUnsafe(b);\n        const sum = aP.add(bQ);\n        return sum.equals(JacobianPoint.ZERO) ? undefined : sum.toAffine();\n    }\n}\nPoint.BASE = new Point(CURVE.Gx, CURVE.Gy);\nPoint.ZERO = new Point(_0n, _0n);\nfunction sliceDER(s) {\n    return Number.parseInt(s[0], 16) >= 8 ? '00' + s : s;\n}\nfunction parseDERInt(data) {\n    if (data.length < 2 || data[0] !== 0x02) {\n        throw new Error(`Invalid signature integer tag: ${bytesToHex(data)}`);\n    }\n    const len = data[1];\n    const res = data.subarray(2, len + 2);\n    if (!len || res.length !== len) {\n        throw new Error(`Invalid signature integer: wrong length`);\n    }\n    if (res[0] === 0x00 && res[1] <= 0x7f) {\n        throw new Error('Invalid signature integer: trailing length');\n    }\n    return { data: bytesToNumber(res), left: data.subarray(len + 2) };\n}\nfunction parseDERSignature(data) {\n    if (data.length < 2 || data[0] != 0x30) {\n        throw new Error(`Invalid signature tag: ${bytesToHex(data)}`);\n    }\n    if (data[1] !== data.length - 2) {\n        throw new Error('Invalid signature: incorrect length');\n    }\n    const { data: r, left: sBytes } = parseDERInt(data.subarray(2));\n    const { data: s, left: rBytesLeft } = parseDERInt(sBytes);\n    if (rBytesLeft.length) {\n        throw new Error(`Invalid signature: left bytes after parsing: ${bytesToHex(rBytesLeft)}`);\n    }\n    return { r, s };\n}\nexport class Signature {\n    constructor(r, s) {\n        this.r = r;\n        this.s = s;\n        this.assertValidity();\n    }\n    static fromCompact(hex) {\n        const arr = hex instanceof Uint8Array;\n        const name = 'Signature.fromCompact';\n        if (typeof hex !== 'string' && !arr)\n            throw new TypeError(`${name}: Expected string or Uint8Array`);\n        const str = arr ? bytesToHex(hex) : hex;\n        if (str.length !== 128)\n            throw new Error(`${name}: Expected 64-byte hex`);\n        return new Signature(hexToNumber(str.slice(0, 64)), hexToNumber(str.slice(64, 128)));\n    }\n    static fromDER(hex) {\n        const arr = hex instanceof Uint8Array;\n        if (typeof hex !== 'string' && !arr)\n            throw new TypeError(`Signature.fromDER: Expected string or Uint8Array`);\n        const { r, s } = parseDERSignature(arr ? hex : hexToBytes(hex));\n        return new Signature(r, s);\n    }\n    static fromHex(hex) {\n        return this.fromDER(hex);\n    }\n    assertValidity() {\n        const { r, s } = this;\n        if (!isWithinCurveOrder(r))\n            throw new Error('Invalid Signature: r must be 0 < r < n');\n        if (!isWithinCurveOrder(s))\n            throw new Error('Invalid Signature: s must be 0 < s < n');\n    }\n    hasHighS() {\n        const HALF = CURVE.n >> _1n;\n        return this.s > HALF;\n    }\n    normalizeS() {\n        return this.hasHighS() ? new Signature(this.r, mod(-this.s, CURVE.n)) : this;\n    }\n    toDERRawBytes() {\n        return hexToBytes(this.toDERHex());\n    }\n    toDERHex() {\n        const sHex = sliceDER(numberToHexUnpadded(this.s));\n        const rHex = sliceDER(numberToHexUnpadded(this.r));\n        const sHexL = sHex.length / 2;\n        const rHexL = rHex.length / 2;\n        const sLen = numberToHexUnpadded(sHexL);\n        const rLen = numberToHexUnpadded(rHexL);\n        const length = numberToHexUnpadded(rHexL + sHexL + 4);\n        return `30${length}02${rLen}${rHex}02${sLen}${sHex}`;\n    }\n    toRawBytes() {\n        return this.toDERRawBytes();\n    }\n    toHex() {\n        return this.toDERHex();\n    }\n    toCompactRawBytes() {\n        return hexToBytes(this.toCompactHex());\n    }\n    toCompactHex() {\n        return numTo32bStr(this.r) + numTo32bStr(this.s);\n    }\n}\nfunction concatBytes(...arrays) {\n    if (!arrays.every((b) => b instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\nfunction bytesToHex(uint8a) {\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Expected Uint8Array');\n    let hex = '';\n    for (let i = 0; i < uint8a.length; i++) {\n        hex += hexes[uint8a[i]];\n    }\n    return hex;\n}\nconst POW_2_256 = BigInt('0x10000000000000000000000000000000000000000000000000000000000000000');\nfunction numTo32bStr(num) {\n    if (typeof num !== 'bigint')\n        throw new Error('Expected bigint');\n    if (!(_0n <= num && num < POW_2_256))\n        throw new Error('Expected number 0 <= n < 2^256');\n    return num.toString(16).padStart(64, '0');\n}\nfunction numTo32b(num) {\n    const b = hexToBytes(numTo32bStr(num));\n    if (b.length !== 32)\n        throw new Error('Error: expected 32 bytes');\n    return b;\n}\nfunction numberToHexUnpadded(num) {\n    const hex = num.toString(16);\n    return hex.length & 1 ? `0${hex}` : hex;\n}\nfunction hexToNumber(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToNumber: expected string, got ' + typeof hex);\n    }\n    return BigInt(`0x${hex}`);\n}\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n    }\n    if (hex.length % 2)\n        throw new Error('hexToBytes: received invalid unpadded hex' + hex.length);\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\nfunction bytesToNumber(bytes) {\n    return hexToNumber(bytesToHex(bytes));\n}\nfunction ensureBytes(hex) {\n    return hex instanceof Uint8Array ? Uint8Array.from(hex) : hexToBytes(hex);\n}\nfunction normalizeScalar(num) {\n    if (typeof num === 'number' && Number.isSafeInteger(num) && num > 0)\n        return BigInt(num);\n    if (typeof num === 'bigint' && isWithinCurveOrder(num))\n        return num;\n    throw new TypeError('Expected valid private scalar: 0 < scalar < curve.n');\n}\nfunction mod(a, b = CURVE.P) {\n    const result = a % b;\n    return result >= _0n ? result : b + result;\n}\nfunction pow2(x, power) {\n    const { P } = CURVE;\n    let res = x;\n    while (power-- > _0n) {\n        res *= res;\n        res %= P;\n    }\n    return res;\n}\nfunction sqrtMod(x) {\n    const { P } = CURVE;\n    const _6n = BigInt(6);\n    const _11n = BigInt(11);\n    const _22n = BigInt(22);\n    const _23n = BigInt(23);\n    const _44n = BigInt(44);\n    const _88n = BigInt(88);\n    const b2 = (x * x * x) % P;\n    const b3 = (b2 * b2 * x) % P;\n    const b6 = (pow2(b3, _3n) * b3) % P;\n    const b9 = (pow2(b6, _3n) * b3) % P;\n    const b11 = (pow2(b9, _2n) * b2) % P;\n    const b22 = (pow2(b11, _11n) * b11) % P;\n    const b44 = (pow2(b22, _22n) * b22) % P;\n    const b88 = (pow2(b44, _44n) * b44) % P;\n    const b176 = (pow2(b88, _88n) * b88) % P;\n    const b220 = (pow2(b176, _44n) * b44) % P;\n    const b223 = (pow2(b220, _3n) * b3) % P;\n    const t1 = (pow2(b223, _23n) * b22) % P;\n    const t2 = (pow2(t1, _6n) * b2) % P;\n    const rt = pow2(t2, _2n);\n    const xc = (rt * rt) % P;\n    if (xc !== x)\n        throw new Error('Cannot find square root');\n    return rt;\n}\nfunction invert(number, modulo = CURVE.P) {\n    if (number === _0n || modulo <= _0n) {\n        throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`);\n    }\n    let a = mod(number, modulo);\n    let b = modulo;\n    let x = _0n, y = _1n, u = _1n, v = _0n;\n    while (a !== _0n) {\n        const q = b / a;\n        const r = b % a;\n        const m = x - u * q;\n        const n = y - v * q;\n        b = a, a = r, x = u, y = v, u = m, v = n;\n    }\n    const gcd = b;\n    if (gcd !== _1n)\n        throw new Error('invert: does not exist');\n    return mod(x, modulo);\n}\nfunction invertBatch(nums, p = CURVE.P) {\n    const scratch = new Array(nums.length);\n    const lastMultiplied = nums.reduce((acc, num, i) => {\n        if (num === _0n)\n            return acc;\n        scratch[i] = acc;\n        return mod(acc * num, p);\n    }, _1n);\n    const inverted = invert(lastMultiplied, p);\n    nums.reduceRight((acc, num, i) => {\n        if (num === _0n)\n            return acc;\n        scratch[i] = mod(acc * scratch[i], p);\n        return mod(acc * num, p);\n    }, inverted);\n    return scratch;\n}\nfunction bits2int_2(bytes) {\n    const delta = bytes.length * 8 - groupLen * 8;\n    const num = bytesToNumber(bytes);\n    return delta > 0 ? num >> BigInt(delta) : num;\n}\nfunction truncateHash(hash, truncateOnly = false) {\n    const h = bits2int_2(hash);\n    if (truncateOnly)\n        return h;\n    const { n } = CURVE;\n    return h >= n ? h - n : h;\n}\nlet _sha256Sync;\nlet _hmacSha256Sync;\nclass HmacDrbg {\n    constructor(hashLen, qByteLen) {\n        this.hashLen = hashLen;\n        this.qByteLen = qByteLen;\n        if (typeof hashLen !== 'number' || hashLen < 2)\n            throw new Error('hashLen must be a number');\n        if (typeof qByteLen !== 'number' || qByteLen < 2)\n            throw new Error('qByteLen must be a number');\n        this.v = new Uint8Array(hashLen).fill(1);\n        this.k = new Uint8Array(hashLen).fill(0);\n        this.counter = 0;\n    }\n    hmac(...values) {\n        return utils.hmacSha256(this.k, ...values);\n    }\n    hmacSync(...values) {\n        return _hmacSha256Sync(this.k, ...values);\n    }\n    checkSync() {\n        if (typeof _hmacSha256Sync !== 'function')\n            throw new ShaError('hmacSha256Sync needs to be set');\n    }\n    incr() {\n        if (this.counter >= 1000)\n            throw new Error('Tried 1,000 k values for sign(), all were invalid');\n        this.counter += 1;\n    }\n    async reseed(seed = new Uint8Array()) {\n        this.k = await this.hmac(this.v, Uint8Array.from([0x00]), seed);\n        this.v = await this.hmac(this.v);\n        if (seed.length === 0)\n            return;\n        this.k = await this.hmac(this.v, Uint8Array.from([0x01]), seed);\n        this.v = await this.hmac(this.v);\n    }\n    reseedSync(seed = new Uint8Array()) {\n        this.checkSync();\n        this.k = this.hmacSync(this.v, Uint8Array.from([0x00]), seed);\n        this.v = this.hmacSync(this.v);\n        if (seed.length === 0)\n            return;\n        this.k = this.hmacSync(this.v, Uint8Array.from([0x01]), seed);\n        this.v = this.hmacSync(this.v);\n    }\n    async generate() {\n        this.incr();\n        let len = 0;\n        const out = [];\n        while (len < this.qByteLen) {\n            this.v = await this.hmac(this.v);\n            const sl = this.v.slice();\n            out.push(sl);\n            len += this.v.length;\n        }\n        return concatBytes(...out);\n    }\n    generateSync() {\n        this.checkSync();\n        this.incr();\n        let len = 0;\n        const out = [];\n        while (len < this.qByteLen) {\n            this.v = this.hmacSync(this.v);\n            const sl = this.v.slice();\n            out.push(sl);\n            len += this.v.length;\n        }\n        return concatBytes(...out);\n    }\n}\nfunction isWithinCurveOrder(num) {\n    return _0n < num && num < CURVE.n;\n}\nfunction isValidFieldElement(num) {\n    return _0n < num && num < CURVE.P;\n}\nfunction kmdToSig(kBytes, m, d, lowS = true) {\n    const { n } = CURVE;\n    const k = truncateHash(kBytes, true);\n    if (!isWithinCurveOrder(k))\n        return;\n    const kinv = invert(k, n);\n    const q = Point.BASE.multiply(k);\n    const r = mod(q.x, n);\n    if (r === _0n)\n        return;\n    const s = mod(kinv * mod(m + d * r, n), n);\n    if (s === _0n)\n        return;\n    let sig = new Signature(r, s);\n    let recovery = (q.x === sig.r ? 0 : 2) | Number(q.y & _1n);\n    if (lowS && sig.hasHighS()) {\n        sig = sig.normalizeS();\n        recovery ^= 1;\n    }\n    return { sig, recovery };\n}\nfunction normalizePrivateKey(key) {\n    let num;\n    if (typeof key === 'bigint') {\n        num = key;\n    }\n    else if (typeof key === 'number' && Number.isSafeInteger(key) && key > 0) {\n        num = BigInt(key);\n    }\n    else if (typeof key === 'string') {\n        if (key.length !== 2 * groupLen)\n            throw new Error('Expected 32 bytes of private key');\n        num = hexToNumber(key);\n    }\n    else if (key instanceof Uint8Array) {\n        if (key.length !== groupLen)\n            throw new Error('Expected 32 bytes of private key');\n        num = bytesToNumber(key);\n    }\n    else {\n        throw new TypeError('Expected valid private key');\n    }\n    if (!isWithinCurveOrder(num))\n        throw new Error('Expected private key: 0 < key < n');\n    return num;\n}\nfunction normalizePublicKey(publicKey) {\n    if (publicKey instanceof Point) {\n        publicKey.assertValidity();\n        return publicKey;\n    }\n    else {\n        return Point.fromHex(publicKey);\n    }\n}\nfunction normalizeSignature(signature) {\n    if (signature instanceof Signature) {\n        signature.assertValidity();\n        return signature;\n    }\n    try {\n        return Signature.fromDER(signature);\n    }\n    catch (error) {\n        return Signature.fromCompact(signature);\n    }\n}\nexport function getPublicKey(privateKey, isCompressed = false) {\n    return Point.fromPrivateKey(privateKey).toRawBytes(isCompressed);\n}\nexport function recoverPublicKey(msgHash, signature, recovery, isCompressed = false) {\n    return Point.fromSignature(msgHash, signature, recovery).toRawBytes(isCompressed);\n}\nfunction isProbPub(item) {\n    const arr = item instanceof Uint8Array;\n    const str = typeof item === 'string';\n    const len = (arr || str) && item.length;\n    if (arr)\n        return len === compressedLen || len === uncompressedLen;\n    if (str)\n        return len === compressedLen * 2 || len === uncompressedLen * 2;\n    if (item instanceof Point)\n        return true;\n    return false;\n}\nexport function getSharedSecret(privateA, publicB, isCompressed = false) {\n    if (isProbPub(privateA))\n        throw new TypeError('getSharedSecret: first arg must be private key');\n    if (!isProbPub(publicB))\n        throw new TypeError('getSharedSecret: second arg must be public key');\n    const b = normalizePublicKey(publicB);\n    b.assertValidity();\n    return b.multiply(normalizePrivateKey(privateA)).toRawBytes(isCompressed);\n}\nfunction bits2int(bytes) {\n    const slice = bytes.length > fieldLen ? bytes.slice(0, fieldLen) : bytes;\n    return bytesToNumber(slice);\n}\nfunction bits2octets(bytes) {\n    const z1 = bits2int(bytes);\n    const z2 = mod(z1, CURVE.n);\n    return int2octets(z2 < _0n ? z1 : z2);\n}\nfunction int2octets(num) {\n    return numTo32b(num);\n}\nfunction initSigArgs(msgHash, privateKey, extraEntropy) {\n    if (msgHash == null)\n        throw new Error(`sign: expected valid message hash, not \"${msgHash}\"`);\n    const h1 = ensureBytes(msgHash);\n    const d = normalizePrivateKey(privateKey);\n    const seedArgs = [int2octets(d), bits2octets(h1)];\n    if (extraEntropy != null) {\n        if (extraEntropy === true)\n            extraEntropy = utils.randomBytes(fieldLen);\n        const e = ensureBytes(extraEntropy);\n        if (e.length !== fieldLen)\n            throw new Error(`sign: Expected ${fieldLen} bytes of extra data`);\n        seedArgs.push(e);\n    }\n    const seed = concatBytes(...seedArgs);\n    const m = bits2int(h1);\n    return { seed, m, d };\n}\nfunction finalizeSig(recSig, opts) {\n    const { sig, recovery } = recSig;\n    const { der, recovered } = Object.assign({ canonical: true, der: true }, opts);\n    const hashed = der ? sig.toDERRawBytes() : sig.toCompactRawBytes();\n    return recovered ? [hashed, recovery] : hashed;\n}\nasync function sign(msgHash, privKey, opts = {}) {\n    const { seed, m, d } = initSigArgs(msgHash, privKey, opts.extraEntropy);\n    const drbg = new HmacDrbg(hashLen, groupLen);\n    await drbg.reseed(seed);\n    let sig;\n    while (!(sig = kmdToSig(await drbg.generate(), m, d, opts.canonical)))\n        await drbg.reseed();\n    return finalizeSig(sig, opts);\n}\nfunction signSync(msgHash, privKey, opts = {}) {\n    const { seed, m, d } = initSigArgs(msgHash, privKey, opts.extraEntropy);\n    const drbg = new HmacDrbg(hashLen, groupLen);\n    drbg.reseedSync(seed);\n    let sig;\n    while (!(sig = kmdToSig(drbg.generateSync(), m, d, opts.canonical)))\n        drbg.reseedSync();\n    return finalizeSig(sig, opts);\n}\nexport { sign, signSync };\nconst vopts = { strict: true };\nexport function verify(signature, msgHash, publicKey, opts = vopts) {\n    let sig;\n    try {\n        sig = normalizeSignature(signature);\n        msgHash = ensureBytes(msgHash);\n    }\n    catch (error) {\n        return false;\n    }\n    const { r, s } = sig;\n    if (opts.strict && sig.hasHighS())\n        return false;\n    const h = truncateHash(msgHash);\n    let P;\n    try {\n        P = normalizePublicKey(publicKey);\n    }\n    catch (error) {\n        return false;\n    }\n    const { n } = CURVE;\n    const sinv = invert(s, n);\n    const u1 = mod(h * sinv, n);\n    const u2 = mod(r * sinv, n);\n    const R = Point.BASE.multiplyAndAddUnsafe(P, u1, u2);\n    if (!R)\n        return false;\n    const v = mod(R.x, n);\n    return v === r;\n}\nfunction schnorrChallengeFinalize(ch) {\n    return mod(bytesToNumber(ch), CURVE.n);\n}\nclass SchnorrSignature {\n    constructor(r, s) {\n        this.r = r;\n        this.s = s;\n        this.assertValidity();\n    }\n    static fromHex(hex) {\n        const bytes = ensureBytes(hex);\n        if (bytes.length !== 64)\n            throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${bytes.length}`);\n        const r = bytesToNumber(bytes.subarray(0, 32));\n        const s = bytesToNumber(bytes.subarray(32, 64));\n        return new SchnorrSignature(r, s);\n    }\n    assertValidity() {\n        const { r, s } = this;\n        if (!isValidFieldElement(r) || !isWithinCurveOrder(s))\n            throw new Error('Invalid signature');\n    }\n    toHex() {\n        return numTo32bStr(this.r) + numTo32bStr(this.s);\n    }\n    toRawBytes() {\n        return hexToBytes(this.toHex());\n    }\n}\nfunction schnorrGetPublicKey(privateKey) {\n    return Point.fromPrivateKey(privateKey).toRawX();\n}\nclass InternalSchnorrSignature {\n    constructor(message, privateKey, auxRand = utils.randomBytes()) {\n        if (message == null)\n            throw new TypeError(`sign: Expected valid message, not \"${message}\"`);\n        this.m = ensureBytes(message);\n        const { x, scalar } = this.getScalar(normalizePrivateKey(privateKey));\n        this.px = x;\n        this.d = scalar;\n        this.rand = ensureBytes(auxRand);\n        if (this.rand.length !== 32)\n            throw new TypeError('sign: Expected 32 bytes of aux randomness');\n    }\n    getScalar(priv) {\n        const point = Point.fromPrivateKey(priv);\n        const scalar = point.hasEvenY() ? priv : CURVE.n - priv;\n        return { point, scalar, x: point.toRawX() };\n    }\n    initNonce(d, t0h) {\n        return numTo32b(d ^ bytesToNumber(t0h));\n    }\n    finalizeNonce(k0h) {\n        const k0 = mod(bytesToNumber(k0h), CURVE.n);\n        if (k0 === _0n)\n            throw new Error('sign: Creation of signature failed. k is zero');\n        const { point: R, x: rx, scalar: k } = this.getScalar(k0);\n        return { R, rx, k };\n    }\n    finalizeSig(R, k, e, d) {\n        return new SchnorrSignature(R.x, mod(k + e * d, CURVE.n)).toRawBytes();\n    }\n    error() {\n        throw new Error('sign: Invalid signature produced');\n    }\n    async calc() {\n        const { m, d, px, rand } = this;\n        const tag = utils.taggedHash;\n        const t = this.initNonce(d, await tag(TAGS.aux, rand));\n        const { R, rx, k } = this.finalizeNonce(await tag(TAGS.nonce, t, px, m));\n        const e = schnorrChallengeFinalize(await tag(TAGS.challenge, rx, px, m));\n        const sig = this.finalizeSig(R, k, e, d);\n        if (!(await schnorrVerify(sig, m, px)))\n            this.error();\n        return sig;\n    }\n    calcSync() {\n        const { m, d, px, rand } = this;\n        const tag = utils.taggedHashSync;\n        const t = this.initNonce(d, tag(TAGS.aux, rand));\n        const { R, rx, k } = this.finalizeNonce(tag(TAGS.nonce, t, px, m));\n        const e = schnorrChallengeFinalize(tag(TAGS.challenge, rx, px, m));\n        const sig = this.finalizeSig(R, k, e, d);\n        if (!schnorrVerifySync(sig, m, px))\n            this.error();\n        return sig;\n    }\n}\nasync function schnorrSign(msg, privKey, auxRand) {\n    return new InternalSchnorrSignature(msg, privKey, auxRand).calc();\n}\nfunction schnorrSignSync(msg, privKey, auxRand) {\n    return new InternalSchnorrSignature(msg, privKey, auxRand).calcSync();\n}\nfunction initSchnorrVerify(signature, message, publicKey) {\n    const raw = signature instanceof SchnorrSignature;\n    const sig = raw ? signature : SchnorrSignature.fromHex(signature);\n    if (raw)\n        sig.assertValidity();\n    return {\n        ...sig,\n        m: ensureBytes(message),\n        P: normalizePublicKey(publicKey),\n    };\n}\nfunction finalizeSchnorrVerify(r, P, s, e) {\n    const R = Point.BASE.multiplyAndAddUnsafe(P, normalizePrivateKey(s), mod(-e, CURVE.n));\n    if (!R || !R.hasEvenY() || R.x !== r)\n        return false;\n    return true;\n}\nasync function schnorrVerify(signature, message, publicKey) {\n    try {\n        const { r, s, m, P } = initSchnorrVerify(signature, message, publicKey);\n        const e = schnorrChallengeFinalize(await utils.taggedHash(TAGS.challenge, numTo32b(r), P.toRawX(), m));\n        return finalizeSchnorrVerify(r, P, s, e);\n    }\n    catch (error) {\n        return false;\n    }\n}\nfunction schnorrVerifySync(signature, message, publicKey) {\n    try {\n        const { r, s, m, P } = initSchnorrVerify(signature, message, publicKey);\n        const e = schnorrChallengeFinalize(utils.taggedHashSync(TAGS.challenge, numTo32b(r), P.toRawX(), m));\n        return finalizeSchnorrVerify(r, P, s, e);\n    }\n    catch (error) {\n        if (error instanceof ShaError)\n            throw error;\n        return false;\n    }\n}\nexport const schnorr = {\n    Signature: SchnorrSignature,\n    getPublicKey: schnorrGetPublicKey,\n    sign: schnorrSign,\n    verify: schnorrVerify,\n    signSync: schnorrSignSync,\n    verifySync: schnorrVerifySync,\n};\nPoint.BASE._setWindowSize(8);\nconst crypto = {\n    node: nodeCrypto,\n    web: typeof self === 'object' && 'crypto' in self ? self.crypto : undefined,\n};\nconst TAGS = {\n    challenge: 'BIP0340/challenge',\n    aux: 'BIP0340/aux',\n    nonce: 'BIP0340/nonce',\n};\nconst TAGGED_HASH_PREFIXES = {};\nexport const utils = {\n    bytesToHex,\n    hexToBytes,\n    concatBytes,\n    mod,\n    invert,\n    isValidPrivateKey(privateKey) {\n        try {\n            normalizePrivateKey(privateKey);\n            return true;\n        }\n        catch (error) {\n            return false;\n        }\n    },\n    _bigintTo32Bytes: numTo32b,\n    _normalizePrivateKey: normalizePrivateKey,\n    hashToPrivateKey: (hash) => {\n        hash = ensureBytes(hash);\n        const minLen = groupLen + 8;\n        if (hash.length < minLen || hash.length > 1024) {\n            throw new Error(`Expected valid bytes of private key as per FIPS 186`);\n        }\n        const num = mod(bytesToNumber(hash), CURVE.n - _1n) + _1n;\n        return numTo32b(num);\n    },\n    randomBytes: (bytesLength = 32) => {\n        if (crypto.web) {\n            return crypto.web.getRandomValues(new Uint8Array(bytesLength));\n        }\n        else if (crypto.node) {\n            const { randomBytes } = crypto.node;\n            return Uint8Array.from(randomBytes(bytesLength));\n        }\n        else {\n            throw new Error(\"The environment doesn't have randomBytes function\");\n        }\n    },\n    randomPrivateKey: () => utils.hashToPrivateKey(utils.randomBytes(groupLen + 8)),\n    precompute(windowSize = 8, point = Point.BASE) {\n        const cached = point === Point.BASE ? point : new Point(point.x, point.y);\n        cached._setWindowSize(windowSize);\n        cached.multiply(_3n);\n        return cached;\n    },\n    sha256: async (...messages) => {\n        if (crypto.web) {\n            const buffer = await crypto.web.subtle.digest('SHA-256', concatBytes(...messages));\n            return new Uint8Array(buffer);\n        }\n        else if (crypto.node) {\n            const { createHash } = crypto.node;\n            const hash = createHash('sha256');\n            messages.forEach((m) => hash.update(m));\n            return Uint8Array.from(hash.digest());\n        }\n        else {\n            throw new Error(\"The environment doesn't have sha256 function\");\n        }\n    },\n    hmacSha256: async (key, ...messages) => {\n        if (crypto.web) {\n            const ckey = await crypto.web.subtle.importKey('raw', key, { name: 'HMAC', hash: { name: 'SHA-256' } }, false, ['sign']);\n            const message = concatBytes(...messages);\n            const buffer = await crypto.web.subtle.sign('HMAC', ckey, message);\n            return new Uint8Array(buffer);\n        }\n        else if (crypto.node) {\n            const { createHmac } = crypto.node;\n            const hash = createHmac('sha256', key);\n            messages.forEach((m) => hash.update(m));\n            return Uint8Array.from(hash.digest());\n        }\n        else {\n            throw new Error(\"The environment doesn't have hmac-sha256 function\");\n        }\n    },\n    sha256Sync: undefined,\n    hmacSha256Sync: undefined,\n    taggedHash: async (tag, ...messages) => {\n        let tagP = TAGGED_HASH_PREFIXES[tag];\n        if (tagP === undefined) {\n            const tagH = await utils.sha256(Uint8Array.from(tag, (c) => c.charCodeAt(0)));\n            tagP = concatBytes(tagH, tagH);\n            TAGGED_HASH_PREFIXES[tag] = tagP;\n        }\n        return utils.sha256(tagP, ...messages);\n    },\n    taggedHashSync: (tag, ...messages) => {\n        if (typeof _sha256Sync !== 'function')\n            throw new ShaError('sha256Sync is undefined, you need to set it');\n        let tagP = TAGGED_HASH_PREFIXES[tag];\n        if (tagP === undefined) {\n            const tagH = _sha256Sync(Uint8Array.from(tag, (c) => c.charCodeAt(0)));\n            tagP = concatBytes(tagH, tagH);\n            TAGGED_HASH_PREFIXES[tag] = tagP;\n        }\n        return _sha256Sync(tagP, ...messages);\n    },\n    _JacobianPoint: JacobianPoint,\n};\nObject.defineProperties(utils, {\n    sha256Sync: {\n        configurable: false,\n        get() {\n            return _sha256Sync;\n        },\n        set(val) {\n            if (!_sha256Sync)\n                _sha256Sync = val;\n        },\n    },\n    hmacSha256Sync: {\n        configurable: false,\n        get() {\n            return _hmacSha256Sync;\n        },\n        set(val) {\n            if (!_hmacSha256Sync)\n                _hmacSha256Sync = val;\n        },\n    },\n});\n","export const ERROR_CODES = {\n    MISSING_PARAMETER: 'missing_parameter',\n    REMOTE_SERVICE_ERROR: 'remote_service_error',\n    INVALID_STATE: 'invalid_state',\n    NO_SESSION_DATA: 'no_session_data',\n    DOES_NOT_EXIST: 'does_not_exist',\n    FAILED_DECRYPTION_ERROR: 'failed_decryption_error',\n    INVALID_DID_ERROR: 'invalid_did_error',\n    NOT_ENOUGH_FUNDS_ERROR: 'not_enough_error',\n    INVALID_AMOUNT_ERROR: 'invalid_amount_error',\n    LOGIN_FAILED_ERROR: 'login_failed',\n    SIGNATURE_VERIFICATION_ERROR: 'signature_verification_failure',\n    CONFLICT_ERROR: 'conflict_error',\n    NOT_ENOUGH_PROOF_ERROR: 'not_enough_proof_error',\n    BAD_PATH_ERROR: 'bad_path_error',\n    VALIDATION_ERROR: 'validation_error',\n    PAYLOAD_TOO_LARGE_ERROR: 'payload_too_large_error',\n    PRECONDITION_FAILED_ERROR: 'precondition_failed_error',\n    UNKNOWN: 'unknown',\n};\nObject.freeze(ERROR_CODES);\nexport class BlockstackError extends Error {\n    constructor(error) {\n        super();\n        let message = error.message;\n        let bugDetails = `Error Code: ${error.code}`;\n        let stack = this.stack;\n        if (!stack) {\n            try {\n                throw new Error();\n            }\n            catch (e) {\n                stack = e.stack;\n            }\n        }\n        else {\n            bugDetails += `Stack Trace:\\n${stack}`;\n        }\n        message += `\\nIf you believe this exception is caused by a bug in stacks.js,\n      please file a bug report: https://github.com/blockstack/stacks.js/issues\\n\\n${bugDetails}`;\n        this.message = message;\n        this.code = error.code;\n        this.parameter = error.parameter ? error.parameter : undefined;\n    }\n    toString() {\n        return `${super.toString()}\n    code: ${this.code} param: ${this.parameter ? this.parameter : 'n/a'}`;\n    }\n}\nexport class InvalidParameterError extends BlockstackError {\n    constructor(parameter, message = '') {\n        super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n        this.name = 'MissingParametersError';\n    }\n}\nexport class MissingParameterError extends BlockstackError {\n    constructor(parameter, message = '') {\n        super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n        this.name = 'MissingParametersError';\n    }\n}\nexport class RemoteServiceError extends BlockstackError {\n    constructor(response, message = '') {\n        super({ code: ERROR_CODES.REMOTE_SERVICE_ERROR, message });\n        this.response = response;\n    }\n}\nexport class InvalidDIDError extends BlockstackError {\n    constructor(message = '') {\n        super({ code: ERROR_CODES.INVALID_DID_ERROR, message });\n        this.name = 'InvalidDIDError';\n    }\n}\nexport class NotEnoughFundsError extends BlockstackError {\n    constructor(leftToFund) {\n        const message = `Not enough UTXOs to fund. Left to fund: ${leftToFund}`;\n        super({ code: ERROR_CODES.NOT_ENOUGH_FUNDS_ERROR, message });\n        this.leftToFund = leftToFund;\n        this.name = 'NotEnoughFundsError';\n        this.message = message;\n    }\n}\nexport class InvalidAmountError extends BlockstackError {\n    constructor(fees, specifiedAmount) {\n        const message = `Not enough coin to fund fees transaction fees. Fees would be ${fees},` +\n            ` specified spend is  ${specifiedAmount}`;\n        super({ code: ERROR_CODES.INVALID_AMOUNT_ERROR, message });\n        this.specifiedAmount = specifiedAmount;\n        this.fees = fees;\n        this.name = 'InvalidAmountError';\n        this.message = message;\n    }\n}\nexport class LoginFailedError extends BlockstackError {\n    constructor(reason) {\n        const message = `Failed to login: ${reason}`;\n        super({ code: ERROR_CODES.LOGIN_FAILED_ERROR, message });\n        this.message = message;\n        this.name = 'LoginFailedError';\n    }\n}\nexport class SignatureVerificationError extends BlockstackError {\n    constructor(reason) {\n        const message = `Failed to verify signature: ${reason}`;\n        super({ code: ERROR_CODES.SIGNATURE_VERIFICATION_ERROR, message });\n        this.message = message;\n        this.name = 'SignatureVerificationError';\n    }\n}\nexport class FailedDecryptionError extends BlockstackError {\n    constructor(message = 'Unable to decrypt cipher object.') {\n        super({ code: ERROR_CODES.FAILED_DECRYPTION_ERROR, message });\n        this.message = message;\n        this.name = 'FailedDecryptionError';\n    }\n}\nexport class InvalidStateError extends BlockstackError {\n    constructor(message) {\n        super({ code: ERROR_CODES.INVALID_STATE, message });\n        this.message = message;\n        this.name = 'InvalidStateError';\n    }\n}\nexport class NoSessionDataError extends BlockstackError {\n    constructor(message) {\n        super({ code: ERROR_CODES.INVALID_STATE, message });\n        this.message = message;\n        this.name = 'NoSessionDataError';\n    }\n}\nexport class GaiaHubError extends BlockstackError {\n    constructor(error, response) {\n        super(error);\n        if (response) {\n            this.hubError = {\n                statusCode: response.status,\n                statusText: response.statusText,\n            };\n            if (typeof response.body === 'string') {\n                this.hubError.message = response.body;\n            }\n            else if (typeof response.body === 'object') {\n                Object.assign(this.hubError, response.body);\n            }\n        }\n    }\n}\nexport class DoesNotExist extends GaiaHubError {\n    constructor(message, response) {\n        super({ message, code: ERROR_CODES.DOES_NOT_EXIST }, response);\n        this.name = 'DoesNotExist';\n    }\n}\nexport class ConflictError extends GaiaHubError {\n    constructor(message, response) {\n        super({ message, code: ERROR_CODES.CONFLICT_ERROR }, response);\n        this.name = 'ConflictError';\n    }\n}\nexport class NotEnoughProofError extends GaiaHubError {\n    constructor(message, response) {\n        super({ message, code: ERROR_CODES.NOT_ENOUGH_PROOF_ERROR }, response);\n        this.name = 'NotEnoughProofError';\n    }\n}\nexport class BadPathError extends GaiaHubError {\n    constructor(message, response) {\n        super({ message, code: ERROR_CODES.BAD_PATH_ERROR }, response);\n        this.name = 'BadPathError';\n    }\n}\nexport class ValidationError extends GaiaHubError {\n    constructor(message, response) {\n        super({ message, code: ERROR_CODES.VALIDATION_ERROR }, response);\n        this.name = 'ValidationError';\n    }\n}\nexport class PayloadTooLargeError extends GaiaHubError {\n    constructor(message, response, maxUploadByteSize) {\n        super({ message, code: ERROR_CODES.PAYLOAD_TOO_LARGE_ERROR }, response);\n        this.name = 'PayloadTooLargeError';\n        this.maxUploadByteSize = maxUploadByteSize;\n    }\n}\nexport class PreconditionFailedError extends GaiaHubError {\n    constructor(message, response) {\n        super({ message, code: ERROR_CODES.PRECONDITION_FAILED_ERROR }, response);\n        this.name = 'PreconditionFailedError';\n    }\n}\n//# sourceMappingURL=errors.js.map","import { Logger } from './logger';\nexport const BLOCKSTACK_HANDLER = 'blockstack';\nexport function nextYear() {\n    return new Date(new Date().setFullYear(new Date().getFullYear() + 1));\n}\nexport function nextMonth() {\n    return new Date(new Date().setMonth(new Date().getMonth() + 1));\n}\nexport function nextHour() {\n    return new Date(new Date().setHours(new Date().getHours() + 1));\n}\nexport function megabytesToBytes(megabytes) {\n    if (!Number.isFinite(megabytes)) {\n        return 0;\n    }\n    return Math.floor(megabytes * 1024 * 1024);\n}\nexport function getAesCbcOutputLength(inputByteLength) {\n    const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\n    return cipherTextLength;\n}\nexport function getBase64OutputLength(inputByteLength) {\n    const encodedLength = Math.ceil(inputByteLength / 3) * 4;\n    return encodedLength;\n}\nexport function updateQueryStringParameter(uri, key, value) {\n    const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i');\n    const separator = uri.indexOf('?') !== -1 ? '&' : '?';\n    if (uri.match(re)) {\n        return uri.replace(re, `$1${key}=${value}$2`);\n    }\n    else {\n        return `${uri}${separator}${key}=${value}`;\n    }\n}\nexport function isLaterVersion(v1, v2) {\n    if (v1 === undefined || v1 === '') {\n        v1 = '0.0.0';\n    }\n    if (v2 === undefined || v1 === '') {\n        v2 = '0.0.0';\n    }\n    const v1tuple = v1.split('.').map(x => parseInt(x, 10));\n    const v2tuple = v2.split('.').map(x => parseInt(x, 10));\n    for (let index = 0; index < v2.length; index++) {\n        if (index >= v1.length) {\n            v2tuple.push(0);\n        }\n        if (v1tuple[index] < v2tuple[index]) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function makeUUID4() {\n    let d = new Date().getTime();\n    if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n        d += performance.now();\n    }\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n        const r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n    });\n}\nexport function isSameOriginAbsoluteUrl(uri1, uri2) {\n    try {\n        const parsedUri1 = new URL(uri1);\n        const parsedUri2 = new URL(uri2);\n        const port1 = parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80);\n        const port2 = parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80);\n        const match = {\n            scheme: parsedUri1.protocol === parsedUri2.protocol,\n            hostname: parsedUri1.hostname === parsedUri2.hostname,\n            port: port1 === port2,\n            absolute: (uri1.includes('http://') || uri1.includes('https://')) &&\n                (uri2.includes('http://') || uri2.includes('https://')),\n        };\n        return match.scheme && match.hostname && match.port && match.absolute;\n    }\n    catch (error) {\n        console.log(error);\n        console.log('Parsing error in same URL origin check');\n        return false;\n    }\n}\nexport function getGlobalScope() {\n    if (typeof self !== 'undefined') {\n        return self;\n    }\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    throw new Error('Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available');\n}\nfunction getAPIUsageErrorMessage(scopeObject, apiName, usageDesc) {\n    if (usageDesc) {\n        return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n    }\n    else {\n        return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n    }\n}\nexport function getGlobalObject(name, { throwIfUnavailable, usageDesc, returnEmptyObject } = {}) {\n    let globalScope = undefined;\n    try {\n        globalScope = getGlobalScope();\n        if (globalScope) {\n            const obj = globalScope[name];\n            if (obj) {\n                return obj;\n            }\n        }\n    }\n    catch (error) {\n        Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`);\n    }\n    if (throwIfUnavailable) {\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n        Logger.error(errMsg);\n        throw new Error(errMsg);\n    }\n    if (returnEmptyObject) {\n        return {};\n    }\n    return undefined;\n}\nexport function getGlobalObjects(names, { throwIfUnavailable, usageDesc, returnEmptyObject } = {}) {\n    let globalScope;\n    try {\n        globalScope = getGlobalScope();\n    }\n    catch (error) {\n        Logger.error(`Error getting global scope: ${error}`);\n        if (throwIfUnavailable) {\n            const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc);\n            Logger.error(errMsg);\n            throw errMsg;\n        }\n        else if (returnEmptyObject) {\n            globalScope = {};\n        }\n    }\n    const result = {};\n    for (let i = 0; i < names.length; i++) {\n        const name = names[i];\n        try {\n            if (globalScope) {\n                const obj = globalScope[name];\n                if (obj) {\n                    result[name] = obj;\n                }\n                else if (throwIfUnavailable) {\n                    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n                    Logger.error(errMsg);\n                    throw new Error(errMsg);\n                }\n                else if (returnEmptyObject) {\n                    result[name] = {};\n                }\n            }\n        }\n        catch (error) {\n            if (throwIfUnavailable) {\n                const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n                Logger.error(errMsg);\n                throw new Error(errMsg);\n            }\n        }\n    }\n    return result;\n}\nexport function intToBytes(value, byteLength) {\n    return bigIntToBytes(intToBigInt(value), byteLength);\n}\nexport function intToBigInt(value) {\n    if (typeof value === 'bigint')\n        return value;\n    if (typeof value === 'string')\n        return BigInt(value);\n    if (typeof value === 'number') {\n        if (!Number.isInteger(value)) {\n            throw new RangeError(`Invalid value. Values of type 'number' must be an integer.`);\n        }\n        if (value > Number.MAX_SAFE_INTEGER) {\n            throw new RangeError(`Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`);\n        }\n        return BigInt(value);\n    }\n    if (isInstance(value, Uint8Array))\n        return BigInt(`0x${bytesToHex(value)}`);\n    throw new TypeError(`intToBigInt: Invalid value type. Must be a number, bigint, BigInt-compatible string, or Uint8Array.`);\n}\nexport function with0x(value) {\n    return /^0x/i.test(value)\n        ? value\n        : `0x${value}`;\n}\nexport function without0x(value) {\n    return /^0x/i.test(value)\n        ? value.slice(2)\n        : value;\n}\nexport function hexToBigInt(hex) {\n    if (typeof hex !== 'string')\n        throw new TypeError(`hexToBigInt: expected string, got ${typeof hex}`);\n    return BigInt(`0x${hex}`);\n}\nexport function intToHex(integer, byteLength = 8) {\n    const value = typeof integer === 'bigint' ? integer : intToBigInt(integer);\n    return value.toString(16).padStart(byteLength * 2, '0');\n}\nexport function hexToInt(hex) {\n    return parseInt(hex, 16);\n}\nexport function bigIntToBytes(value, length = 16) {\n    const hex = intToHex(value, length);\n    return hexToBytes(hex);\n}\nexport function toTwos(value, width) {\n    if (value < -(BigInt(1) << (width - BigInt(1))) ||\n        (BigInt(1) << (width - BigInt(1))) - BigInt(1) < value) {\n        throw `Unable to represent integer in width: ${width}`;\n    }\n    if (value >= BigInt(0)) {\n        return BigInt(value);\n    }\n    return value + (BigInt(1) << width);\n}\nfunction nthBit(value, n) {\n    return value & (BigInt(1) << n);\n}\nexport function bytesToTwosBigInt(bytes) {\n    return fromTwos(BigInt(`0x${bytesToHex(bytes)}`), BigInt(bytes.byteLength * 8));\n}\nexport function fromTwos(value, width) {\n    if (nthBit(value, width - BigInt(1))) {\n        return value - (BigInt(1) << width);\n    }\n    return value;\n}\nconst hexes = Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\nexport function bytesToHex(uint8a) {\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n    let hex = '';\n    for (const u of uint8a) {\n        hex += hexes[u];\n    }\n    return hex;\n}\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError(`hexToBytes: expected string, got ${typeof hex}`);\n    }\n    hex = without0x(hex);\n    hex = hex.length % 2 ? `0${hex}` : hex;\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\nexport function utf8ToBytes(str) {\n    return new TextEncoder().encode(str);\n}\nexport function bytesToUtf8(arr) {\n    return new TextDecoder().decode(arr);\n}\nexport function asciiToBytes(str) {\n    const byteArray = [];\n    for (let i = 0; i < str.length; i++) {\n        byteArray.push(str.charCodeAt(i) & 0xff);\n    }\n    return new Uint8Array(byteArray);\n}\nexport function bytesToAscii(arr) {\n    return String.fromCharCode.apply(null, arr);\n}\nfunction isNotOctet(octet) {\n    return !Number.isInteger(octet) || octet < 0 || octet > 255;\n}\nexport function octetsToBytes(numbers) {\n    if (numbers.some(isNotOctet))\n        throw new Error('Some values are invalid bytes.');\n    return new Uint8Array(numbers);\n}\nexport function concatBytes(...arrays) {\n    if (!arrays.every(a => a instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\nexport function concatArray(elements) {\n    return concatBytes(...elements.map(e => {\n        if (typeof e === 'number')\n            return octetsToBytes([e]);\n        if (e instanceof Array)\n            return octetsToBytes(e);\n        return e;\n    }));\n}\nexport function isInstance(object, clazz) {\n    return object instanceof clazz || object?.constructor?.name?.toLowerCase() === clazz.name;\n}\nexport function validateHash256(hex) {\n    hex = without0x(hex);\n    if (hex.length !== 64)\n        return false;\n    return /^[0-9a-fA-F]+$/.test(hex);\n}\n//# sourceMappingURL=utils.js.map","import { hexToBytes } from './utils';\nexport function privateKeyToBytes(privateKey) {\n    const privateKeyBuffer = typeof privateKey === 'string' ? hexToBytes(privateKey) : privateKey;\n    if (privateKeyBuffer.length != 32 && privateKeyBuffer.length != 33) {\n        throw new Error(`Improperly formatted private-key. Private-key byte length should be 32 or 33. Length provided: ${privateKeyBuffer.length}`);\n    }\n    if (privateKeyBuffer.length == 33 && privateKeyBuffer[32] !== 1) {\n        throw new Error('Improperly formatted private-key. 33 bytes indicate compressed key, but the last byte must be == 01');\n    }\n    return privateKeyBuffer;\n}\n//# sourceMappingURL=keys.js.map","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","export function isSubtleCryptoAvailable() {\n    return typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n}\nexport function isNodeCryptoAvailable(withFeature) {\n    try {\n        const resolvedResult = require.resolve('crypto');\n        if (!resolvedResult) {\n            return false;\n        }\n        const cryptoModule = require('crypto');\n        if (!cryptoModule) {\n            return false;\n        }\n        if (withFeature) {\n            const features = withFeature(cryptoModule);\n            return features;\n        }\n        return true;\n    }\n    catch (error) {\n        return false;\n    }\n}\nexport const NO_CRYPTO_LIB = 'Crypto lib not found. Either the WebCrypto \"crypto.subtle\" or Node.js \"crypto\" module must be available.';\nexport async function getCryptoLib() {\n    if (isSubtleCryptoAvailable()) {\n        return {\n            lib: crypto.subtle,\n            name: 'subtleCrypto',\n        };\n    }\n    else {\n        try {\n            const nodeCrypto = require('crypto');\n            return {\n                lib: nodeCrypto,\n                name: 'nodeCrypto',\n            };\n        }\n        catch (error) {\n            throw new Error(NO_CRYPTO_LIB);\n        }\n    }\n}\n//# sourceMappingURL=cryptoUtils.js.map","import { concatBytes } from '@stacks/common';\nimport { getCryptoLib } from './cryptoUtils';\nexport class NodeCryptoAesCipher {\n    constructor(createCipher, createDecipher) {\n        this.createCipher = createCipher;\n        this.createDecipher = createDecipher;\n    }\n    async encrypt(algorithm, key, iv, data) {\n        if (algorithm !== 'aes-128-cbc' && algorithm !== 'aes-256-cbc') {\n            throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n        }\n        const cipher = this.createCipher(algorithm, key, iv);\n        const result = new Uint8Array(concatBytes(cipher.update(data), cipher.final()));\n        return Promise.resolve(result);\n    }\n    async decrypt(algorithm, key, iv, data) {\n        if (algorithm !== 'aes-128-cbc' && algorithm !== 'aes-256-cbc') {\n            throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n        }\n        const cipher = this.createDecipher(algorithm, key, iv);\n        const result = new Uint8Array(concatBytes(cipher.update(data), cipher.final()));\n        return Promise.resolve(result);\n    }\n}\nexport class WebCryptoAesCipher {\n    constructor(subtleCrypto) {\n        this.subtleCrypto = subtleCrypto;\n    }\n    async encrypt(algorithm, key, iv, data) {\n        let algo;\n        let length;\n        if (algorithm === 'aes-128-cbc') {\n            algo = 'AES-CBC';\n            length = 128;\n        }\n        else if (algorithm === 'aes-256-cbc') {\n            algo = 'AES-CBC';\n            length = 256;\n        }\n        else {\n            throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n        }\n        const cryptoKey = await this.subtleCrypto.importKey('raw', key, { name: algo, length }, false, [\n            'encrypt',\n        ]);\n        const result = await this.subtleCrypto.encrypt({ name: algo, iv }, cryptoKey, data);\n        return new Uint8Array(result);\n    }\n    async decrypt(algorithm, key, iv, data) {\n        let algo;\n        let length;\n        if (algorithm === 'aes-128-cbc') {\n            algo = 'AES-CBC';\n            length = 128;\n        }\n        else if (algorithm === 'aes-256-cbc') {\n            algo = 'AES-CBC';\n            length = 256;\n        }\n        else {\n            throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n        }\n        const cryptoKey = await this.subtleCrypto.importKey('raw', key, { name: algo, length }, false, [\n            'decrypt',\n        ]);\n        const result = await this.subtleCrypto.decrypt({ name: algo, iv }, cryptoKey, data);\n        return new Uint8Array(result);\n    }\n}\nexport async function createCipher() {\n    const cryptoLib = await getCryptoLib();\n    if (cryptoLib.name === 'subtleCrypto') {\n        return new WebCryptoAesCipher(cryptoLib.lib);\n    }\n    return new NodeCryptoAesCipher(cryptoLib.lib.createCipheriv, cryptoLib.lib.createDecipheriv);\n}\n//# sourceMappingURL=aesCipher.js.map","'use strict'\n// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\nfunction base (ALPHABET) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  var BASE_MAP = new Uint8Array(256)\n  for (var j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255\n  }\n  for (var i = 0; i < ALPHABET.length; i++) {\n    var x = ALPHABET.charAt(i)\n    var xc = x.charCodeAt(0)\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i\n  }\n  var BASE = ALPHABET.length\n  var LEADER = ALPHABET.charAt(0)\n  var FACTOR = Math.log(BASE) / Math.log(256) // log(BASE) / log(256), rounded up\n  var iFACTOR = Math.log(256) / Math.log(BASE) // log(256) / log(BASE), rounded up\n  function encode (source) {\n    if (source instanceof Uint8Array) {\n    } else if (ArrayBuffer.isView(source)) {\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength)\n    } else if (Array.isArray(source)) {\n      source = Uint8Array.from(source)\n    }\n    if (!(source instanceof Uint8Array)) { throw new TypeError('Expected Uint8Array') }\n    if (source.length === 0) { return '' }\n        // Skip & count leading zeroes.\n    var zeroes = 0\n    var length = 0\n    var pbegin = 0\n    var pend = source.length\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++\n      zeroes++\n    }\n        // Allocate enough space in big-endian base58 representation.\n    var size = ((pend - pbegin) * iFACTOR + 1) >>> 0\n    var b58 = new Uint8Array(size)\n        // Process the bytes.\n    while (pbegin !== pend) {\n      var carry = source[pbegin]\n            // Apply \"b58 = b58 * 256 + ch\".\n      var i = 0\n      for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0\n        b58[it1] = (carry % BASE) >>> 0\n        carry = (carry / BASE) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      pbegin++\n    }\n        // Skip leading zeroes in base58 result.\n    var it2 = size - length\n    while (it2 !== size && b58[it2] === 0) {\n      it2++\n    }\n        // Translate the result into a string.\n    var str = LEADER.repeat(zeroes)\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]) }\n    return str\n  }\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return new Uint8Array() }\n    var psz = 0\n        // Skip and count leading '1's.\n    var zeroes = 0\n    var length = 0\n    while (source[psz] === LEADER) {\n      zeroes++\n      psz++\n    }\n        // Allocate enough space in big-endian base256 representation.\n    var size = (((source.length - psz) * FACTOR) + 1) >>> 0 // log(58) / log(256), rounded up.\n    var b256 = new Uint8Array(size)\n        // Process the characters.\n    while (source[psz]) {\n            // Find code of next character\n      var charCode = source.charCodeAt(psz)\n            // Base map can not be indexed using char code\n      if (charCode > 255) { return }\n            // Decode character\n      var carry = BASE_MAP[charCode]\n            // Invalid character\n      if (carry === 255) { return }\n      var i = 0\n      for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0\n        b256[it3] = (carry % 256) >>> 0\n        carry = (carry / 256) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      psz++\n    }\n        // Skip leading zeroes in b256.\n    var it4 = size - length\n    while (it4 !== size && b256[it4] === 0) {\n      it4++\n    }\n    var vch = new Uint8Array(zeroes + (size - it4))\n    var j = zeroes\n    while (it4 !== size) {\n      vch[j++] = b256[it4++]\n    }\n    return vch\n  }\n  function decode (string) {\n    var buffer = decodeUnsafe(string)\n    if (buffer) { return buffer }\n    throw new Error('Non-base' + BASE + ' character')\n  }\n  return {\n    encode: encode,\n    decodeUnsafe: decodeUnsafe,\n    decode: decode\n  }\n}\nmodule.exports = base\n","const basex = require('base-x')\nconst ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n\nmodule.exports = basex(ALPHABET)\n","import { SHA2 } from './_sha2.js';\nimport { wrapConstructor } from './utils.js';\n// https://homes.esat.kuleuven.be/~bosselae/ripemd160.html\n// https://homes.esat.kuleuven.be/~bosselae/ripemd160/pdf/AB-9601/AB-9601.pdf\nconst Rho = new Uint8Array([7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8]);\nconst Id = Uint8Array.from({ length: 16 }, (_, i) => i);\nconst Pi = Id.map((i) => (9 * i + 5) % 16);\nlet idxL = [Id];\nlet idxR = [Pi];\nfor (let i = 0; i < 4; i++)\n    for (let j of [idxL, idxR])\n        j.push(j[i].map((k) => Rho[k]));\nconst shifts = [\n    [11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8],\n    [12, 13, 11, 15, 6, 9, 9, 7, 12, 15, 11, 13, 7, 8, 7, 7],\n    [13, 15, 14, 11, 7, 7, 6, 8, 13, 14, 13, 12, 5, 5, 6, 9],\n    [14, 11, 12, 14, 8, 6, 5, 5, 15, 12, 15, 14, 9, 9, 8, 6],\n    [15, 12, 13, 13, 9, 5, 8, 6, 14, 11, 12, 11, 8, 6, 5, 5],\n].map((i) => new Uint8Array(i));\nconst shiftsL = idxL.map((idx, i) => idx.map((j) => shifts[i][j]));\nconst shiftsR = idxR.map((idx, i) => idx.map((j) => shifts[i][j]));\nconst Kl = new Uint32Array([0x00000000, 0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xa953fd4e]);\nconst Kr = new Uint32Array([0x50a28be6, 0x5c4dd124, 0x6d703ef3, 0x7a6d76e9, 0x00000000]);\n// The rotate left (circular left shift) operation for uint32\nconst rotl = (word, shift) => (word << shift) | (word >>> (32 - shift));\n// It's called f() in spec.\nfunction f(group, x, y, z) {\n    if (group === 0)\n        return x ^ y ^ z;\n    else if (group === 1)\n        return (x & y) | (~x & z);\n    else if (group === 2)\n        return (x | ~y) ^ z;\n    else if (group === 3)\n        return (x & z) | (y & ~z);\n    else\n        return x ^ (y | ~z);\n}\n// Temporary buffer, not used to store anything between runs\nconst BUF = new Uint32Array(16);\nexport class RIPEMD160 extends SHA2 {\n    constructor() {\n        super(64, 20, 8, true);\n        this.h0 = 0x67452301 | 0;\n        this.h1 = 0xefcdab89 | 0;\n        this.h2 = 0x98badcfe | 0;\n        this.h3 = 0x10325476 | 0;\n        this.h4 = 0xc3d2e1f0 | 0;\n    }\n    get() {\n        const { h0, h1, h2, h3, h4 } = this;\n        return [h0, h1, h2, h3, h4];\n    }\n    set(h0, h1, h2, h3, h4) {\n        this.h0 = h0 | 0;\n        this.h1 = h1 | 0;\n        this.h2 = h2 | 0;\n        this.h3 = h3 | 0;\n        this.h4 = h4 | 0;\n    }\n    process(view, offset) {\n        for (let i = 0; i < 16; i++, offset += 4)\n            BUF[i] = view.getUint32(offset, true);\n        // prettier-ignore\n        let al = this.h0 | 0, ar = al, bl = this.h1 | 0, br = bl, cl = this.h2 | 0, cr = cl, dl = this.h3 | 0, dr = dl, el = this.h4 | 0, er = el;\n        // Instead of iterating 0 to 80, we split it into 5 groups\n        // And use the groups in constants, functions, etc. Much simpler\n        for (let group = 0; group < 5; group++) {\n            const rGroup = 4 - group;\n            const hbl = Kl[group], hbr = Kr[group]; // prettier-ignore\n            const rl = idxL[group], rr = idxR[group]; // prettier-ignore\n            const sl = shiftsL[group], sr = shiftsR[group]; // prettier-ignore\n            for (let i = 0; i < 16; i++) {\n                const tl = (rotl(al + f(group, bl, cl, dl) + BUF[rl[i]] + hbl, sl[i]) + el) | 0;\n                al = el, el = dl, dl = rotl(cl, 10) | 0, cl = bl, bl = tl; // prettier-ignore\n            }\n            // 2 loops are 10% faster\n            for (let i = 0; i < 16; i++) {\n                const tr = (rotl(ar + f(rGroup, br, cr, dr) + BUF[rr[i]] + hbr, sr[i]) + er) | 0;\n                ar = er, er = dr, dr = rotl(cr, 10) | 0, cr = br, br = tr; // prettier-ignore\n            }\n        }\n        // Add the compressed chunk to the current hash value\n        this.set((this.h1 + cl + dr) | 0, (this.h2 + dl + er) | 0, (this.h3 + el + ar) | 0, (this.h4 + al + br) | 0, (this.h0 + bl + cr) | 0);\n    }\n    roundClean() {\n        BUF.fill(0);\n    }\n    destroy() {\n        this.destroyed = true;\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0);\n    }\n}\n/**\n * RIPEMD-160 - a hash function from 1990s.\n * @param message - msg that would be hashed\n */\nexport const ripemd160 = wrapConstructor(() => new RIPEMD160());\n","import { ripemd160 } from '@noble/hashes/ripemd160';\nexport function hashRipemd160(data) {\n    return ripemd160(data);\n}\n//# sourceMappingURL=hashRipemd160.js.map","const U32_MASK64 = BigInt(2 ** 32 - 1);\nconst _32n = BigInt(32);\n// We are not using BigUint64Array, because they are extremely slow as per 2022\nexport function fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nexport function split(lst, le = false) {\n    let Ah = new Uint32Array(lst.length);\n    let Al = new Uint32Array(lst.length);\n    for (let i = 0; i < lst.length; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nexport const toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h, l, s) => h >>> s;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (h, l) => l;\nconst rotr32L = (h, l) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\n// Removing \"export\" has 5% perf penalty -_-\nexport function add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n","import { SHA2 } from './_sha2.js';\nimport u64 from './_u64.js';\nimport { wrapConstructor } from './utils.js';\n// Round contants (first 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409):\n// prettier-ignore\nconst [SHA512_Kh, SHA512_Kl] = u64.split([\n    '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n    '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n    '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n    '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n    '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n    '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n    '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n    '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n    '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n    '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n    '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n    '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n    '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n    '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n    '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n    '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n    '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n    '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n    '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n    '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n)));\n// Temporary buffer, not used to store anything between runs\nconst SHA512_W_H = new Uint32Array(80);\nconst SHA512_W_L = new Uint32Array(80);\nexport class SHA512 extends SHA2 {\n    constructor() {\n        super(128, 64, 16, false);\n        // We cannot use array here since array allows indexing by variable which means optimizer/compiler cannot use registers.\n        // Also looks cleaner and easier to verify with spec.\n        // Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x6a09e667 | 0;\n        this.Al = 0xf3bcc908 | 0;\n        this.Bh = 0xbb67ae85 | 0;\n        this.Bl = 0x84caa73b | 0;\n        this.Ch = 0x3c6ef372 | 0;\n        this.Cl = 0xfe94f82b | 0;\n        this.Dh = 0xa54ff53a | 0;\n        this.Dl = 0x5f1d36f1 | 0;\n        this.Eh = 0x510e527f | 0;\n        this.El = 0xade682d1 | 0;\n        this.Fh = 0x9b05688c | 0;\n        this.Fl = 0x2b3e6c1f | 0;\n        this.Gh = 0x1f83d9ab | 0;\n        this.Gl = 0xfb41bd6b | 0;\n        this.Hh = 0x5be0cd19 | 0;\n        this.Hl = 0x137e2179 | 0;\n    }\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4) {\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32((offset += 4));\n        }\n        for (let i = 16; i < 80; i++) {\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n            const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n            const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for (let i = 0; i < 80; i++) {\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n            const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n            const CHIl = (El & Fl) ^ (~El & Gl);\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n            const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n            const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n            const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = u64.add3L(T1l, sigma0l, MAJl);\n            Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        SHA512_W_H.fill(0);\n        SHA512_W_L.fill(0);\n    }\n    destroy() {\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n}\nclass SHA512_224 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x8c3d37c8 | 0;\n        this.Al = 0x19544da2 | 0;\n        this.Bh = 0x73e19966 | 0;\n        this.Bl = 0x89dcd4d6 | 0;\n        this.Ch = 0x1dfab7ae | 0;\n        this.Cl = 0x32ff9c82 | 0;\n        this.Dh = 0x679dd514 | 0;\n        this.Dl = 0x582f9fcf | 0;\n        this.Eh = 0x0f6d2b69 | 0;\n        this.El = 0x7bd44da8 | 0;\n        this.Fh = 0x77e36f73 | 0;\n        this.Fl = 0x04c48942 | 0;\n        this.Gh = 0x3f9d85a8 | 0;\n        this.Gl = 0x6a1d36c8 | 0;\n        this.Hh = 0x1112e6ad | 0;\n        this.Hl = 0x91d692a1 | 0;\n        this.outputLen = 28;\n    }\n}\nclass SHA512_256 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x22312194 | 0;\n        this.Al = 0xfc2bf72c | 0;\n        this.Bh = 0x9f555fa3 | 0;\n        this.Bl = 0xc84c64c2 | 0;\n        this.Ch = 0x2393b86b | 0;\n        this.Cl = 0x6f53b151 | 0;\n        this.Dh = 0x96387719 | 0;\n        this.Dl = 0x5940eabd | 0;\n        this.Eh = 0x96283ee2 | 0;\n        this.El = 0xa88effe3 | 0;\n        this.Fh = 0xbe5e1e25 | 0;\n        this.Fl = 0x53863992 | 0;\n        this.Gh = 0x2b0199fc | 0;\n        this.Gl = 0x2c85b8aa | 0;\n        this.Hh = 0x0eb72ddc | 0;\n        this.Hl = 0x81c52ca2 | 0;\n        this.outputLen = 32;\n    }\n}\nclass SHA384 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0xcbbb9d5d | 0;\n        this.Al = 0xc1059ed8 | 0;\n        this.Bh = 0x629a292a | 0;\n        this.Bl = 0x367cd507 | 0;\n        this.Ch = 0x9159015a | 0;\n        this.Cl = 0x3070dd17 | 0;\n        this.Dh = 0x152fecd8 | 0;\n        this.Dl = 0xf70e5939 | 0;\n        this.Eh = 0x67332667 | 0;\n        this.El = 0xffc00b31 | 0;\n        this.Fh = 0x8eb44a87 | 0;\n        this.Fl = 0x68581511 | 0;\n        this.Gh = 0xdb0c2e0d | 0;\n        this.Gl = 0x64f98fa7 | 0;\n        this.Hh = 0x47b5481d | 0;\n        this.Hl = 0xbefa4fa4 | 0;\n        this.outputLen = 48;\n    }\n}\nexport const sha512 = wrapConstructor(() => new SHA512());\nexport const sha512_224 = wrapConstructor(() => new SHA512_224());\nexport const sha512_256 = wrapConstructor(() => new SHA512_256());\nexport const sha384 = wrapConstructor(() => new SHA384());\n","import { sha256 } from '@noble/hashes/sha256';\nimport { sha512 } from '@noble/hashes/sha512';\nimport { getCryptoLib } from './cryptoUtils';\nexport class NodeCryptoSha2Hash {\n    constructor(createHash) {\n        this.createHash = createHash;\n    }\n    async digest(data, algorithm = 'sha256') {\n        try {\n            const result = this.createHash(algorithm).update(data).digest();\n            return Promise.resolve(result);\n        }\n        catch (error) {\n            console.log(error);\n            console.log(`Error performing ${algorithm} digest with Node.js 'crypto.createHash', falling back to JS implementation.`);\n            return Promise.resolve(algorithm === 'sha256' ? hashSha256Sync(data) : hashSha512Sync(data));\n        }\n    }\n}\nexport class WebCryptoSha2Hash {\n    constructor(subtleCrypto) {\n        this.subtleCrypto = subtleCrypto;\n    }\n    async digest(data, algorithm = 'sha256') {\n        let algo;\n        if (algorithm === 'sha256') {\n            algo = 'SHA-256';\n        }\n        else if (algorithm === 'sha512') {\n            algo = 'SHA-512';\n        }\n        else {\n            throw new Error(`Unsupported hash algorithm ${algorithm}`);\n        }\n        try {\n            const hash = await this.subtleCrypto.digest(algo, data);\n            return new Uint8Array(hash);\n        }\n        catch (error) {\n            console.log(error);\n            console.log(`Error performing ${algorithm} digest with WebCrypto, falling back to JS implementation.`);\n            return Promise.resolve(algorithm === 'sha256' ? hashSha256Sync(data) : hashSha512Sync(data));\n        }\n    }\n}\nexport async function createSha2Hash() {\n    const cryptoLib = await getCryptoLib();\n    if (cryptoLib.name === 'subtleCrypto') {\n        return new WebCryptoSha2Hash(cryptoLib.lib);\n    }\n    else {\n        return new NodeCryptoSha2Hash(cryptoLib.lib.createHash);\n    }\n}\nexport function hashSha256Sync(data) {\n    return sha256(data);\n}\nexport function hashSha512Sync(data) {\n    return sha512(data);\n}\n//# sourceMappingURL=sha2Hash.js.map","import { hmac } from '@noble/hashes/hmac';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { getPublicKey as nobleGetPublicKey, signSync, utils } from '@noble/secp256k1';\nimport { bytesToHex, concatBytes, hexToBytes, privateKeyToBytes, readUInt8, } from '@stacks/common';\nimport base58 from 'bs58';\nimport { hashRipemd160 } from './hashRipemd160';\nimport { hashSha256Sync } from './sha2Hash';\nconst BITCOIN_PUBKEYHASH = 0x00;\nutils.hmacSha256Sync = (key, ...msgs) => {\n    const h = hmac.create(sha256, key);\n    msgs.forEach(msg => h.update(msg));\n    return h.digest();\n};\nexport function makeECPrivateKey() {\n    return bytesToHex(utils.randomPrivateKey());\n}\nexport function base58CheckDecode(btcAddress) {\n    const bytes = base58.decode(btcAddress);\n    const payload = bytes.slice(0, -4);\n    const checksum = bytes.slice(-4);\n    const newChecksum = sha256(sha256(payload));\n    if ((checksum[0] ^ newChecksum[0]) |\n        (checksum[1] ^ newChecksum[1]) |\n        (checksum[2] ^ newChecksum[2]) |\n        (checksum[3] ^ newChecksum[3])) {\n        throw new Error('Invalid checksum');\n    }\n    if (payload.length !== 21)\n        throw new TypeError('Invalid address length');\n    const version = readUInt8(payload, 0);\n    const hash = payload.slice(1);\n    return { version, hash };\n}\nexport function base58Encode(hash) {\n    const checksum = sha256(sha256(hash));\n    return base58.encode(concatBytes(hash, checksum).slice(0, hash.length + 4));\n}\nexport function base58CheckEncode(version, hash) {\n    return base58Encode(concatBytes(new Uint8Array([version]), hash.slice(0, 20)));\n}\nexport function publicKeyToBtcAddress(publicKey, version = BITCOIN_PUBKEYHASH) {\n    const publicKeyBytes = typeof publicKey === 'string' ? hexToBytes(publicKey) : publicKey;\n    const publicKeyHash160 = hashRipemd160(hashSha256Sync(publicKeyBytes));\n    return base58CheckEncode(version, publicKeyHash160);\n}\nexport function getPublicKeyFromPrivate(privateKey) {\n    const privateKeyBytes = privateKeyToBytes(privateKey);\n    return bytesToHex(nobleGetPublicKey(privateKeyBytes.slice(0, 32), true));\n}\nexport function ecSign(messageHash, privateKey) {\n    return signSync(messageHash, privateKeyToBytes(privateKey).slice(0, 32), {\n        der: false,\n    });\n}\n//# sourceMappingURL=keys.js.map","import { hmac } from '@noble/hashes/hmac';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { getPublicKey, getSharedSecret, Point, Signature, signSync, utils, verify, } from '@noble/secp256k1';\nimport { bigIntToBytes, bytesToHex, bytesToUtf8, concatBytes, FailedDecryptionError, hexToBigInt, hexToBytes, parseRecoverableSignatureVrs, signatureRsvToVrs, utf8ToBytes, } from '@stacks/common';\nimport { fromByteArray, toByteArray } from 'base64-js';\nimport { createCipher } from './aesCipher';\nimport { getPublicKeyFromPrivate } from './keys';\nimport { encodeMessage, hashMessage } from './messageSignature';\nimport { hashSha256Sync, hashSha512Sync } from './sha2Hash';\nimport { getAesCbcOutputLength, getBase64OutputLength } from './utils';\nutils.hmacSha256Sync = (key, ...msgs) => {\n    const h = hmac.create(sha256, key);\n    msgs.forEach(msg => h.update(msg));\n    return h.digest();\n};\nexport var InvalidPublicKeyReason;\n(function (InvalidPublicKeyReason) {\n    InvalidPublicKeyReason[\"InvalidFormat\"] = \"InvalidFormat\";\n    InvalidPublicKeyReason[\"IsNotPoint\"] = \"IsNotPoint\";\n})(InvalidPublicKeyReason || (InvalidPublicKeyReason = {}));\nexport async function aes256CbcEncrypt(iv, key, plaintext) {\n    const cipher = await createCipher();\n    return await cipher.encrypt('aes-256-cbc', key, iv, plaintext);\n}\nasync function aes256CbcDecrypt(iv, key, ciphertext) {\n    const cipher = await createCipher();\n    return await cipher.decrypt('aes-256-cbc', key, iv, ciphertext);\n}\nexport function hmacSha256(key, content) {\n    return hmac(sha256, key, content);\n}\nfunction equalsConstTime(a, b) {\n    if (a.length !== b.length) {\n        return false;\n    }\n    let res = 0;\n    for (let i = 0; i < a.length; i++) {\n        res |= a[i] ^ b[i];\n    }\n    return res === 0;\n}\nfunction sharedSecretToKeys(sharedSecret) {\n    const hashedSecret = hashSha512Sync(sharedSecret);\n    return {\n        encryptionKey: hashedSecret.slice(0, 32),\n        hmacKey: hashedSecret.slice(32),\n    };\n}\nfunction allHexChars(maybe) {\n    return maybe.match(/^[0-9a-f]+$/i) !== null;\n}\nfunction isValidPublicKey(pub) {\n    const invalidFormat = {\n        result: false,\n        reason_data: 'Invalid public key format',\n        reason: InvalidPublicKeyReason.InvalidFormat,\n    };\n    const invalidPoint = {\n        result: false,\n        reason_data: 'Public key is not a point',\n        reason: InvalidPublicKeyReason.IsNotPoint,\n    };\n    if (pub.length !== 66 && pub.length !== 130)\n        return invalidFormat;\n    const firstByte = pub.slice(0, 2);\n    if (pub.length === 130 && firstByte !== '04')\n        return invalidFormat;\n    if (pub.length === 66 && firstByte !== '02' && firstByte !== '03')\n        return invalidFormat;\n    if (!allHexChars(pub))\n        return invalidFormat;\n    try {\n        const point = Point.fromHex(pub);\n        point.assertValidity();\n        return {\n            result: true,\n            reason_data: null,\n            reason: null,\n        };\n    }\n    catch (e) {\n        return invalidPoint;\n    }\n}\nexport function getHexFromBN(bnInput) {\n    const hexOut = bnInput.toString(16);\n    if (hexOut.length === 64) {\n        return hexOut;\n    }\n    else if (hexOut.length < 64) {\n        const padding = '0'.repeat(64 - hexOut.length);\n        return `${padding}${hexOut}`;\n    }\n    else {\n        throw new Error('Generated a > 32-byte bigint for encryption. Failing.');\n    }\n}\nexport function getBytesFromBN(bnInput) {\n    const result = bigIntToBytes(bnInput, 32);\n    if (result.byteLength !== 32) {\n        throw new Error('Failed to generate a 32-byte Uint8Array');\n    }\n    return result;\n}\nexport function getCipherObjectWrapper(opts) {\n    const shell = {\n        iv: '',\n        ephemeralPK: '',\n        mac: '',\n        cipherText: '',\n        wasString: !!opts.wasString,\n    };\n    if (opts.cipherTextEncoding === 'base64') {\n        shell.cipherTextEncoding = 'base64';\n    }\n    const ivLength = 32;\n    const ephemeralPKLength = 66;\n    const macLength = 64;\n    return {\n        payloadValuesLength: ivLength + ephemeralPKLength + macLength,\n        payloadShell: JSON.stringify(shell),\n    };\n}\nexport function getSignedCipherObjectWrapper(payloadShell) {\n    const shell = {\n        signature: '',\n        publicKey: '',\n        cipherText: payloadShell,\n    };\n    const signatureLength = 144;\n    const publicKeyLength = 66;\n    return {\n        signedPayloadValuesLength: signatureLength + publicKeyLength,\n        signedPayloadShell: JSON.stringify(shell),\n    };\n}\nexport function eciesGetJsonStringLength(opts) {\n    const { payloadShell, payloadValuesLength } = getCipherObjectWrapper(opts);\n    const cipherTextLength = getAesCbcOutputLength(opts.contentLength);\n    let encodedCipherTextLength;\n    if (!opts.cipherTextEncoding || opts.cipherTextEncoding === 'hex') {\n        encodedCipherTextLength = cipherTextLength * 2;\n    }\n    else if (opts.cipherTextEncoding === 'base64') {\n        encodedCipherTextLength = getBase64OutputLength(cipherTextLength);\n    }\n    else {\n        throw new Error(`Unexpected cipherTextEncoding \"${opts.cipherTextEncoding}\"`);\n    }\n    if (!opts.sign) {\n        return payloadShell.length + payloadValuesLength + encodedCipherTextLength;\n    }\n    else {\n        const { signedPayloadShell, signedPayloadValuesLength } = getSignedCipherObjectWrapper(payloadShell);\n        return (signedPayloadShell.length +\n            signedPayloadValuesLength +\n            payloadValuesLength +\n            encodedCipherTextLength);\n    }\n}\nexport async function encryptECIES(publicKey, content, wasString, cipherTextEncoding) {\n    const validity = isValidPublicKey(publicKey);\n    if (!validity.result) {\n        throw validity;\n    }\n    const ephemeralPrivateKey = utils.randomPrivateKey();\n    const ephemeralPublicKey = getPublicKey(ephemeralPrivateKey, true);\n    let sharedSecret = getSharedSecret(ephemeralPrivateKey, publicKey, true);\n    sharedSecret = sharedSecret.slice(1);\n    const sharedKeys = sharedSecretToKeys(sharedSecret);\n    const initializationVector = utils.randomBytes(16);\n    const cipherText = await aes256CbcEncrypt(initializationVector, sharedKeys.encryptionKey, content);\n    const macData = concatBytes(initializationVector, ephemeralPublicKey, cipherText);\n    const mac = hmacSha256(sharedKeys.hmacKey, macData);\n    let cipherTextString;\n    if (!cipherTextEncoding || cipherTextEncoding === 'hex') {\n        cipherTextString = bytesToHex(cipherText);\n    }\n    else if (cipherTextEncoding === 'base64') {\n        cipherTextString = fromByteArray(cipherText);\n    }\n    else {\n        throw new Error(`Unexpected cipherTextEncoding \"${cipherTextEncoding}\"`);\n    }\n    const result = {\n        iv: bytesToHex(initializationVector),\n        ephemeralPK: bytesToHex(ephemeralPublicKey),\n        cipherText: cipherTextString,\n        mac: bytesToHex(mac),\n        wasString,\n    };\n    if (cipherTextEncoding && cipherTextEncoding !== 'hex') {\n        result.cipherTextEncoding = cipherTextEncoding;\n    }\n    return result;\n}\nexport async function decryptECIES(privateKey, cipherObject) {\n    if (!cipherObject.ephemeralPK) {\n        throw new FailedDecryptionError('Unable to get public key from cipher object. ' +\n            'You might be trying to decrypt an unencrypted object.');\n    }\n    const ephemeralPK = cipherObject.ephemeralPK;\n    let sharedSecret = getSharedSecret(privateKey, ephemeralPK, true);\n    sharedSecret = sharedSecret.slice(1);\n    const sharedKeys = sharedSecretToKeys(sharedSecret);\n    const ivBytes = hexToBytes(cipherObject.iv);\n    let cipherTextBytes;\n    if (!cipherObject.cipherTextEncoding || cipherObject.cipherTextEncoding === 'hex') {\n        cipherTextBytes = hexToBytes(cipherObject.cipherText);\n    }\n    else if (cipherObject.cipherTextEncoding === 'base64') {\n        cipherTextBytes = toByteArray(cipherObject.cipherText);\n    }\n    else {\n        throw new Error(`Unexpected cipherTextEncoding \"${cipherObject.cipherText}\"`);\n    }\n    const macData = concatBytes(ivBytes, hexToBytes(ephemeralPK), cipherTextBytes);\n    const actualMac = hmacSha256(sharedKeys.hmacKey, macData);\n    const expectedMac = hexToBytes(cipherObject.mac);\n    if (!equalsConstTime(expectedMac, actualMac)) {\n        throw new FailedDecryptionError('Decryption failed: failure in MAC check');\n    }\n    const plainText = await aes256CbcDecrypt(ivBytes, sharedKeys.encryptionKey, cipherTextBytes);\n    if (cipherObject.wasString) {\n        return bytesToUtf8(plainText);\n    }\n    return plainText;\n}\nexport function signECDSA(privateKey, content) {\n    const contentBytes = typeof content === 'string' ? utf8ToBytes(content) : content;\n    const publicKey = getPublicKeyFromPrivate(privateKey);\n    const contentHash = hashSha256Sync(contentBytes);\n    const signature = signSync(contentHash, privateKey);\n    return {\n        signature: bytesToHex(signature),\n        publicKey,\n    };\n}\nexport function verifyECDSA(content, publicKey, signature) {\n    const contentBytes = typeof content === 'string' ? utf8ToBytes(content) : content;\n    const contentHash = hashSha256Sync(contentBytes);\n    return verify(signature, contentHash, publicKey, { strict: false });\n}\nexport function verifyMessageSignature({ signature, message, publicKey, }) {\n    const { r, s } = parseRecoverableSignatureVrs(signature);\n    const sig = new Signature(hexToBigInt(r), hexToBigInt(s));\n    const hashedMsg = typeof message === 'string' ? hashMessage(message) : message;\n    const verificationResult = verify(sig, hashedMsg, publicKey, { strict: false });\n    if (verificationResult || typeof message !== 'string')\n        return verificationResult;\n    const LEGACY_PREFIX = '\\x18Stacks Message Signing:\\n';\n    const legacyHash = sha256(encodeMessage(message, LEGACY_PREFIX));\n    return verify(sig, legacyHash, publicKey, { strict: false });\n}\nexport function verifyMessageSignatureRsv({ signature, message, publicKey, }) {\n    return verifyMessageSignature({\n        signature: signatureRsvToVrs(signature),\n        message,\n        publicKey,\n    });\n}\n//# sourceMappingURL=ec.js.map","import { utf8ToBytes } from '@stacks/common';\nimport { decryptECIES, encryptECIES, signECDSA, } from './ec';\nimport { getPublicKeyFromPrivate } from './keys';\nexport async function encryptContent(content, options) {\n    const opts = Object.assign({}, options);\n    let privateKey;\n    if (!opts.publicKey) {\n        if (!opts.privateKey) {\n            throw new Error('Either public key or private key must be supplied for encryption.');\n        }\n        opts.publicKey = getPublicKeyFromPrivate(opts.privateKey);\n    }\n    const wasString = typeof opts.wasString === 'boolean' ? opts.wasString : typeof content === 'string';\n    const contentBytes = typeof content === 'string' ? utf8ToBytes(content) : content;\n    const cipherObject = await encryptECIES(opts.publicKey, contentBytes, wasString, opts.cipherTextEncoding);\n    let cipherPayload = JSON.stringify(cipherObject);\n    if (opts.sign) {\n        if (typeof opts.sign === 'string') {\n            privateKey = opts.sign;\n        }\n        else if (!privateKey) {\n            privateKey = opts.privateKey;\n        }\n        const signatureObject = signECDSA(privateKey, cipherPayload);\n        const signedCipherObject = {\n            signature: signatureObject.signature,\n            publicKey: signatureObject.publicKey,\n            cipherText: cipherPayload,\n        };\n        cipherPayload = JSON.stringify(signedCipherObject);\n    }\n    return cipherPayload;\n}\nexport function decryptContent(content, options) {\n    const opts = Object.assign({}, options);\n    if (!opts.privateKey) {\n        throw new Error('Private key is required for decryption.');\n    }\n    try {\n        const cipherObject = JSON.parse(content);\n        return decryptECIES(opts.privateKey, cipherObject);\n    }\n    catch (err) {\n        if (err instanceof SyntaxError) {\n            throw new Error('Failed to parse encrypted content JSON. The content may not ' +\n                'be encrypted. If using getFile, try passing { decrypt: false }.');\n        }\n        else {\n            throw err;\n        }\n    }\n}\n//# sourceMappingURL=encryption.js.map","\"use strict\";\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.randomBytes = exports.wrapConstructorWithOpts = exports.wrapConstructor = exports.checkOpts = exports.Hash = exports.concatBytes = exports.toBytes = exports.utf8ToBytes = exports.asyncLoop = exports.nextTick = exports.hexToBytes = exports.bytesToHex = exports.isLE = exports.rotr = exports.createView = exports.u32 = exports.u8 = void 0;\n// The import here is via the package name. This is to ensure\n// that exports mapping/resolution does fall into place.\nconst crypto_1 = require(\"@noble/hashes/crypto\");\n// Cast array to different type\nconst u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.u8 = u8;\nconst u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\nexports.u32 = u32;\n// Cast array to view\nconst createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.createView = createView;\n// The rotate right (circular right shift) operation for uint32\nconst rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\nexports.rotr = rotr;\nexports.isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\n// There is almost no big endian hardware, but js typed arrays uses platform specific endianness.\n// So, just to be sure not to corrupt anything.\nif (!exports.isLE)\n    throw new Error('Non little-endian hardware is not supported');\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef]))\n */\nfunction bytesToHex(uint8a) {\n    // pre-caching improves the speed 6x\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n    let hex = '';\n    for (let i = 0; i < uint8a.length; i++) {\n        hex += hexes[uint8a[i]];\n    }\n    return hex;\n}\nexports.bytesToHex = bytesToHex;\n/**\n * @example hexToBytes('deadbeef')\n */\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n    }\n    if (hex.length % 2)\n        throw new Error('hexToBytes: received invalid unpadded hex');\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\nexports.hexToBytes = hexToBytes;\n// There is no setImmediate in browser and setTimeout is slow. However, call to async function will return Promise\n// which will be fullfiled only on next scheduler queue processing step and this is exactly what we need.\nconst nextTick = async () => { };\nexports.nextTick = nextTick;\n// Returns control to thread each 'tick' ms to avoid blocking\nasync function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await (0, exports.nextTick)();\n        ts += diff;\n    }\n}\nexports.asyncLoop = asyncLoop;\nfunction utf8ToBytes(str) {\n    if (typeof str !== 'string') {\n        throw new TypeError(`utf8ToBytes expected string, got ${typeof str}`);\n    }\n    return new TextEncoder().encode(str);\n}\nexports.utf8ToBytes = utf8ToBytes;\nfunction toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    if (!(data instanceof Uint8Array))\n        throw new TypeError(`Expected input type is Uint8Array (got ${typeof data})`);\n    return data;\n}\nexports.toBytes = toBytes;\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n */\nfunction concatBytes(...arrays) {\n    if (!arrays.every((a) => a instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\nexports.concatBytes = concatBytes;\n// For runtime check if class implements interface\nclass Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\nexports.Hash = Hash;\n// Check if object doens't have custom constructor (like Uint8Array/Array)\nconst isPlainObject = (obj) => Object.prototype.toString.call(obj) === '[object Object]' && obj.constructor === Object;\nfunction checkOpts(defaults, opts) {\n    if (opts !== undefined && (typeof opts !== 'object' || !isPlainObject(opts)))\n        throw new TypeError('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexports.checkOpts = checkOpts;\nfunction wrapConstructor(hashConstructor) {\n    const hashC = (message) => hashConstructor().update(toBytes(message)).digest();\n    const tmp = hashConstructor();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashConstructor();\n    return hashC;\n}\nexports.wrapConstructor = wrapConstructor;\nfunction wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexports.wrapConstructorWithOpts = wrapConstructorWithOpts;\n/**\n * Secure PRNG\n */\nfunction randomBytes(bytesLength = 32) {\n    if (crypto_1.crypto.web) {\n        return crypto_1.crypto.web.getRandomValues(new Uint8Array(bytesLength));\n    }\n    else if (crypto_1.crypto.node) {\n        return new Uint8Array(crypto_1.crypto.node.randomBytes(bytesLength).buffer);\n    }\n    else {\n        throw new Error(\"The environment doesn't have randomBytes function\");\n    }\n}\nexports.randomBytes = randomBytes;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decode = exports.encode = exports.unescape = exports.escape = exports.pad = void 0;\nconst base64_js_1 = require(\"base64-js\");\nfunction pad(base64) {\n    return `${base64}${'='.repeat(4 - (base64.length % 4 || 4))}`;\n}\nexports.pad = pad;\nfunction escape(base64) {\n    return base64.replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n}\nexports.escape = escape;\nfunction unescape(base64Url) {\n    return pad(base64Url).replace(/-/g, '+').replace(/_/g, '/');\n}\nexports.unescape = unescape;\nfunction encode(base64) {\n    return escape((0, base64_js_1.fromByteArray)(new TextEncoder().encode(base64)));\n}\nexports.encode = encode;\nfunction decode(base64Url) {\n    return new TextDecoder().decode((0, base64_js_1.toByteArray)(pad(unescape(base64Url))));\n}\nexports.decode = decode;\n//# sourceMappingURL=base64Url.js.map","\"use strict\";\n//  NOTICE\n//  Copyright 2015 D2L Corporation\n//\n//  Licensed under the Apache License, Version 2.0 (the \"License\");\n//  you may not use this file except in compliance with the License.\n//  You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n//  Unless required by applicable law or agreed to in writing, software\n//  distributed under the License is distributed on an \"AS IS\" BASIS,\n//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n//  See the License for the specific language governing permissions and\n//  limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.joseToDer = exports.derToJose = void 0;\n// The following code is adapted from https://github.com/Brightspace/node-ecdsa-sig-formatter\nconst base64_js_1 = require(\"base64-js\");\nconst base64Url_1 = require(\"./base64Url\");\nfunction getParamSize(keySize) {\n    return ((keySize / 8) | 0) + (keySize % 8 === 0 ? 0 : 1);\n}\nconst paramBytesForAlg = {\n    ES256: getParamSize(256),\n    ES384: getParamSize(384),\n    ES512: getParamSize(521),\n};\nfunction getParamBytesForAlg(alg) {\n    const paramBytes = paramBytesForAlg[alg];\n    if (paramBytes) {\n        return paramBytes;\n    }\n    throw new Error(`Unknown algorithm \"${alg}\"`);\n}\nconst MAX_OCTET = 0x80;\nconst CLASS_UNIVERSAL = 0;\nconst PRIMITIVE_BIT = 0x20;\nconst TAG_SEQ = 0x10;\nconst TAG_INT = 0x02;\nconst ENCODED_TAG_SEQ = TAG_SEQ | PRIMITIVE_BIT | (CLASS_UNIVERSAL << 6);\nconst ENCODED_TAG_INT = TAG_INT | (CLASS_UNIVERSAL << 6);\nfunction signatureAsBytes(signature) {\n    if (signature instanceof Uint8Array) {\n        return signature;\n    }\n    else if ('string' === typeof signature) {\n        return (0, base64_js_1.toByteArray)((0, base64Url_1.pad)(signature));\n    }\n    throw new TypeError('ECDSA signature must be a Base64 string or a Uint8Array');\n}\nfunction derToJose(signature, alg) {\n    const signatureBytes = signatureAsBytes(signature);\n    const paramBytes = getParamBytesForAlg(alg);\n    // the DER encoded param should at most be the param size, plus a padding\n    // zero, since due to being a signed integer\n    const maxEncodedParamLength = paramBytes + 1;\n    const inputLength = signatureBytes.length;\n    let offset = 0;\n    if (signatureBytes[offset++] !== ENCODED_TAG_SEQ) {\n        throw new Error('Could not find expected \"seq\"');\n    }\n    let seqLength = signatureBytes[offset++];\n    if (seqLength === (MAX_OCTET | 1)) {\n        seqLength = signatureBytes[offset++];\n    }\n    if (inputLength - offset < seqLength) {\n        throw new Error(`\"seq\" specified length of \"${seqLength}\", only \"${inputLength - offset}\" remaining`);\n    }\n    if (signatureBytes[offset++] !== ENCODED_TAG_INT) {\n        throw new Error('Could not find expected \"int\" for \"r\"');\n    }\n    const rLength = signatureBytes[offset++];\n    if (inputLength - offset - 2 < rLength) {\n        throw new Error(`\"r\" specified length of \"${rLength}\", only \"${inputLength - offset - 2}\" available`);\n    }\n    if (maxEncodedParamLength < rLength) {\n        throw new Error(`\"r\" specified length of \"${rLength}\", max of \"${maxEncodedParamLength}\" is acceptable`);\n    }\n    const rOffset = offset;\n    offset += rLength;\n    if (signatureBytes[offset++] !== ENCODED_TAG_INT) {\n        throw new Error('Could not find expected \"int\" for \"s\"');\n    }\n    const sLength = signatureBytes[offset++];\n    if (inputLength - offset !== sLength) {\n        throw new Error(`\"s\" specified length of \"${sLength}\", expected \"${inputLength - offset}\"`);\n    }\n    if (maxEncodedParamLength < sLength) {\n        throw new Error(`\"s\" specified length of \"${sLength}\", max of \"${maxEncodedParamLength}\" is acceptable`);\n    }\n    const sOffset = offset;\n    offset += sLength;\n    if (offset !== inputLength) {\n        throw new Error(`Expected to consume entire array, but \"${inputLength - offset}\" bytes remain`);\n    }\n    const rPadding = paramBytes - rLength;\n    const sPadding = paramBytes - sLength;\n    const dst = new Uint8Array(rPadding + rLength + sPadding + sLength);\n    for (offset = 0; offset < rPadding; ++offset) {\n        dst[offset] = 0;\n    }\n    dst.set(signatureBytes.subarray(rOffset + Math.max(-rPadding, 0), rOffset + rLength), offset);\n    offset = paramBytes;\n    for (const o = offset; offset < o + sPadding; ++offset) {\n        dst[offset] = 0;\n    }\n    dst.set(signatureBytes.subarray(sOffset + Math.max(-sPadding, 0), sOffset + sLength), offset);\n    return (0, base64Url_1.escape)((0, base64_js_1.fromByteArray)(dst));\n}\nexports.derToJose = derToJose;\nfunction countPadding(buf, start, stop) {\n    let padding = 0;\n    while (start + padding < stop && buf[start + padding] === 0) {\n        ++padding;\n    }\n    const needsSign = buf[start + padding] >= MAX_OCTET;\n    if (needsSign) {\n        --padding;\n    }\n    return padding;\n}\nfunction joseToDer(signature, alg) {\n    signature = signatureAsBytes(signature);\n    const paramBytes = getParamBytesForAlg(alg);\n    const signatureBytes = signature.length;\n    if (signatureBytes !== paramBytes * 2) {\n        throw new TypeError(`\"${alg}\" signatures must be \"${paramBytes * 2}\" bytes, saw \"${signatureBytes}\"`);\n    }\n    const rPadding = countPadding(signature, 0, paramBytes);\n    const sPadding = countPadding(signature, paramBytes, signature.length);\n    const rLength = paramBytes - rPadding;\n    const sLength = paramBytes - sPadding;\n    const rsBytes = 1 + 1 + rLength + 1 + 1 + sLength;\n    const shortLength = rsBytes < MAX_OCTET;\n    const dst = new Uint8Array((shortLength ? 2 : 3) + rsBytes);\n    let offset = 0;\n    dst[offset++] = ENCODED_TAG_SEQ;\n    if (shortLength) {\n        // Bit 8 has value \"0\"\n        // bits 7-1 give the length.\n        dst[offset++] = rsBytes;\n    }\n    else {\n        // Bit 8 of first octet has value \"1\"\n        // bits 7-1 give the number of additional length octets.\n        dst[offset++] = MAX_OCTET | 1;\n        // length, base 256\n        dst[offset++] = rsBytes & 0xff;\n    }\n    dst[offset++] = ENCODED_TAG_INT;\n    dst[offset++] = rLength;\n    if (rPadding < 0) {\n        dst[offset++] = 0;\n        dst.set(signature.subarray(0, paramBytes), offset);\n        offset += paramBytes;\n    }\n    else {\n        dst.set(signature.subarray(rPadding, paramBytes), offset);\n        offset += paramBytes - rPadding;\n    }\n    dst[offset++] = ENCODED_TAG_INT;\n    dst[offset++] = sLength;\n    if (sPadding < 0) {\n        dst[offset++] = 0;\n        dst.set(signature.subarray(paramBytes), offset);\n    }\n    else {\n        dst.set(signature.subarray(paramBytes + sPadding), offset);\n    }\n    return dst;\n}\nexports.joseToDer = joseToDer;\n//# sourceMappingURL=ecdsaSigFormatter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InvalidTokenError = exports.MissingParametersError = void 0;\nclass MissingParametersError extends Error {\n    constructor(message) {\n        super();\n        this.name = 'MissingParametersError';\n        this.message = message || '';\n    }\n}\nexports.MissingParametersError = MissingParametersError;\nclass InvalidTokenError extends Error {\n    constructor(message) {\n        super();\n        this.name = 'InvalidTokenError';\n        this.message = message || '';\n    }\n}\nexports.InvalidTokenError = InvalidTokenError;\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SECP256K1Client = void 0;\nconst hmac_1 = require(\"@noble/hashes/hmac\");\nconst sha256_1 = require(\"@noble/hashes/sha256\");\nconst secp = require(\"@noble/secp256k1\");\nconst ecdsaSigFormatter_1 = require(\"../ecdsaSigFormatter\");\nconst errors_1 = require(\"../errors\");\nconst utils_1 = require(\"@noble/hashes/utils\");\n// required to use noble secp https://github.com/paulmillr/noble-secp256k1\nsecp.utils.hmacSha256Sync = (key, ...msgs) => {\n    const h = hmac_1.hmac.create(sha256_1.sha256, key);\n    msgs.forEach(msg => h.update(msg));\n    return h.digest();\n};\nclass SECP256K1Client {\n    static derivePublicKey(privateKey, compressed = true) {\n        if (privateKey.length === 66) {\n            privateKey = privateKey.slice(0, 64);\n        }\n        if (privateKey.length < 64) {\n            // backward compatibly accept too short private keys\n            privateKey = privateKey.padStart(64, '0');\n        }\n        return (0, utils_1.bytesToHex)(secp.getPublicKey(privateKey, compressed));\n    }\n    static signHash(signingInputHash, privateKey, format = 'jose') {\n        // make sure the required parameters are provided\n        if (!signingInputHash || !privateKey) {\n            throw new errors_1.MissingParametersError('a signing input hash and private key are all required');\n        }\n        const derSignature = secp.signSync(signingInputHash, privateKey.slice(0, 64), {\n            der: true,\n            canonical: false,\n        });\n        if (format === 'der')\n            return (0, utils_1.bytesToHex)(derSignature);\n        if (format === 'jose')\n            return (0, ecdsaSigFormatter_1.derToJose)(derSignature, 'ES256');\n        throw Error('Invalid signature format');\n    }\n    static loadSignature(joseSignature) {\n        // create and return the DER-formatted signature bytes\n        return (0, ecdsaSigFormatter_1.joseToDer)(joseSignature, 'ES256');\n    }\n    static verifyHash(signingInputHash, derSignatureBytes, publicKey) {\n        // make sure the required parameters are provided\n        if (!signingInputHash || !derSignatureBytes || !publicKey) {\n            throw new errors_1.MissingParametersError('a signing input hash, der signature, and public key are all required');\n        }\n        return secp.verify(derSignatureBytes, signingInputHash, publicKey, { strict: false });\n    }\n}\nexports.SECP256K1Client = SECP256K1Client;\nSECP256K1Client.algorithmName = 'ES256K';\n//# sourceMappingURL=secp256k1.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cryptoClients = exports.SECP256K1Client = void 0;\nconst secp256k1_1 = require(\"./secp256k1\");\nObject.defineProperty(exports, \"SECP256K1Client\", { enumerable: true, get: function () { return secp256k1_1.SECP256K1Client; } });\nconst cryptoClients = {\n    ES256K: secp256k1_1.SECP256K1Client,\n};\nexports.cryptoClients = cryptoClients;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hashSha256Async = exports.hashSha256 = void 0;\nconst sha256_1 = require(\"@noble/hashes/sha256\");\nfunction hashSha256(input) {\n    return (0, sha256_1.sha256)(input);\n}\nexports.hashSha256 = hashSha256;\nfunction hashSha256Async(input) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const isSubtleCryptoAvailable = typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n            if (isSubtleCryptoAvailable) {\n                // Use the W3C Web Crypto API if available (running in a web browser).\n                const bytes = typeof input === 'string' ? new TextEncoder().encode(input) : input;\n                const hash = yield crypto.subtle.digest('SHA-256', bytes);\n                return new Uint8Array(hash);\n            }\n            else {\n                // Otherwise try loading the Node.js `crypto` module (running in Node.js, or an older browser with a polyfill).\n                const nodeCrypto = require('crypto');\n                if (!nodeCrypto.createHash) {\n                    throw new Error('`crypto` module does not contain `createHash`');\n                }\n                return Promise.resolve(nodeCrypto.createHash('sha256').update(input).digest());\n            }\n        }\n        catch (error) {\n            console.log(error);\n            console.log('Crypto lib not found. Neither the global `crypto.subtle` Web Crypto API, ' +\n                'nor the or the Node.js `require(\"crypto\").createHash` module is available. ' +\n                'Falling back to JS implementation.');\n            return Promise.resolve(hashSha256(input));\n        }\n    });\n}\nexports.hashSha256Async = hashSha256Async;\n//# sourceMappingURL=sha256.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TokenSigner = exports.createUnsecuredToken = void 0;\nconst base64url = require(\"./base64Url\");\nconst cryptoClients_1 = require(\"./cryptoClients\");\nconst errors_1 = require(\"./errors\");\nconst sha256_1 = require(\"./cryptoClients/sha256\");\nfunction createSigningInput(payload, header) {\n    const tokenParts = [];\n    // add in the header\n    const encodedHeader = base64url.encode(JSON.stringify(header));\n    tokenParts.push(encodedHeader);\n    // add in the payload\n    const encodedPayload = base64url.encode(JSON.stringify(payload));\n    tokenParts.push(encodedPayload);\n    // prepare the message\n    const signingInput = tokenParts.join('.');\n    // return the signing input\n    return signingInput;\n}\nfunction createUnsecuredToken(payload) {\n    const header = { typ: 'JWT', alg: 'none' };\n    return createSigningInput(payload, header) + '.';\n}\nexports.createUnsecuredToken = createUnsecuredToken;\nclass TokenSigner {\n    constructor(signingAlgorithm, rawPrivateKey) {\n        if (!(signingAlgorithm && rawPrivateKey)) {\n            throw new errors_1.MissingParametersError('a signing algorithm and private key are required');\n        }\n        if (typeof signingAlgorithm !== 'string') {\n            throw new Error('signing algorithm parameter must be a string');\n        }\n        signingAlgorithm = signingAlgorithm.toUpperCase();\n        if (!cryptoClients_1.cryptoClients.hasOwnProperty(signingAlgorithm)) {\n            throw new Error('invalid signing algorithm');\n        }\n        this.tokenType = 'JWT';\n        this.cryptoClient = cryptoClients_1.cryptoClients[signingAlgorithm];\n        this.rawPrivateKey = rawPrivateKey;\n    }\n    header(header = {}) {\n        const defaultHeader = { typ: this.tokenType, alg: this.cryptoClient.algorithmName };\n        return Object.assign({}, defaultHeader, header);\n    }\n    sign(payload, expanded = false, customHeader = {}) {\n        // generate the token header\n        const header = this.header(customHeader);\n        // prepare the message to be signed\n        const signingInput = createSigningInput(payload, header);\n        const signingInputHash = (0, sha256_1.hashSha256)(signingInput);\n        return this.createWithSignedHash(payload, expanded, header, signingInput, signingInputHash);\n    }\n    signAsync(payload, expanded = false, customHeader = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // generate the token header\n            const header = this.header(customHeader);\n            // prepare the message to be signed\n            const signingInput = createSigningInput(payload, header);\n            const signingInputHash = yield (0, sha256_1.hashSha256Async)(signingInput);\n            return this.createWithSignedHash(payload, expanded, header, signingInput, signingInputHash);\n        });\n    }\n    createWithSignedHash(payload, expanded, header, signingInput, signingInputHash) {\n        // sign the message and add in the signature\n        const signature = this.cryptoClient.signHash(signingInputHash, this.rawPrivateKey);\n        if (expanded) {\n            const signedToken = {\n                header: [base64url.encode(JSON.stringify(header))],\n                payload: JSON.stringify(payload),\n                signature: [signature],\n            };\n            return signedToken;\n        }\n        else {\n            return [signingInput, signature].join('.');\n        }\n    }\n}\nexports.TokenSigner = TokenSigner;\n//# sourceMappingURL=signer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TokenVerifier = void 0;\nconst base64url = require(\"./base64Url\");\nconst cryptoClients_1 = require(\"./cryptoClients\");\nconst errors_1 = require(\"./errors\");\nconst sha256_1 = require(\"./cryptoClients/sha256\");\nclass TokenVerifier {\n    constructor(signingAlgorithm, rawPublicKey) {\n        if (!(signingAlgorithm && rawPublicKey)) {\n            throw new errors_1.MissingParametersError('a signing algorithm and public key are required');\n        }\n        if (typeof signingAlgorithm !== 'string') {\n            throw 'signing algorithm parameter must be a string';\n        }\n        signingAlgorithm = signingAlgorithm.toUpperCase();\n        if (!cryptoClients_1.cryptoClients.hasOwnProperty(signingAlgorithm)) {\n            throw 'invalid signing algorithm';\n        }\n        this.tokenType = 'JWT';\n        this.cryptoClient = cryptoClients_1.cryptoClients[signingAlgorithm];\n        this.rawPublicKey = rawPublicKey;\n    }\n    verify(token) {\n        if (typeof token === 'string') {\n            return this.verifyCompact(token, false);\n        }\n        else if (typeof token === 'object') {\n            return this.verifyExpanded(token, false);\n        }\n        else {\n            return false;\n        }\n    }\n    verifyAsync(token) {\n        if (typeof token === 'string') {\n            return this.verifyCompact(token, true);\n        }\n        else if (typeof token === 'object') {\n            return this.verifyExpanded(token, true);\n        }\n        else {\n            return Promise.resolve(false);\n        }\n    }\n    verifyCompact(token, async) {\n        // decompose the token into parts\n        const tokenParts = token.split('.');\n        // calculate the signing input hash\n        const signingInput = tokenParts[0] + '.' + tokenParts[1];\n        const performVerify = (signingInputHash) => {\n            // extract the signature as a DER array\n            const derSignatureBytes = this.cryptoClient.loadSignature(tokenParts[2]);\n            // verify the signed hash\n            return this.cryptoClient.verifyHash(signingInputHash, derSignatureBytes, this.rawPublicKey);\n        };\n        if (async) {\n            return (0, sha256_1.hashSha256Async)(signingInput).then(signingInputHash => performVerify(signingInputHash));\n        }\n        else {\n            const signingInputHash = (0, sha256_1.hashSha256)(signingInput);\n            return performVerify(signingInputHash);\n        }\n    }\n    verifyExpanded(token, async) {\n        const signingInput = [token['header'].join('.'), base64url.encode(token['payload'])].join('.');\n        let verified = true;\n        const performVerify = (signingInputHash) => {\n            token['signature'].map((signature) => {\n                const derSignatureBytes = this.cryptoClient.loadSignature(signature);\n                const signatureVerified = this.cryptoClient.verifyHash(signingInputHash, derSignatureBytes, this.rawPublicKey);\n                if (!signatureVerified) {\n                    verified = false;\n                }\n            });\n            return verified;\n        };\n        if (async) {\n            return (0, sha256_1.hashSha256Async)(signingInput).then(signingInputHash => performVerify(signingInputHash));\n        }\n        else {\n            const signingInputHash = (0, sha256_1.hashSha256)(signingInput);\n            return performVerify(signingInputHash);\n        }\n    }\n}\nexports.TokenVerifier = TokenVerifier;\n//# sourceMappingURL=verifier.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeToken = void 0;\nconst base64url = require(\"./base64Url\");\nfunction decodeToken(token) {\n    if (typeof token === 'string') {\n        // decompose the token into parts\n        const tokenParts = token.split('.');\n        const header = JSON.parse(base64url.decode(tokenParts[0]));\n        const payload = JSON.parse(base64url.decode(tokenParts[1]));\n        const signature = tokenParts[2];\n        // return the token object\n        return {\n            header: header,\n            payload: payload,\n            signature: signature,\n        };\n    }\n    else if (typeof token === 'object') {\n        if (typeof token.payload !== 'string') {\n            throw new Error('Expected token payload to be a base64 or json string');\n        }\n        let payload = token.payload;\n        if (token.payload[0] !== '{') {\n            payload = base64url.decode(payload);\n        }\n        const allHeaders = [];\n        token.header.map((headerValue) => {\n            const header = JSON.parse(base64url.decode(headerValue));\n            allHeaders.push(header);\n        });\n        return {\n            header: allHeaders,\n            payload: JSON.parse(payload),\n            signature: token.signature,\n        };\n    }\n}\nexports.decodeToken = decodeToken;\n//# sourceMappingURL=decode.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./signer\"), exports);\n__exportStar(require(\"./verifier\"), exports);\n__exportStar(require(\"./decode\"), exports);\n__exportStar(require(\"./errors\"), exports);\n__exportStar(require(\"./cryptoClients\"), exports);\n//# sourceMappingURL=index.js.map","import { InvalidDIDError } from '@stacks/common';\nexport function makeDIDFromAddress(address) {\n    return `did:btc-addr:${address}`;\n}\nexport function makeDIDFromPublicKey(publicKey) {\n    return `did:ecdsa-pub:${publicKey}`;\n}\nexport function getDIDType(decentralizedID) {\n    const didParts = decentralizedID.split(':');\n    if (didParts.length !== 3) {\n        throw new InvalidDIDError('Decentralized IDs must have 3 parts');\n    }\n    if (didParts[0].toLowerCase() !== 'did') {\n        throw new InvalidDIDError('Decentralized IDs must start with \"did\"');\n    }\n    return didParts[1].toLowerCase();\n}\nexport function getAddressFromDID(decentralizedID) {\n    if (decentralizedID) {\n        const didType = getDIDType(decentralizedID);\n        if (didType === 'btc-addr') {\n            return decentralizedID.split(':')[2];\n        }\n        else {\n            return undefined;\n        }\n    }\n    return undefined;\n}\n//# sourceMappingURL=dids.js.map","import { bytesToHex, bytesToUtf8, getGlobalObject, hexToBytes, makeUUID4, nextMonth, utf8ToBytes, } from '@stacks/common';\nimport { decryptECIES, encryptECIES, makeECPrivateKey, publicKeyToBtcAddress, } from '@stacks/encryption';\nimport { SECP256K1Client, TokenSigner } from 'jsontokens';\nimport { DEFAULT_SCOPE } from './constants';\nimport { makeDIDFromAddress } from './dids';\nconst VERSION = '1.4.0';\nexport function generateTransitKey() {\n    const transitKey = makeECPrivateKey();\n    return transitKey;\n}\nexport const makeAuthRequest = makeAuthRequestToken;\nexport function makeAuthRequestToken(transitPrivateKey, redirectURI, manifestURI, scopes = DEFAULT_SCOPE.slice(), appDomain, expiresAt = nextMonth().getTime(), extraParams = {}) {\n    const getWindowOrigin = (paramName) => {\n        const location = getGlobalObject('location', {\n            throwIfUnavailable: true,\n            usageDesc: `makeAuthRequest([${paramName}=undefined])`,\n        });\n        return location?.origin;\n    };\n    if (!redirectURI) {\n        redirectURI = `${getWindowOrigin('redirectURI')}/`;\n    }\n    if (!manifestURI) {\n        manifestURI = `${getWindowOrigin('manifestURI')}/manifest.json`;\n    }\n    if (!appDomain) {\n        appDomain = getWindowOrigin('appDomain');\n    }\n    const payload = Object.assign({}, extraParams, {\n        jti: makeUUID4(),\n        iat: Math.floor(new Date().getTime() / 1000),\n        exp: Math.floor(expiresAt / 1000),\n        iss: null,\n        public_keys: [],\n        domain_name: appDomain,\n        manifest_uri: manifestURI,\n        redirect_uri: redirectURI,\n        version: VERSION,\n        do_not_include_profile: true,\n        supports_hub_url: true,\n        scopes,\n    });\n    const publicKey = SECP256K1Client.derivePublicKey(transitPrivateKey);\n    payload.public_keys = [publicKey];\n    const address = publicKeyToBtcAddress(publicKey);\n    payload.iss = makeDIDFromAddress(address);\n    const tokenSigner = new TokenSigner('ES256k', transitPrivateKey);\n    const token = tokenSigner.sign(payload);\n    return token;\n}\nexport async function encryptPrivateKey(publicKey, privateKey) {\n    const encryptedObj = await encryptECIES(publicKey, utf8ToBytes(privateKey), true);\n    const encryptedJSON = JSON.stringify(encryptedObj);\n    return bytesToHex(utf8ToBytes(encryptedJSON));\n}\nexport async function decryptPrivateKey(privateKey, hexedEncrypted) {\n    const unhexedString = bytesToUtf8(hexToBytes(hexedEncrypted));\n    const encryptedObj = JSON.parse(unhexedString);\n    const decrypted = await decryptECIES(privateKey, encryptedObj);\n    if (typeof decrypted !== 'string') {\n        throw new Error('Unable to correctly decrypt private key');\n    }\n    else {\n        return decrypted;\n    }\n}\nexport async function makeAuthResponse(privateKey, profile = {}, metadata, coreToken = null, appPrivateKey = null, expiresAt = nextMonth().getTime(), transitPublicKey = null, hubUrl = null, blockstackAPIUrl = null, associationToken = null, appPrivateKeyFromWalletSalt = null) {\n    const publicKey = SECP256K1Client.derivePublicKey(privateKey);\n    const address = publicKeyToBtcAddress(publicKey);\n    let privateKeyPayload = appPrivateKey;\n    let coreTokenPayload = coreToken;\n    let additionalProperties = {};\n    if (appPrivateKey !== undefined && appPrivateKey !== null) {\n        if (transitPublicKey !== undefined && transitPublicKey !== null) {\n            privateKeyPayload = await encryptPrivateKey(transitPublicKey, appPrivateKey);\n            if (coreToken !== undefined && coreToken !== null) {\n                coreTokenPayload = await encryptPrivateKey(transitPublicKey, coreToken);\n            }\n        }\n        additionalProperties = {\n            email: metadata?.email ? metadata.email : null,\n            profile_url: metadata?.profileUrl ? metadata.profileUrl : null,\n            hubUrl,\n            blockstackAPIUrl,\n            associationToken,\n            version: VERSION,\n        };\n    }\n    else {\n    }\n    const payload = Object.assign({}, {\n        jti: makeUUID4(),\n        iat: Math.floor(new Date().getTime() / 1000),\n        exp: Math.floor(expiresAt / 1000),\n        iss: makeDIDFromAddress(address),\n        private_key: privateKeyPayload,\n        public_keys: [publicKey],\n        appPrivateKeyFromWalletSalt,\n        profile,\n        core_token: coreTokenPayload,\n    }, additionalProperties);\n    const tokenSigner = new TokenSigner('ES256k', privateKey);\n    return tokenSigner.sign(payload);\n}\n//# sourceMappingURL=messages.js.map","import { isSameOriginAbsoluteUrl } from '@stacks/common';\nimport { publicKeyToBtcAddress } from '@stacks/encryption';\nimport { decodeToken, TokenVerifier } from 'jsontokens';\nimport { getAddressFromDID } from './dids';\nimport { fetchAppManifest } from './provider';\nexport function doSignaturesMatchPublicKeys(token) {\n    const payload = decodeToken(token).payload;\n    if (typeof payload === 'string') {\n        throw new Error('Unexpected token payload type of string');\n    }\n    const publicKeys = payload.public_keys;\n    if (publicKeys.length === 1) {\n        const publicKey = publicKeys[0];\n        try {\n            const tokenVerifier = new TokenVerifier('ES256k', publicKey);\n            return tokenVerifier.verify(token);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    else {\n        throw new Error('Multiple public keys are not supported');\n    }\n}\nexport function doPublicKeysMatchIssuer(token) {\n    const payload = decodeToken(token).payload;\n    if (typeof payload === 'string') {\n        throw new Error('Unexpected token payload type of string');\n    }\n    const publicKeys = payload.public_keys;\n    const addressFromIssuer = getAddressFromDID(payload.iss);\n    if (publicKeys.length === 1) {\n        const addressFromPublicKeys = publicKeyToBtcAddress(publicKeys[0]);\n        if (addressFromPublicKeys === addressFromIssuer) {\n            return true;\n        }\n    }\n    else {\n        throw new Error('Multiple public keys are not supported');\n    }\n    return false;\n}\nexport function isIssuanceDateValid(token) {\n    const payload = decodeToken(token).payload;\n    if (typeof payload === 'string') {\n        throw new Error('Unexpected token payload type of string');\n    }\n    if (payload.iat) {\n        if (typeof payload.iat !== 'number') {\n            return false;\n        }\n        const issuedAt = new Date(payload.iat * 1000);\n        if (new Date().getTime() < issuedAt.getTime()) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    }\n    else {\n        return true;\n    }\n}\nexport function isExpirationDateValid(token) {\n    const payload = decodeToken(token).payload;\n    if (typeof payload === 'string') {\n        throw new Error('Unexpected token payload type of string');\n    }\n    if (payload.exp) {\n        if (typeof payload.exp !== 'number') {\n            return false;\n        }\n        const expiresAt = new Date(payload.exp * 1000);\n        if (new Date().getTime() > expiresAt.getTime()) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    }\n    else {\n        return true;\n    }\n}\nexport function isManifestUriValid(token) {\n    const payload = decodeToken(token).payload;\n    if (typeof payload === 'string') {\n        throw new Error('Unexpected token payload type of string');\n    }\n    return isSameOriginAbsoluteUrl(payload.domain_name, payload.manifest_uri);\n}\nexport function isRedirectUriValid(token) {\n    const payload = decodeToken(token).payload;\n    if (typeof payload === 'string') {\n        throw new Error('Unexpected token payload type of string');\n    }\n    return isSameOriginAbsoluteUrl(payload.domain_name, payload.redirect_uri);\n}\nexport async function verifyAuthRequest(token) {\n    if (decodeToken(token).header.alg === 'none') {\n        throw new Error('Token must be signed in order to be verified');\n    }\n    const values = await Promise.all([\n        isExpirationDateValid(token),\n        isIssuanceDateValid(token),\n        doSignaturesMatchPublicKeys(token),\n        doPublicKeysMatchIssuer(token),\n        isManifestUriValid(token),\n        isRedirectUriValid(token),\n    ]);\n    return values.every(val => val);\n}\nexport async function verifyAuthRequestAndLoadManifest(token) {\n    const valid = await verifyAuthRequest(token);\n    if (!valid) {\n        throw new Error('Token is an invalid auth request');\n    }\n    return fetchAppManifest(token);\n}\nexport async function verifyAuthResponse(token) {\n    const conditions = await Promise.all([\n        isExpirationDateValid(token),\n        isIssuanceDateValid(token),\n        doSignaturesMatchPublicKeys(token),\n        doPublicKeysMatchIssuer(token),\n    ]);\n    return conditions.every(val => val);\n}\n//# sourceMappingURL=verification.js.map","import { InvalidStateError } from '@stacks/common';\nconst SESSION_VERSION = '1.0.0';\nexport class SessionData {\n    constructor(options) {\n        this.version = SESSION_VERSION;\n        this.userData = options.userData;\n        this.transitKey = options.transitKey;\n        this.etags = options.etags ? options.etags : {};\n    }\n    static fromJSON(json) {\n        if (json.version !== SESSION_VERSION) {\n            throw new InvalidStateError(`JSON data version ${json.version} not supported by SessionData`);\n        }\n        const options = {\n            coreNode: json.coreNode,\n            userData: json.userData,\n            transitKey: json.transitKey,\n            etags: json.etags,\n        };\n        return new SessionData(options);\n    }\n    toString() {\n        return JSON.stringify(this);\n    }\n}\n//# sourceMappingURL=sessionData.js.map","import { SessionData } from './sessionData';\nimport { LOCALSTORAGE_SESSION_KEY } from './constants';\nimport { NoSessionDataError } from '@stacks/common';\nexport class SessionDataStore {\n    constructor(sessionOptions) {\n        if (sessionOptions) {\n            const newSessionData = new SessionData(sessionOptions);\n            this.setSessionData(newSessionData);\n        }\n    }\n    getSessionData() {\n        throw new Error('Abstract class');\n    }\n    setSessionData(_session) {\n        throw new Error('Abstract class');\n    }\n    deleteSessionData() {\n        throw new Error('Abstract class');\n    }\n}\nexport class InstanceDataStore extends SessionDataStore {\n    constructor(sessionOptions) {\n        super(sessionOptions);\n        if (!this.sessionData) {\n            this.setSessionData(new SessionData({}));\n        }\n    }\n    getSessionData() {\n        if (!this.sessionData) {\n            throw new NoSessionDataError('No session data was found.');\n        }\n        return this.sessionData;\n    }\n    setSessionData(session) {\n        this.sessionData = session;\n        return true;\n    }\n    deleteSessionData() {\n        this.setSessionData(new SessionData({}));\n        return true;\n    }\n}\nexport class LocalStorageStore extends SessionDataStore {\n    constructor(sessionOptions) {\n        super(sessionOptions);\n        if (sessionOptions &&\n            sessionOptions.storeOptions &&\n            sessionOptions.storeOptions.localStorageKey &&\n            typeof sessionOptions.storeOptions.localStorageKey === 'string') {\n            this.key = sessionOptions.storeOptions.localStorageKey;\n        }\n        else {\n            this.key = LOCALSTORAGE_SESSION_KEY;\n        }\n        const data = localStorage.getItem(this.key);\n        if (!data) {\n            const sessionData = new SessionData({});\n            this.setSessionData(sessionData);\n        }\n    }\n    getSessionData() {\n        const data = localStorage.getItem(this.key);\n        if (!data) {\n            throw new NoSessionDataError('No session data was found in localStorage');\n        }\n        const dataJSON = JSON.parse(data);\n        return SessionData.fromJSON(dataJSON);\n    }\n    setSessionData(session) {\n        localStorage.setItem(this.key, session.toString());\n        return true;\n    }\n    deleteSessionData() {\n        localStorage.removeItem(this.key);\n        this.setSessionData(new SessionData({}));\n        return true;\n    }\n}\n//# sourceMappingURL=sessionStore.js.map","import { Logger } from './logger';\nexport const BLOCKSTACK_HANDLER = 'blockstack';\nexport function nextYear() {\n    return new Date(new Date().setFullYear(new Date().getFullYear() + 1));\n}\nexport function nextMonth() {\n    return new Date(new Date().setMonth(new Date().getMonth() + 1));\n}\nexport function nextHour() {\n    return new Date(new Date().setHours(new Date().getHours() + 1));\n}\nexport function megabytesToBytes(megabytes) {\n    if (!Number.isFinite(megabytes)) {\n        return 0;\n    }\n    return Math.floor(megabytes * 1024 * 1024);\n}\nexport function getAesCbcOutputLength(inputByteLength) {\n    const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\n    return cipherTextLength;\n}\nexport function getBase64OutputLength(inputByteLength) {\n    const encodedLength = Math.ceil(inputByteLength / 3) * 4;\n    return encodedLength;\n}\nexport function updateQueryStringParameter(uri, key, value) {\n    const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i');\n    const separator = uri.indexOf('?') !== -1 ? '&' : '?';\n    if (uri.match(re)) {\n        return uri.replace(re, `$1${key}=${value}$2`);\n    }\n    else {\n        return `${uri}${separator}${key}=${value}`;\n    }\n}\nexport function isLaterVersion(v1, v2) {\n    if (v1 === undefined || v1 === '') {\n        v1 = '0.0.0';\n    }\n    if (v2 === undefined || v1 === '') {\n        v2 = '0.0.0';\n    }\n    const v1tuple = v1.split('.').map(x => parseInt(x, 10));\n    const v2tuple = v2.split('.').map(x => parseInt(x, 10));\n    for (let index = 0; index < v2.length; index++) {\n        if (index >= v1.length) {\n            v2tuple.push(0);\n        }\n        if (v1tuple[index] < v2tuple[index]) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function makeUUID4() {\n    let d = new Date().getTime();\n    if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n        d += performance.now();\n    }\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n        const r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n    });\n}\nexport function isSameOriginAbsoluteUrl(uri1, uri2) {\n    try {\n        const parsedUri1 = new URL(uri1);\n        const parsedUri2 = new URL(uri2);\n        const port1 = parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80);\n        const port2 = parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80);\n        const match = {\n            scheme: parsedUri1.protocol === parsedUri2.protocol,\n            hostname: parsedUri1.hostname === parsedUri2.hostname,\n            port: port1 === port2,\n            absolute: (uri1.includes('http://') || uri1.includes('https://')) &&\n                (uri2.includes('http://') || uri2.includes('https://')),\n        };\n        return match.scheme && match.hostname && match.port && match.absolute;\n    }\n    catch (error) {\n        console.log(error);\n        console.log('Parsing error in same URL origin check');\n        return false;\n    }\n}\nexport function getGlobalScope() {\n    if (typeof self !== 'undefined') {\n        return self;\n    }\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    throw new Error('Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available');\n}\nfunction getAPIUsageErrorMessage(scopeObject, apiName, usageDesc) {\n    if (usageDesc) {\n        return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n    }\n    else {\n        return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n    }\n}\nexport function getGlobalObject(name, { throwIfUnavailable, usageDesc, returnEmptyObject } = {}) {\n    let globalScope = undefined;\n    try {\n        globalScope = getGlobalScope();\n        if (globalScope) {\n            const obj = globalScope[name];\n            if (obj) {\n                return obj;\n            }\n        }\n    }\n    catch (error) {\n        Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`);\n    }\n    if (throwIfUnavailable) {\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n        Logger.error(errMsg);\n        throw new Error(errMsg);\n    }\n    if (returnEmptyObject) {\n        return {};\n    }\n    return undefined;\n}\nexport function getGlobalObjects(names, { throwIfUnavailable, usageDesc, returnEmptyObject } = {}) {\n    let globalScope;\n    try {\n        globalScope = getGlobalScope();\n    }\n    catch (error) {\n        Logger.error(`Error getting global scope: ${error}`);\n        if (throwIfUnavailable) {\n            const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc);\n            Logger.error(errMsg);\n            throw errMsg;\n        }\n        else if (returnEmptyObject) {\n            globalScope = {};\n        }\n    }\n    const result = {};\n    for (let i = 0; i < names.length; i++) {\n        const name = names[i];\n        try {\n            if (globalScope) {\n                const obj = globalScope[name];\n                if (obj) {\n                    result[name] = obj;\n                }\n                else if (throwIfUnavailable) {\n                    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n                    Logger.error(errMsg);\n                    throw new Error(errMsg);\n                }\n                else if (returnEmptyObject) {\n                    result[name] = {};\n                }\n            }\n        }\n        catch (error) {\n            if (throwIfUnavailable) {\n                const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n                Logger.error(errMsg);\n                throw new Error(errMsg);\n            }\n        }\n    }\n    return result;\n}\nexport function intToBytes(value, byteLength) {\n    return bigIntToBytes(intToBigInt(value), byteLength);\n}\nexport function intToBigInt(value) {\n    if (typeof value === 'bigint')\n        return value;\n    if (typeof value === 'string')\n        return BigInt(value);\n    if (typeof value === 'number') {\n        if (!Number.isInteger(value)) {\n            throw new RangeError(`Invalid value. Values of type 'number' must be an integer.`);\n        }\n        if (value > Number.MAX_SAFE_INTEGER) {\n            throw new RangeError(`Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`);\n        }\n        return BigInt(value);\n    }\n    if (isInstance(value, Uint8Array))\n        return BigInt(`0x${bytesToHex(value)}`);\n    throw new TypeError(`intToBigInt: Invalid value type. Must be a number, bigint, BigInt-compatible string, or Uint8Array.`);\n}\nexport function with0x(value) {\n    return /^0x/i.test(value)\n        ? value\n        : `0x${value}`;\n}\nexport function without0x(value) {\n    return /^0x/i.test(value)\n        ? value.slice(2)\n        : value;\n}\nexport function hexToBigInt(hex) {\n    if (typeof hex !== 'string')\n        throw new TypeError(`hexToBigInt: expected string, got ${typeof hex}`);\n    return BigInt(`0x${hex}`);\n}\nexport function intToHex(integer, byteLength = 8) {\n    const value = typeof integer === 'bigint' ? integer : intToBigInt(integer);\n    return value.toString(16).padStart(byteLength * 2, '0');\n}\nexport function hexToInt(hex) {\n    return parseInt(hex, 16);\n}\nexport function bigIntToBytes(value, length = 16) {\n    const hex = intToHex(value, length);\n    return hexToBytes(hex);\n}\nexport function toTwos(value, width) {\n    if (value < -(BigInt(1) << (width - BigInt(1))) ||\n        (BigInt(1) << (width - BigInt(1))) - BigInt(1) < value) {\n        throw `Unable to represent integer in width: ${width}`;\n    }\n    if (value >= BigInt(0)) {\n        return BigInt(value);\n    }\n    return value + (BigInt(1) << width);\n}\nfunction nthBit(value, n) {\n    return value & (BigInt(1) << n);\n}\nexport function bytesToTwosBigInt(bytes) {\n    return fromTwos(BigInt(`0x${bytesToHex(bytes)}`), BigInt(bytes.byteLength * 8));\n}\nexport function fromTwos(value, width) {\n    if (nthBit(value, width - BigInt(1))) {\n        return value - (BigInt(1) << width);\n    }\n    return value;\n}\nconst hexes = Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\nexport function bytesToHex(uint8a) {\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n    let hex = '';\n    for (const u of uint8a) {\n        hex += hexes[u];\n    }\n    return hex;\n}\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError(`hexToBytes: expected string, got ${typeof hex}`);\n    }\n    hex = without0x(hex);\n    hex = hex.length % 2 ? `0${hex}` : hex;\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\nexport function utf8ToBytes(str) {\n    return new TextEncoder().encode(str);\n}\nexport function bytesToUtf8(arr) {\n    return new TextDecoder().decode(arr);\n}\nexport function asciiToBytes(str) {\n    const byteArray = [];\n    for (let i = 0; i < str.length; i++) {\n        byteArray.push(str.charCodeAt(i) & 0xff);\n    }\n    return new Uint8Array(byteArray);\n}\nexport function bytesToAscii(arr) {\n    return String.fromCharCode.apply(null, arr);\n}\nfunction isNotOctet(octet) {\n    return !Number.isInteger(octet) || octet < 0 || octet > 255;\n}\nexport function octetsToBytes(numbers) {\n    if (numbers.some(isNotOctet))\n        throw new Error('Some values are invalid bytes.');\n    return new Uint8Array(numbers);\n}\nexport function concatBytes(...arrays) {\n    if (!arrays.every(a => a instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\nexport function concatArray(elements) {\n    return concatBytes(...elements.map(e => {\n        if (typeof e === 'number')\n            return octetsToBytes([e]);\n        if (e instanceof Array)\n            return octetsToBytes(e);\n        return e;\n    }));\n}\nexport function isInstance(object, clazz) {\n    return object instanceof clazz || object?.constructor?.name?.toLowerCase() === clazz.name;\n}\nexport function validateHash256(hex) {\n    hex = without0x(hex);\n    if (hex.length !== 64)\n        return false;\n    return /^[0-9a-fA-F]+$/.test(hex);\n}\n//# sourceMappingURL=utils.js.map","export const HIRO_MAINNET_URL = 'https://api.mainnet.hiro.so';\nexport const HIRO_TESTNET_URL = 'https://api.testnet.hiro.so';\nexport const DEVNET_URL = 'http://localhost:3999';\nexport const GAIA_URL = 'https://hub.blockstack.org';\nexport const PRIVATE_KEY_BYTES_COMPRESSED = 33;\nexport const PRIVATE_KEY_BYTES_UNCOMPRESSED = 32;\n//# sourceMappingURL=constants.js.map","export var ChainId;\n(function (ChainId) {\n    ChainId[ChainId[\"Mainnet\"] = 1] = \"Mainnet\";\n    ChainId[ChainId[\"Testnet\"] = 2147483648] = \"Testnet\";\n})(ChainId || (ChainId = {}));\nexport var PeerNetworkId;\n(function (PeerNetworkId) {\n    PeerNetworkId[PeerNetworkId[\"Mainnet\"] = 385875968] = \"Mainnet\";\n    PeerNetworkId[PeerNetworkId[\"Testnet\"] = 4278190080] = \"Testnet\";\n})(PeerNetworkId || (PeerNetworkId = {}));\nexport const DEFAULT_CHAIN_ID = ChainId.Mainnet;\nexport var TransactionVersion;\n(function (TransactionVersion) {\n    TransactionVersion[TransactionVersion[\"Mainnet\"] = 0] = \"Mainnet\";\n    TransactionVersion[TransactionVersion[\"Testnet\"] = 128] = \"Testnet\";\n})(TransactionVersion || (TransactionVersion = {}));\nexport var AddressVersion;\n(function (AddressVersion) {\n    AddressVersion[AddressVersion[\"MainnetSingleSig\"] = 22] = \"MainnetSingleSig\";\n    AddressVersion[AddressVersion[\"MainnetMultiSig\"] = 20] = \"MainnetMultiSig\";\n    AddressVersion[AddressVersion[\"TestnetSingleSig\"] = 26] = \"TestnetSingleSig\";\n    AddressVersion[AddressVersion[\"TestnetMultiSig\"] = 21] = \"TestnetMultiSig\";\n})(AddressVersion || (AddressVersion = {}));\nexport const DEFAULT_TRANSACTION_VERSION = TransactionVersion.Mainnet;\nexport function whenTransactionVersion(transactionVersion) {\n    return (map) => map[transactionVersion];\n}\n//# sourceMappingURL=constants.js.map","import { DEVNET_URL, HIRO_MAINNET_URL, HIRO_TESTNET_URL, createFetchFn, createApiKeyMiddleware, } from '@stacks/common';\nimport { AddressVersion, ChainId, PeerNetworkId, TransactionVersion } from './constants';\nexport const STACKS_MAINNET = {\n    chainId: ChainId.Mainnet,\n    transactionVersion: TransactionVersion.Mainnet,\n    peerNetworkId: PeerNetworkId.Mainnet,\n    magicBytes: 'X2',\n    bootAddress: 'SP000000000000000000002Q6VF78',\n    addressVersion: {\n        singleSig: AddressVersion.MainnetSingleSig,\n        multiSig: AddressVersion.MainnetMultiSig,\n    },\n    client: { baseUrl: HIRO_MAINNET_URL },\n};\nexport const STACKS_TESTNET = {\n    chainId: ChainId.Testnet,\n    transactionVersion: TransactionVersion.Testnet,\n    peerNetworkId: PeerNetworkId.Testnet,\n    magicBytes: 'T2',\n    bootAddress: 'ST000000000000000000002AMW42H',\n    addressVersion: {\n        singleSig: AddressVersion.TestnetSingleSig,\n        multiSig: AddressVersion.TestnetMultiSig,\n    },\n    client: { baseUrl: HIRO_TESTNET_URL },\n};\nexport const STACKS_DEVNET = {\n    ...STACKS_TESTNET,\n    addressVersion: { ...STACKS_TESTNET.addressVersion },\n    magicBytes: 'id',\n    client: { baseUrl: DEVNET_URL },\n};\nexport const STACKS_MOCKNET = {\n    ...STACKS_DEVNET,\n    addressVersion: { ...STACKS_DEVNET.addressVersion },\n    client: { ...STACKS_DEVNET.client },\n};\nexport const StacksNetworks = ['mainnet', 'testnet', 'devnet', 'mocknet'];\nexport function networkFromName(name) {\n    switch (name) {\n        case 'mainnet':\n            return STACKS_MAINNET;\n        case 'testnet':\n            return STACKS_TESTNET;\n        case 'devnet':\n            return STACKS_DEVNET;\n        case 'mocknet':\n            return STACKS_MOCKNET;\n        default:\n            throw new Error(`Unknown network name: ${name}`);\n    }\n}\nexport function networkFrom(network) {\n    if (typeof network === 'string')\n        return networkFromName(network);\n    return network;\n}\nexport function defaultUrlFromNetwork(network) {\n    if (!network)\n        return HIRO_MAINNET_URL;\n    network = networkFrom(network);\n    return !network || network.transactionVersion === TransactionVersion.Mainnet\n        ? HIRO_MAINNET_URL\n        : network.magicBytes === 'id'\n            ? DEVNET_URL\n            : HIRO_TESTNET_URL;\n}\nexport function clientFromNetwork(network) {\n    if (network.client.fetch)\n        return network.client;\n    return {\n        ...network.client,\n        fetch: createFetchFn(),\n    };\n}\nexport function createNetwork(arg1, arg2) {\n    const baseNetwork = networkFrom(typeof arg1 === 'object' && 'network' in arg1 ? arg1.network : arg1);\n    const newNetwork = {\n        ...baseNetwork,\n        addressVersion: { ...baseNetwork.addressVersion },\n        client: { ...baseNetwork.client },\n    };\n    if (typeof arg1 === 'object' && 'network' in arg1) {\n        if (arg1.client) {\n            newNetwork.client.baseUrl = arg1.client.baseUrl ?? newNetwork.client.baseUrl;\n            newNetwork.client.fetch = arg1.client.fetch ?? newNetwork.client.fetch;\n        }\n        if (typeof arg1.apiKey === 'string') {\n            const middleware = createApiKeyMiddleware(arg1);\n            newNetwork.client.fetch = newNetwork.client.fetch\n                ? createFetchFn(newNetwork.client.fetch, middleware)\n                : createFetchFn(middleware);\n        }\n        return newNetwork;\n    }\n    if (typeof arg2 === 'string') {\n        const middleware = createApiKeyMiddleware({ apiKey: arg2 });\n        newNetwork.client.fetch = newNetwork.client.fetch\n            ? createFetchFn(newNetwork.client.fetch, middleware)\n            : createFetchFn(middleware);\n        return newNetwork;\n    }\n    return newNetwork;\n}\n//# sourceMappingURL=network.js.map","export const BLOCKSTACK_DEFAULT_GAIA_HUB_URL = 'https://hub.blockstack.org';\nexport const MAX_STRING_LENGTH_BYTES = 128;\nexport const CLARITY_INT_SIZE = 128;\nexport const CLARITY_INT_BYTE_SIZE = 16;\nexport const COINBASE_BYTES_LENGTH = 32;\nexport const VRF_PROOF_BYTES_LENGTH = 80;\nexport const RECOVERABLE_ECDSA_SIG_LENGTH_BYTES = 65;\nexport const COMPRESSED_PUBKEY_LENGTH_BYTES = 32;\nexport const UNCOMPRESSED_PUBKEY_LENGTH_BYTES = 64;\nexport const MEMO_MAX_LENGTH_BYTES = 34;\nconst MAX_PAYLOAD_LEN = 1 + 16 * 1024 * 1024;\nconst PREAMBLE_ENCODED_SIZE = 165;\nconst MAX_RELAYERS_LEN = 16;\nconst PEER_ADDRESS_ENCODED_SIZE = 16;\nconst HASH160_ENCODED_SIZE = 20;\nconst NEIGHBOR_ADDRESS_ENCODED_SIZE = PEER_ADDRESS_ENCODED_SIZE + 2 + HASH160_ENCODED_SIZE;\nconst RELAY_DATA_ENCODED_SIZE = NEIGHBOR_ADDRESS_ENCODED_SIZE + 4;\nexport const STRING_MAX_LENGTH = MAX_PAYLOAD_LEN + (PREAMBLE_ENCODED_SIZE + MAX_RELAYERS_LEN * RELAY_DATA_ENCODED_SIZE);\nexport var PayloadType;\n(function (PayloadType) {\n    PayloadType[PayloadType[\"TokenTransfer\"] = 0] = \"TokenTransfer\";\n    PayloadType[PayloadType[\"SmartContract\"] = 1] = \"SmartContract\";\n    PayloadType[PayloadType[\"VersionedSmartContract\"] = 6] = \"VersionedSmartContract\";\n    PayloadType[PayloadType[\"ContractCall\"] = 2] = \"ContractCall\";\n    PayloadType[PayloadType[\"PoisonMicroblock\"] = 3] = \"PoisonMicroblock\";\n    PayloadType[PayloadType[\"Coinbase\"] = 4] = \"Coinbase\";\n    PayloadType[PayloadType[\"CoinbaseToAltRecipient\"] = 5] = \"CoinbaseToAltRecipient\";\n    PayloadType[PayloadType[\"TenureChange\"] = 7] = \"TenureChange\";\n    PayloadType[PayloadType[\"NakamotoCoinbase\"] = 8] = \"NakamotoCoinbase\";\n})(PayloadType || (PayloadType = {}));\nexport var ClarityVersion;\n(function (ClarityVersion) {\n    ClarityVersion[ClarityVersion[\"Clarity1\"] = 1] = \"Clarity1\";\n    ClarityVersion[ClarityVersion[\"Clarity2\"] = 2] = \"Clarity2\";\n    ClarityVersion[ClarityVersion[\"Clarity3\"] = 3] = \"Clarity3\";\n})(ClarityVersion || (ClarityVersion = {}));\nexport var AnchorMode;\n(function (AnchorMode) {\n    AnchorMode[AnchorMode[\"OnChainOnly\"] = 1] = \"OnChainOnly\";\n    AnchorMode[AnchorMode[\"OffChainOnly\"] = 2] = \"OffChainOnly\";\n    AnchorMode[AnchorMode[\"Any\"] = 3] = \"Any\";\n})(AnchorMode || (AnchorMode = {}));\nexport const AnchorModeNames = ['onChainOnly', 'offChainOnly', 'any'];\nconst AnchorModeMap = {\n    [AnchorModeNames[0]]: AnchorMode.OnChainOnly,\n    [AnchorModeNames[1]]: AnchorMode.OffChainOnly,\n    [AnchorModeNames[2]]: AnchorMode.Any,\n    [AnchorMode.OnChainOnly]: AnchorMode.OnChainOnly,\n    [AnchorMode.OffChainOnly]: AnchorMode.OffChainOnly,\n    [AnchorMode.Any]: AnchorMode.Any,\n};\nexport function anchorModeFrom(mode) {\n    if (mode in AnchorModeMap)\n        return AnchorModeMap[mode];\n    throw new Error(`Invalid anchor mode \"${mode}\", must be one of: ${AnchorModeNames.join(', ')}`);\n}\nexport var PostConditionMode;\n(function (PostConditionMode) {\n    PostConditionMode[PostConditionMode[\"Allow\"] = 1] = \"Allow\";\n    PostConditionMode[PostConditionMode[\"Deny\"] = 2] = \"Deny\";\n})(PostConditionMode || (PostConditionMode = {}));\nexport var PostConditionType;\n(function (PostConditionType) {\n    PostConditionType[PostConditionType[\"STX\"] = 0] = \"STX\";\n    PostConditionType[PostConditionType[\"Fungible\"] = 1] = \"Fungible\";\n    PostConditionType[PostConditionType[\"NonFungible\"] = 2] = \"NonFungible\";\n})(PostConditionType || (PostConditionType = {}));\nexport var AuthType;\n(function (AuthType) {\n    AuthType[AuthType[\"Standard\"] = 4] = \"Standard\";\n    AuthType[AuthType[\"Sponsored\"] = 5] = \"Sponsored\";\n})(AuthType || (AuthType = {}));\nexport var AddressHashMode;\n(function (AddressHashMode) {\n    AddressHashMode[AddressHashMode[\"P2PKH\"] = 0] = \"P2PKH\";\n    AddressHashMode[AddressHashMode[\"P2SH\"] = 1] = \"P2SH\";\n    AddressHashMode[AddressHashMode[\"P2WPKH\"] = 2] = \"P2WPKH\";\n    AddressHashMode[AddressHashMode[\"P2WSH\"] = 3] = \"P2WSH\";\n    AddressHashMode[AddressHashMode[\"P2SHNonSequential\"] = 5] = \"P2SHNonSequential\";\n    AddressHashMode[AddressHashMode[\"P2WSHNonSequential\"] = 7] = \"P2WSHNonSequential\";\n})(AddressHashMode || (AddressHashMode = {}));\nexport { AddressVersion } from '@stacks/network';\nexport var PubKeyEncoding;\n(function (PubKeyEncoding) {\n    PubKeyEncoding[PubKeyEncoding[\"Compressed\"] = 0] = \"Compressed\";\n    PubKeyEncoding[PubKeyEncoding[\"Uncompressed\"] = 1] = \"Uncompressed\";\n})(PubKeyEncoding || (PubKeyEncoding = {}));\nexport var FungibleConditionCode;\n(function (FungibleConditionCode) {\n    FungibleConditionCode[FungibleConditionCode[\"Equal\"] = 1] = \"Equal\";\n    FungibleConditionCode[FungibleConditionCode[\"Greater\"] = 2] = \"Greater\";\n    FungibleConditionCode[FungibleConditionCode[\"GreaterEqual\"] = 3] = \"GreaterEqual\";\n    FungibleConditionCode[FungibleConditionCode[\"Less\"] = 4] = \"Less\";\n    FungibleConditionCode[FungibleConditionCode[\"LessEqual\"] = 5] = \"LessEqual\";\n})(FungibleConditionCode || (FungibleConditionCode = {}));\nexport var NonFungibleConditionCode;\n(function (NonFungibleConditionCode) {\n    NonFungibleConditionCode[NonFungibleConditionCode[\"Sends\"] = 16] = \"Sends\";\n    NonFungibleConditionCode[NonFungibleConditionCode[\"DoesNotSend\"] = 17] = \"DoesNotSend\";\n})(NonFungibleConditionCode || (NonFungibleConditionCode = {}));\nexport var PostConditionPrincipalId;\n(function (PostConditionPrincipalId) {\n    PostConditionPrincipalId[PostConditionPrincipalId[\"Origin\"] = 1] = \"Origin\";\n    PostConditionPrincipalId[PostConditionPrincipalId[\"Standard\"] = 2] = \"Standard\";\n    PostConditionPrincipalId[PostConditionPrincipalId[\"Contract\"] = 3] = \"Contract\";\n})(PostConditionPrincipalId || (PostConditionPrincipalId = {}));\nexport var AssetType;\n(function (AssetType) {\n    AssetType[AssetType[\"STX\"] = 0] = \"STX\";\n    AssetType[AssetType[\"Fungible\"] = 1] = \"Fungible\";\n    AssetType[AssetType[\"NonFungible\"] = 2] = \"NonFungible\";\n})(AssetType || (AssetType = {}));\nexport var TenureChangeCause;\n(function (TenureChangeCause) {\n    TenureChangeCause[TenureChangeCause[\"BlockFound\"] = 0] = \"BlockFound\";\n    TenureChangeCause[TenureChangeCause[\"Extended\"] = 1] = \"Extended\";\n})(TenureChangeCause || (TenureChangeCause = {}));\nexport var AuthFieldType;\n(function (AuthFieldType) {\n    AuthFieldType[AuthFieldType[\"PublicKeyCompressed\"] = 0] = \"PublicKeyCompressed\";\n    AuthFieldType[AuthFieldType[\"PublicKeyUncompressed\"] = 1] = \"PublicKeyUncompressed\";\n    AuthFieldType[AuthFieldType[\"SignatureCompressed\"] = 2] = \"SignatureCompressed\";\n    AuthFieldType[AuthFieldType[\"SignatureUncompressed\"] = 3] = \"SignatureUncompressed\";\n})(AuthFieldType || (AuthFieldType = {}));\nexport var TxRejectedReason;\n(function (TxRejectedReason) {\n    TxRejectedReason[\"Serialization\"] = \"Serialization\";\n    TxRejectedReason[\"Deserialization\"] = \"Deserialization\";\n    TxRejectedReason[\"SignatureValidation\"] = \"SignatureValidation\";\n    TxRejectedReason[\"FeeTooLow\"] = \"FeeTooLow\";\n    TxRejectedReason[\"BadNonce\"] = \"BadNonce\";\n    TxRejectedReason[\"NotEnoughFunds\"] = \"NotEnoughFunds\";\n    TxRejectedReason[\"NoSuchContract\"] = \"NoSuchContract\";\n    TxRejectedReason[\"NoSuchPublicFunction\"] = \"NoSuchPublicFunction\";\n    TxRejectedReason[\"BadFunctionArgument\"] = \"BadFunctionArgument\";\n    TxRejectedReason[\"ContractAlreadyExists\"] = \"ContractAlreadyExists\";\n    TxRejectedReason[\"PoisonMicroblocksDoNotConflict\"] = \"PoisonMicroblocksDoNotConflict\";\n    TxRejectedReason[\"PoisonMicroblockHasUnknownPubKeyHash\"] = \"PoisonMicroblockHasUnknownPubKeyHash\";\n    TxRejectedReason[\"PoisonMicroblockIsInvalid\"] = \"PoisonMicroblockIsInvalid\";\n    TxRejectedReason[\"BadAddressVersionByte\"] = \"BadAddressVersionByte\";\n    TxRejectedReason[\"NoCoinbaseViaMempool\"] = \"NoCoinbaseViaMempool\";\n    TxRejectedReason[\"ServerFailureNoSuchChainTip\"] = \"ServerFailureNoSuchChainTip\";\n    TxRejectedReason[\"ServerFailureDatabase\"] = \"ServerFailureDatabase\";\n    TxRejectedReason[\"ServerFailureOther\"] = \"ServerFailureOther\";\n})(TxRejectedReason || (TxRejectedReason = {}));\n//# sourceMappingURL=constants.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.c32decode = exports.c32normalize = exports.c32encode = exports.c32 = void 0;\nconst utils_1 = require(\"@noble/hashes/utils\");\nexports.c32 = '0123456789ABCDEFGHJKMNPQRSTVWXYZ';\nconst hex = '0123456789abcdef';\n/**\n * Encode a hex string as a c32 string.  Note that the hex string is assumed\n * to be big-endian (and the resulting c32 string will be as well).\n * @param {string} inputHex - the input to encode\n * @param {number} minLength - the minimum length of the c32 string\n * @returns {string} the c32check-encoded representation of the data, as a string\n */\nfunction c32encode(inputHex, minLength) {\n    // must be hex\n    if (!inputHex.match(/^[0-9a-fA-F]*$/)) {\n        throw new Error('Not a hex-encoded string');\n    }\n    if (inputHex.length % 2 !== 0) {\n        inputHex = `0${inputHex}`;\n    }\n    inputHex = inputHex.toLowerCase();\n    let res = [];\n    let carry = 0;\n    for (let i = inputHex.length - 1; i >= 0; i--) {\n        if (carry < 4) {\n            const currentCode = hex.indexOf(inputHex[i]) >> carry;\n            let nextCode = 0;\n            if (i !== 0) {\n                nextCode = hex.indexOf(inputHex[i - 1]);\n            }\n            // carry = 0, nextBits is 1, carry = 1, nextBits is 2\n            const nextBits = 1 + carry;\n            const nextLowBits = nextCode % (1 << nextBits) << (5 - nextBits);\n            const curC32Digit = exports.c32[currentCode + nextLowBits];\n            carry = nextBits;\n            res.unshift(curC32Digit);\n        }\n        else {\n            carry = 0;\n        }\n    }\n    let C32leadingZeros = 0;\n    for (let i = 0; i < res.length; i++) {\n        if (res[i] !== '0') {\n            break;\n        }\n        else {\n            C32leadingZeros++;\n        }\n    }\n    res = res.slice(C32leadingZeros);\n    const zeroPrefix = new TextDecoder().decode((0, utils_1.hexToBytes)(inputHex)).match(/^\\u0000*/);\n    const numLeadingZeroBytesInHex = zeroPrefix ? zeroPrefix[0].length : 0;\n    for (let i = 0; i < numLeadingZeroBytesInHex; i++) {\n        res.unshift(exports.c32[0]);\n    }\n    if (minLength) {\n        const count = minLength - res.length;\n        for (let i = 0; i < count; i++) {\n            res.unshift(exports.c32[0]);\n        }\n    }\n    return res.join('');\n}\nexports.c32encode = c32encode;\n/*\n * Normalize a c32 string\n * @param {string} c32input - the c32-encoded input string\n * @returns {string} the canonical representation of the c32 input string\n */\nfunction c32normalize(c32input) {\n    // must be upper-case\n    // replace all O's with 0's\n    // replace all I's and L's with 1's\n    return c32input.toUpperCase().replace(/O/g, '0').replace(/L|I/g, '1');\n}\nexports.c32normalize = c32normalize;\n/*\n * Decode a c32 string back into a hex string.  Note that the c32 input\n * string is assumed to be big-endian (and the resulting hex string will\n * be as well).\n * @param {string} c32input - the c32-encoded input to decode\n * @param {number} minLength - the minimum length of the output hex string (in bytes)\n * @returns {string} the hex-encoded representation of the data, as a string\n */\nfunction c32decode(c32input, minLength) {\n    c32input = c32normalize(c32input);\n    // must result in a c32 string\n    if (!c32input.match(`^[${exports.c32}]*$`)) {\n        throw new Error('Not a c32-encoded string');\n    }\n    const zeroPrefix = c32input.match(`^${exports.c32[0]}*`);\n    const numLeadingZeroBytes = zeroPrefix ? zeroPrefix[0].length : 0;\n    let res = [];\n    let carry = 0;\n    let carryBits = 0;\n    for (let i = c32input.length - 1; i >= 0; i--) {\n        if (carryBits === 4) {\n            res.unshift(hex[carry]);\n            carryBits = 0;\n            carry = 0;\n        }\n        const currentCode = exports.c32.indexOf(c32input[i]) << carryBits;\n        const currentValue = currentCode + carry;\n        const currentHexDigit = hex[currentValue % 16];\n        carryBits += 1;\n        carry = currentValue >> 4;\n        if (carry > 1 << carryBits) {\n            throw new Error('Panic error in decoding.');\n        }\n        res.unshift(currentHexDigit);\n    }\n    // one last carry\n    res.unshift(hex[carry]);\n    if (res.length % 2 === 1) {\n        res.unshift('0');\n    }\n    let hexLeadingZeros = 0;\n    for (let i = 0; i < res.length; i++) {\n        if (res[i] !== '0') {\n            break;\n        }\n        else {\n            hexLeadingZeros++;\n        }\n    }\n    res = res.slice(hexLeadingZeros - (hexLeadingZeros % 2));\n    let hexStr = res.join('');\n    for (let i = 0; i < numLeadingZeroBytes; i++) {\n        hexStr = `00${hexStr}`;\n    }\n    if (minLength) {\n        const count = minLength * 2 - hexStr.length;\n        for (let i = 0; i < count; i += 2) {\n            hexStr = `00${hexStr}`;\n        }\n    }\n    return hexStr;\n}\nexports.c32decode = c32decode;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.c32checkDecode = exports.c32checkEncode = void 0;\nconst sha256_1 = require(\"@noble/hashes/sha256\");\nconst utils_1 = require(\"@noble/hashes/utils\");\nconst encoding_1 = require(\"./encoding\");\n/**\n * Get the c32check checksum of a hex-encoded string\n * @param {string} dataHex - the hex string\n * @returns {string} the c32 checksum, as a bin-encoded string\n */\nfunction c32checksum(dataHex) {\n    const dataHash = (0, sha256_1.sha256)((0, sha256_1.sha256)((0, utils_1.hexToBytes)(dataHex)));\n    const checksum = (0, utils_1.bytesToHex)(dataHash.slice(0, 4));\n    return checksum;\n}\n/**\n * Encode a hex string as a c32check string.  This is a lot like how\n * base58check works in Bitcoin-land, but this algorithm uses the\n * z-base-32 alphabet instead of the base58 alphabet.  The algorithm\n * is as follows:\n * * calculate the c32checksum of version + data\n * * c32encode version + data + c32checksum\n * @param {number} version - the version string (between 0 and 31)\n * @param {string} data - the data to encode\n * @returns {string} the c32check representation\n */\nfunction c32checkEncode(version, data) {\n    if (version < 0 || version >= 32) {\n        throw new Error('Invalid version (must be between 0 and 31)');\n    }\n    if (!data.match(/^[0-9a-fA-F]*$/)) {\n        throw new Error('Invalid data (not a hex string)');\n    }\n    data = data.toLowerCase();\n    if (data.length % 2 !== 0) {\n        data = `0${data}`;\n    }\n    let versionHex = version.toString(16);\n    if (versionHex.length === 1) {\n        versionHex = `0${versionHex}`;\n    }\n    const checksumHex = c32checksum(`${versionHex}${data}`);\n    const c32str = (0, encoding_1.c32encode)(`${data}${checksumHex}`);\n    return `${encoding_1.c32[version]}${c32str}`;\n}\nexports.c32checkEncode = c32checkEncode;\n/*\n * Decode a c32check string back into its version and data payload.  This is\n * a lot like how base58check works in Bitcoin-land, but this algorithm uses\n * the z-base-32 alphabet instead of the base58 alphabet.  The algorithm\n * is as follows:\n * * extract the version, data, and checksum\n * * verify the checksum matches c32checksum(version + data)\n * * return data\n * @param {string} c32data - the c32check-encoded string\n * @returns {array} [version (number), data (string)].  The returned data\n * will be a hex string.  Throws an exception if the checksum does not match.\n */\nfunction c32checkDecode(c32data) {\n    c32data = (0, encoding_1.c32normalize)(c32data);\n    const dataHex = (0, encoding_1.c32decode)(c32data.slice(1));\n    const versionChar = c32data[0];\n    const version = encoding_1.c32.indexOf(versionChar);\n    const checksum = dataHex.slice(-8);\n    let versionHex = version.toString(16);\n    if (versionHex.length === 1) {\n        versionHex = `0${versionHex}`;\n    }\n    if (c32checksum(`${versionHex}${dataHex.substring(0, dataHex.length - 8)}`) !== checksum) {\n        throw new Error('Invalid c32check string: checksum mismatch');\n    }\n    return [version, dataHex.substring(0, dataHex.length - 8)];\n}\nexports.c32checkDecode = c32checkDecode;\n","/*\n * From https://github.com/wzbg/base58check\n * @Author: zyc\n * @Date:   2016-09-11 23:36:05\n */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decode = exports.encode = void 0;\nconst sha256_1 = require(\"@noble/hashes/sha256\");\nconst utils_1 = require(\"@noble/hashes/utils\");\nconst basex = require(\"base-x\");\nconst ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';\nfunction encode(data, prefix = '00') {\n    const dataBytes = typeof data === 'string' ? (0, utils_1.hexToBytes)(data) : data;\n    const prefixBytes = typeof prefix === 'string' ? (0, utils_1.hexToBytes)(prefix) : data;\n    if (!(dataBytes instanceof Uint8Array) || !(prefixBytes instanceof Uint8Array)) {\n        throw new TypeError('Argument must be of type Uint8Array or string');\n    }\n    const checksum = (0, sha256_1.sha256)((0, sha256_1.sha256)(new Uint8Array([...prefixBytes, ...dataBytes])));\n    return basex(ALPHABET).encode([...prefixBytes, ...dataBytes, ...checksum.slice(0, 4)]);\n}\nexports.encode = encode;\nfunction decode(string) {\n    const bytes = basex(ALPHABET).decode(string);\n    const prefixBytes = bytes.slice(0, 1);\n    const dataBytes = bytes.slice(1, -4);\n    // todo: for better performance replace spread with `concatBytes` method\n    const checksum = (0, sha256_1.sha256)((0, sha256_1.sha256)(new Uint8Array([...prefixBytes, ...dataBytes])));\n    bytes.slice(-4).forEach((check, index) => {\n        if (check !== checksum[index]) {\n            throw new Error('Invalid checksum');\n        }\n    });\n    return { prefix: prefixBytes, data: dataBytes };\n}\nexports.decode = decode;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.c32ToB58 = exports.b58ToC32 = exports.c32addressDecode = exports.c32address = exports.versions = void 0;\nconst checksum_1 = require(\"./checksum\");\nconst base58check = require(\"./base58check\");\nconst utils_1 = require(\"@noble/hashes/utils\");\nexports.versions = {\n    mainnet: {\n        p2pkh: 22,\n        p2sh: 20, // 'M'\n    },\n    testnet: {\n        p2pkh: 26,\n        p2sh: 21, // 'N'\n    },\n};\n// address conversion : bitcoin to stacks\nconst ADDR_BITCOIN_TO_STACKS = {};\nADDR_BITCOIN_TO_STACKS[0] = exports.versions.mainnet.p2pkh;\nADDR_BITCOIN_TO_STACKS[5] = exports.versions.mainnet.p2sh;\nADDR_BITCOIN_TO_STACKS[111] = exports.versions.testnet.p2pkh;\nADDR_BITCOIN_TO_STACKS[196] = exports.versions.testnet.p2sh;\n// address conversion : stacks to bitcoin\nconst ADDR_STACKS_TO_BITCOIN = {};\nADDR_STACKS_TO_BITCOIN[exports.versions.mainnet.p2pkh] = 0;\nADDR_STACKS_TO_BITCOIN[exports.versions.mainnet.p2sh] = 5;\nADDR_STACKS_TO_BITCOIN[exports.versions.testnet.p2pkh] = 111;\nADDR_STACKS_TO_BITCOIN[exports.versions.testnet.p2sh] = 196;\n/**\n * Make a c32check address with the given version and hash160\n * The only difference between a c32check string and c32 address\n * is that the letter 'S' is pre-pended.\n * @param {number} version - the address version number\n * @param {string} hash160hex - the hash160 to encode (must be a hash160)\n * @returns {string} the address\n */\nfunction c32address(version, hash160hex) {\n    if (!hash160hex.match(/^[0-9a-fA-F]{40}$/)) {\n        throw new Error('Invalid argument: not a hash160 hex string');\n    }\n    const c32string = (0, checksum_1.c32checkEncode)(version, hash160hex);\n    return `S${c32string}`;\n}\nexports.c32address = c32address;\n/**\n * Decode a c32 address into its version and hash160\n * @param {string} c32addr - the c32check-encoded address\n * @returns {[number, string]} a tuple with the version and hash160\n */\nfunction c32addressDecode(c32addr) {\n    if (c32addr.length <= 5) {\n        throw new Error('Invalid c32 address: invalid length');\n    }\n    if (c32addr[0] != 'S') {\n        throw new Error('Invalid c32 address: must start with \"S\"');\n    }\n    return (0, checksum_1.c32checkDecode)(c32addr.slice(1));\n}\nexports.c32addressDecode = c32addressDecode;\n/*\n * Convert a base58check address to a c32check address.\n * Try to convert the version number if one is not given.\n * @param {string} b58check - the base58check encoded address\n * @param {number} version - the version number, if not inferred from the address\n * @returns {string} the c32 address with the given version number (or the\n *   semantically-equivalent c32 version number, if not given)\n */\nfunction b58ToC32(b58check, version = -1) {\n    const addrInfo = base58check.decode(b58check);\n    const hash160String = (0, utils_1.bytesToHex)(addrInfo.data);\n    const addrVersion = parseInt((0, utils_1.bytesToHex)(addrInfo.prefix), 16);\n    let stacksVersion;\n    if (version < 0) {\n        stacksVersion = addrVersion;\n        if (ADDR_BITCOIN_TO_STACKS[addrVersion] !== undefined) {\n            stacksVersion = ADDR_BITCOIN_TO_STACKS[addrVersion];\n        }\n    }\n    else {\n        stacksVersion = version;\n    }\n    return c32address(stacksVersion, hash160String);\n}\nexports.b58ToC32 = b58ToC32;\n/*\n * Convert a c32check address to a base58check address.\n * @param {string} c32string - the c32check address\n * @param {number} version - the version number, if not inferred from the address\n * @returns {string} the base58 address with the given version number (or the\n *    semantically-equivalent bitcoin version number, if not given)\n */\nfunction c32ToB58(c32string, version = -1) {\n    const addrInfo = c32addressDecode(c32string);\n    const stacksVersion = addrInfo[0];\n    const hash160String = addrInfo[1];\n    let bitcoinVersion;\n    if (version < 0) {\n        bitcoinVersion = stacksVersion;\n        if (ADDR_STACKS_TO_BITCOIN[stacksVersion] !== undefined) {\n            bitcoinVersion = ADDR_STACKS_TO_BITCOIN[stacksVersion];\n        }\n    }\n    else {\n        bitcoinVersion = version;\n    }\n    let prefix = bitcoinVersion.toString(16);\n    if (prefix.length === 1) {\n        prefix = `0${prefix}`;\n    }\n    return base58check.encode(hash160String, prefix);\n}\nexports.c32ToB58 = c32ToB58;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b58ToC32 = exports.c32ToB58 = exports.versions = exports.c32normalize = exports.c32addressDecode = exports.c32address = exports.c32checkDecode = exports.c32checkEncode = exports.c32decode = exports.c32encode = void 0;\nconst encoding_1 = require(\"./encoding\");\nObject.defineProperty(exports, \"c32encode\", { enumerable: true, get: function () { return encoding_1.c32encode; } });\nObject.defineProperty(exports, \"c32decode\", { enumerable: true, get: function () { return encoding_1.c32decode; } });\nObject.defineProperty(exports, \"c32normalize\", { enumerable: true, get: function () { return encoding_1.c32normalize; } });\nconst checksum_1 = require(\"./checksum\");\nObject.defineProperty(exports, \"c32checkEncode\", { enumerable: true, get: function () { return checksum_1.c32checkEncode; } });\nObject.defineProperty(exports, \"c32checkDecode\", { enumerable: true, get: function () { return checksum_1.c32checkDecode; } });\nconst address_1 = require(\"./address\");\nObject.defineProperty(exports, \"c32address\", { enumerable: true, get: function () { return address_1.c32address; } });\nObject.defineProperty(exports, \"c32addressDecode\", { enumerable: true, get: function () { return address_1.c32addressDecode; } });\nObject.defineProperty(exports, \"c32ToB58\", { enumerable: true, get: function () { return address_1.c32ToB58; } });\nObject.defineProperty(exports, \"b58ToC32\", { enumerable: true, get: function () { return address_1.b58ToC32; } });\nObject.defineProperty(exports, \"versions\", { enumerable: true, get: function () { return address_1.versions; } });\n","import { STACKS_MAINNET, TransactionVersion, networkFrom, } from '@stacks/network';\nimport { AddressHashMode, AddressVersion } from './constants';\nexport function addressHashModeToVersion(hashMode, network) {\n    network = networkFrom(network ?? STACKS_MAINNET);\n    switch (hashMode) {\n        case AddressHashMode.P2PKH:\n            switch (network.transactionVersion) {\n                case TransactionVersion.Mainnet:\n                    return AddressVersion.MainnetSingleSig;\n                case TransactionVersion.Testnet:\n                    return AddressVersion.TestnetSingleSig;\n                default:\n                    throw new Error(`Unexpected transactionVersion ${network.transactionVersion} for hashMode ${hashMode}`);\n            }\n        case AddressHashMode.P2SH:\n        case AddressHashMode.P2SHNonSequential:\n        case AddressHashMode.P2WPKH:\n        case AddressHashMode.P2WSH:\n        case AddressHashMode.P2WSHNonSequential:\n            switch (network.transactionVersion) {\n                case TransactionVersion.Mainnet:\n                    return AddressVersion.MainnetMultiSig;\n                case TransactionVersion.Testnet:\n                    return AddressVersion.TestnetMultiSig;\n                default:\n                    throw new Error(`Unexpected transactionVersion ${network.transactionVersion} for hashMode ${hashMode}`);\n            }\n        default:\n            throw new Error(`Unexpected hashMode ${hashMode}`);\n    }\n}\n//# sourceMappingURL=address.js.map","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","export var StacksWireType;\n(function (StacksWireType) {\n    StacksWireType[StacksWireType[\"Address\"] = 0] = \"Address\";\n    StacksWireType[StacksWireType[\"Principal\"] = 1] = \"Principal\";\n    StacksWireType[StacksWireType[\"LengthPrefixedString\"] = 2] = \"LengthPrefixedString\";\n    StacksWireType[StacksWireType[\"MemoString\"] = 3] = \"MemoString\";\n    StacksWireType[StacksWireType[\"Asset\"] = 4] = \"Asset\";\n    StacksWireType[StacksWireType[\"PostCondition\"] = 5] = \"PostCondition\";\n    StacksWireType[StacksWireType[\"PublicKey\"] = 6] = \"PublicKey\";\n    StacksWireType[StacksWireType[\"LengthPrefixedList\"] = 7] = \"LengthPrefixedList\";\n    StacksWireType[StacksWireType[\"Payload\"] = 8] = \"Payload\";\n    StacksWireType[StacksWireType[\"MessageSignature\"] = 9] = \"MessageSignature\";\n    StacksWireType[StacksWireType[\"StructuredDataSignature\"] = 10] = \"StructuredDataSignature\";\n    StacksWireType[StacksWireType[\"TransactionAuthField\"] = 11] = \"TransactionAuthField\";\n})(StacksWireType || (StacksWireType = {}));\nexport function whenWireType(wireType) {\n    return (wireTypeMap) => wireTypeMap[wireType];\n}\n//# sourceMappingURL=types.js.map","import { c32address } from 'c32check';\nimport { AddressHashMode, PayloadType } from '../constants';\nimport { publicKeyIsCompressed } from '../keys';\nimport { hashP2PKH, hashP2SH, hashP2WPKH, hashP2WSH } from '../utils';\nimport { createAsset, createContractPrincipal, createStandardPrincipal } from './create';\nimport { serializePublicKeyBytes } from './serialization';\nimport { StacksWireType, } from './types';\nexport function addressFromPublicKeys(version, hashMode, numSigs, publicKeys) {\n    if (publicKeys.length === 0) {\n        throw Error('Invalid number of public keys');\n    }\n    if (hashMode === AddressHashMode.P2PKH || hashMode === AddressHashMode.P2WPKH) {\n        if (publicKeys.length !== 1 || numSigs !== 1) {\n            throw Error('Invalid number of public keys or signatures');\n        }\n    }\n    if (hashMode === AddressHashMode.P2WPKH ||\n        hashMode === AddressHashMode.P2WSH ||\n        hashMode === AddressHashMode.P2WSHNonSequential) {\n        if (!publicKeys.map(p => p.data).every(publicKeyIsCompressed)) {\n            throw Error('Public keys must be compressed for segwit');\n        }\n    }\n    switch (hashMode) {\n        case AddressHashMode.P2PKH:\n            return addressFromVersionHash(version, hashP2PKH(publicKeys[0].data));\n        case AddressHashMode.P2WPKH:\n            return addressFromVersionHash(version, hashP2WPKH(publicKeys[0].data));\n        case AddressHashMode.P2SH:\n        case AddressHashMode.P2SHNonSequential:\n            return addressFromVersionHash(version, hashP2SH(numSigs, publicKeys.map(serializePublicKeyBytes)));\n        case AddressHashMode.P2WSH:\n        case AddressHashMode.P2WSHNonSequential:\n            return addressFromVersionHash(version, hashP2WSH(numSigs, publicKeys.map(serializePublicKeyBytes)));\n    }\n}\nexport function addressFromVersionHash(version, hash) {\n    return { type: StacksWireType.Address, version, hash160: hash };\n}\nexport function addressToString(address) {\n    return c32address(address.version, address.hash160);\n}\nexport function isTokenTransferPayload(p) {\n    return p.payloadType === PayloadType.TokenTransfer;\n}\nexport function isContractCallPayload(p) {\n    return p.payloadType === PayloadType.ContractCall;\n}\nexport function isSmartContractPayload(p) {\n    return p.payloadType === PayloadType.SmartContract;\n}\nexport function isPoisonPayload(p) {\n    return p.payloadType === PayloadType.PoisonMicroblock;\n}\nexport function isCoinbasePayload(p) {\n    return p.payloadType === PayloadType.Coinbase;\n}\nexport function parseAssetString(id) {\n    const [assetAddress, assetContractName, assetTokenName] = id.split(/\\.|::/);\n    const asset = createAsset(assetAddress, assetContractName, assetTokenName);\n    return asset;\n}\nexport function parsePrincipalString(principalString) {\n    if (principalString.includes('.')) {\n        const [address, contractName] = principalString.split('.');\n        return createContractPrincipal(address, contractName);\n    }\n    else {\n        return createStandardPrincipal(principalString);\n    }\n}\n//# sourceMappingURL=helpers.js.map","import { ripemd160 } from '@noble/hashes/ripemd160';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { sha512_256 } from '@noble/hashes/sha512';\nimport { utils } from '@noble/secp256k1';\nimport { bytesToHex, concatArray, concatBytes, utf8ToBytes } from '@stacks/common';\nimport { c32addressDecode } from 'c32check';\nimport lodashCloneDeep from 'lodash.clonedeep';\nimport { deserializeCV, serializeCV } from './clarity';\nexport { verify as verifySignature } from '@noble/secp256k1';\nexport const randomBytes = (bytesLength) => utils.randomBytes(bytesLength);\nexport const leftPadHex = (hexString) => hexString.length % 2 ? `0${hexString}` : hexString;\nexport const leftPadHexToLength = (hexString, length) => hexString.padStart(length, '0');\nexport const rightPadHexToLength = (hexString, length) => hexString.padEnd(length, '0');\nexport const exceedsMaxLengthBytes = (string, maxLengthBytes) => string ? utf8ToBytes(string).length > maxLengthBytes : false;\nexport function cloneDeep(obj) {\n    return lodashCloneDeep(obj);\n}\nexport function omit(obj, prop) {\n    const clone = cloneDeep(obj);\n    delete clone[prop];\n    return clone;\n}\nexport const hash160 = (input) => {\n    return ripemd160(sha256(input));\n};\nexport const txidFromData = (data) => {\n    return bytesToHex(sha512_256(data));\n};\nexport const txidFromBytes = txidFromData;\nexport const hashP2PKH = (input) => {\n    return bytesToHex(hash160(input));\n};\nexport const hashP2WPKH = (input) => {\n    const keyHash = hash160(input);\n    const redeemScript = concatBytes(new Uint8Array([0]), new Uint8Array([keyHash.length]), keyHash);\n    const redeemScriptHash = hash160(redeemScript);\n    return bytesToHex(redeemScriptHash);\n};\nexport const hashP2SH = (numSigs, pubKeys) => {\n    if (numSigs > 15 || pubKeys.length > 15) {\n        throw Error('P2SH multisig address can only contain up to 15 public keys');\n    }\n    const bytesArray = [];\n    bytesArray.push(80 + numSigs);\n    pubKeys.forEach(pubKey => {\n        bytesArray.push(pubKey.length);\n        bytesArray.push(pubKey);\n    });\n    bytesArray.push(80 + pubKeys.length);\n    bytesArray.push(174);\n    const redeemScript = concatArray(bytesArray);\n    const redeemScriptHash = hash160(redeemScript);\n    return bytesToHex(redeemScriptHash);\n};\nexport const hashP2WSH = (numSigs, pubKeys) => {\n    if (numSigs > 15 || pubKeys.length > 15) {\n        throw Error('P2WSH multisig address can only contain up to 15 public keys');\n    }\n    const scriptArray = [];\n    scriptArray.push(80 + numSigs);\n    pubKeys.forEach(pubKey => {\n        scriptArray.push(pubKey.length);\n        scriptArray.push(pubKey);\n    });\n    scriptArray.push(80 + pubKeys.length);\n    scriptArray.push(174);\n    const script = concatArray(scriptArray);\n    const digest = sha256(script);\n    const bytesArray = [];\n    bytesArray.push(0);\n    bytesArray.push(digest.length);\n    bytesArray.push(digest);\n    const redeemScript = concatArray(bytesArray);\n    const redeemScriptHash = hash160(redeemScript);\n    return bytesToHex(redeemScriptHash);\n};\nexport function isClarityName(name) {\n    const regex = /^[a-zA-Z]([a-zA-Z0-9]|[-_!?+<>=/*])*$|^[-+=/*]$|^[<>]=?$/;\n    return regex.test(name) && name.length < 128;\n}\nexport function cvToHex(cv) {\n    const serialized = serializeCV(cv);\n    return `0x${serialized}`;\n}\nexport function hexToCV(hex) {\n    return deserializeCV(hex);\n}\nexport const parseReadOnlyResponse = (response) => {\n    if (response.okay)\n        return hexToCV(response.result);\n    throw new Error(response.cause);\n};\nexport const validateStacksAddress = (address) => {\n    try {\n        c32addressDecode(address);\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n};\nexport function parseContractId(contractId) {\n    const [address, name] = contractId.split('.');\n    if (!address || !name)\n        throw new Error(`Invalid contract identifier: ${contractId}`);\n    return [address, name];\n}\n//# sourceMappingURL=utils.js.map","import { hmac } from '@noble/hashes/hmac';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { getPublicKey as nobleGetPublicKey, Point, Signature, signSync, utils, } from '@noble/secp256k1';\nimport { bytesToHex, hexToBigInt, hexToBytes, intToHex, parseRecoverableSignatureVrs, PRIVATE_KEY_BYTES_COMPRESSED, privateKeyToBytes, signatureRsvToVrs, signatureVrsToRsv, } from '@stacks/common';\nimport { networkFrom, STACKS_MAINNET } from '@stacks/network';\nimport { c32address } from 'c32check';\nimport { addressHashModeToVersion } from './address';\nimport { AddressHashMode, PubKeyEncoding } from './constants';\nimport { hash160, hashP2PKH } from './utils';\nimport { addressFromVersionHash, addressToString, StacksWireType } from './wire';\nutils.hmacSha256Sync = (key, ...msgs) => {\n    const h = hmac.create(sha256, key);\n    msgs.forEach(msg => h.update(msg));\n    return h.digest();\n};\nexport function getAddressFromPrivateKey(privateKey, network = 'mainnet') {\n    network = networkFrom(network);\n    const publicKey = privateKeyToPublic(privateKey);\n    return getAddressFromPublicKey(publicKey, network);\n}\nexport function getAddressFromPublicKey(publicKey, network = 'mainnet') {\n    network = networkFrom(network);\n    publicKey = typeof publicKey === 'string' ? hexToBytes(publicKey) : publicKey;\n    const addrVer = addressHashModeToVersion(AddressHashMode.P2PKH, network);\n    const addr = addressFromVersionHash(addrVer, hashP2PKH(publicKey));\n    const addrString = addressToString(addr);\n    return addrString;\n}\nexport function createStacksPublicKey(publicKey) {\n    publicKey = typeof publicKey === 'string' ? hexToBytes(publicKey) : publicKey;\n    return {\n        type: StacksWireType.PublicKey,\n        data: publicKey,\n    };\n}\nexport function publicKeyFromSignatureVrs(messageHash, messageSignature, pubKeyEncoding = PubKeyEncoding.Compressed) {\n    const parsedSignature = parseRecoverableSignatureVrs(messageSignature);\n    const signature = new Signature(hexToBigInt(parsedSignature.r), hexToBigInt(parsedSignature.s));\n    const point = Point.fromSignature(messageHash, signature, parsedSignature.recoveryId);\n    const compressed = pubKeyEncoding === PubKeyEncoding.Compressed;\n    return point.toHex(compressed);\n}\nexport function publicKeyFromSignatureRsv(messageHash, messageSignature, pubKeyEncoding = PubKeyEncoding.Compressed) {\n    return publicKeyFromSignatureVrs(messageHash, signatureRsvToVrs(messageSignature), pubKeyEncoding);\n}\nexport function privateKeyToHex(publicKey) {\n    return typeof publicKey === 'string' ? publicKey : bytesToHex(publicKey);\n}\nexport const publicKeyToHex = privateKeyToHex;\nexport const isPrivateKeyCompressed = privateKeyIsCompressed;\nexport function privateKeyIsCompressed(privateKey) {\n    const length = typeof privateKey === 'string' ? privateKey.length / 2 : privateKey.byteLength;\n    return length === PRIVATE_KEY_BYTES_COMPRESSED;\n}\nexport const isPublicKeyCompressed = publicKeyIsCompressed;\nexport function publicKeyIsCompressed(publicKey) {\n    return !publicKeyToHex(publicKey).startsWith('04');\n}\nexport function privateKeyToPublic(privateKey) {\n    privateKey = privateKeyToBytes(privateKey);\n    const isCompressed = privateKeyIsCompressed(privateKey);\n    return bytesToHex(nobleGetPublicKey(privateKey.slice(0, 32), isCompressed));\n}\nexport function compressPublicKey(publicKey) {\n    return Point.fromHex(publicKeyToHex(publicKey)).toHex(true);\n}\nexport function uncompressPublicKey(publicKey) {\n    return Point.fromHex(publicKeyToHex(publicKey)).toHex(false);\n}\nexport const makeRandomPrivKey = randomPrivateKey;\nexport function randomPrivateKey() {\n    return compressPrivateKey(utils.randomPrivateKey());\n}\nexport function signWithKey(privateKey, messageHash) {\n    privateKey = privateKeyToBytes(privateKey);\n    const [rawSignature, recoveryId] = signSync(messageHash, privateKey.slice(0, 32), {\n        canonical: true,\n        recovered: true,\n    });\n    if (recoveryId == null) {\n        throw new Error('No signature recoveryId received');\n    }\n    const recoveryIdHex = intToHex(recoveryId, 1);\n    return recoveryIdHex + Signature.fromHex(rawSignature).toCompactHex();\n}\nexport function signMessageHashRsv({ messageHash, privateKey, }) {\n    return signatureVrsToRsv(signWithKey(privateKey, messageHash));\n}\nexport function compressPrivateKey(privateKey) {\n    privateKey = privateKeyToHex(privateKey);\n    return privateKey.length == PRIVATE_KEY_BYTES_COMPRESSED * 2\n        ? privateKey\n        : `${privateKey}01`;\n}\nexport function privateKeyToAddress(privateKey, network) {\n    const publicKey = privateKeyToPublic(privateKey);\n    return publicKeyToAddressSingleSig(publicKey, network);\n}\nexport function publicKeyToAddress(...args) {\n    if (typeof args[0] === 'number')\n        return _publicKeyToAddress(...args);\n    return publicKeyToAddressSingleSig(...args);\n}\nfunction _publicKeyToAddress(version, publicKey) {\n    publicKey = typeof publicKey === 'string' ? hexToBytes(publicKey) : publicKey;\n    return c32address(version, bytesToHex(hash160(publicKey)));\n}\nexport function publicKeyToAddressSingleSig(publicKey, network) {\n    network = network ? networkFrom(network) : STACKS_MAINNET;\n    publicKey = typeof publicKey === 'string' ? hexToBytes(publicKey) : publicKey;\n    return c32address(network.addressVersion.singleSig, bytesToHex(hash160(publicKey)));\n}\n//# sourceMappingURL=keys.js.map","import { decodeToken, SECP256K1Client, TokenSigner, TokenVerifier } from 'jsontokens';\nimport { nextYear, makeUUID4 } from '@stacks/common';\nimport { getAddressFromPublicKey } from '@stacks/transactions';\nexport function signProfileToken(profile, privateKey, subject, issuer, signingAlgorithm = 'ES256K', issuedAt = new Date(), expiresAt = nextYear()) {\n    if (signingAlgorithm !== 'ES256K') {\n        throw new Error('Signing algorithm not supported');\n    }\n    const publicKey = SECP256K1Client.derivePublicKey(privateKey);\n    if (!subject) {\n        subject = { publicKey };\n    }\n    if (!issuer) {\n        issuer = { publicKey };\n    }\n    const tokenSigner = new TokenSigner(signingAlgorithm, privateKey);\n    const payload = {\n        jti: makeUUID4(),\n        iat: issuedAt.toISOString(),\n        exp: expiresAt.toISOString(),\n        subject,\n        issuer,\n        claim: profile,\n    };\n    return tokenSigner.sign(payload);\n}\nexport function wrapProfileToken(token) {\n    return {\n        token,\n        decodedToken: decodeToken(token),\n    };\n}\nexport function verifyProfileToken(token, publicKeyOrAddress) {\n    const decodedToken = decodeToken(token);\n    const payload = decodedToken.payload;\n    if (typeof payload === 'string') {\n        throw new Error('Unexpected token payload type of string');\n    }\n    if (payload.hasOwnProperty('subject') && payload.subject) {\n        if (!payload.subject.hasOwnProperty('publicKey')) {\n            throw new Error(\"Token doesn't have a subject public key\");\n        }\n    }\n    else {\n        throw new Error(\"Token doesn't have a subject\");\n    }\n    if (payload.hasOwnProperty('issuer') && payload.issuer) {\n        if (!payload.issuer.hasOwnProperty('publicKey')) {\n            throw new Error(\"Token doesn't have an issuer public key\");\n        }\n    }\n    else {\n        throw new Error(\"Token doesn't have an issuer\");\n    }\n    if (!payload.hasOwnProperty('claim')) {\n        throw new Error(\"Token doesn't have a claim\");\n    }\n    const issuerPublicKey = payload.issuer.publicKey;\n    const address = getAddressFromPublicKey(issuerPublicKey);\n    if (publicKeyOrAddress === issuerPublicKey) {\n    }\n    else if (publicKeyOrAddress === address) {\n    }\n    else {\n        throw new Error('Token issuer public key does not match the verifying value');\n    }\n    const tokenVerifier = new TokenVerifier(decodedToken.header.alg, issuerPublicKey);\n    if (!tokenVerifier) {\n        throw new Error('Invalid token verifier');\n    }\n    const tokenVerified = tokenVerifier.verify(token);\n    if (!tokenVerified) {\n        throw new Error('Token verification failed');\n    }\n    return decodedToken;\n}\nexport function extractProfile(token, publicKeyOrAddress = null) {\n    let decodedToken;\n    if (publicKeyOrAddress) {\n        decodedToken = verifyProfileToken(token, publicKeyOrAddress);\n    }\n    else {\n        decodedToken = decodeToken(token);\n    }\n    let profile = {};\n    if (decodedToken.hasOwnProperty('payload')) {\n        const payload = decodedToken.payload;\n        if (typeof payload === 'string') {\n            throw new Error('Unexpected token payload type of string');\n        }\n        if (payload.hasOwnProperty('claim')) {\n            profile = payload.claim;\n        }\n    }\n    return profile;\n}\n//# sourceMappingURL=profileTokens.js.map","const GLOBAL_DETECTION_CACHE_KEY = '_blockstackDidCheckEchoReply';\nconst ECHO_REPLY_PARAM = 'echoReply';\nconst AUTH_CONTINUATION_PARAM = 'authContinuation';\nfunction getQueryStringParams(query) {\n    if (!query) {\n        return {};\n    }\n    const trimmed = /^[?#]/.test(query) ? query.slice(1) : query;\n    return trimmed.split('&').reduce((params, param) => {\n        const [key, value] = param.split('=');\n        params[key] = value ? decodeURIComponent(value.replace(/\\+/g, ' ')) : '';\n        return params;\n    }, {});\n}\nexport function protocolEchoReplyDetection() {\n    let globalScope;\n    if (typeof self !== 'undefined') {\n        globalScope = self;\n    }\n    else if (typeof window !== 'undefined') {\n        globalScope = window;\n    }\n    else {\n        return false;\n    }\n    if (!globalScope.location || !globalScope.localStorage) {\n        return false;\n    }\n    const existingDetection = globalScope[GLOBAL_DETECTION_CACHE_KEY];\n    if (typeof existingDetection === 'boolean') {\n        return existingDetection;\n    }\n    const searchParams = getQueryStringParams(globalScope.location.search);\n    const echoReplyParam = searchParams[ECHO_REPLY_PARAM];\n    if (echoReplyParam) {\n        globalScope[GLOBAL_DETECTION_CACHE_KEY] = true;\n        const echoReplyKey = `echo-reply-${echoReplyParam}`;\n        globalScope.localStorage.setItem(echoReplyKey, 'success');\n        globalScope.setTimeout(() => {\n            const authContinuationParam = searchParams[AUTH_CONTINUATION_PARAM];\n            globalScope.location.href = authContinuationParam;\n        }, 10);\n        return true;\n    }\n    return false;\n}\n//# sourceMappingURL=protocolEchoDetection.js.map","import { AppConfig } from './appConfig';\nimport { InstanceDataStore, LocalStorageStore } from './sessionStore';\nimport { decodeToken } from 'jsontokens';\nimport { verifyAuthResponse } from './verification';\nimport * as authMessages from './messages';\nimport { utils } from '@noble/secp256k1';\nimport { decryptContent, encryptContent } from '@stacks/encryption';\nimport { getAddressFromDID } from './dids';\nimport { createFetchFn, GAIA_URL, getGlobalObject, HIRO_MAINNET_URL, InvalidStateError, isLaterVersion, Logger, LoginFailedError, MissingParameterError, nextHour, } from '@stacks/common';\nimport { extractProfile } from '@stacks/profile';\nimport { DEFAULT_PROFILE } from './constants';\nimport { protocolEchoReplyDetection } from './protocolEchoDetection';\nexport class UserSession {\n    constructor(options) {\n        let runningInBrowser = true;\n        if (typeof window === 'undefined' && typeof self === 'undefined') {\n            runningInBrowser = false;\n        }\n        if (options && options.appConfig) {\n            this.appConfig = options.appConfig;\n        }\n        else if (runningInBrowser) {\n            this.appConfig = new AppConfig();\n        }\n        else {\n            throw new MissingParameterError('You need to specify options.appConfig');\n        }\n        if (options && options.sessionStore) {\n            this.store = options.sessionStore;\n        }\n        else if (runningInBrowser) {\n            if (options) {\n                this.store = new LocalStorageStore(options.sessionOptions);\n            }\n            else {\n                this.store = new LocalStorageStore();\n            }\n        }\n        else if (options) {\n            this.store = new InstanceDataStore(options.sessionOptions);\n        }\n        else {\n            this.store = new InstanceDataStore();\n        }\n    }\n    makeAuthRequestToken(transitKey, redirectURI, manifestURI, scopes, appDomain, expiresAt = nextHour().getTime(), extraParams = {}) {\n        const appConfig = this.appConfig;\n        if (!appConfig) {\n            throw new InvalidStateError('Missing AppConfig');\n        }\n        transitKey = transitKey || this.generateAndStoreTransitKey();\n        redirectURI = redirectURI || appConfig.redirectURI();\n        manifestURI = manifestURI || appConfig.manifestURI();\n        scopes = scopes || appConfig.scopes;\n        appDomain = appDomain || appConfig.appDomain;\n        return authMessages.makeAuthRequestToken(transitKey, redirectURI, manifestURI, scopes, appDomain, expiresAt, extraParams);\n    }\n    generateAndStoreTransitKey() {\n        const sessionData = this.store.getSessionData();\n        const transitKey = authMessages.generateTransitKey();\n        sessionData.transitKey = transitKey;\n        this.store.setSessionData(sessionData);\n        return transitKey;\n    }\n    getAuthResponseToken() {\n        const search = getGlobalObject('location', {\n            throwIfUnavailable: true,\n            usageDesc: 'getAuthResponseToken',\n        })?.search;\n        const params = new URLSearchParams(search);\n        return params.get('authResponse') ?? '';\n    }\n    isSignInPending() {\n        try {\n            const isProtocolEcho = protocolEchoReplyDetection();\n            if (isProtocolEcho) {\n                Logger.info('protocolEchoReply detected from isSignInPending call, the page is about to redirect.');\n                return true;\n            }\n        }\n        catch (error) {\n            Logger.error(`Error checking for protocol echo reply isSignInPending: ${error}`);\n        }\n        return !!this.getAuthResponseToken();\n    }\n    isUserSignedIn() {\n        return !!this.store.getSessionData().userData;\n    }\n    async handlePendingSignIn(authResponseToken = this.getAuthResponseToken(), fetchFn = createFetchFn()) {\n        const sessionData = this.store.getSessionData();\n        if (sessionData.userData) {\n            throw new LoginFailedError('Existing user session found.');\n        }\n        const transitKey = this.store.getSessionData().transitKey;\n        let coreNode = this.appConfig && this.appConfig.coreNode;\n        if (!coreNode) {\n            coreNode = HIRO_MAINNET_URL;\n        }\n        const tokenPayload = decodeToken(authResponseToken).payload;\n        if (typeof tokenPayload === 'string') {\n            throw new Error('Unexpected token payload type of string');\n        }\n        const isValid = await verifyAuthResponse(authResponseToken);\n        if (!isValid) {\n            throw new LoginFailedError('Invalid authentication response.');\n        }\n        let appPrivateKey = tokenPayload.private_key;\n        let coreSessionToken = tokenPayload.core_token;\n        if (isLaterVersion(tokenPayload.version, '1.1.0')) {\n            if (transitKey !== undefined && transitKey != null) {\n                if (tokenPayload.private_key !== undefined && tokenPayload.private_key !== null) {\n                    try {\n                        appPrivateKey = (await authMessages.decryptPrivateKey(transitKey, tokenPayload.private_key));\n                    }\n                    catch (e) {\n                        Logger.warn('Failed decryption of appPrivateKey, will try to use as given');\n                        if (!utils.isValidPrivateKey(tokenPayload.private_key)) {\n                            throw new LoginFailedError('Failed decrypting appPrivateKey. Usually means' +\n                                ' that the transit key has changed during login.');\n                        }\n                    }\n                }\n                if (coreSessionToken !== undefined && coreSessionToken !== null) {\n                    try {\n                        coreSessionToken = (await authMessages.decryptPrivateKey(transitKey, coreSessionToken));\n                    }\n                    catch (e) {\n                        Logger.info('Failed decryption of coreSessionToken, will try to use as given');\n                    }\n                }\n            }\n            else {\n                throw new LoginFailedError('Authenticating with protocol > 1.1.0 requires transit' + ' key, and none found.');\n            }\n        }\n        let hubUrl = GAIA_URL;\n        let gaiaAssociationToken;\n        if (isLaterVersion(tokenPayload.version, '1.2.0') &&\n            tokenPayload.hubUrl !== null &&\n            tokenPayload.hubUrl !== undefined) {\n            hubUrl = tokenPayload.hubUrl;\n        }\n        if (isLaterVersion(tokenPayload.version, '1.3.0') &&\n            tokenPayload.associationToken !== null &&\n            tokenPayload.associationToken !== undefined) {\n            gaiaAssociationToken = tokenPayload.associationToken;\n        }\n        const userData = {\n            profile: tokenPayload.profile,\n            email: tokenPayload.email,\n            decentralizedID: tokenPayload.iss,\n            identityAddress: getAddressFromDID(tokenPayload.iss),\n            appPrivateKey,\n            coreSessionToken,\n            authResponseToken,\n            hubUrl,\n            appPrivateKeyFromWalletSalt: tokenPayload.appPrivateKeyFromWalletSalt,\n            coreNode: tokenPayload.blockstackAPIUrl,\n            gaiaAssociationToken,\n        };\n        const profileURL = tokenPayload.profile_url;\n        if (!userData.profile && profileURL) {\n            const response = await fetchFn(profileURL);\n            if (!response.ok) {\n                userData.profile = Object.assign({}, DEFAULT_PROFILE);\n            }\n            else {\n                const responseText = await response.text();\n                const wrappedProfile = JSON.parse(responseText);\n                userData.profile = extractProfile(wrappedProfile[0].token);\n            }\n        }\n        else {\n            userData.profile = tokenPayload.profile;\n        }\n        sessionData.userData = userData;\n        this.store.setSessionData(sessionData);\n        return userData;\n    }\n    loadUserData() {\n        const userData = this.store.getSessionData().userData;\n        if (!userData) {\n            throw new InvalidStateError('No user data found. Did the user sign in?');\n        }\n        return userData;\n    }\n    encryptContent(content, options) {\n        const opts = Object.assign({}, options);\n        if (!opts.privateKey) {\n            opts.privateKey = this.loadUserData().appPrivateKey;\n        }\n        return encryptContent(content, opts);\n    }\n    decryptContent(content, options) {\n        const opts = Object.assign({}, options);\n        if (!opts.privateKey) {\n            opts.privateKey = this.loadUserData().appPrivateKey;\n        }\n        return decryptContent(content, opts);\n    }\n    signUserOut(redirectURL) {\n        this.store.deleteSessionData();\n        if (redirectURL) {\n            if (typeof location !== 'undefined' && location.href) {\n                location.href = redirectURL;\n            }\n        }\n    }\n}\nUserSession.prototype.makeAuthRequest = UserSession.prototype.makeAuthRequestToken;\n//# sourceMappingURL=userSession.js.map","// AUTO REGISTERED PROVIDERS\nconst getRegisteredProviders = () => {\n  if (typeof window === 'undefined')\n    return [];\n  if (!window.webbtc_stx_providers)\n    return [];\n  return window.webbtc_stx_providers;\n};\nconst getInstalledProviders = (defaultProviders = []) => {\n  if (typeof window === 'undefined')\n    return [];\n  const registeredProviders = getRegisteredProviders();\n  const additionalInstalledProviders = defaultProviders.filter(defaultProvider => {\n    // already registered, don't add again\n    if (registeredProviders.find(rp => rp.id === defaultProvider.id))\n      return false;\n    // check if default provider is installed (even if not registered)\n    const provider = getProviderFromId(defaultProvider.id);\n    return !!provider;\n  });\n  return registeredProviders.concat(additionalInstalledProviders);\n};\nconst getProviderFromId = (id) => {\n  return id === null || id === void 0 ? void 0 : id.split('.').reduce((acc, part) => acc === null || acc === void 0 ? void 0 : acc[part], window);\n};\n\nconst LOCAL_STORAGE_KEY = 'STX_PROVIDER';\nconst getSelectedProviderId = () => {\n  if (typeof window === 'undefined')\n    return null;\n  return window.localStorage.getItem(LOCAL_STORAGE_KEY);\n};\nconst setSelectedProviderId = (provider) => {\n  if (typeof window !== 'undefined') {\n    window.localStorage.setItem(LOCAL_STORAGE_KEY, provider);\n  }\n};\nconst clearSelectedProviderId = () => {\n  if (typeof window !== 'undefined') {\n    window.localStorage.removeItem(LOCAL_STORAGE_KEY);\n  }\n};\n\nexport { getInstalledProviders as a, getProviderFromId as b, getSelectedProviderId as c, clearSelectedProviderId as d, getRegisteredProviders as g, setSelectedProviderId as s };\n","(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n})({});\n})(typeof self !== 'undefined' ? self : this);\n","import 'cross-fetch/polyfill';\nconst defaultFetchOpts = {\n    referrerPolicy: 'origin',\n    headers: {\n        'x-hiro-product': 'stacksjs',\n    },\n};\nexport const getFetchOptions = () => {\n    return defaultFetchOpts;\n};\nexport const setFetchOptions = (ops) => {\n    return Object.assign(defaultFetchOpts, ops);\n};\nexport async function fetchWrapper(input, init) {\n    const fetchOpts = {};\n    Object.assign(fetchOpts, defaultFetchOpts, init);\n    const fetchResult = await fetch(input, fetchOpts);\n    return fetchResult;\n}\nexport function hostMatches(host, pattern) {\n    if (typeof pattern === 'string')\n        return pattern === host;\n    return pattern.exec(host);\n}\nexport function createApiKeyMiddleware({ apiKey, host = /(.*)api(.*)(\\.stacks\\.co|\\.hiro\\.so)$/i, httpHeader = 'x-api-key', }) {\n    return {\n        pre: context => {\n            const reqUrl = new URL(context.url);\n            if (!hostMatches(reqUrl.host, host))\n                return;\n            const headers = context.init.headers instanceof Headers\n                ? context.init.headers\n                : (context.init.headers = new Headers(context.init.headers));\n            headers.set(httpHeader, apiKey);\n        },\n    };\n}\nfunction argsForCreateFetchFn(args) {\n    let fetchLib = fetchWrapper;\n    let middlewares = [];\n    if (args.length > 0 && typeof args[0] === 'function') {\n        fetchLib = args.shift();\n    }\n    if (args.length > 0) {\n        middlewares = args;\n    }\n    return { fetchLib, middlewares };\n}\nexport function createFetchFn(...args) {\n    const { fetchLib, middlewares } = argsForCreateFetchFn(args);\n    const fetchFn = async (url, init) => {\n        let fetchParams = { url, init: init ?? {} };\n        for (const middleware of middlewares) {\n            if (typeof middleware.pre === 'function') {\n                const result = await Promise.resolve(middleware.pre({\n                    fetch: fetchLib,\n                    ...fetchParams,\n                }));\n                fetchParams = result ?? fetchParams;\n            }\n        }\n        let response = await fetchLib(fetchParams.url, fetchParams.init);\n        for (const middleware of middlewares) {\n            if (typeof middleware.post === 'function') {\n                const result = await Promise.resolve(middleware.post({\n                    fetch: fetchLib,\n                    url: fetchParams.url,\n                    init: fetchParams.init,\n                    response: response?.clone() ?? response,\n                }));\n                response = result ?? response;\n            }\n        }\n        return response;\n    };\n    return fetchFn;\n}\n//# sourceMappingURL=fetch.js.map","import { Logger } from './logger';\nexport const BLOCKSTACK_HANDLER = 'blockstack';\nexport function nextYear() {\n    return new Date(new Date().setFullYear(new Date().getFullYear() + 1));\n}\nexport function nextMonth() {\n    return new Date(new Date().setMonth(new Date().getMonth() + 1));\n}\nexport function nextHour() {\n    return new Date(new Date().setHours(new Date().getHours() + 1));\n}\nexport function megabytesToBytes(megabytes) {\n    if (!Number.isFinite(megabytes)) {\n        return 0;\n    }\n    return Math.floor(megabytes * 1024 * 1024);\n}\nexport function getAesCbcOutputLength(inputByteLength) {\n    const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\n    return cipherTextLength;\n}\nexport function getBase64OutputLength(inputByteLength) {\n    const encodedLength = Math.ceil(inputByteLength / 3) * 4;\n    return encodedLength;\n}\nexport function updateQueryStringParameter(uri, key, value) {\n    const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i');\n    const separator = uri.indexOf('?') !== -1 ? '&' : '?';\n    if (uri.match(re)) {\n        return uri.replace(re, `$1${key}=${value}$2`);\n    }\n    else {\n        return `${uri}${separator}${key}=${value}`;\n    }\n}\nexport function isLaterVersion(v1, v2) {\n    if (v1 === undefined || v1 === '') {\n        v1 = '0.0.0';\n    }\n    if (v2 === undefined || v1 === '') {\n        v2 = '0.0.0';\n    }\n    const v1tuple = v1.split('.').map(x => parseInt(x, 10));\n    const v2tuple = v2.split('.').map(x => parseInt(x, 10));\n    for (let index = 0; index < v2.length; index++) {\n        if (index >= v1.length) {\n            v2tuple.push(0);\n        }\n        if (v1tuple[index] < v2tuple[index]) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function makeUUID4() {\n    let d = new Date().getTime();\n    if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n        d += performance.now();\n    }\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n        const r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n    });\n}\nexport function isSameOriginAbsoluteUrl(uri1, uri2) {\n    try {\n        const parsedUri1 = new URL(uri1);\n        const parsedUri2 = new URL(uri2);\n        const port1 = parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80);\n        const port2 = parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80);\n        const match = {\n            scheme: parsedUri1.protocol === parsedUri2.protocol,\n            hostname: parsedUri1.hostname === parsedUri2.hostname,\n            port: port1 === port2,\n            absolute: (uri1.includes('http://') || uri1.includes('https://')) &&\n                (uri2.includes('http://') || uri2.includes('https://')),\n        };\n        return match.scheme && match.hostname && match.port && match.absolute;\n    }\n    catch (error) {\n        console.log(error);\n        console.log('Parsing error in same URL origin check');\n        return false;\n    }\n}\nexport function getGlobalScope() {\n    if (typeof self !== 'undefined') {\n        return self;\n    }\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    throw new Error('Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available');\n}\nfunction getAPIUsageErrorMessage(scopeObject, apiName, usageDesc) {\n    if (usageDesc) {\n        return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n    }\n    else {\n        return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n    }\n}\nexport function getGlobalObject(name, { throwIfUnavailable, usageDesc, returnEmptyObject } = {}) {\n    let globalScope = undefined;\n    try {\n        globalScope = getGlobalScope();\n        if (globalScope) {\n            const obj = globalScope[name];\n            if (obj) {\n                return obj;\n            }\n        }\n    }\n    catch (error) {\n        Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`);\n    }\n    if (throwIfUnavailable) {\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n        Logger.error(errMsg);\n        throw new Error(errMsg);\n    }\n    if (returnEmptyObject) {\n        return {};\n    }\n    return undefined;\n}\nexport function getGlobalObjects(names, { throwIfUnavailable, usageDesc, returnEmptyObject } = {}) {\n    let globalScope;\n    try {\n        globalScope = getGlobalScope();\n    }\n    catch (error) {\n        Logger.error(`Error getting global scope: ${error}`);\n        if (throwIfUnavailable) {\n            const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc);\n            Logger.error(errMsg);\n            throw errMsg;\n        }\n        else if (returnEmptyObject) {\n            globalScope = {};\n        }\n    }\n    const result = {};\n    for (let i = 0; i < names.length; i++) {\n        const name = names[i];\n        try {\n            if (globalScope) {\n                const obj = globalScope[name];\n                if (obj) {\n                    result[name] = obj;\n                }\n                else if (throwIfUnavailable) {\n                    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n                    Logger.error(errMsg);\n                    throw new Error(errMsg);\n                }\n                else if (returnEmptyObject) {\n                    result[name] = {};\n                }\n            }\n        }\n        catch (error) {\n            if (throwIfUnavailable) {\n                const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n                Logger.error(errMsg);\n                throw new Error(errMsg);\n            }\n        }\n    }\n    return result;\n}\nexport function intToBytes(value, signed, byteLength) {\n    return bigIntToBytes(intToBigInt(value, signed), byteLength);\n}\nexport function intToBigInt(value, signed) {\n    let parsedValue = value;\n    if (typeof parsedValue === 'number') {\n        if (!Number.isInteger(parsedValue)) {\n            throw new RangeError(`Invalid value. Values of type 'number' must be an integer.`);\n        }\n        if (parsedValue > Number.MAX_SAFE_INTEGER) {\n            throw new RangeError(`Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`);\n        }\n        return BigInt(parsedValue);\n    }\n    if (typeof parsedValue === 'string') {\n        if (parsedValue.toLowerCase().startsWith('0x')) {\n            let hex = parsedValue.slice(2);\n            hex = hex.padStart(hex.length + (hex.length % 2), '0');\n            parsedValue = hexToBytes(hex);\n        }\n        else {\n            try {\n                return BigInt(parsedValue);\n            }\n            catch (error) {\n                if (error instanceof SyntaxError) {\n                    throw new RangeError(`Invalid value. String integer '${parsedValue}' is not finite.`);\n                }\n            }\n        }\n    }\n    if (typeof parsedValue === 'bigint') {\n        return parsedValue;\n    }\n    if (parsedValue instanceof Uint8Array) {\n        if (signed) {\n            const bn = fromTwos(BigInt(`0x${bytesToHex(parsedValue)}`), BigInt(parsedValue.byteLength * 8));\n            return BigInt(bn.toString());\n        }\n        else {\n            return BigInt(`0x${bytesToHex(parsedValue)}`);\n        }\n    }\n    if (parsedValue != null &&\n        typeof parsedValue === 'object' &&\n        parsedValue.constructor.name === 'BN') {\n        return BigInt(parsedValue.toString());\n    }\n    throw new TypeError(`Invalid value type. Must be a number, bigint, integer-string, hex-string, or Uint8Array.`);\n}\nexport function with0x(value) {\n    return value.startsWith('0x') ? value : `0x${value}`;\n}\nexport function hexToBigInt(hex) {\n    if (typeof hex !== 'string')\n        throw new TypeError(`hexToBigInt: expected string, got ${typeof hex}`);\n    return BigInt(`0x${hex}`);\n}\nexport function intToHex(integer, lengthBytes = 8) {\n    const value = typeof integer === 'bigint' ? integer : intToBigInt(integer, false);\n    return value.toString(16).padStart(lengthBytes * 2, '0');\n}\nexport function hexToInt(hex) {\n    return parseInt(hex, 16);\n}\nexport function bigIntToBytes(value, length = 16) {\n    const hex = intToHex(value, length);\n    return hexToBytes(hex);\n}\nexport function toTwos(value, width) {\n    if (value < -(BigInt(1) << (width - BigInt(1))) ||\n        (BigInt(1) << (width - BigInt(1))) - BigInt(1) < value) {\n        throw `Unable to represent integer in width: ${width}`;\n    }\n    if (value >= BigInt(0)) {\n        return BigInt(value);\n    }\n    return value + (BigInt(1) << width);\n}\nfunction nthBit(value, n) {\n    return value & (BigInt(1) << n);\n}\nexport function fromTwos(value, width) {\n    if (nthBit(value, width - BigInt(1))) {\n        return value - (BigInt(1) << width);\n    }\n    return value;\n}\nconst hexes = Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\nexport function bytesToHex(uint8a) {\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n    let hex = '';\n    for (const u of uint8a) {\n        hex += hexes[u];\n    }\n    return hex;\n}\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError(`hexToBytes: expected string, got ${typeof hex}`);\n    }\n    hex = hex.startsWith('0x') || hex.startsWith('0X') ? hex.slice(2) : hex;\n    const paddedHex = hex.length % 2 ? `0${hex}` : hex;\n    const array = new Uint8Array(paddedHex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = paddedHex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\nexport function utf8ToBytes(str) {\n    return new TextEncoder().encode(str);\n}\nexport function bytesToUtf8(arr) {\n    return new TextDecoder().decode(arr);\n}\nexport function asciiToBytes(str) {\n    const byteArray = [];\n    for (let i = 0; i < str.length; i++) {\n        byteArray.push(str.charCodeAt(i) & 0xff);\n    }\n    return new Uint8Array(byteArray);\n}\nexport function bytesToAscii(arr) {\n    return String.fromCharCode.apply(null, arr);\n}\nfunction isNotOctet(octet) {\n    return !Number.isInteger(octet) || octet < 0 || octet > 255;\n}\nexport function octetsToBytes(numbers) {\n    if (numbers.some(isNotOctet))\n        throw new Error('Some values are invalid bytes.');\n    return new Uint8Array(numbers);\n}\nexport function concatBytes(...arrays) {\n    if (!arrays.every(a => a instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\nexport function concatArray(elements) {\n    return concatBytes(...elements.map(e => {\n        if (typeof e === 'number')\n            return octetsToBytes([e]);\n        if (e instanceof Array)\n            return octetsToBytes(e);\n        return e;\n    }));\n}\nexport function isInstance(object, type) {\n    return object instanceof type || object?.constructor?.name?.toLowerCase() === type.name;\n}\n//# sourceMappingURL=utils.js.map","export var ChainID;\n(function (ChainID) {\n    ChainID[ChainID[\"Testnet\"] = 2147483648] = \"Testnet\";\n    ChainID[ChainID[\"Mainnet\"] = 1] = \"Mainnet\";\n})(ChainID || (ChainID = {}));\nexport var TransactionVersion;\n(function (TransactionVersion) {\n    TransactionVersion[TransactionVersion[\"Mainnet\"] = 0] = \"Mainnet\";\n    TransactionVersion[TransactionVersion[\"Testnet\"] = 128] = \"Testnet\";\n})(TransactionVersion || (TransactionVersion = {}));\nexport var PeerNetworkID;\n(function (PeerNetworkID) {\n    PeerNetworkID[PeerNetworkID[\"Mainnet\"] = 385875968] = \"Mainnet\";\n    PeerNetworkID[PeerNetworkID[\"Testnet\"] = 4278190080] = \"Testnet\";\n})(PeerNetworkID || (PeerNetworkID = {}));\nexport const PRIVATE_KEY_COMPRESSED_LENGTH = 33;\nexport const PRIVATE_KEY_UNCOMPRESSED_LENGTH = 32;\nexport const BLOCKSTACK_DEFAULT_GAIA_HUB_URL = 'https://hub.blockstack.org';\n//# sourceMappingURL=constants.js.map","export function equals(a, b) {\n    if (a.byteLength !== b.byteLength)\n        return false;\n    for (let i = 0; i < a.byteLength; i++) {\n        if (a[i] !== b[i])\n            return false;\n    }\n    return true;\n}\nexport function alloc(length, value) {\n    const a = new Uint8Array(length);\n    for (let i = 0; i < length; i++) {\n        a[i] = value;\n    }\n    return a;\n}\nexport function readUInt16BE(source, offset) {\n    return ((source[offset + 0] << 8) | source[offset + 1]) >>> 0;\n}\nexport function writeUInt16BE(destination, value, offset = 0) {\n    destination[offset + 0] = value >>> 8;\n    destination[offset + 1] = value >>> 0;\n    return destination;\n}\nexport function readUInt8(source, offset) {\n    return source[offset];\n}\nexport function writeUInt8(destination, value, offset = 0) {\n    destination[offset] = value;\n    return destination;\n}\nexport function readUInt16LE(source, offset) {\n    return ((source[offset + 0] << 0) >>> 0) | ((source[offset + 1] << 8) >>> 0);\n}\nexport function writeUInt16LE(destination, value, offset = 0) {\n    destination[offset + 0] = value & 255;\n    value >>>= 8;\n    destination[offset + 1] = value & 255;\n    return destination;\n}\nexport function readUInt32BE(source, offset) {\n    return (source[offset] * 2 ** 24 +\n        source[offset + 1] * 2 ** 16 +\n        source[offset + 2] * 2 ** 8 +\n        source[offset + 3]);\n}\nexport function writeUInt32BE(destination, value, offset = 0) {\n    destination[offset + 3] = value;\n    value >>>= 8;\n    destination[offset + 2] = value;\n    value >>>= 8;\n    destination[offset + 1] = value;\n    value >>>= 8;\n    destination[offset] = value;\n    return destination;\n}\nexport function readUInt32LE(source, offset) {\n    return (((source[offset + 0] << 0) >>> 0) |\n        ((source[offset + 1] << 8) >>> 0) |\n        ((source[offset + 2] << 16) >>> 0) |\n        ((source[offset + 3] << 24) >>> 0));\n}\nexport function writeUInt32LE(destination, value, offset = 0) {\n    destination[offset + 0] = value & 255;\n    value >>>= 8;\n    destination[offset + 1] = value & 255;\n    value >>>= 8;\n    destination[offset + 2] = value & 255;\n    value >>>= 8;\n    destination[offset + 3] = value & 255;\n    return destination;\n}\n//# sourceMappingURL=buffer.js.map","import { TransactionVersion, ChainID } from '@stacks/common';\nimport { createFetchFn } from './fetch';\nexport const HIRO_MAINNET_DEFAULT = 'https://api.mainnet.hiro.so';\nexport const HIRO_TESTNET_DEFAULT = 'https://api.testnet.hiro.so';\nexport const HIRO_MOCKNET_DEFAULT = 'http://localhost:3999';\nexport const StacksNetworks = ['mainnet', 'testnet', 'devnet', 'mocknet'];\nexport class StacksNetwork {\n    constructor(networkConfig) {\n        this.version = TransactionVersion.Mainnet;\n        this.chainId = ChainID.Mainnet;\n        this.bnsLookupUrl = 'https://api.mainnet.hiro.so';\n        this.broadcastEndpoint = '/v2/transactions';\n        this.transferFeeEstimateEndpoint = '/v2/fees/transfer';\n        this.transactionFeeEstimateEndpoint = '/v2/fees/transaction';\n        this.accountEndpoint = '/v2/accounts';\n        this.contractAbiEndpoint = '/v2/contracts/interface';\n        this.readOnlyFunctionCallEndpoint = '/v2/contracts/call-read';\n        this.isMainnet = () => this.version === TransactionVersion.Mainnet;\n        this.getBroadcastApiUrl = () => `${this.coreApiUrl}${this.broadcastEndpoint}`;\n        this.getTransferFeeEstimateApiUrl = () => `${this.coreApiUrl}${this.transferFeeEstimateEndpoint}`;\n        this.getTransactionFeeEstimateApiUrl = () => `${this.coreApiUrl}${this.transactionFeeEstimateEndpoint}`;\n        this.getAccountApiUrl = (address) => `${this.coreApiUrl}${this.accountEndpoint}/${address}?proof=0`;\n        this.getAccountExtendedBalancesApiUrl = (address) => `${this.coreApiUrl}/extended/v1/address/${address}/balances`;\n        this.getAbiApiUrl = (address, contract) => `${this.coreApiUrl}${this.contractAbiEndpoint}/${address}/${contract}`;\n        this.getReadOnlyFunctionCallApiUrl = (contractAddress, contractName, functionName) => `${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}/${contractAddress}/${contractName}/${encodeURIComponent(functionName)}`;\n        this.getInfoUrl = () => `${this.coreApiUrl}/v2/info`;\n        this.getBlockTimeInfoUrl = () => `${this.coreApiUrl}/extended/v1/info/network_block_times`;\n        this.getPoxInfoUrl = () => `${this.coreApiUrl}/v2/pox`;\n        this.getRewardsUrl = (address, options) => {\n            let url = `${this.coreApiUrl}/extended/v1/burnchain/rewards/${address}`;\n            if (options) {\n                url = `${url}?limit=${options.limit}&offset=${options.offset}`;\n            }\n            return url;\n        };\n        this.getRewardsTotalUrl = (address) => `${this.coreApiUrl}/extended/v1/burnchain/rewards/${address}/total`;\n        this.getRewardHoldersUrl = (address, options) => {\n            let url = `${this.coreApiUrl}/extended/v1/burnchain/reward_slot_holders/${address}`;\n            if (options) {\n                url = `${url}?limit=${options.limit}&offset=${options.offset}`;\n            }\n            return url;\n        };\n        this.getStackerInfoUrl = (contractAddress, contractName) => `${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}\n    ${contractAddress}/${contractName}/get-stacker-info`;\n        this.getDataVarUrl = (contractAddress, contractName, dataVarName) => `${this.coreApiUrl}/v2/data_var/${contractAddress}/${contractName}/${dataVarName}?proof=0`;\n        this.getMapEntryUrl = (contractAddress, contractName, mapName) => `${this.coreApiUrl}/v2/map_entry/${contractAddress}/${contractName}/${mapName}?proof=0`;\n        this.coreApiUrl = networkConfig.url;\n        this.fetchFn = networkConfig.fetchFn ?? createFetchFn();\n    }\n    getNameInfo(fullyQualifiedName) {\n        const nameLookupURL = `${this.bnsLookupUrl}/v1/names/${fullyQualifiedName}`;\n        return this.fetchFn(nameLookupURL)\n            .then(resp => {\n            if (resp.status === 404) {\n                throw new Error('Name not found');\n            }\n            else if (resp.status !== 200) {\n                throw new Error(`Bad response status: ${resp.status}`);\n            }\n            else {\n                return resp.json();\n            }\n        })\n            .then(nameInfo => {\n            if (nameInfo.address) {\n                return Object.assign({}, nameInfo, { address: nameInfo.address });\n            }\n            else {\n                return nameInfo;\n            }\n        });\n    }\n}\nStacksNetwork.fromName = (networkName) => {\n    switch (networkName) {\n        case 'mainnet':\n            return new StacksMainnet();\n        case 'testnet':\n            return new StacksTestnet();\n        case 'devnet':\n            return new StacksDevnet();\n        case 'mocknet':\n            return new StacksMocknet();\n        default:\n            throw new Error(`Invalid network name provided. Must be one of the following: ${StacksNetworks.join(', ')}`);\n    }\n};\nStacksNetwork.fromNameOrNetwork = (network) => {\n    if (typeof network !== 'string' && 'version' in network) {\n        return network;\n    }\n    return StacksNetwork.fromName(network);\n};\nexport class StacksMainnet extends StacksNetwork {\n    constructor(opts) {\n        super({\n            url: opts?.url ?? HIRO_MAINNET_DEFAULT,\n            fetchFn: opts?.fetchFn,\n        });\n        this.version = TransactionVersion.Mainnet;\n        this.chainId = ChainID.Mainnet;\n    }\n}\nexport class StacksTestnet extends StacksNetwork {\n    constructor(opts) {\n        super({\n            url: opts?.url ?? HIRO_TESTNET_DEFAULT,\n            fetchFn: opts?.fetchFn,\n        });\n        this.version = TransactionVersion.Testnet;\n        this.chainId = ChainID.Testnet;\n    }\n}\nexport class StacksMocknet extends StacksNetwork {\n    constructor(opts) {\n        super({\n            url: opts?.url ?? HIRO_MOCKNET_DEFAULT,\n            fetchFn: opts?.fetchFn,\n        });\n        this.version = TransactionVersion.Testnet;\n        this.chainId = ChainID.Testnet;\n    }\n}\nexport const StacksDevnet = StacksMocknet;\n//# sourceMappingURL=network.js.map","export var ChainId;\n(function (ChainId) {\n    ChainId[ChainId[\"Mainnet\"] = 1] = \"Mainnet\";\n    ChainId[ChainId[\"Testnet\"] = 2147483648] = \"Testnet\";\n})(ChainId || (ChainId = {}));\nexport var PeerNetworkId;\n(function (PeerNetworkId) {\n    PeerNetworkId[PeerNetworkId[\"Mainnet\"] = 385875968] = \"Mainnet\";\n    PeerNetworkId[PeerNetworkId[\"Testnet\"] = 4278190080] = \"Testnet\";\n})(PeerNetworkId || (PeerNetworkId = {}));\nexport const DEFAULT_CHAIN_ID = ChainId.Mainnet;\nexport var TransactionVersion;\n(function (TransactionVersion) {\n    TransactionVersion[TransactionVersion[\"Mainnet\"] = 0] = \"Mainnet\";\n    TransactionVersion[TransactionVersion[\"Testnet\"] = 128] = \"Testnet\";\n})(TransactionVersion || (TransactionVersion = {}));\nexport var AddressVersion;\n(function (AddressVersion) {\n    AddressVersion[AddressVersion[\"MainnetSingleSig\"] = 22] = \"MainnetSingleSig\";\n    AddressVersion[AddressVersion[\"MainnetMultiSig\"] = 20] = \"MainnetMultiSig\";\n    AddressVersion[AddressVersion[\"TestnetSingleSig\"] = 26] = \"TestnetSingleSig\";\n    AddressVersion[AddressVersion[\"TestnetMultiSig\"] = 21] = \"TestnetMultiSig\";\n})(AddressVersion || (AddressVersion = {}));\nexport const DEFAULT_TRANSACTION_VERSION = TransactionVersion.Mainnet;\nexport function whenTransactionVersion(transactionVersion) {\n    return (map) => map[transactionVersion];\n}\n//# sourceMappingURL=constants.js.map","import { Logger } from './logger';\nexport const BLOCKSTACK_HANDLER = 'blockstack';\nexport function nextYear() {\n    return new Date(new Date().setFullYear(new Date().getFullYear() + 1));\n}\nexport function nextMonth() {\n    return new Date(new Date().setMonth(new Date().getMonth() + 1));\n}\nexport function nextHour() {\n    return new Date(new Date().setHours(new Date().getHours() + 1));\n}\nexport function megabytesToBytes(megabytes) {\n    if (!Number.isFinite(megabytes)) {\n        return 0;\n    }\n    return Math.floor(megabytes * 1024 * 1024);\n}\nexport function getAesCbcOutputLength(inputByteLength) {\n    const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\n    return cipherTextLength;\n}\nexport function getBase64OutputLength(inputByteLength) {\n    const encodedLength = Math.ceil(inputByteLength / 3) * 4;\n    return encodedLength;\n}\nexport function updateQueryStringParameter(uri, key, value) {\n    const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i');\n    const separator = uri.indexOf('?') !== -1 ? '&' : '?';\n    if (uri.match(re)) {\n        return uri.replace(re, `$1${key}=${value}$2`);\n    }\n    else {\n        return `${uri}${separator}${key}=${value}`;\n    }\n}\nexport function isLaterVersion(v1, v2) {\n    if (v1 === undefined || v1 === '') {\n        v1 = '0.0.0';\n    }\n    if (v2 === undefined || v1 === '') {\n        v2 = '0.0.0';\n    }\n    const v1tuple = v1.split('.').map(x => parseInt(x, 10));\n    const v2tuple = v2.split('.').map(x => parseInt(x, 10));\n    for (let index = 0; index < v2.length; index++) {\n        if (index >= v1.length) {\n            v2tuple.push(0);\n        }\n        if (v1tuple[index] < v2tuple[index]) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function makeUUID4() {\n    let d = new Date().getTime();\n    if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n        d += performance.now();\n    }\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n        const r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n    });\n}\nexport function isSameOriginAbsoluteUrl(uri1, uri2) {\n    try {\n        const parsedUri1 = new URL(uri1);\n        const parsedUri2 = new URL(uri2);\n        const port1 = parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80);\n        const port2 = parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80);\n        const match = {\n            scheme: parsedUri1.protocol === parsedUri2.protocol,\n            hostname: parsedUri1.hostname === parsedUri2.hostname,\n            port: port1 === port2,\n            absolute: (uri1.includes('http://') || uri1.includes('https://')) &&\n                (uri2.includes('http://') || uri2.includes('https://')),\n        };\n        return match.scheme && match.hostname && match.port && match.absolute;\n    }\n    catch (error) {\n        console.log(error);\n        console.log('Parsing error in same URL origin check');\n        return false;\n    }\n}\nexport function getGlobalScope() {\n    if (typeof self !== 'undefined') {\n        return self;\n    }\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    throw new Error('Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available');\n}\nfunction getAPIUsageErrorMessage(scopeObject, apiName, usageDesc) {\n    if (usageDesc) {\n        return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n    }\n    else {\n        return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n    }\n}\nexport function getGlobalObject(name, { throwIfUnavailable, usageDesc, returnEmptyObject } = {}) {\n    let globalScope = undefined;\n    try {\n        globalScope = getGlobalScope();\n        if (globalScope) {\n            const obj = globalScope[name];\n            if (obj) {\n                return obj;\n            }\n        }\n    }\n    catch (error) {\n        Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`);\n    }\n    if (throwIfUnavailable) {\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n        Logger.error(errMsg);\n        throw new Error(errMsg);\n    }\n    if (returnEmptyObject) {\n        return {};\n    }\n    return undefined;\n}\nexport function getGlobalObjects(names, { throwIfUnavailable, usageDesc, returnEmptyObject } = {}) {\n    let globalScope;\n    try {\n        globalScope = getGlobalScope();\n    }\n    catch (error) {\n        Logger.error(`Error getting global scope: ${error}`);\n        if (throwIfUnavailable) {\n            const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc);\n            Logger.error(errMsg);\n            throw errMsg;\n        }\n        else if (returnEmptyObject) {\n            globalScope = {};\n        }\n    }\n    const result = {};\n    for (let i = 0; i < names.length; i++) {\n        const name = names[i];\n        try {\n            if (globalScope) {\n                const obj = globalScope[name];\n                if (obj) {\n                    result[name] = obj;\n                }\n                else if (throwIfUnavailable) {\n                    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n                    Logger.error(errMsg);\n                    throw new Error(errMsg);\n                }\n                else if (returnEmptyObject) {\n                    result[name] = {};\n                }\n            }\n        }\n        catch (error) {\n            if (throwIfUnavailable) {\n                const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n                Logger.error(errMsg);\n                throw new Error(errMsg);\n            }\n        }\n    }\n    return result;\n}\nexport function intToBytes(value, byteLength) {\n    return bigIntToBytes(intToBigInt(value), byteLength);\n}\nexport function intToBigInt(value) {\n    if (typeof value === 'bigint')\n        return value;\n    if (typeof value === 'string')\n        return BigInt(value);\n    if (typeof value === 'number') {\n        if (!Number.isInteger(value)) {\n            throw new RangeError(`Invalid value. Values of type 'number' must be an integer.`);\n        }\n        if (value > Number.MAX_SAFE_INTEGER) {\n            throw new RangeError(`Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`);\n        }\n        return BigInt(value);\n    }\n    if (isInstance(value, Uint8Array))\n        return BigInt(`0x${bytesToHex(value)}`);\n    throw new TypeError(`intToBigInt: Invalid value type. Must be a number, bigint, BigInt-compatible string, or Uint8Array.`);\n}\nexport function with0x(value) {\n    return /^0x/i.test(value)\n        ? value\n        : `0x${value}`;\n}\nexport function without0x(value) {\n    return /^0x/i.test(value)\n        ? value.slice(2)\n        : value;\n}\nexport function hexToBigInt(hex) {\n    if (typeof hex !== 'string')\n        throw new TypeError(`hexToBigInt: expected string, got ${typeof hex}`);\n    return BigInt(`0x${hex}`);\n}\nexport function intToHex(integer, byteLength = 8) {\n    const value = typeof integer === 'bigint' ? integer : intToBigInt(integer);\n    return value.toString(16).padStart(byteLength * 2, '0');\n}\nexport function hexToInt(hex) {\n    return parseInt(hex, 16);\n}\nexport function bigIntToBytes(value, length = 16) {\n    const hex = intToHex(value, length);\n    return hexToBytes(hex);\n}\nexport function toTwos(value, width) {\n    if (value < -(BigInt(1) << (width - BigInt(1))) ||\n        (BigInt(1) << (width - BigInt(1))) - BigInt(1) < value) {\n        throw `Unable to represent integer in width: ${width}`;\n    }\n    if (value >= BigInt(0)) {\n        return BigInt(value);\n    }\n    return value + (BigInt(1) << width);\n}\nfunction nthBit(value, n) {\n    return value & (BigInt(1) << n);\n}\nexport function bytesToTwosBigInt(bytes) {\n    return fromTwos(BigInt(`0x${bytesToHex(bytes)}`), BigInt(bytes.byteLength * 8));\n}\nexport function fromTwos(value, width) {\n    if (nthBit(value, width - BigInt(1))) {\n        return value - (BigInt(1) << width);\n    }\n    return value;\n}\nconst hexes = Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\nexport function bytesToHex(uint8a) {\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n    let hex = '';\n    for (const u of uint8a) {\n        hex += hexes[u];\n    }\n    return hex;\n}\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError(`hexToBytes: expected string, got ${typeof hex}`);\n    }\n    hex = without0x(hex);\n    hex = hex.length % 2 ? `0${hex}` : hex;\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\nexport function utf8ToBytes(str) {\n    return new TextEncoder().encode(str);\n}\nexport function bytesToUtf8(arr) {\n    return new TextDecoder().decode(arr);\n}\nexport function asciiToBytes(str) {\n    const byteArray = [];\n    for (let i = 0; i < str.length; i++) {\n        byteArray.push(str.charCodeAt(i) & 0xff);\n    }\n    return new Uint8Array(byteArray);\n}\nexport function bytesToAscii(arr) {\n    return String.fromCharCode.apply(null, arr);\n}\nfunction isNotOctet(octet) {\n    return !Number.isInteger(octet) || octet < 0 || octet > 255;\n}\nexport function octetsToBytes(numbers) {\n    if (numbers.some(isNotOctet))\n        throw new Error('Some values are invalid bytes.');\n    return new Uint8Array(numbers);\n}\nexport function concatBytes(...arrays) {\n    if (!arrays.every(a => a instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\nexport function concatArray(elements) {\n    return concatBytes(...elements.map(e => {\n        if (typeof e === 'number')\n            return octetsToBytes([e]);\n        if (e instanceof Array)\n            return octetsToBytes(e);\n        return e;\n    }));\n}\nexport function isInstance(object, clazz) {\n    return object instanceof clazz || object?.constructor?.name?.toLowerCase() === clazz.name;\n}\nexport function validateHash256(hex) {\n    hex = without0x(hex);\n    if (hex.length !== 64)\n        return false;\n    return /^[0-9a-fA-F]+$/.test(hex);\n}\n//# sourceMappingURL=utils.js.map","export const HIRO_MAINNET_URL = 'https://api.mainnet.hiro.so';\nexport const HIRO_TESTNET_URL = 'https://api.testnet.hiro.so';\nexport const DEVNET_URL = 'http://localhost:3999';\nexport const GAIA_URL = 'https://hub.blockstack.org';\nexport const PRIVATE_KEY_BYTES_COMPRESSED = 33;\nexport const PRIVATE_KEY_BYTES_UNCOMPRESSED = 32;\n//# sourceMappingURL=constants.js.map","import { hexToInt } from './utils';\nconst COORDINATE_BYTES = 32;\nexport function parseRecoverableSignatureVrs(signature) {\n    if (signature.length < COORDINATE_BYTES * 2 * 2 + 1) {\n        throw new Error('Invalid signature');\n    }\n    const recoveryIdHex = signature.slice(0, 2);\n    const r = signature.slice(2, 2 + COORDINATE_BYTES * 2);\n    const s = signature.slice(2 + COORDINATE_BYTES * 2);\n    return {\n        recoveryId: hexToInt(recoveryIdHex),\n        r,\n        s,\n    };\n}\nexport function signatureVrsToRsv(signature) {\n    return signature.slice(2) + signature.slice(0, 2);\n}\nexport function signatureRsvToVrs(signature) {\n    return signature.slice(-2) + signature.slice(0, -2);\n}\n//# sourceMappingURL=signatures.js.map","import { hexToBytes } from './utils';\nexport function privateKeyToBytes(privateKey) {\n    const privateKeyBuffer = typeof privateKey === 'string' ? hexToBytes(privateKey) : privateKey;\n    if (privateKeyBuffer.length != 32 && privateKeyBuffer.length != 33) {\n        throw new Error(`Improperly formatted private-key. Private-key byte length should be 32 or 33. Length provided: ${privateKeyBuffer.length}`);\n    }\n    if (privateKeyBuffer.length == 33 && privateKeyBuffer[32] !== 1) {\n        throw new Error('Improperly formatted private-key. 33 bytes indicate compressed key, but the last byte must be == 01');\n    }\n    return privateKeyBuffer;\n}\n//# sourceMappingURL=keys.js.map","export function equals(a, b) {\n    if (a.byteLength !== b.byteLength)\n        return false;\n    for (let i = 0; i < a.byteLength; i++) {\n        if (a[i] !== b[i])\n            return false;\n    }\n    return true;\n}\nexport function alloc(length, value) {\n    const a = new Uint8Array(length);\n    for (let i = 0; i < length; i++) {\n        a[i] = value;\n    }\n    return a;\n}\nexport function readUInt16BE(source, offset) {\n    return ((source[offset + 0] << 8) | source[offset + 1]) >>> 0;\n}\nexport function writeUInt16BE(destination, value, offset = 0) {\n    destination[offset + 0] = value >>> 8;\n    destination[offset + 1] = value >>> 0;\n    return destination;\n}\nexport function readUInt8(source, offset) {\n    return source[offset];\n}\nexport function writeUInt8(destination, value, offset = 0) {\n    destination[offset] = value;\n    return destination;\n}\nexport function readUInt16LE(source, offset) {\n    return ((source[offset + 0] << 0) >>> 0) | ((source[offset + 1] << 8) >>> 0);\n}\nexport function writeUInt16LE(destination, value, offset = 0) {\n    destination[offset + 0] = value & 255;\n    value >>>= 8;\n    destination[offset + 1] = value & 255;\n    return destination;\n}\nexport function readUInt32BE(source, offset) {\n    return (source[offset] * 2 ** 24 +\n        source[offset + 1] * 2 ** 16 +\n        source[offset + 2] * 2 ** 8 +\n        source[offset + 3]);\n}\nexport function writeUInt32BE(destination, value, offset = 0) {\n    destination[offset + 3] = value;\n    value >>>= 8;\n    destination[offset + 2] = value;\n    value >>>= 8;\n    destination[offset + 1] = value;\n    value >>>= 8;\n    destination[offset] = value;\n    return destination;\n}\nexport function readUInt32LE(source, offset) {\n    return (((source[offset + 0] << 0) >>> 0) |\n        ((source[offset + 1] << 8) >>> 0) |\n        ((source[offset + 2] << 16) >>> 0) |\n        ((source[offset + 3] << 24) >>> 0));\n}\nexport function writeUInt32LE(destination, value, offset = 0) {\n    destination[offset + 0] = value & 255;\n    value >>>= 8;\n    destination[offset + 1] = value & 255;\n    value >>>= 8;\n    destination[offset + 2] = value & 255;\n    value >>>= 8;\n    destination[offset + 3] = value & 255;\n    return destination;\n}\n//# sourceMappingURL=buffer.js.map","import { DEVNET_URL, HIRO_MAINNET_URL, HIRO_TESTNET_URL, createFetchFn, createApiKeyMiddleware, } from '@stacks/common';\nimport { AddressVersion, ChainId, PeerNetworkId, TransactionVersion } from './constants';\nexport const STACKS_MAINNET = {\n    chainId: ChainId.Mainnet,\n    transactionVersion: TransactionVersion.Mainnet,\n    peerNetworkId: PeerNetworkId.Mainnet,\n    magicBytes: 'X2',\n    bootAddress: 'SP000000000000000000002Q6VF78',\n    addressVersion: {\n        singleSig: AddressVersion.MainnetSingleSig,\n        multiSig: AddressVersion.MainnetMultiSig,\n    },\n    client: { baseUrl: HIRO_MAINNET_URL },\n};\nexport const STACKS_TESTNET = {\n    chainId: ChainId.Testnet,\n    transactionVersion: TransactionVersion.Testnet,\n    peerNetworkId: PeerNetworkId.Testnet,\n    magicBytes: 'T2',\n    bootAddress: 'ST000000000000000000002AMW42H',\n    addressVersion: {\n        singleSig: AddressVersion.TestnetSingleSig,\n        multiSig: AddressVersion.TestnetMultiSig,\n    },\n    client: { baseUrl: HIRO_TESTNET_URL },\n};\nexport const STACKS_DEVNET = {\n    ...STACKS_TESTNET,\n    addressVersion: { ...STACKS_TESTNET.addressVersion },\n    magicBytes: 'id',\n    client: { baseUrl: DEVNET_URL },\n};\nexport const STACKS_MOCKNET = {\n    ...STACKS_DEVNET,\n    addressVersion: { ...STACKS_DEVNET.addressVersion },\n    client: { ...STACKS_DEVNET.client },\n};\nexport const StacksNetworks = ['mainnet', 'testnet', 'devnet', 'mocknet'];\nexport function networkFromName(name) {\n    switch (name) {\n        case 'mainnet':\n            return STACKS_MAINNET;\n        case 'testnet':\n            return STACKS_TESTNET;\n        case 'devnet':\n            return STACKS_DEVNET;\n        case 'mocknet':\n            return STACKS_MOCKNET;\n        default:\n            throw new Error(`Unknown network name: ${name}`);\n    }\n}\nexport function networkFrom(network) {\n    if (typeof network === 'string')\n        return networkFromName(network);\n    return network;\n}\nexport function defaultUrlFromNetwork(network) {\n    if (!network)\n        return HIRO_MAINNET_URL;\n    network = networkFrom(network);\n    return !network || network.transactionVersion === TransactionVersion.Mainnet\n        ? HIRO_MAINNET_URL\n        : network.magicBytes === 'id'\n            ? DEVNET_URL\n            : HIRO_TESTNET_URL;\n}\nexport function clientFromNetwork(network) {\n    if (network.client.fetch)\n        return network.client;\n    return {\n        ...network.client,\n        fetch: createFetchFn(),\n    };\n}\nexport function createNetwork(arg1, arg2) {\n    const baseNetwork = networkFrom(typeof arg1 === 'object' && 'network' in arg1 ? arg1.network : arg1);\n    const newNetwork = {\n        ...baseNetwork,\n        addressVersion: { ...baseNetwork.addressVersion },\n        client: { ...baseNetwork.client },\n    };\n    if (typeof arg1 === 'object' && 'network' in arg1) {\n        if (arg1.client) {\n            newNetwork.client.baseUrl = arg1.client.baseUrl ?? newNetwork.client.baseUrl;\n            newNetwork.client.fetch = arg1.client.fetch ?? newNetwork.client.fetch;\n        }\n        if (typeof arg1.apiKey === 'string') {\n            const middleware = createApiKeyMiddleware(arg1);\n            newNetwork.client.fetch = newNetwork.client.fetch\n                ? createFetchFn(newNetwork.client.fetch, middleware)\n                : createFetchFn(middleware);\n        }\n        return newNetwork;\n    }\n    if (typeof arg2 === 'string') {\n        const middleware = createApiKeyMiddleware({ apiKey: arg2 });\n        newNetwork.client.fetch = newNetwork.client.fetch\n            ? createFetchFn(newNetwork.client.fetch, middleware)\n            : createFetchFn(middleware);\n        return newNetwork;\n    }\n    return newNetwork;\n}\n//# sourceMappingURL=network.js.map","import { bytesToHex, hexToBytes, readUInt16BE, readUInt32BE, readUInt8 } from '@stacks/common';\nfunction createEnumChecker(enumVariable) {\n    const enumValues = Object.values(enumVariable).filter(v => typeof v === 'number');\n    const enumValueSet = new Set(enumValues);\n    return (value) => enumValueSet.has(value);\n}\nconst enumCheckFunctions = new Map();\nexport function isEnum(enumVariable, value) {\n    const checker = enumCheckFunctions.get(enumVariable);\n    if (checker !== undefined) {\n        return checker(value);\n    }\n    const newChecker = createEnumChecker(enumVariable);\n    enumCheckFunctions.set(enumVariable, newChecker);\n    return isEnum(enumVariable, value);\n}\nexport class BytesReader {\n    constructor(bytes) {\n        this.consumed = 0;\n        this.source = typeof bytes === 'string' ? hexToBytes(bytes) : bytes;\n    }\n    readBytes(length) {\n        const view = this.source.subarray(this.consumed, this.consumed + length);\n        this.consumed += length;\n        return view;\n    }\n    readUInt32BE() {\n        return readUInt32BE(this.readBytes(4), 0);\n    }\n    readUInt8() {\n        return readUInt8(this.readBytes(1), 0);\n    }\n    readUInt16BE() {\n        return readUInt16BE(this.readBytes(2), 0);\n    }\n    readBigUIntLE(length) {\n        const bytes = this.readBytes(length).slice().reverse();\n        const hex = bytesToHex(bytes);\n        return BigInt(`0x${hex}`);\n    }\n    readBigUIntBE(length) {\n        const bytes = this.readBytes(length);\n        const hex = bytesToHex(bytes);\n        return BigInt(`0x${hex}`);\n    }\n    get readOffset() {\n        return this.consumed;\n    }\n    set readOffset(val) {\n        this.consumed = val;\n    }\n    get internalBytes() {\n        return this.source;\n    }\n    readUInt8Enum(enumVariable, invalidEnumErrorFormatter) {\n        const num = this.readUInt8();\n        if (isEnum(enumVariable, num)) {\n            return num;\n        }\n        throw invalidEnumErrorFormatter(num);\n    }\n}\n//# sourceMappingURL=BytesReader.js.map","export const BLOCKSTACK_DEFAULT_GAIA_HUB_URL = 'https://hub.blockstack.org';\nexport const MAX_STRING_LENGTH_BYTES = 128;\nexport const CLARITY_INT_SIZE = 128;\nexport const CLARITY_INT_BYTE_SIZE = 16;\nexport const COINBASE_BYTES_LENGTH = 32;\nexport const VRF_PROOF_BYTES_LENGTH = 80;\nexport const RECOVERABLE_ECDSA_SIG_LENGTH_BYTES = 65;\nexport const COMPRESSED_PUBKEY_LENGTH_BYTES = 32;\nexport const UNCOMPRESSED_PUBKEY_LENGTH_BYTES = 64;\nexport const MEMO_MAX_LENGTH_BYTES = 34;\nconst MAX_PAYLOAD_LEN = 1 + 16 * 1024 * 1024;\nconst PREAMBLE_ENCODED_SIZE = 165;\nconst MAX_RELAYERS_LEN = 16;\nconst PEER_ADDRESS_ENCODED_SIZE = 16;\nconst HASH160_ENCODED_SIZE = 20;\nconst NEIGHBOR_ADDRESS_ENCODED_SIZE = PEER_ADDRESS_ENCODED_SIZE + 2 + HASH160_ENCODED_SIZE;\nconst RELAY_DATA_ENCODED_SIZE = NEIGHBOR_ADDRESS_ENCODED_SIZE + 4;\nexport const STRING_MAX_LENGTH = MAX_PAYLOAD_LEN + (PREAMBLE_ENCODED_SIZE + MAX_RELAYERS_LEN * RELAY_DATA_ENCODED_SIZE);\nexport var PayloadType;\n(function (PayloadType) {\n    PayloadType[PayloadType[\"TokenTransfer\"] = 0] = \"TokenTransfer\";\n    PayloadType[PayloadType[\"SmartContract\"] = 1] = \"SmartContract\";\n    PayloadType[PayloadType[\"VersionedSmartContract\"] = 6] = \"VersionedSmartContract\";\n    PayloadType[PayloadType[\"ContractCall\"] = 2] = \"ContractCall\";\n    PayloadType[PayloadType[\"PoisonMicroblock\"] = 3] = \"PoisonMicroblock\";\n    PayloadType[PayloadType[\"Coinbase\"] = 4] = \"Coinbase\";\n    PayloadType[PayloadType[\"CoinbaseToAltRecipient\"] = 5] = \"CoinbaseToAltRecipient\";\n    PayloadType[PayloadType[\"TenureChange\"] = 7] = \"TenureChange\";\n    PayloadType[PayloadType[\"NakamotoCoinbase\"] = 8] = \"NakamotoCoinbase\";\n})(PayloadType || (PayloadType = {}));\nexport var ClarityVersion;\n(function (ClarityVersion) {\n    ClarityVersion[ClarityVersion[\"Clarity1\"] = 1] = \"Clarity1\";\n    ClarityVersion[ClarityVersion[\"Clarity2\"] = 2] = \"Clarity2\";\n    ClarityVersion[ClarityVersion[\"Clarity3\"] = 3] = \"Clarity3\";\n})(ClarityVersion || (ClarityVersion = {}));\nexport var AnchorMode;\n(function (AnchorMode) {\n    AnchorMode[AnchorMode[\"OnChainOnly\"] = 1] = \"OnChainOnly\";\n    AnchorMode[AnchorMode[\"OffChainOnly\"] = 2] = \"OffChainOnly\";\n    AnchorMode[AnchorMode[\"Any\"] = 3] = \"Any\";\n})(AnchorMode || (AnchorMode = {}));\nexport const AnchorModeNames = ['onChainOnly', 'offChainOnly', 'any'];\nconst AnchorModeMap = {\n    [AnchorModeNames[0]]: AnchorMode.OnChainOnly,\n    [AnchorModeNames[1]]: AnchorMode.OffChainOnly,\n    [AnchorModeNames[2]]: AnchorMode.Any,\n    [AnchorMode.OnChainOnly]: AnchorMode.OnChainOnly,\n    [AnchorMode.OffChainOnly]: AnchorMode.OffChainOnly,\n    [AnchorMode.Any]: AnchorMode.Any,\n};\nexport function anchorModeFrom(mode) {\n    if (mode in AnchorModeMap)\n        return AnchorModeMap[mode];\n    throw new Error(`Invalid anchor mode \"${mode}\", must be one of: ${AnchorModeNames.join(', ')}`);\n}\nexport var PostConditionMode;\n(function (PostConditionMode) {\n    PostConditionMode[PostConditionMode[\"Allow\"] = 1] = \"Allow\";\n    PostConditionMode[PostConditionMode[\"Deny\"] = 2] = \"Deny\";\n})(PostConditionMode || (PostConditionMode = {}));\nexport var PostConditionType;\n(function (PostConditionType) {\n    PostConditionType[PostConditionType[\"STX\"] = 0] = \"STX\";\n    PostConditionType[PostConditionType[\"Fungible\"] = 1] = \"Fungible\";\n    PostConditionType[PostConditionType[\"NonFungible\"] = 2] = \"NonFungible\";\n})(PostConditionType || (PostConditionType = {}));\nexport var AuthType;\n(function (AuthType) {\n    AuthType[AuthType[\"Standard\"] = 4] = \"Standard\";\n    AuthType[AuthType[\"Sponsored\"] = 5] = \"Sponsored\";\n})(AuthType || (AuthType = {}));\nexport var AddressHashMode;\n(function (AddressHashMode) {\n    AddressHashMode[AddressHashMode[\"P2PKH\"] = 0] = \"P2PKH\";\n    AddressHashMode[AddressHashMode[\"P2SH\"] = 1] = \"P2SH\";\n    AddressHashMode[AddressHashMode[\"P2WPKH\"] = 2] = \"P2WPKH\";\n    AddressHashMode[AddressHashMode[\"P2WSH\"] = 3] = \"P2WSH\";\n    AddressHashMode[AddressHashMode[\"P2SHNonSequential\"] = 5] = \"P2SHNonSequential\";\n    AddressHashMode[AddressHashMode[\"P2WSHNonSequential\"] = 7] = \"P2WSHNonSequential\";\n})(AddressHashMode || (AddressHashMode = {}));\nexport { AddressVersion } from '@stacks/network';\nexport var PubKeyEncoding;\n(function (PubKeyEncoding) {\n    PubKeyEncoding[PubKeyEncoding[\"Compressed\"] = 0] = \"Compressed\";\n    PubKeyEncoding[PubKeyEncoding[\"Uncompressed\"] = 1] = \"Uncompressed\";\n})(PubKeyEncoding || (PubKeyEncoding = {}));\nexport var FungibleConditionCode;\n(function (FungibleConditionCode) {\n    FungibleConditionCode[FungibleConditionCode[\"Equal\"] = 1] = \"Equal\";\n    FungibleConditionCode[FungibleConditionCode[\"Greater\"] = 2] = \"Greater\";\n    FungibleConditionCode[FungibleConditionCode[\"GreaterEqual\"] = 3] = \"GreaterEqual\";\n    FungibleConditionCode[FungibleConditionCode[\"Less\"] = 4] = \"Less\";\n    FungibleConditionCode[FungibleConditionCode[\"LessEqual\"] = 5] = \"LessEqual\";\n})(FungibleConditionCode || (FungibleConditionCode = {}));\nexport var NonFungibleConditionCode;\n(function (NonFungibleConditionCode) {\n    NonFungibleConditionCode[NonFungibleConditionCode[\"Sends\"] = 16] = \"Sends\";\n    NonFungibleConditionCode[NonFungibleConditionCode[\"DoesNotSend\"] = 17] = \"DoesNotSend\";\n})(NonFungibleConditionCode || (NonFungibleConditionCode = {}));\nexport var PostConditionPrincipalId;\n(function (PostConditionPrincipalId) {\n    PostConditionPrincipalId[PostConditionPrincipalId[\"Origin\"] = 1] = \"Origin\";\n    PostConditionPrincipalId[PostConditionPrincipalId[\"Standard\"] = 2] = \"Standard\";\n    PostConditionPrincipalId[PostConditionPrincipalId[\"Contract\"] = 3] = \"Contract\";\n})(PostConditionPrincipalId || (PostConditionPrincipalId = {}));\nexport var AssetType;\n(function (AssetType) {\n    AssetType[AssetType[\"STX\"] = 0] = \"STX\";\n    AssetType[AssetType[\"Fungible\"] = 1] = \"Fungible\";\n    AssetType[AssetType[\"NonFungible\"] = 2] = \"NonFungible\";\n})(AssetType || (AssetType = {}));\nexport var TenureChangeCause;\n(function (TenureChangeCause) {\n    TenureChangeCause[TenureChangeCause[\"BlockFound\"] = 0] = \"BlockFound\";\n    TenureChangeCause[TenureChangeCause[\"Extended\"] = 1] = \"Extended\";\n})(TenureChangeCause || (TenureChangeCause = {}));\nexport var AuthFieldType;\n(function (AuthFieldType) {\n    AuthFieldType[AuthFieldType[\"PublicKeyCompressed\"] = 0] = \"PublicKeyCompressed\";\n    AuthFieldType[AuthFieldType[\"PublicKeyUncompressed\"] = 1] = \"PublicKeyUncompressed\";\n    AuthFieldType[AuthFieldType[\"SignatureCompressed\"] = 2] = \"SignatureCompressed\";\n    AuthFieldType[AuthFieldType[\"SignatureUncompressed\"] = 3] = \"SignatureUncompressed\";\n})(AuthFieldType || (AuthFieldType = {}));\nexport var TxRejectedReason;\n(function (TxRejectedReason) {\n    TxRejectedReason[\"Serialization\"] = \"Serialization\";\n    TxRejectedReason[\"Deserialization\"] = \"Deserialization\";\n    TxRejectedReason[\"SignatureValidation\"] = \"SignatureValidation\";\n    TxRejectedReason[\"FeeTooLow\"] = \"FeeTooLow\";\n    TxRejectedReason[\"BadNonce\"] = \"BadNonce\";\n    TxRejectedReason[\"NotEnoughFunds\"] = \"NotEnoughFunds\";\n    TxRejectedReason[\"NoSuchContract\"] = \"NoSuchContract\";\n    TxRejectedReason[\"NoSuchPublicFunction\"] = \"NoSuchPublicFunction\";\n    TxRejectedReason[\"BadFunctionArgument\"] = \"BadFunctionArgument\";\n    TxRejectedReason[\"ContractAlreadyExists\"] = \"ContractAlreadyExists\";\n    TxRejectedReason[\"PoisonMicroblocksDoNotConflict\"] = \"PoisonMicroblocksDoNotConflict\";\n    TxRejectedReason[\"PoisonMicroblockHasUnknownPubKeyHash\"] = \"PoisonMicroblockHasUnknownPubKeyHash\";\n    TxRejectedReason[\"PoisonMicroblockIsInvalid\"] = \"PoisonMicroblockIsInvalid\";\n    TxRejectedReason[\"BadAddressVersionByte\"] = \"BadAddressVersionByte\";\n    TxRejectedReason[\"NoCoinbaseViaMempool\"] = \"NoCoinbaseViaMempool\";\n    TxRejectedReason[\"ServerFailureNoSuchChainTip\"] = \"ServerFailureNoSuchChainTip\";\n    TxRejectedReason[\"ServerFailureDatabase\"] = \"ServerFailureDatabase\";\n    TxRejectedReason[\"ServerFailureOther\"] = \"ServerFailureOther\";\n})(TxRejectedReason || (TxRejectedReason = {}));\n//# sourceMappingURL=constants.js.map","class TransactionError extends Error {\n    constructor(message) {\n        super(message);\n        this.message = message;\n        this.name = this.constructor.name;\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        }\n    }\n}\nexport class SerializationError extends TransactionError {\n    constructor(message) {\n        super(message);\n    }\n}\nexport class DeserializationError extends TransactionError {\n    constructor(message) {\n        super(message);\n    }\n}\nexport class NoEstimateAvailableError extends TransactionError {\n    constructor(message) {\n        super(message);\n    }\n}\nexport class NotImplementedError extends TransactionError {\n    constructor(message) {\n        super(message);\n    }\n}\nexport class SigningError extends TransactionError {\n    constructor(message) {\n        super(message);\n    }\n}\nexport class VerificationError extends TransactionError {\n    constructor(message) {\n        super(message);\n    }\n}\n//# sourceMappingURL=errors.js.map","export var ClarityType;\n(function (ClarityType) {\n    ClarityType[\"Int\"] = \"int\";\n    ClarityType[\"UInt\"] = \"uint\";\n    ClarityType[\"Buffer\"] = \"buffer\";\n    ClarityType[\"BoolTrue\"] = \"true\";\n    ClarityType[\"BoolFalse\"] = \"false\";\n    ClarityType[\"PrincipalStandard\"] = \"address\";\n    ClarityType[\"PrincipalContract\"] = \"contract\";\n    ClarityType[\"ResponseOk\"] = \"ok\";\n    ClarityType[\"ResponseErr\"] = \"err\";\n    ClarityType[\"OptionalNone\"] = \"none\";\n    ClarityType[\"OptionalSome\"] = \"some\";\n    ClarityType[\"List\"] = \"list\";\n    ClarityType[\"Tuple\"] = \"tuple\";\n    ClarityType[\"StringASCII\"] = \"ascii\";\n    ClarityType[\"StringUTF8\"] = \"utf8\";\n})(ClarityType || (ClarityType = {}));\nexport var ClarityWireType;\n(function (ClarityWireType) {\n    ClarityWireType[ClarityWireType[\"int\"] = 0] = \"int\";\n    ClarityWireType[ClarityWireType[\"uint\"] = 1] = \"uint\";\n    ClarityWireType[ClarityWireType[\"buffer\"] = 2] = \"buffer\";\n    ClarityWireType[ClarityWireType[\"true\"] = 3] = \"true\";\n    ClarityWireType[ClarityWireType[\"false\"] = 4] = \"false\";\n    ClarityWireType[ClarityWireType[\"address\"] = 5] = \"address\";\n    ClarityWireType[ClarityWireType[\"contract\"] = 6] = \"contract\";\n    ClarityWireType[ClarityWireType[\"ok\"] = 7] = \"ok\";\n    ClarityWireType[ClarityWireType[\"err\"] = 8] = \"err\";\n    ClarityWireType[ClarityWireType[\"none\"] = 9] = \"none\";\n    ClarityWireType[ClarityWireType[\"some\"] = 10] = \"some\";\n    ClarityWireType[ClarityWireType[\"list\"] = 11] = \"list\";\n    ClarityWireType[ClarityWireType[\"tuple\"] = 12] = \"tuple\";\n    ClarityWireType[ClarityWireType[\"ascii\"] = 13] = \"ascii\";\n    ClarityWireType[ClarityWireType[\"utf8\"] = 14] = \"utf8\";\n})(ClarityWireType || (ClarityWireType = {}));\nexport function clarityTypeToByte(type) {\n    return ClarityWireType[type];\n}\nexport function clarityByteToType(wireType) {\n    return ClarityWireType[wireType];\n}\n//# sourceMappingURL=constants.js.map","import { ClarityType } from '../constants';\nexport const trueCV = () => ({ type: ClarityType.BoolTrue });\nexport const falseCV = () => ({ type: ClarityType.BoolFalse });\nexport const boolCV = (bool) => (bool ? trueCV() : falseCV());\n//# sourceMappingURL=booleanCV.js.map","import { bytesToHex, utf8ToBytes } from '@stacks/common';\nimport { ClarityType } from '../constants';\nexport const bufferCV = (buffer) => {\n    if (buffer.byteLength > 1048576) {\n        throw new Error('Cannot construct clarity buffer that is greater than 1MB');\n    }\n    return { type: ClarityType.Buffer, value: bytesToHex(buffer) };\n};\nexport const bufferCVFromString = (str) => bufferCV(utf8ToBytes(str));\n//# sourceMappingURL=bufferCV.js.map","import { bytesToTwosBigInt, hexToBytes, intToBigInt, isInstance, } from '@stacks/common';\nimport { ClarityType } from '../constants';\nconst MAX_U128 = BigInt('0xffffffffffffffffffffffffffffffff');\nconst MIN_U128 = BigInt(0);\nconst MAX_I128 = BigInt('0x7fffffffffffffffffffffffffffffff');\nconst MIN_I128 = BigInt('-170141183460469231731687303715884105728');\nexport const intCV = (value) => {\n    if (typeof value === 'string' && value.toLowerCase().startsWith('0x')) {\n        value = bytesToTwosBigInt(hexToBytes(value));\n    }\n    if (isInstance(value, Uint8Array))\n        value = bytesToTwosBigInt(value);\n    const bigInt = intToBigInt(value);\n    if (bigInt > MAX_I128) {\n        throw new RangeError(`Cannot construct clarity integer from value greater than ${MAX_I128}`);\n    }\n    else if (bigInt < MIN_I128) {\n        throw new RangeError(`Cannot construct clarity integer form value less than ${MIN_I128}`);\n    }\n    return { type: ClarityType.Int, value: bigInt };\n};\nexport const uintCV = (value) => {\n    const bigInt = intToBigInt(value);\n    if (bigInt < MIN_U128) {\n        throw new RangeError('Cannot construct unsigned clarity integer from negative value');\n    }\n    else if (bigInt > MAX_U128) {\n        throw new RangeError(`Cannot construct unsigned clarity integer greater than ${MAX_U128}`);\n    }\n    return { type: ClarityType.UInt, value: bigInt };\n};\n//# sourceMappingURL=intCV.js.map","import { ClarityType } from '../constants';\nexport function listCV(values) {\n    return { type: ClarityType.List, value: values };\n}\n//# sourceMappingURL=listCV.js.map","import { ClarityType } from '../constants';\nexport function noneCV() {\n    return { type: ClarityType.OptionalNone };\n}\nexport function someCV(value) {\n    return { type: ClarityType.OptionalSome, value };\n}\nexport function optionalCVOf(value) {\n    return value ? someCV(value) : noneCV();\n}\n//# sourceMappingURL=optionalCV.js.map","export var StacksWireType;\n(function (StacksWireType) {\n    StacksWireType[StacksWireType[\"Address\"] = 0] = \"Address\";\n    StacksWireType[StacksWireType[\"Principal\"] = 1] = \"Principal\";\n    StacksWireType[StacksWireType[\"LengthPrefixedString\"] = 2] = \"LengthPrefixedString\";\n    StacksWireType[StacksWireType[\"MemoString\"] = 3] = \"MemoString\";\n    StacksWireType[StacksWireType[\"Asset\"] = 4] = \"Asset\";\n    StacksWireType[StacksWireType[\"PostCondition\"] = 5] = \"PostCondition\";\n    StacksWireType[StacksWireType[\"PublicKey\"] = 6] = \"PublicKey\";\n    StacksWireType[StacksWireType[\"LengthPrefixedList\"] = 7] = \"LengthPrefixedList\";\n    StacksWireType[StacksWireType[\"Payload\"] = 8] = \"Payload\";\n    StacksWireType[StacksWireType[\"MessageSignature\"] = 9] = \"MessageSignature\";\n    StacksWireType[StacksWireType[\"StructuredDataSignature\"] = 10] = \"StructuredDataSignature\";\n    StacksWireType[StacksWireType[\"TransactionAuthField\"] = 11] = \"TransactionAuthField\";\n})(StacksWireType || (StacksWireType = {}));\nexport function whenWireType(wireType) {\n    return (wireTypeMap) => wireTypeMap[wireType];\n}\n//# sourceMappingURL=types.js.map","import { hexToBytes, intToBigInt } from '@stacks/common';\nimport { c32addressDecode } from 'c32check';\nimport { ClarityType, principalCV } from '../clarity';\nimport { AddressVersion, COINBASE_BYTES_LENGTH, MAX_STRING_LENGTH_BYTES, MEMO_MAX_LENGTH_BYTES, PayloadType, PostConditionPrincipalId, RECOVERABLE_ECDSA_SIG_LENGTH_BYTES, VRF_PROOF_BYTES_LENGTH, } from '../constants';\nimport { exceedsMaxLengthBytes } from '../utils';\nimport { StacksWireType, } from './types';\nexport function createEmptyAddress() {\n    return {\n        type: StacksWireType.Address,\n        version: AddressVersion.MainnetSingleSig,\n        hash160: '0'.repeat(40),\n    };\n}\nexport function createMemoString(content) {\n    if (content && exceedsMaxLengthBytes(content, MEMO_MAX_LENGTH_BYTES)) {\n        throw new Error(`Memo exceeds maximum length of ${MEMO_MAX_LENGTH_BYTES} bytes`);\n    }\n    return { type: StacksWireType.MemoString, content };\n}\nexport function createLPList(values, lengthPrefixBytes) {\n    return {\n        type: StacksWireType.LengthPrefixedList,\n        lengthPrefixBytes: lengthPrefixBytes || 4,\n        values,\n    };\n}\nexport function createMessageSignature(signature) {\n    const length = hexToBytes(signature).byteLength;\n    if (length != RECOVERABLE_ECDSA_SIG_LENGTH_BYTES) {\n        throw Error('Invalid signature');\n    }\n    return {\n        type: StacksWireType.MessageSignature,\n        data: signature,\n    };\n}\nexport function createTokenTransferPayload(recipient, amount, memo) {\n    if (typeof recipient === 'string') {\n        recipient = principalCV(recipient);\n    }\n    if (typeof memo === 'string') {\n        memo = createMemoString(memo);\n    }\n    return {\n        type: StacksWireType.Payload,\n        payloadType: PayloadType.TokenTransfer,\n        recipient,\n        amount: intToBigInt(amount),\n        memo: memo ?? createMemoString(''),\n    };\n}\nexport function createContractCallPayload(contractAddress, contractName, functionName, functionArgs) {\n    if (typeof contractName === 'string') {\n        contractName = createLPString(contractName);\n    }\n    if (typeof functionName === 'string') {\n        functionName = createLPString(functionName);\n    }\n    return {\n        type: StacksWireType.Payload,\n        payloadType: PayloadType.ContractCall,\n        contractAddress: typeof contractAddress === 'string' ? createAddress(contractAddress) : contractAddress,\n        contractName,\n        functionName,\n        functionArgs,\n    };\n}\nexport function codeBodyString(content) {\n    return createLPString(content, 4, 100000);\n}\nexport function createSmartContractPayload(contractName, codeBody, clarityVersion) {\n    if (typeof contractName === 'string') {\n        contractName = createLPString(contractName);\n    }\n    if (typeof codeBody === 'string') {\n        codeBody = codeBodyString(codeBody);\n    }\n    if (typeof clarityVersion === 'number') {\n        return {\n            type: StacksWireType.Payload,\n            payloadType: PayloadType.VersionedSmartContract,\n            clarityVersion,\n            contractName,\n            codeBody,\n        };\n    }\n    return {\n        type: StacksWireType.Payload,\n        payloadType: PayloadType.SmartContract,\n        contractName,\n        codeBody,\n    };\n}\nexport function createPoisonPayload() {\n    return { type: StacksWireType.Payload, payloadType: PayloadType.PoisonMicroblock };\n}\nexport function createCoinbasePayload(coinbaseBytes, altRecipient) {\n    if (coinbaseBytes.byteLength != COINBASE_BYTES_LENGTH) {\n        throw Error(`Coinbase buffer size must be ${COINBASE_BYTES_LENGTH} bytes`);\n    }\n    if (altRecipient != undefined) {\n        return {\n            type: StacksWireType.Payload,\n            payloadType: PayloadType.CoinbaseToAltRecipient,\n            coinbaseBytes,\n            recipient: altRecipient,\n        };\n    }\n    return {\n        type: StacksWireType.Payload,\n        payloadType: PayloadType.Coinbase,\n        coinbaseBytes,\n    };\n}\nexport function createNakamotoCoinbasePayload(coinbaseBytes, recipient, vrfProof) {\n    if (coinbaseBytes.byteLength != COINBASE_BYTES_LENGTH) {\n        throw Error(`Coinbase buffer size must be ${COINBASE_BYTES_LENGTH} bytes`);\n    }\n    if (vrfProof.byteLength != VRF_PROOF_BYTES_LENGTH) {\n        throw Error(`VRF proof buffer size must be ${VRF_PROOF_BYTES_LENGTH} bytes`);\n    }\n    return {\n        type: StacksWireType.Payload,\n        payloadType: PayloadType.NakamotoCoinbase,\n        coinbaseBytes,\n        recipient: recipient.type === ClarityType.OptionalSome ? recipient.value : undefined,\n        vrfProof,\n    };\n}\nexport function createTenureChangePayload(tenureHash, previousTenureHash, burnViewHash, previousTenureEnd, previousTenureBlocks, cause, publicKeyHash) {\n    return {\n        type: StacksWireType.Payload,\n        payloadType: PayloadType.TenureChange,\n        tenureHash,\n        previousTenureHash,\n        burnViewHash,\n        previousTenureEnd,\n        previousTenureBlocks,\n        cause,\n        publicKeyHash,\n    };\n}\nexport function createLPString(content, lengthPrefixBytes, maxLengthBytes) {\n    const prefixLength = lengthPrefixBytes || 1;\n    const maxLength = maxLengthBytes || MAX_STRING_LENGTH_BYTES;\n    if (exceedsMaxLengthBytes(content, maxLength)) {\n        throw new Error(`String length exceeds maximum bytes ${maxLength}`);\n    }\n    return {\n        type: StacksWireType.LengthPrefixedString,\n        content,\n        lengthPrefixBytes: prefixLength,\n        maxLengthBytes: maxLength,\n    };\n}\nexport function createAsset(addressString, contractName, assetName) {\n    return {\n        type: StacksWireType.Asset,\n        address: createAddress(addressString),\n        contractName: createLPString(contractName),\n        assetName: createLPString(assetName),\n    };\n}\nexport function createAddress(c32AddressString) {\n    const addressData = c32addressDecode(c32AddressString);\n    return {\n        type: StacksWireType.Address,\n        version: addressData[0],\n        hash160: addressData[1],\n    };\n}\nexport function createContractPrincipal(addressString, contractName) {\n    const addr = createAddress(addressString);\n    const name = createLPString(contractName);\n    return {\n        type: StacksWireType.Principal,\n        prefix: PostConditionPrincipalId.Contract,\n        address: addr,\n        contractName: name,\n    };\n}\nexport function createStandardPrincipal(addressString) {\n    const addr = createAddress(addressString);\n    return {\n        type: StacksWireType.Principal,\n        prefix: PostConditionPrincipalId.Standard,\n        address: addr,\n    };\n}\nexport function createTransactionAuthField(pubKeyEncoding, contents) {\n    return {\n        pubKeyEncoding,\n        type: StacksWireType.TransactionAuthField,\n        contents,\n    };\n}\n//# sourceMappingURL=create.js.map","import { bytesToHex, bytesToUtf8, concatArray, hexToBytes, hexToInt, intToBigInt, intToBytes, intToHex, isInstance, utf8ToBytes, writeUInt32BE, writeUInt8, } from '@stacks/common';\nimport { BytesReader } from '../BytesReader';\nimport { deserializeCV, noneCV, serializeCVBytes, someCV, } from '../clarity';\nimport { AuthFieldType, COINBASE_BYTES_LENGTH, COMPRESSED_PUBKEY_LENGTH_BYTES, ClarityVersion, FungibleConditionCode, STRING_MAX_LENGTH, MEMO_MAX_LENGTH_BYTES, NonFungibleConditionCode, PayloadType, PostConditionPrincipalId, PostConditionType, PubKeyEncoding, RECOVERABLE_ECDSA_SIG_LENGTH_BYTES, TenureChangeCause, UNCOMPRESSED_PUBKEY_LENGTH_BYTES, VRF_PROOF_BYTES_LENGTH, } from '../constants';\nimport { DeserializationError, SerializationError } from '../errors';\nimport { compressPublicKey, createStacksPublicKey, uncompressPublicKey } from '../keys';\nimport { rightPadHexToLength } from '../utils';\nimport { createCoinbasePayload, createContractCallPayload, createLPList, createLPString, createMessageSignature, createNakamotoCoinbasePayload, createPoisonPayload, createSmartContractPayload, createTenureChangePayload, createTokenTransferPayload, createTransactionAuthField, } from './create';\nimport { StacksWireType, } from './types';\nexport function serializeStacksWire(wire) {\n    return bytesToHex(serializeStacksWireBytes(wire));\n}\nexport function serializeStacksWireBytes(wire) {\n    switch (wire.type) {\n        case StacksWireType.Address:\n            return serializeAddressBytes(wire);\n        case StacksWireType.Principal:\n            return serializePrincipalBytes(wire);\n        case StacksWireType.LengthPrefixedString:\n            return serializeLPStringBytes(wire);\n        case StacksWireType.MemoString:\n            return serializeMemoStringBytes(wire);\n        case StacksWireType.Asset:\n            return serializeAssetBytes(wire);\n        case StacksWireType.PostCondition:\n            return serializePostConditionWireBytes(wire);\n        case StacksWireType.PublicKey:\n            return serializePublicKeyBytes(wire);\n        case StacksWireType.LengthPrefixedList:\n            return serializeLPListBytes(wire);\n        case StacksWireType.Payload:\n            return serializePayloadBytes(wire);\n        case StacksWireType.TransactionAuthField:\n            return serializeTransactionAuthFieldBytes(wire);\n        case StacksWireType.MessageSignature:\n            return serializeMessageSignatureBytes(wire);\n    }\n}\nexport function deserializeStacksWire(bytesReader, type, listType) {\n    switch (type) {\n        case StacksWireType.Address:\n            return deserializeAddress(bytesReader);\n        case StacksWireType.Principal:\n            return deserializePrincipal(bytesReader);\n        case StacksWireType.LengthPrefixedString:\n            return deserializeLPString(bytesReader);\n        case StacksWireType.MemoString:\n            return deserializeMemoString(bytesReader);\n        case StacksWireType.Asset:\n            return deserializeAsset(bytesReader);\n        case StacksWireType.PostCondition:\n            return deserializePostConditionWire(bytesReader);\n        case StacksWireType.PublicKey:\n            return deserializePublicKey(bytesReader);\n        case StacksWireType.Payload:\n            return deserializePayload(bytesReader);\n        case StacksWireType.LengthPrefixedList:\n            if (!listType) {\n                throw new DeserializationError('No list type specified');\n            }\n            return deserializeLPList(bytesReader, listType);\n        case StacksWireType.MessageSignature:\n            return deserializeMessageSignature(bytesReader);\n        default:\n            throw new Error('Could not recognize StacksWireType');\n    }\n}\nexport function serializeAddress(address) {\n    return bytesToHex(serializeAddressBytes(address));\n}\nexport function serializeAddressBytes(address) {\n    const bytesArray = [];\n    bytesArray.push(hexToBytes(intToHex(address.version, 1)));\n    bytesArray.push(hexToBytes(address.hash160));\n    return concatArray(bytesArray);\n}\nexport function deserializeAddress(serialized) {\n    const bytesReader = isInstance(serialized, BytesReader)\n        ? serialized\n        : new BytesReader(serialized);\n    const version = hexToInt(bytesToHex(bytesReader.readBytes(1)));\n    const data = bytesToHex(bytesReader.readBytes(20));\n    return { type: StacksWireType.Address, version, hash160: data };\n}\nexport function serializePrincipal(principal) {\n    return bytesToHex(serializePrincipalBytes(principal));\n}\nexport function serializePrincipalBytes(principal) {\n    const bytesArray = [];\n    bytesArray.push(principal.prefix);\n    if (principal.prefix === PostConditionPrincipalId.Standard ||\n        principal.prefix === PostConditionPrincipalId.Contract) {\n        bytesArray.push(serializeAddressBytes(principal.address));\n    }\n    if (principal.prefix === PostConditionPrincipalId.Contract) {\n        bytesArray.push(serializeLPStringBytes(principal.contractName));\n    }\n    return concatArray(bytesArray);\n}\nexport function deserializePrincipal(serialized) {\n    const bytesReader = isInstance(serialized, BytesReader)\n        ? serialized\n        : new BytesReader(serialized);\n    const prefix = bytesReader.readUInt8Enum(PostConditionPrincipalId, n => {\n        throw new DeserializationError(`Unexpected Principal payload type: ${n}`);\n    });\n    if (prefix === PostConditionPrincipalId.Origin) {\n        return { type: StacksWireType.Principal, prefix };\n    }\n    const address = deserializeAddress(bytesReader);\n    if (prefix === PostConditionPrincipalId.Standard) {\n        return { type: StacksWireType.Principal, prefix, address };\n    }\n    const contractName = deserializeLPString(bytesReader);\n    return {\n        type: StacksWireType.Principal,\n        prefix,\n        address,\n        contractName,\n    };\n}\nexport function serializeLPString(lps) {\n    return bytesToHex(serializeLPStringBytes(lps));\n}\nexport function serializeLPStringBytes(lps) {\n    const bytesArray = [];\n    const contentBytes = utf8ToBytes(lps.content);\n    const length = contentBytes.byteLength;\n    bytesArray.push(hexToBytes(intToHex(length, lps.lengthPrefixBytes)));\n    bytesArray.push(contentBytes);\n    return concatArray(bytesArray);\n}\nexport function deserializeLPString(serialized, prefixBytes, maxLength) {\n    prefixBytes = prefixBytes ? prefixBytes : 1;\n    const bytesReader = isInstance(serialized, BytesReader)\n        ? serialized\n        : new BytesReader(serialized);\n    const length = hexToInt(bytesToHex(bytesReader.readBytes(prefixBytes)));\n    const content = bytesToUtf8(bytesReader.readBytes(length));\n    return createLPString(content, prefixBytes, maxLength ?? 128);\n}\nexport function serializeMemoString(memoString) {\n    return bytesToHex(serializeMemoStringBytes(memoString));\n}\nexport function serializeMemoStringBytes(memoString) {\n    const bytesArray = [];\n    const contentBytes = utf8ToBytes(memoString.content);\n    const paddedContent = rightPadHexToLength(bytesToHex(contentBytes), MEMO_MAX_LENGTH_BYTES * 2);\n    bytesArray.push(hexToBytes(paddedContent));\n    return concatArray(bytesArray);\n}\nexport function deserializeMemoString(serialized) {\n    const bytesReader = isInstance(serialized, BytesReader)\n        ? serialized\n        : new BytesReader(serialized);\n    let content = bytesToUtf8(bytesReader.readBytes(MEMO_MAX_LENGTH_BYTES));\n    content = content.replace(/\\u0000*$/, '');\n    return { type: StacksWireType.MemoString, content };\n}\nexport function serializeAsset(info) {\n    return bytesToHex(serializeAssetBytes(info));\n}\nexport function serializeAssetBytes(info) {\n    const bytesArray = [];\n    bytesArray.push(serializeAddressBytes(info.address));\n    bytesArray.push(serializeLPStringBytes(info.contractName));\n    bytesArray.push(serializeLPStringBytes(info.assetName));\n    return concatArray(bytesArray);\n}\nexport function deserializeAsset(serialized) {\n    const bytesReader = isInstance(serialized, BytesReader)\n        ? serialized\n        : new BytesReader(serialized);\n    return {\n        type: StacksWireType.Asset,\n        address: deserializeAddress(bytesReader),\n        contractName: deserializeLPString(bytesReader),\n        assetName: deserializeLPString(bytesReader),\n    };\n}\nexport function serializeLPList(lpList) {\n    return bytesToHex(serializeLPListBytes(lpList));\n}\nexport function serializeLPListBytes(lpList) {\n    const list = lpList.values;\n    const bytesArray = [];\n    bytesArray.push(hexToBytes(intToHex(list.length, lpList.lengthPrefixBytes)));\n    for (const l of list) {\n        bytesArray.push(serializeStacksWireBytes(l));\n    }\n    return concatArray(bytesArray);\n}\nexport function deserializeLPList(serialized, type, lengthPrefixBytes) {\n    const bytesReader = isInstance(serialized, BytesReader)\n        ? serialized\n        : new BytesReader(serialized);\n    const length = hexToInt(bytesToHex(bytesReader.readBytes(lengthPrefixBytes || 4)));\n    const l = [];\n    for (let index = 0; index < length; index++) {\n        switch (type) {\n            case StacksWireType.Address:\n                l.push(deserializeAddress(bytesReader));\n                break;\n            case StacksWireType.LengthPrefixedString:\n                l.push(deserializeLPString(bytesReader));\n                break;\n            case StacksWireType.MemoString:\n                l.push(deserializeMemoString(bytesReader));\n                break;\n            case StacksWireType.Asset:\n                l.push(deserializeAsset(bytesReader));\n                break;\n            case StacksWireType.PostCondition:\n                l.push(deserializePostConditionWire(bytesReader));\n                break;\n            case StacksWireType.PublicKey:\n                l.push(deserializePublicKey(bytesReader));\n                break;\n            case StacksWireType.TransactionAuthField:\n                l.push(deserializeTransactionAuthField(bytesReader));\n                break;\n        }\n    }\n    return createLPList(l, lengthPrefixBytes);\n}\nexport function serializePostConditionWire(postCondition) {\n    return bytesToHex(serializePostConditionWireBytes(postCondition));\n}\nexport function serializePostConditionWireBytes(postCondition) {\n    const bytesArray = [];\n    bytesArray.push(postCondition.conditionType);\n    bytesArray.push(serializePrincipalBytes(postCondition.principal));\n    if (postCondition.conditionType === PostConditionType.Fungible ||\n        postCondition.conditionType === PostConditionType.NonFungible) {\n        bytesArray.push(serializeAssetBytes(postCondition.asset));\n    }\n    if (postCondition.conditionType === PostConditionType.NonFungible) {\n        bytesArray.push(serializeCVBytes(postCondition.assetName));\n    }\n    bytesArray.push(postCondition.conditionCode);\n    if (postCondition.conditionType === PostConditionType.STX ||\n        postCondition.conditionType === PostConditionType.Fungible) {\n        if (postCondition.amount > BigInt('0xffffffffffffffff'))\n            throw new SerializationError('The post-condition amount may not be larger than 8 bytes');\n        bytesArray.push(intToBytes(postCondition.amount, 8));\n    }\n    return concatArray(bytesArray);\n}\nexport function deserializePostConditionWire(serialized) {\n    const bytesReader = isInstance(serialized, BytesReader)\n        ? serialized\n        : new BytesReader(serialized);\n    const postConditionType = bytesReader.readUInt8Enum(PostConditionType, n => {\n        throw new DeserializationError(`Could not read ${n} as PostConditionType`);\n    });\n    const principal = deserializePrincipal(bytesReader);\n    let conditionCode;\n    let asset;\n    let amount;\n    switch (postConditionType) {\n        case PostConditionType.STX:\n            conditionCode = bytesReader.readUInt8Enum(FungibleConditionCode, n => {\n                throw new DeserializationError(`Could not read ${n} as FungibleConditionCode`);\n            });\n            amount = BigInt(`0x${bytesToHex(bytesReader.readBytes(8))}`);\n            return {\n                type: StacksWireType.PostCondition,\n                conditionType: PostConditionType.STX,\n                principal,\n                conditionCode,\n                amount,\n            };\n        case PostConditionType.Fungible:\n            asset = deserializeAsset(bytesReader);\n            conditionCode = bytesReader.readUInt8Enum(FungibleConditionCode, n => {\n                throw new DeserializationError(`Could not read ${n} as FungibleConditionCode`);\n            });\n            amount = BigInt(`0x${bytesToHex(bytesReader.readBytes(8))}`);\n            return {\n                type: StacksWireType.PostCondition,\n                conditionType: PostConditionType.Fungible,\n                principal,\n                conditionCode,\n                amount,\n                asset: asset,\n            };\n        case PostConditionType.NonFungible:\n            asset = deserializeAsset(bytesReader);\n            const assetName = deserializeCV(bytesReader);\n            conditionCode = bytesReader.readUInt8Enum(NonFungibleConditionCode, n => {\n                throw new DeserializationError(`Could not read ${n} as FungibleConditionCode`);\n            });\n            return {\n                type: StacksWireType.PostCondition,\n                conditionType: PostConditionType.NonFungible,\n                principal,\n                conditionCode,\n                asset,\n                assetName,\n            };\n    }\n}\nexport function serializePayload(payload) {\n    return bytesToHex(serializePayloadBytes(payload));\n}\nexport function serializePayloadBytes(payload) {\n    const bytesArray = [];\n    bytesArray.push(payload.payloadType);\n    switch (payload.payloadType) {\n        case PayloadType.TokenTransfer:\n            bytesArray.push(serializeCVBytes(payload.recipient));\n            bytesArray.push(intToBytes(payload.amount, 8));\n            bytesArray.push(serializeStacksWireBytes(payload.memo));\n            break;\n        case PayloadType.ContractCall:\n            bytesArray.push(serializeStacksWireBytes(payload.contractAddress));\n            bytesArray.push(serializeStacksWireBytes(payload.contractName));\n            bytesArray.push(serializeStacksWireBytes(payload.functionName));\n            const numArgs = new Uint8Array(4);\n            writeUInt32BE(numArgs, payload.functionArgs.length, 0);\n            bytesArray.push(numArgs);\n            payload.functionArgs.forEach(arg => {\n                bytesArray.push(serializeCVBytes(arg));\n            });\n            break;\n        case PayloadType.SmartContract:\n            bytesArray.push(serializeStacksWireBytes(payload.contractName));\n            bytesArray.push(serializeStacksWireBytes(payload.codeBody));\n            break;\n        case PayloadType.VersionedSmartContract:\n            bytesArray.push(payload.clarityVersion);\n            bytesArray.push(serializeStacksWireBytes(payload.contractName));\n            bytesArray.push(serializeStacksWireBytes(payload.codeBody));\n            break;\n        case PayloadType.PoisonMicroblock:\n            break;\n        case PayloadType.Coinbase:\n            bytesArray.push(payload.coinbaseBytes);\n            break;\n        case PayloadType.CoinbaseToAltRecipient:\n            bytesArray.push(payload.coinbaseBytes);\n            bytesArray.push(serializeCVBytes(payload.recipient));\n            break;\n        case PayloadType.NakamotoCoinbase:\n            bytesArray.push(payload.coinbaseBytes);\n            bytesArray.push(serializeCVBytes(payload.recipient ? someCV(payload.recipient) : noneCV()));\n            bytesArray.push(payload.vrfProof);\n            break;\n        case PayloadType.TenureChange:\n            bytesArray.push(hexToBytes(payload.tenureHash));\n            bytesArray.push(hexToBytes(payload.previousTenureHash));\n            bytesArray.push(hexToBytes(payload.burnViewHash));\n            bytesArray.push(hexToBytes(payload.previousTenureEnd));\n            bytesArray.push(writeUInt32BE(new Uint8Array(4), payload.previousTenureBlocks));\n            bytesArray.push(writeUInt8(new Uint8Array(1), payload.cause));\n            bytesArray.push(hexToBytes(payload.publicKeyHash));\n            break;\n    }\n    return concatArray(bytesArray);\n}\nexport function deserializePayload(serialized) {\n    const bytesReader = isInstance(serialized, BytesReader)\n        ? serialized\n        : new BytesReader(serialized);\n    const payloadType = bytesReader.readUInt8Enum(PayloadType, n => {\n        throw new Error(`Cannot recognize PayloadType: ${n}`);\n    });\n    switch (payloadType) {\n        case PayloadType.TokenTransfer:\n            const recipient = deserializeCV(bytesReader);\n            const amount = intToBigInt(bytesReader.readBytes(8));\n            const memo = deserializeMemoString(bytesReader);\n            return createTokenTransferPayload(recipient, amount, memo);\n        case PayloadType.ContractCall:\n            const contractAddress = deserializeAddress(bytesReader);\n            const contractCallName = deserializeLPString(bytesReader);\n            const functionName = deserializeLPString(bytesReader);\n            const functionArgs = [];\n            const numberOfArgs = bytesReader.readUInt32BE();\n            for (let i = 0; i < numberOfArgs; i++) {\n                const clarityValue = deserializeCV(bytesReader);\n                functionArgs.push(clarityValue);\n            }\n            return createContractCallPayload(contractAddress, contractCallName, functionName, functionArgs);\n        case PayloadType.SmartContract:\n            const smartContractName = deserializeLPString(bytesReader);\n            const codeBody = deserializeLPString(bytesReader, 4, 100000);\n            return createSmartContractPayload(smartContractName, codeBody);\n        case PayloadType.VersionedSmartContract: {\n            const clarityVersion = bytesReader.readUInt8Enum(ClarityVersion, n => {\n                throw new Error(`Cannot recognize ClarityVersion: ${n}`);\n            });\n            const smartContractName = deserializeLPString(bytesReader);\n            const codeBody = deserializeLPString(bytesReader, 4, STRING_MAX_LENGTH);\n            return createSmartContractPayload(smartContractName, codeBody, clarityVersion);\n        }\n        case PayloadType.PoisonMicroblock:\n            return createPoisonPayload();\n        case PayloadType.Coinbase: {\n            const coinbaseBytes = bytesReader.readBytes(COINBASE_BYTES_LENGTH);\n            return createCoinbasePayload(coinbaseBytes);\n        }\n        case PayloadType.CoinbaseToAltRecipient: {\n            const coinbaseBytes = bytesReader.readBytes(COINBASE_BYTES_LENGTH);\n            const altRecipient = deserializeCV(bytesReader);\n            return createCoinbasePayload(coinbaseBytes, altRecipient);\n        }\n        case PayloadType.NakamotoCoinbase: {\n            const coinbaseBytes = bytesReader.readBytes(COINBASE_BYTES_LENGTH);\n            const recipient = deserializeCV(bytesReader);\n            const vrfProof = bytesReader.readBytes(VRF_PROOF_BYTES_LENGTH);\n            return createNakamotoCoinbasePayload(coinbaseBytes, recipient, vrfProof);\n        }\n        case PayloadType.TenureChange:\n            const tenureHash = bytesToHex(bytesReader.readBytes(20));\n            const previousTenureHash = bytesToHex(bytesReader.readBytes(20));\n            const burnViewHash = bytesToHex(bytesReader.readBytes(20));\n            const previousTenureEnd = bytesToHex(bytesReader.readBytes(32));\n            const previousTenureBlocks = bytesReader.readUInt32BE();\n            const cause = bytesReader.readUInt8Enum(TenureChangeCause, n => {\n                throw new Error(`Cannot recognize TenureChangeCause: ${n}`);\n            });\n            const publicKeyHash = bytesToHex(bytesReader.readBytes(20));\n            return createTenureChangePayload(tenureHash, previousTenureHash, burnViewHash, previousTenureEnd, previousTenureBlocks, cause, publicKeyHash);\n    }\n}\nexport function deserializeMessageSignature(serialized) {\n    const bytesReader = isInstance(serialized, BytesReader)\n        ? serialized\n        : new BytesReader(serialized);\n    return createMessageSignature(bytesToHex(bytesReader.readBytes(RECOVERABLE_ECDSA_SIG_LENGTH_BYTES)));\n}\nexport function deserializeTransactionAuthField(serialized) {\n    const bytesReader = isInstance(serialized, BytesReader)\n        ? serialized\n        : new BytesReader(serialized);\n    const authFieldType = bytesReader.readUInt8Enum(AuthFieldType, n => {\n        throw new DeserializationError(`Could not read ${n} as AuthFieldType`);\n    });\n    switch (authFieldType) {\n        case AuthFieldType.PublicKeyCompressed:\n            return createTransactionAuthField(PubKeyEncoding.Compressed, deserializePublicKey(bytesReader));\n        case AuthFieldType.PublicKeyUncompressed:\n            return createTransactionAuthField(PubKeyEncoding.Uncompressed, createStacksPublicKey(uncompressPublicKey(deserializePublicKey(bytesReader).data)));\n        case AuthFieldType.SignatureCompressed:\n            return createTransactionAuthField(PubKeyEncoding.Compressed, deserializeMessageSignature(bytesReader));\n        case AuthFieldType.SignatureUncompressed:\n            return createTransactionAuthField(PubKeyEncoding.Uncompressed, deserializeMessageSignature(bytesReader));\n        default:\n            throw new Error(`Unknown auth field type: ${JSON.stringify(authFieldType)}`);\n    }\n}\nexport function serializeMessageSignature(messageSignature) {\n    return bytesToHex(serializeMessageSignatureBytes(messageSignature));\n}\nexport function serializeMessageSignatureBytes(messageSignature) {\n    return hexToBytes(messageSignature.data);\n}\nexport function serializeTransactionAuthField(field) {\n    return bytesToHex(serializeTransactionAuthFieldBytes(field));\n}\nexport function serializeTransactionAuthFieldBytes(field) {\n    const bytesArray = [];\n    switch (field.contents.type) {\n        case StacksWireType.PublicKey:\n            bytesArray.push(field.pubKeyEncoding === PubKeyEncoding.Compressed\n                ? AuthFieldType.PublicKeyCompressed\n                : AuthFieldType.PublicKeyUncompressed);\n            bytesArray.push(hexToBytes(compressPublicKey(field.contents.data)));\n            break;\n        case StacksWireType.MessageSignature:\n            bytesArray.push(field.pubKeyEncoding === PubKeyEncoding.Compressed\n                ? AuthFieldType.SignatureCompressed\n                : AuthFieldType.SignatureUncompressed);\n            bytesArray.push(serializeMessageSignatureBytes(field.contents));\n            break;\n    }\n    return concatArray(bytesArray);\n}\nexport function serializePublicKey(key) {\n    return bytesToHex(serializePublicKeyBytes(key));\n}\nexport function serializePublicKeyBytes(key) {\n    return key.data.slice();\n}\nexport function deserializePublicKey(serialized) {\n    const bytesReader = isInstance(serialized, BytesReader)\n        ? serialized\n        : new BytesReader(serialized);\n    const fieldId = bytesReader.readUInt8();\n    const keyLength = fieldId === 4 ? UNCOMPRESSED_PUBKEY_LENGTH_BYTES : COMPRESSED_PUBKEY_LENGTH_BYTES;\n    return createStacksPublicKey(concatArray([fieldId, bytesReader.readBytes(keyLength)]));\n}\n//# sourceMappingURL=serialization.js.map","import { c32address } from 'c32check';\nimport { AddressHashMode, PayloadType } from '../constants';\nimport { publicKeyIsCompressed } from '../keys';\nimport { hashP2PKH, hashP2SH, hashP2WPKH, hashP2WSH } from '../utils';\nimport { createAsset, createContractPrincipal, createStandardPrincipal } from './create';\nimport { serializePublicKeyBytes } from './serialization';\nimport { StacksWireType, } from './types';\nexport function addressFromPublicKeys(version, hashMode, numSigs, publicKeys) {\n    if (publicKeys.length === 0) {\n        throw Error('Invalid number of public keys');\n    }\n    if (hashMode === AddressHashMode.P2PKH || hashMode === AddressHashMode.P2WPKH) {\n        if (publicKeys.length !== 1 || numSigs !== 1) {\n            throw Error('Invalid number of public keys or signatures');\n        }\n    }\n    if (hashMode === AddressHashMode.P2WPKH ||\n        hashMode === AddressHashMode.P2WSH ||\n        hashMode === AddressHashMode.P2WSHNonSequential) {\n        if (!publicKeys.map(p => p.data).every(publicKeyIsCompressed)) {\n            throw Error('Public keys must be compressed for segwit');\n        }\n    }\n    switch (hashMode) {\n        case AddressHashMode.P2PKH:\n            return addressFromVersionHash(version, hashP2PKH(publicKeys[0].data));\n        case AddressHashMode.P2WPKH:\n            return addressFromVersionHash(version, hashP2WPKH(publicKeys[0].data));\n        case AddressHashMode.P2SH:\n        case AddressHashMode.P2SHNonSequential:\n            return addressFromVersionHash(version, hashP2SH(numSigs, publicKeys.map(serializePublicKeyBytes)));\n        case AddressHashMode.P2WSH:\n        case AddressHashMode.P2WSHNonSequential:\n            return addressFromVersionHash(version, hashP2WSH(numSigs, publicKeys.map(serializePublicKeyBytes)));\n    }\n}\nexport function addressFromVersionHash(version, hash) {\n    return { type: StacksWireType.Address, version, hash160: hash };\n}\nexport function addressToString(address) {\n    return c32address(address.version, address.hash160);\n}\nexport function isTokenTransferPayload(p) {\n    return p.payloadType === PayloadType.TokenTransfer;\n}\nexport function isContractCallPayload(p) {\n    return p.payloadType === PayloadType.ContractCall;\n}\nexport function isSmartContractPayload(p) {\n    return p.payloadType === PayloadType.SmartContract;\n}\nexport function isPoisonPayload(p) {\n    return p.payloadType === PayloadType.PoisonMicroblock;\n}\nexport function isCoinbasePayload(p) {\n    return p.payloadType === PayloadType.Coinbase;\n}\nexport function parseAssetString(id) {\n    const [assetAddress, assetContractName, assetTokenName] = id.split(/\\.|::/);\n    const asset = createAsset(assetAddress, assetContractName, assetTokenName);\n    return asset;\n}\nexport function parsePrincipalString(principalString) {\n    if (principalString.includes('.')) {\n        const [address, contractName] = principalString.split('.');\n        return createContractPrincipal(address, contractName);\n    }\n    else {\n        return createStandardPrincipal(principalString);\n    }\n}\n//# sourceMappingURL=helpers.js.map","import { utf8ToBytes } from '@stacks/common';\nimport { addressToString, createAddress, createLPString, } from '../../wire';\nimport { ClarityType } from '../constants';\nexport function principalCV(principal) {\n    if (principal.includes('.')) {\n        const [address, contractName] = principal.split('.');\n        return contractPrincipalCV(address, contractName);\n    }\n    else {\n        return standardPrincipalCV(principal);\n    }\n}\nexport function standardPrincipalCV(addressString) {\n    const addr = createAddress(addressString);\n    return { type: ClarityType.PrincipalStandard, value: addressToString(addr) };\n}\nexport function standardPrincipalCVFromAddress(address) {\n    return { type: ClarityType.PrincipalStandard, value: addressToString(address) };\n}\nexport function contractPrincipalCV(addressString, contractName) {\n    const addr = createAddress(addressString);\n    const lengthPrefixedContractName = createLPString(contractName);\n    return contractPrincipalCVFromAddress(addr, lengthPrefixedContractName);\n}\nexport function contractPrincipalCVFromAddress(address, contractName) {\n    if (utf8ToBytes(contractName.content).byteLength >= 128) {\n        throw new Error('Contract name must be less than 128 bytes');\n    }\n    return {\n        type: ClarityType.PrincipalContract,\n        value: `${addressToString(address)}.${contractName.content}`,\n    };\n}\nexport function contractPrincipalCVFromStandard(sp, contractName) {\n    return {\n        type: ClarityType.PrincipalContract,\n        value: `${sp.value}.${contractName}`,\n    };\n}\n//# sourceMappingURL=principalCV.js.map","import { ClarityType } from '../constants';\nexport function responseErrorCV(value) {\n    return { type: ClarityType.ResponseErr, value };\n}\nexport function responseOkCV(value) {\n    return { type: ClarityType.ResponseOk, value };\n}\n//# sourceMappingURL=responseCV.js.map","import { ClarityType } from '../constants';\nexport const stringAsciiCV = (data) => {\n    return { type: ClarityType.StringASCII, value: data };\n};\nexport const stringUtf8CV = (data) => {\n    return { type: ClarityType.StringUTF8, value: data };\n};\nexport const stringCV = (data, encoding) => {\n    switch (encoding) {\n        case 'ascii':\n            return stringAsciiCV(data);\n        case 'utf8':\n            return stringUtf8CV(data);\n    }\n};\n//# sourceMappingURL=stringCV.js.map","import { ClarityType } from '../constants';\nimport { isClarityName } from '../../utils';\nexport function tupleCV(data) {\n    for (const key in data) {\n        if (!isClarityName(key)) {\n            throw new Error(`\"${key}\" is not a valid Clarity name`);\n        }\n    }\n    return { type: ClarityType.Tuple, value: data };\n}\n//# sourceMappingURL=tupleCV.js.map","import { bytesToAscii, bytesToTwosBigInt, bytesToUtf8, hexToBytes } from '@stacks/common';\nimport { ClarityWireType, bufferCV, contractPrincipalCVFromAddress, falseCV, intCV, listCV, noneCV, responseErrorCV, responseOkCV, someCV, standardPrincipalCVFromAddress, stringAsciiCV, stringUtf8CV, trueCV, tupleCV, uintCV, } from '.';\nimport { BytesReader } from '../BytesReader';\nimport { DeserializationError } from '../errors';\nimport { deserializeAddress, deserializeLPString } from '../wire';\nexport function deserializeCV(serializedClarityValue) {\n    let bytesReader;\n    if (typeof serializedClarityValue === 'string') {\n        const hasHexPrefix = serializedClarityValue.slice(0, 2).toLowerCase() === '0x';\n        bytesReader = new BytesReader(hexToBytes(hasHexPrefix ? serializedClarityValue.slice(2) : serializedClarityValue));\n    }\n    else if (serializedClarityValue instanceof Uint8Array) {\n        bytesReader = new BytesReader(serializedClarityValue);\n    }\n    else {\n        bytesReader = serializedClarityValue;\n    }\n    const type = bytesReader.readUInt8Enum(ClarityWireType, n => {\n        throw new DeserializationError(`Cannot recognize Clarity Type: ${n}`);\n    });\n    switch (type) {\n        case ClarityWireType.int:\n            return intCV(bytesToTwosBigInt(bytesReader.readBytes(16)));\n        case ClarityWireType.uint:\n            return uintCV(bytesReader.readBytes(16));\n        case ClarityWireType.buffer:\n            const bufferLength = bytesReader.readUInt32BE();\n            return bufferCV(bytesReader.readBytes(bufferLength));\n        case ClarityWireType.true:\n            return trueCV();\n        case ClarityWireType.false:\n            return falseCV();\n        case ClarityWireType.address:\n            const sAddress = deserializeAddress(bytesReader);\n            return standardPrincipalCVFromAddress(sAddress);\n        case ClarityWireType.contract:\n            const cAddress = deserializeAddress(bytesReader);\n            const contractName = deserializeLPString(bytesReader);\n            return contractPrincipalCVFromAddress(cAddress, contractName);\n        case ClarityWireType.ok:\n            return responseOkCV(deserializeCV(bytesReader));\n        case ClarityWireType.err:\n            return responseErrorCV(deserializeCV(bytesReader));\n        case ClarityWireType.none:\n            return noneCV();\n        case ClarityWireType.some:\n            return someCV(deserializeCV(bytesReader));\n        case ClarityWireType.list:\n            const listLength = bytesReader.readUInt32BE();\n            const listContents = [];\n            for (let i = 0; i < listLength; i++) {\n                listContents.push(deserializeCV(bytesReader));\n            }\n            return listCV(listContents);\n        case ClarityWireType.tuple:\n            const tupleLength = bytesReader.readUInt32BE();\n            const tupleContents = {};\n            for (let i = 0; i < tupleLength; i++) {\n                const clarityName = deserializeLPString(bytesReader).content;\n                if (clarityName === undefined) {\n                    throw new DeserializationError('\"content\" is undefined');\n                }\n                tupleContents[clarityName] = deserializeCV(bytesReader);\n            }\n            return tupleCV(tupleContents);\n        case ClarityWireType.ascii:\n            const asciiStrLen = bytesReader.readUInt32BE();\n            const asciiStr = bytesToAscii(bytesReader.readBytes(asciiStrLen));\n            return stringAsciiCV(asciiStr);\n        case ClarityWireType.utf8:\n            const utf8StrLen = bytesReader.readUInt32BE();\n            const utf8Str = bytesToUtf8(bytesReader.readBytes(utf8StrLen));\n            return stringUtf8CV(utf8Str);\n        default:\n            throw new DeserializationError('Unable to deserialize Clarity Value from Uint8Array. Could not find valid Clarity Type.');\n    }\n}\n//# sourceMappingURL=deserialize.js.map","import { asciiToBytes, bigIntToBytes, bytesToHex, concatArray, concatBytes, hexToBytes, toTwos, utf8ToBytes, writeUInt32BE, } from '@stacks/common';\nimport { CLARITY_INT_BYTE_SIZE, CLARITY_INT_SIZE } from '../constants';\nimport { SerializationError } from '../errors';\nimport { parseContractId } from '../utils';\nimport { createAddress, createLPString, serializeAddressBytes, serializeLPStringBytes, } from '../wire';\nimport { ClarityType, clarityTypeToByte } from './constants';\nfunction bytesWithTypeID(typeId, bytes) {\n    return concatArray([clarityTypeToByte(typeId), bytes]);\n}\nfunction serializeBoolCV(value) {\n    return new Uint8Array([clarityTypeToByte(value.type)]);\n}\nfunction serializeOptionalCV(cv) {\n    if (cv.type === ClarityType.OptionalNone) {\n        return new Uint8Array([clarityTypeToByte(cv.type)]);\n    }\n    else {\n        return bytesWithTypeID(cv.type, serializeCVBytes(cv.value));\n    }\n}\nfunction serializeBufferCV(cv) {\n    const length = new Uint8Array(4);\n    writeUInt32BE(length, Math.ceil(cv.value.length / 2), 0);\n    return bytesWithTypeID(cv.type, concatBytes(length, hexToBytes(cv.value)));\n}\nfunction serializeIntCV(cv) {\n    const bytes = bigIntToBytes(toTwos(BigInt(cv.value), BigInt(CLARITY_INT_SIZE)), CLARITY_INT_BYTE_SIZE);\n    return bytesWithTypeID(cv.type, bytes);\n}\nfunction serializeUIntCV(cv) {\n    const bytes = bigIntToBytes(BigInt(cv.value), CLARITY_INT_BYTE_SIZE);\n    return bytesWithTypeID(cv.type, bytes);\n}\nfunction serializeStandardPrincipalCV(cv) {\n    return bytesWithTypeID(cv.type, serializeAddressBytes(createAddress(cv.value)));\n}\nfunction serializeContractPrincipalCV(cv) {\n    const [address, name] = parseContractId(cv.value);\n    return bytesWithTypeID(cv.type, concatBytes(serializeAddressBytes(createAddress(address)), serializeLPStringBytes(createLPString(name))));\n}\nfunction serializeResponseCV(cv) {\n    return bytesWithTypeID(cv.type, serializeCVBytes(cv.value));\n}\nfunction serializeListCV(cv) {\n    const bytesArray = [];\n    const length = new Uint8Array(4);\n    writeUInt32BE(length, cv.value.length, 0);\n    bytesArray.push(length);\n    for (const value of cv.value) {\n        const serializedValue = serializeCVBytes(value);\n        bytesArray.push(serializedValue);\n    }\n    return bytesWithTypeID(cv.type, concatArray(bytesArray));\n}\nfunction serializeTupleCV(cv) {\n    const bytesArray = [];\n    const length = new Uint8Array(4);\n    writeUInt32BE(length, Object.keys(cv.value).length, 0);\n    bytesArray.push(length);\n    const lexicographicOrder = Object.keys(cv.value).sort((a, b) => a.localeCompare(b));\n    for (const key of lexicographicOrder) {\n        const nameWithLength = createLPString(key);\n        bytesArray.push(serializeLPStringBytes(nameWithLength));\n        const serializedValue = serializeCVBytes(cv.value[key]);\n        bytesArray.push(serializedValue);\n    }\n    return bytesWithTypeID(cv.type, concatArray(bytesArray));\n}\nfunction serializeStringCV(cv, encoding) {\n    const bytesArray = [];\n    const str = encoding == 'ascii' ? asciiToBytes(cv.value) : utf8ToBytes(cv.value);\n    const len = new Uint8Array(4);\n    writeUInt32BE(len, str.length, 0);\n    bytesArray.push(len);\n    bytesArray.push(str);\n    return bytesWithTypeID(cv.type, concatArray(bytesArray));\n}\nfunction serializeStringAsciiCV(cv) {\n    return serializeStringCV(cv, 'ascii');\n}\nfunction serializeStringUtf8CV(cv) {\n    return serializeStringCV(cv, 'utf8');\n}\nexport function serializeCV(value) {\n    return bytesToHex(serializeCVBytes(value));\n}\nexport function serializeCVBytes(value) {\n    switch (value.type) {\n        case ClarityType.BoolTrue:\n        case ClarityType.BoolFalse:\n            return serializeBoolCV(value);\n        case ClarityType.OptionalNone:\n        case ClarityType.OptionalSome:\n            return serializeOptionalCV(value);\n        case ClarityType.Buffer:\n            return serializeBufferCV(value);\n        case ClarityType.UInt:\n            return serializeUIntCV(value);\n        case ClarityType.Int:\n            return serializeIntCV(value);\n        case ClarityType.PrincipalStandard:\n            return serializeStandardPrincipalCV(value);\n        case ClarityType.PrincipalContract:\n            return serializeContractPrincipalCV(value);\n        case ClarityType.ResponseOk:\n        case ClarityType.ResponseErr:\n            return serializeResponseCV(value);\n        case ClarityType.List:\n            return serializeListCV(value);\n        case ClarityType.Tuple:\n            return serializeTupleCV(value);\n        case ClarityType.StringASCII:\n            return serializeStringAsciiCV(value);\n        case ClarityType.StringUTF8:\n            return serializeStringUtf8CV(value);\n        default:\n            throw new SerializationError('Unable to serialize. Invalid Clarity Value.');\n    }\n}\n//# sourceMappingURL=serialize.js.map","import { ripemd160 } from '@noble/hashes/ripemd160';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { sha512_256 } from '@noble/hashes/sha512';\nimport { utils } from '@noble/secp256k1';\nimport { bytesToHex, concatArray, concatBytes, utf8ToBytes } from '@stacks/common';\nimport { c32addressDecode } from 'c32check';\nimport lodashCloneDeep from 'lodash.clonedeep';\nimport { deserializeCV, serializeCV } from './clarity';\nexport { verify as verifySignature } from '@noble/secp256k1';\nexport const randomBytes = (bytesLength) => utils.randomBytes(bytesLength);\nexport const leftPadHex = (hexString) => hexString.length % 2 ? `0${hexString}` : hexString;\nexport const leftPadHexToLength = (hexString, length) => hexString.padStart(length, '0');\nexport const rightPadHexToLength = (hexString, length) => hexString.padEnd(length, '0');\nexport const exceedsMaxLengthBytes = (string, maxLengthBytes) => string ? utf8ToBytes(string).length > maxLengthBytes : false;\nexport function cloneDeep(obj) {\n    return lodashCloneDeep(obj);\n}\nexport function omit(obj, prop) {\n    const clone = cloneDeep(obj);\n    delete clone[prop];\n    return clone;\n}\nexport const hash160 = (input) => {\n    return ripemd160(sha256(input));\n};\nexport const txidFromData = (data) => {\n    return bytesToHex(sha512_256(data));\n};\nexport const txidFromBytes = txidFromData;\nexport const hashP2PKH = (input) => {\n    return bytesToHex(hash160(input));\n};\nexport const hashP2WPKH = (input) => {\n    const keyHash = hash160(input);\n    const redeemScript = concatBytes(new Uint8Array([0]), new Uint8Array([keyHash.length]), keyHash);\n    const redeemScriptHash = hash160(redeemScript);\n    return bytesToHex(redeemScriptHash);\n};\nexport const hashP2SH = (numSigs, pubKeys) => {\n    if (numSigs > 15 || pubKeys.length > 15) {\n        throw Error('P2SH multisig address can only contain up to 15 public keys');\n    }\n    const bytesArray = [];\n    bytesArray.push(80 + numSigs);\n    pubKeys.forEach(pubKey => {\n        bytesArray.push(pubKey.length);\n        bytesArray.push(pubKey);\n    });\n    bytesArray.push(80 + pubKeys.length);\n    bytesArray.push(174);\n    const redeemScript = concatArray(bytesArray);\n    const redeemScriptHash = hash160(redeemScript);\n    return bytesToHex(redeemScriptHash);\n};\nexport const hashP2WSH = (numSigs, pubKeys) => {\n    if (numSigs > 15 || pubKeys.length > 15) {\n        throw Error('P2WSH multisig address can only contain up to 15 public keys');\n    }\n    const scriptArray = [];\n    scriptArray.push(80 + numSigs);\n    pubKeys.forEach(pubKey => {\n        scriptArray.push(pubKey.length);\n        scriptArray.push(pubKey);\n    });\n    scriptArray.push(80 + pubKeys.length);\n    scriptArray.push(174);\n    const script = concatArray(scriptArray);\n    const digest = sha256(script);\n    const bytesArray = [];\n    bytesArray.push(0);\n    bytesArray.push(digest.length);\n    bytesArray.push(digest);\n    const redeemScript = concatArray(bytesArray);\n    const redeemScriptHash = hash160(redeemScript);\n    return bytesToHex(redeemScriptHash);\n};\nexport function isClarityName(name) {\n    const regex = /^[a-zA-Z]([a-zA-Z0-9]|[-_!?+<>=/*])*$|^[-+=/*]$|^[<>]=?$/;\n    return regex.test(name) && name.length < 128;\n}\nexport function cvToHex(cv) {\n    const serialized = serializeCV(cv);\n    return `0x${serialized}`;\n}\nexport function hexToCV(hex) {\n    return deserializeCV(hex);\n}\nexport const parseReadOnlyResponse = (response) => {\n    if (response.okay)\n        return hexToCV(response.result);\n    throw new Error(response.cause);\n};\nexport const validateStacksAddress = (address) => {\n    try {\n        c32addressDecode(address);\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n};\nexport function parseContractId(contractId) {\n    const [address, name] = contractId.split('.');\n    if (!address || !name)\n        throw new Error(`Invalid contract identifier: ${contractId}`);\n    return [address, name];\n}\n//# sourceMappingURL=utils.js.map","import { hmac } from '@noble/hashes/hmac';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { getPublicKey as nobleGetPublicKey, Point, Signature, signSync, utils, } from '@noble/secp256k1';\nimport { bytesToHex, hexToBigInt, hexToBytes, intToHex, parseRecoverableSignatureVrs, PRIVATE_KEY_BYTES_COMPRESSED, privateKeyToBytes, signatureRsvToVrs, signatureVrsToRsv, } from '@stacks/common';\nimport { networkFrom, STACKS_MAINNET } from '@stacks/network';\nimport { c32address } from 'c32check';\nimport { addressHashModeToVersion } from './address';\nimport { AddressHashMode, PubKeyEncoding } from './constants';\nimport { hash160, hashP2PKH } from './utils';\nimport { addressFromVersionHash, addressToString, StacksWireType } from './wire';\nutils.hmacSha256Sync = (key, ...msgs) => {\n    const h = hmac.create(sha256, key);\n    msgs.forEach(msg => h.update(msg));\n    return h.digest();\n};\nexport function getAddressFromPrivateKey(privateKey, network = 'mainnet') {\n    network = networkFrom(network);\n    const publicKey = privateKeyToPublic(privateKey);\n    return getAddressFromPublicKey(publicKey, network);\n}\nexport function getAddressFromPublicKey(publicKey, network = 'mainnet') {\n    network = networkFrom(network);\n    publicKey = typeof publicKey === 'string' ? hexToBytes(publicKey) : publicKey;\n    const addrVer = addressHashModeToVersion(AddressHashMode.P2PKH, network);\n    const addr = addressFromVersionHash(addrVer, hashP2PKH(publicKey));\n    const addrString = addressToString(addr);\n    return addrString;\n}\nexport function createStacksPublicKey(publicKey) {\n    publicKey = typeof publicKey === 'string' ? hexToBytes(publicKey) : publicKey;\n    return {\n        type: StacksWireType.PublicKey,\n        data: publicKey,\n    };\n}\nexport function publicKeyFromSignatureVrs(messageHash, messageSignature, pubKeyEncoding = PubKeyEncoding.Compressed) {\n    const parsedSignature = parseRecoverableSignatureVrs(messageSignature);\n    const signature = new Signature(hexToBigInt(parsedSignature.r), hexToBigInt(parsedSignature.s));\n    const point = Point.fromSignature(messageHash, signature, parsedSignature.recoveryId);\n    const compressed = pubKeyEncoding === PubKeyEncoding.Compressed;\n    return point.toHex(compressed);\n}\nexport function publicKeyFromSignatureRsv(messageHash, messageSignature, pubKeyEncoding = PubKeyEncoding.Compressed) {\n    return publicKeyFromSignatureVrs(messageHash, signatureRsvToVrs(messageSignature), pubKeyEncoding);\n}\nexport function privateKeyToHex(publicKey) {\n    return typeof publicKey === 'string' ? publicKey : bytesToHex(publicKey);\n}\nexport const publicKeyToHex = privateKeyToHex;\nexport const isPrivateKeyCompressed = privateKeyIsCompressed;\nexport function privateKeyIsCompressed(privateKey) {\n    const length = typeof privateKey === 'string' ? privateKey.length / 2 : privateKey.byteLength;\n    return length === PRIVATE_KEY_BYTES_COMPRESSED;\n}\nexport const isPublicKeyCompressed = publicKeyIsCompressed;\nexport function publicKeyIsCompressed(publicKey) {\n    return !publicKeyToHex(publicKey).startsWith('04');\n}\nexport function privateKeyToPublic(privateKey) {\n    privateKey = privateKeyToBytes(privateKey);\n    const isCompressed = privateKeyIsCompressed(privateKey);\n    return bytesToHex(nobleGetPublicKey(privateKey.slice(0, 32), isCompressed));\n}\nexport function compressPublicKey(publicKey) {\n    return Point.fromHex(publicKeyToHex(publicKey)).toHex(true);\n}\nexport function uncompressPublicKey(publicKey) {\n    return Point.fromHex(publicKeyToHex(publicKey)).toHex(false);\n}\nexport const makeRandomPrivKey = randomPrivateKey;\nexport function randomPrivateKey() {\n    return compressPrivateKey(utils.randomPrivateKey());\n}\nexport function signWithKey(privateKey, messageHash) {\n    privateKey = privateKeyToBytes(privateKey);\n    const [rawSignature, recoveryId] = signSync(messageHash, privateKey.slice(0, 32), {\n        canonical: true,\n        recovered: true,\n    });\n    if (recoveryId == null) {\n        throw new Error('No signature recoveryId received');\n    }\n    const recoveryIdHex = intToHex(recoveryId, 1);\n    return recoveryIdHex + Signature.fromHex(rawSignature).toCompactHex();\n}\nexport function signMessageHashRsv({ messageHash, privateKey, }) {\n    return signatureVrsToRsv(signWithKey(privateKey, messageHash));\n}\nexport function compressPrivateKey(privateKey) {\n    privateKey = privateKeyToHex(privateKey);\n    return privateKey.length == PRIVATE_KEY_BYTES_COMPRESSED * 2\n        ? privateKey\n        : `${privateKey}01`;\n}\nexport function privateKeyToAddress(privateKey, network) {\n    const publicKey = privateKeyToPublic(privateKey);\n    return publicKeyToAddressSingleSig(publicKey, network);\n}\nexport function publicKeyToAddress(...args) {\n    if (typeof args[0] === 'number')\n        return _publicKeyToAddress(...args);\n    return publicKeyToAddressSingleSig(...args);\n}\nfunction _publicKeyToAddress(version, publicKey) {\n    publicKey = typeof publicKey === 'string' ? hexToBytes(publicKey) : publicKey;\n    return c32address(version, bytesToHex(hash160(publicKey)));\n}\nexport function publicKeyToAddressSingleSig(publicKey, network) {\n    network = network ? networkFrom(network) : STACKS_MAINNET;\n    publicKey = typeof publicKey === 'string' ? hexToBytes(publicKey) : publicKey;\n    return c32address(network.addressVersion.singleSig, bytesToHex(hash160(publicKey)));\n}\n//# sourceMappingURL=keys.js.map","import { bytesToHex, concatArray, hexToBytes, intToBigInt, intToBytes, writeUInt16BE, } from '@stacks/common';\nimport { AddressHashMode, AuthType, PubKeyEncoding, RECOVERABLE_ECDSA_SIG_LENGTH_BYTES, } from './constants';\nimport { DeserializationError, SigningError, VerificationError } from './errors';\nimport { createStacksPublicKey, privateKeyToPublic, publicKeyFromSignatureVrs, publicKeyIsCompressed, signWithKey, } from './keys';\nimport { cloneDeep, leftPadHex, txidFromData } from './utils';\nimport { addressFromPublicKeys, createEmptyAddress, createLPList, deserializeLPList, deserializeMessageSignature, serializeLPListBytes, serializeMessageSignatureBytes, StacksWireType, } from './wire';\nexport function emptyMessageSignature() {\n    return {\n        type: StacksWireType.MessageSignature,\n        data: bytesToHex(new Uint8Array(RECOVERABLE_ECDSA_SIG_LENGTH_BYTES)),\n    };\n}\nexport function createSpendingCondition(options) {\n    if ('publicKey' in options) {\n        return createSingleSigSpendingCondition(AddressHashMode.P2PKH, options.publicKey, options.nonce, options.fee);\n    }\n    return createMultiSigSpendingCondition(AddressHashMode.P2SH, options.numSignatures, options.publicKeys, options.nonce, options.fee);\n}\nexport function createSingleSigSpendingCondition(hashMode, pubKey, nonce, fee) {\n    const signer = addressFromPublicKeys(0, hashMode, 1, [createStacksPublicKey(pubKey)]).hash160;\n    const keyEncoding = publicKeyIsCompressed(pubKey)\n        ? PubKeyEncoding.Compressed\n        : PubKeyEncoding.Uncompressed;\n    return {\n        hashMode,\n        signer,\n        nonce: intToBigInt(nonce),\n        fee: intToBigInt(fee),\n        keyEncoding,\n        signature: emptyMessageSignature(),\n    };\n}\nexport function createMultiSigSpendingCondition(hashMode, numSigs, pubKeys, nonce, fee) {\n    const stacksPublicKeys = pubKeys.map(createStacksPublicKey);\n    const signer = addressFromPublicKeys(0, hashMode, numSigs, stacksPublicKeys).hash160;\n    return {\n        hashMode,\n        signer,\n        nonce: intToBigInt(nonce),\n        fee: intToBigInt(fee),\n        fields: [],\n        signaturesRequired: numSigs,\n    };\n}\nexport function isSingleSig(condition) {\n    return 'signature' in condition;\n}\nexport function isSequentialMultiSig(hashMode) {\n    return hashMode === AddressHashMode.P2SH || hashMode === AddressHashMode.P2WSH;\n}\nexport function isNonSequentialMultiSig(hashMode) {\n    return (hashMode === AddressHashMode.P2SHNonSequential ||\n        hashMode === AddressHashMode.P2WSHNonSequential);\n}\nfunction clearCondition(condition) {\n    const cloned = cloneDeep(condition);\n    cloned.nonce = 0;\n    cloned.fee = 0;\n    if (isSingleSig(cloned)) {\n        cloned.signature = emptyMessageSignature();\n    }\n    else {\n        cloned.fields = [];\n    }\n    return {\n        ...cloned,\n        nonce: BigInt(0),\n        fee: BigInt(0),\n    };\n}\nexport function serializeSingleSigSpendingCondition(condition) {\n    return bytesToHex(serializeSingleSigSpendingConditionBytes(condition));\n}\nexport function serializeSingleSigSpendingConditionBytes(condition) {\n    const bytesArray = [\n        condition.hashMode,\n        hexToBytes(condition.signer),\n        intToBytes(condition.nonce, 8),\n        intToBytes(condition.fee, 8),\n        condition.keyEncoding,\n        serializeMessageSignatureBytes(condition.signature),\n    ];\n    return concatArray(bytesArray);\n}\nexport function serializeMultiSigSpendingCondition(condition) {\n    return bytesToHex(serializeMultiSigSpendingConditionBytes(condition));\n}\nexport function serializeMultiSigSpendingConditionBytes(condition) {\n    const bytesArray = [\n        condition.hashMode,\n        hexToBytes(condition.signer),\n        intToBytes(condition.nonce, 8),\n        intToBytes(condition.fee, 8),\n    ];\n    const fields = createLPList(condition.fields);\n    bytesArray.push(serializeLPListBytes(fields));\n    const numSigs = new Uint8Array(2);\n    writeUInt16BE(numSigs, condition.signaturesRequired, 0);\n    bytesArray.push(numSigs);\n    return concatArray(bytesArray);\n}\nexport function deserializeSingleSigSpendingCondition(hashMode, bytesReader) {\n    const signer = bytesToHex(bytesReader.readBytes(20));\n    const nonce = BigInt(`0x${bytesToHex(bytesReader.readBytes(8))}`);\n    const fee = BigInt(`0x${bytesToHex(bytesReader.readBytes(8))}`);\n    const keyEncoding = bytesReader.readUInt8Enum(PubKeyEncoding, n => {\n        throw new DeserializationError(`Could not parse ${n} as PubKeyEncoding`);\n    });\n    if (hashMode === AddressHashMode.P2WPKH && keyEncoding != PubKeyEncoding.Compressed) {\n        throw new DeserializationError('Failed to parse singlesig spending condition: incomaptible hash mode and key encoding');\n    }\n    const signature = deserializeMessageSignature(bytesReader);\n    return {\n        hashMode,\n        signer,\n        nonce,\n        fee,\n        keyEncoding,\n        signature,\n    };\n}\nexport function deserializeMultiSigSpendingCondition(hashMode, bytesReader) {\n    const signer = bytesToHex(bytesReader.readBytes(20));\n    const nonce = BigInt('0x' + bytesToHex(bytesReader.readBytes(8)));\n    const fee = BigInt('0x' + bytesToHex(bytesReader.readBytes(8)));\n    const fields = deserializeLPList(bytesReader, StacksWireType.TransactionAuthField)\n        .values;\n    let haveUncompressed = false;\n    let numSigs = 0;\n    for (const field of fields) {\n        switch (field.contents.type) {\n            case StacksWireType.PublicKey:\n                if (!publicKeyIsCompressed(field.contents.data))\n                    haveUncompressed = true;\n                break;\n            case StacksWireType.MessageSignature:\n                if (field.pubKeyEncoding === PubKeyEncoding.Uncompressed)\n                    haveUncompressed = true;\n                numSigs += 1;\n                if (numSigs === 65536)\n                    throw new VerificationError('Failed to parse multisig spending condition: too many signatures');\n                break;\n        }\n    }\n    const signaturesRequired = bytesReader.readUInt16BE();\n    if (haveUncompressed &&\n        (hashMode === AddressHashMode.P2WSH || hashMode === AddressHashMode.P2WSHNonSequential)) {\n        throw new VerificationError('Uncompressed keys are not allowed in this hash mode');\n    }\n    return {\n        hashMode,\n        signer,\n        nonce,\n        fee,\n        fields,\n        signaturesRequired,\n    };\n}\nexport function serializeSpendingCondition(condition) {\n    return bytesToHex(serializeSpendingConditionBytes(condition));\n}\nexport function serializeSpendingConditionBytes(condition) {\n    if (isSingleSig(condition))\n        return serializeSingleSigSpendingConditionBytes(condition);\n    return serializeMultiSigSpendingConditionBytes(condition);\n}\nexport function deserializeSpendingCondition(bytesReader) {\n    const hashMode = bytesReader.readUInt8Enum(AddressHashMode, n => {\n        throw new DeserializationError(`Could not parse ${n} as AddressHashMode`);\n    });\n    if (hashMode === AddressHashMode.P2PKH || hashMode === AddressHashMode.P2WPKH) {\n        return deserializeSingleSigSpendingCondition(hashMode, bytesReader);\n    }\n    else {\n        return deserializeMultiSigSpendingCondition(hashMode, bytesReader);\n    }\n}\nexport function sigHashPreSign(curSigHash, authType, fee, nonce) {\n    const hashLength = 32 + 1 + 8 + 8;\n    const sigHash = curSigHash +\n        bytesToHex(new Uint8Array([authType])) +\n        bytesToHex(intToBytes(fee, 8)) +\n        bytesToHex(intToBytes(nonce, 8));\n    if (hexToBytes(sigHash).byteLength !== hashLength) {\n        throw Error('Invalid signature hash length');\n    }\n    return txidFromData(hexToBytes(sigHash));\n}\nfunction sigHashPostSign(curSigHash, pubKey, signature) {\n    const hashLength = 32 + 1 + RECOVERABLE_ECDSA_SIG_LENGTH_BYTES;\n    const pubKeyEncoding = publicKeyIsCompressed(pubKey.data)\n        ? PubKeyEncoding.Compressed\n        : PubKeyEncoding.Uncompressed;\n    const sigHash = curSigHash + leftPadHex(pubKeyEncoding.toString(16)) + signature;\n    const sigHashBytes = hexToBytes(sigHash);\n    if (sigHashBytes.byteLength > hashLength) {\n        throw Error('Invalid signature hash length');\n    }\n    return txidFromData(sigHashBytes);\n}\nexport function nextSignature(curSigHash, authType, fee, nonce, privateKey) {\n    const sigHashPre = sigHashPreSign(curSigHash, authType, fee, nonce);\n    const signature = signWithKey(privateKey, sigHashPre);\n    const publicKey = createStacksPublicKey(privateKeyToPublic(privateKey));\n    const nextSigHash = sigHashPostSign(sigHashPre, publicKey, signature);\n    return {\n        nextSig: signature,\n        nextSigHash,\n    };\n}\nexport function nextVerification(initialSigHash, authType, fee, nonce, pubKeyEncoding, signature) {\n    const sigHashPre = sigHashPreSign(initialSigHash, authType, fee, nonce);\n    const publicKey = createStacksPublicKey(publicKeyFromSignatureVrs(sigHashPre, signature, pubKeyEncoding));\n    const nextSigHash = sigHashPostSign(sigHashPre, publicKey, signature);\n    return {\n        pubKey: publicKey,\n        nextSigHash,\n    };\n}\nfunction newInitialSigHash() {\n    const spendingCondition = createSingleSigSpendingCondition(AddressHashMode.P2PKH, '', 0, 0);\n    spendingCondition.signer = createEmptyAddress().hash160;\n    spendingCondition.keyEncoding = PubKeyEncoding.Compressed;\n    spendingCondition.signature = emptyMessageSignature();\n    return spendingCondition;\n}\nfunction verify(condition, initialSigHash, authType) {\n    if (isSingleSig(condition)) {\n        return verifySingleSig(condition, initialSigHash, authType);\n    }\n    else {\n        return verifyMultiSig(condition, initialSigHash, authType);\n    }\n}\nfunction verifySingleSig(condition, initialSigHash, authType) {\n    const { pubKey, nextSigHash } = nextVerification(initialSigHash, authType, condition.fee, condition.nonce, condition.keyEncoding, condition.signature.data);\n    const addrBytes = addressFromPublicKeys(0, condition.hashMode, 1, [pubKey]).hash160;\n    if (addrBytes !== condition.signer)\n        throw new VerificationError(`Signer hash does not equal hash of public key(s): ${addrBytes} != ${condition.signer}`);\n    return nextSigHash;\n}\nfunction verifyMultiSig(condition, initialSigHash, authType) {\n    const publicKeys = [];\n    let curSigHash = initialSigHash;\n    let haveUncompressed = false;\n    let numSigs = 0;\n    for (const field of condition.fields) {\n        switch (field.contents.type) {\n            case StacksWireType.PublicKey:\n                if (!publicKeyIsCompressed(field.contents.data))\n                    haveUncompressed = true;\n                publicKeys.push(field.contents);\n                break;\n            case StacksWireType.MessageSignature:\n                if (field.pubKeyEncoding === PubKeyEncoding.Uncompressed)\n                    haveUncompressed = true;\n                const { pubKey, nextSigHash } = nextVerification(curSigHash, authType, condition.fee, condition.nonce, field.pubKeyEncoding, field.contents.data);\n                if (isSequentialMultiSig(condition.hashMode)) {\n                    curSigHash = nextSigHash;\n                }\n                publicKeys.push(pubKey);\n                numSigs += 1;\n                if (numSigs === 65536)\n                    throw new VerificationError('Too many signatures');\n                break;\n        }\n    }\n    if ((isSequentialMultiSig(condition.hashMode) && numSigs !== condition.signaturesRequired) ||\n        (isNonSequentialMultiSig(condition.hashMode) && numSigs < condition.signaturesRequired))\n        throw new VerificationError('Incorrect number of signatures');\n    if (haveUncompressed &&\n        (condition.hashMode === AddressHashMode.P2WSH ||\n            condition.hashMode === AddressHashMode.P2WSHNonSequential))\n        throw new VerificationError('Uncompressed keys are not allowed in this hash mode');\n    const addrBytes = addressFromPublicKeys(0, condition.hashMode, condition.signaturesRequired, publicKeys).hash160;\n    if (addrBytes !== condition.signer)\n        throw new VerificationError(`Signer hash does not equal hash of public key(s): ${addrBytes} != ${condition.signer}`);\n    return curSigHash;\n}\nexport function createStandardAuth(spendingCondition) {\n    return {\n        authType: AuthType.Standard,\n        spendingCondition,\n    };\n}\nexport function createSponsoredAuth(spendingCondition, sponsorSpendingCondition) {\n    return {\n        authType: AuthType.Sponsored,\n        spendingCondition,\n        sponsorSpendingCondition: sponsorSpendingCondition\n            ? sponsorSpendingCondition\n            : createSingleSigSpendingCondition(AddressHashMode.P2PKH, '0'.repeat(66), 0, 0),\n    };\n}\nexport function intoInitialSighashAuth(auth) {\n    if (auth.spendingCondition) {\n        switch (auth.authType) {\n            case AuthType.Standard:\n                return createStandardAuth(clearCondition(auth.spendingCondition));\n            case AuthType.Sponsored:\n                return createSponsoredAuth(clearCondition(auth.spendingCondition), newInitialSigHash());\n            default:\n                throw new SigningError('Unexpected authorization type for signing');\n        }\n    }\n    throw new Error('Authorization missing SpendingCondition');\n}\nexport function verifyOrigin(auth, initialSigHash) {\n    switch (auth.authType) {\n        case AuthType.Standard:\n            return verify(auth.spendingCondition, initialSigHash, AuthType.Standard);\n        case AuthType.Sponsored:\n            return verify(auth.spendingCondition, initialSigHash, AuthType.Standard);\n        default:\n            throw new SigningError('Invalid origin auth type');\n    }\n}\nexport function setFee(auth, amount) {\n    switch (auth.authType) {\n        case AuthType.Standard:\n            const spendingCondition = {\n                ...auth.spendingCondition,\n                fee: intToBigInt(amount),\n            };\n            return { ...auth, spendingCondition };\n        case AuthType.Sponsored:\n            const sponsorSpendingCondition = {\n                ...auth.sponsorSpendingCondition,\n                fee: intToBigInt(amount),\n            };\n            return { ...auth, sponsorSpendingCondition };\n    }\n}\nexport function getFee(auth) {\n    switch (auth.authType) {\n        case AuthType.Standard:\n            return auth.spendingCondition.fee;\n        case AuthType.Sponsored:\n            return auth.sponsorSpendingCondition.fee;\n    }\n}\nexport function setNonce(auth, nonce) {\n    const spendingCondition = {\n        ...auth.spendingCondition,\n        nonce: intToBigInt(nonce),\n    };\n    return {\n        ...auth,\n        spendingCondition,\n    };\n}\nexport function setSponsorNonce(auth, nonce) {\n    const sponsorSpendingCondition = {\n        ...auth.sponsorSpendingCondition,\n        nonce: intToBigInt(nonce),\n    };\n    return {\n        ...auth,\n        sponsorSpendingCondition,\n    };\n}\nexport function setSponsor(auth, sponsorSpendingCondition) {\n    const sc = {\n        ...sponsorSpendingCondition,\n        nonce: intToBigInt(sponsorSpendingCondition.nonce),\n        fee: intToBigInt(sponsorSpendingCondition.fee),\n    };\n    return {\n        ...auth,\n        sponsorSpendingCondition: sc,\n    };\n}\nexport function serializeAuthorization(auth) {\n    return bytesToHex(serializeAuthorizationBytes(auth));\n}\nexport function serializeAuthorizationBytes(auth) {\n    const bytesArray = [];\n    bytesArray.push(auth.authType);\n    switch (auth.authType) {\n        case AuthType.Standard:\n            bytesArray.push(serializeSpendingConditionBytes(auth.spendingCondition));\n            break;\n        case AuthType.Sponsored:\n            bytesArray.push(serializeSpendingConditionBytes(auth.spendingCondition));\n            bytesArray.push(serializeSpendingConditionBytes(auth.sponsorSpendingCondition));\n            break;\n    }\n    return concatArray(bytesArray);\n}\nexport function deserializeAuthorization(bytesReader) {\n    const authType = bytesReader.readUInt8Enum(AuthType, n => {\n        throw new DeserializationError(`Could not parse ${n} as AuthType`);\n    });\n    let spendingCondition;\n    switch (authType) {\n        case AuthType.Standard:\n            spendingCondition = deserializeSpendingCondition(bytesReader);\n            return createStandardAuth(spendingCondition);\n        case AuthType.Sponsored:\n            spendingCondition = deserializeSpendingCondition(bytesReader);\n            const sponsorSpendingCondition = deserializeSpendingCondition(bytesReader);\n            return createSponsoredAuth(spendingCondition, sponsorSpendingCondition);\n    }\n}\n//# sourceMappingURL=authorization.js.map","import { bytesToHex, concatArray, intToBigInt, isInstance, writeUInt32BE, } from '@stacks/common';\nimport { STACKS_MAINNET, STACKS_TESTNET, TransactionVersion, networkFrom, whenTransactionVersion, } from '@stacks/network';\nimport { serializePayloadBytes } from '.';\nimport { BytesReader } from './BytesReader';\nimport { deserializeAuthorization, intoInitialSighashAuth, isSingleSig, nextSignature, serializeAuthorizationBytes, setFee, setNonce, setSponsor, setSponsorNonce, verifyOrigin, } from './authorization';\nimport { AddressHashMode, AnchorMode, AuthType, PostConditionMode, PubKeyEncoding, RECOVERABLE_ECDSA_SIG_LENGTH_BYTES, } from './constants';\nimport { SerializationError, SigningError } from './errors';\nimport { createStacksPublicKey, privateKeyIsCompressed, publicKeyIsCompressed } from './keys';\nimport { cloneDeep, txidFromData } from './utils';\nimport { StacksWireType, createLPList, createMessageSignature, createTransactionAuthField, deserializeLPList, deserializePayload, serializeLPListBytes, } from './wire';\nexport class StacksTransactionWire {\n    constructor({ auth, payload, postConditions = createLPList([]), postConditionMode = PostConditionMode.Deny, transactionVersion, chainId, network = 'mainnet', }) {\n        network = networkFrom(network);\n        this.transactionVersion = transactionVersion ?? network.transactionVersion;\n        this.chainId = chainId ?? network.chainId;\n        this.auth = auth;\n        if ('amount' in payload) {\n            this.payload = {\n                ...payload,\n                amount: intToBigInt(payload.amount),\n            };\n        }\n        else {\n            this.payload = payload;\n        }\n        this.postConditionMode = postConditionMode;\n        this.postConditions = postConditions;\n        this.anchorMode = AnchorMode.Any;\n    }\n    signBegin() {\n        const tx = cloneDeep(this);\n        tx.auth = intoInitialSighashAuth(tx.auth);\n        return tx.txid();\n    }\n    verifyBegin() {\n        const tx = cloneDeep(this);\n        tx.auth = intoInitialSighashAuth(tx.auth);\n        return tx.txid();\n    }\n    verifyOrigin() {\n        return verifyOrigin(this.auth, this.verifyBegin());\n    }\n    signNextOrigin(sigHash, privateKey) {\n        if (this.auth.spendingCondition === undefined) {\n            throw new Error('\"auth.spendingCondition\" is undefined');\n        }\n        if (this.auth.authType === undefined) {\n            throw new Error('\"auth.authType\" is undefined');\n        }\n        return this.signAndAppend(this.auth.spendingCondition, sigHash, AuthType.Standard, privateKey);\n    }\n    signNextSponsor(sigHash, privateKey) {\n        if (this.auth.authType === AuthType.Sponsored) {\n            return this.signAndAppend(this.auth.sponsorSpendingCondition, sigHash, AuthType.Sponsored, privateKey);\n        }\n        else {\n            throw new Error('\"auth.sponsorSpendingCondition\" is undefined');\n        }\n    }\n    appendPubkey(publicKey) {\n        const wire = typeof publicKey === 'object' && 'type' in publicKey\n            ? publicKey\n            : createStacksPublicKey(publicKey);\n        const cond = this.auth.spendingCondition;\n        if (cond && !isSingleSig(cond)) {\n            const compressed = publicKeyIsCompressed(wire.data);\n            cond.fields.push(createTransactionAuthField(compressed ? PubKeyEncoding.Compressed : PubKeyEncoding.Uncompressed, wire));\n        }\n        else {\n            throw new Error(`Can't append public key to a singlesig condition`);\n        }\n    }\n    signAndAppend(condition, curSigHash, authType, privateKey) {\n        const { nextSig, nextSigHash } = nextSignature(curSigHash, authType, condition.fee, condition.nonce, privateKey);\n        if (isSingleSig(condition)) {\n            condition.signature = createMessageSignature(nextSig);\n        }\n        else {\n            const compressed = privateKeyIsCompressed(privateKey);\n            condition.fields.push(createTransactionAuthField(compressed ? PubKeyEncoding.Compressed : PubKeyEncoding.Uncompressed, createMessageSignature(nextSig)));\n        }\n        return nextSigHash;\n    }\n    txid() {\n        const serialized = this.serializeBytes();\n        return txidFromData(serialized);\n    }\n    setSponsor(sponsorSpendingCondition) {\n        if (this.auth.authType != AuthType.Sponsored) {\n            throw new SigningError('Cannot sponsor sign a non-sponsored transaction');\n        }\n        this.auth = setSponsor(this.auth, sponsorSpendingCondition);\n    }\n    setFee(amount) {\n        this.auth = setFee(this.auth, amount);\n    }\n    setNonce(nonce) {\n        this.auth = setNonce(this.auth, nonce);\n    }\n    setSponsorNonce(nonce) {\n        if (this.auth.authType != AuthType.Sponsored) {\n            throw new SigningError('Cannot sponsor sign a non-sponsored transaction');\n        }\n        this.auth = setSponsorNonce(this.auth, nonce);\n    }\n    serialize() {\n        return bytesToHex(this.serializeBytes());\n    }\n    serializeBytes() {\n        if (this.transactionVersion === undefined) {\n            throw new SerializationError('\"transactionVersion\" is undefined');\n        }\n        if (this.chainId === undefined) {\n            throw new SerializationError('\"chainId\" is undefined');\n        }\n        if (this.auth === undefined) {\n            throw new SerializationError('\"auth\" is undefined');\n        }\n        if (this.payload === undefined) {\n            throw new SerializationError('\"payload\" is undefined');\n        }\n        const bytesArray = [];\n        bytesArray.push(this.transactionVersion);\n        const chainIdBytes = new Uint8Array(4);\n        writeUInt32BE(chainIdBytes, this.chainId, 0);\n        bytesArray.push(chainIdBytes);\n        bytesArray.push(serializeAuthorizationBytes(this.auth));\n        bytesArray.push(this.anchorMode);\n        bytesArray.push(this.postConditionMode);\n        bytesArray.push(serializeLPListBytes(this.postConditions));\n        bytesArray.push(serializePayloadBytes(this.payload));\n        return concatArray(bytesArray);\n    }\n}\nexport function deserializeTransaction(tx) {\n    const bytesReader = isInstance(tx, BytesReader) ? tx : new BytesReader(tx);\n    const transactionVersion = bytesReader.readUInt8Enum(TransactionVersion, n => {\n        throw new Error(`Could not parse ${n} as TransactionVersion`);\n    });\n    const chainId = bytesReader.readUInt32BE();\n    const auth = deserializeAuthorization(bytesReader);\n    const anchorMode = bytesReader.readUInt8Enum(AnchorMode, n => {\n        throw new Error(`Could not parse ${n} as AnchorMode`);\n    });\n    const postConditionMode = bytesReader.readUInt8Enum(PostConditionMode, n => {\n        throw new Error(`Could not parse ${n} as PostConditionMode`);\n    });\n    const postConditions = deserializeLPList(bytesReader, StacksWireType.PostCondition);\n    const payload = deserializePayload(bytesReader);\n    const transaction = new StacksTransactionWire({\n        transactionVersion,\n        chainId,\n        auth,\n        payload,\n        postConditions,\n        postConditionMode,\n    });\n    transaction.anchorMode = anchorMode;\n    return transaction;\n}\nexport function deriveNetworkFromTx(transaction) {\n    return whenTransactionVersion(transaction.transactionVersion)({\n        [TransactionVersion.Mainnet]: STACKS_MAINNET,\n        [TransactionVersion.Testnet]: STACKS_TESTNET,\n    });\n}\nexport function estimateTransactionByteLength(transaction) {\n    const hashMode = transaction.auth.spendingCondition.hashMode;\n    const multiSigHashModes = [AddressHashMode.P2SH, AddressHashMode.P2WSH];\n    if (multiSigHashModes.includes(hashMode)) {\n        const multiSigSpendingCondition = transaction.auth\n            .spendingCondition;\n        const existingSignatures = multiSigSpendingCondition.fields.filter(field => field.contents.type === StacksWireType.MessageSignature).length;\n        const totalSignatureLength = (multiSigSpendingCondition.signaturesRequired - existingSignatures) *\n            (RECOVERABLE_ECDSA_SIG_LENGTH_BYTES + 1);\n        return transaction.serializeBytes().byteLength + totalSignatureLength;\n    }\n    else {\n        return transaction.serializeBytes().byteLength;\n    }\n}\nexport function serializeTransaction(transaction) {\n    return transaction.serialize();\n}\nexport function serializeTransactionBytes(transaction) {\n    return transaction.serializeBytes();\n}\nexport function transactionToHex(transaction) {\n    return transaction.serialize();\n}\n//# sourceMappingURL=transaction.js.map","import { PostConditionMode, PostConditionPrincipalId, PostConditionType, } from './constants';\nimport { StacksWireType, addressToString, parseAssetString, parsePrincipalString, serializePostConditionWire, } from './wire';\nvar PostConditionCodeWireType;\n(function (PostConditionCodeWireType) {\n    PostConditionCodeWireType[PostConditionCodeWireType[\"eq\"] = 1] = \"eq\";\n    PostConditionCodeWireType[PostConditionCodeWireType[\"gt\"] = 2] = \"gt\";\n    PostConditionCodeWireType[PostConditionCodeWireType[\"lt\"] = 4] = \"lt\";\n    PostConditionCodeWireType[PostConditionCodeWireType[\"gte\"] = 3] = \"gte\";\n    PostConditionCodeWireType[PostConditionCodeWireType[\"lte\"] = 5] = \"lte\";\n    PostConditionCodeWireType[PostConditionCodeWireType[\"sent\"] = 16] = \"sent\";\n    PostConditionCodeWireType[PostConditionCodeWireType[\"not-sent\"] = 17] = \"not-sent\";\n})(PostConditionCodeWireType || (PostConditionCodeWireType = {}));\nexport function postConditionToWire(postcondition) {\n    switch (postcondition.type) {\n        case 'stx-postcondition':\n            return {\n                type: StacksWireType.PostCondition,\n                conditionType: PostConditionType.STX,\n                principal: postcondition.address === 'origin'\n                    ? { type: StacksWireType.Principal, prefix: PostConditionPrincipalId.Origin }\n                    : parsePrincipalString(postcondition.address),\n                conditionCode: conditionTypeToByte(postcondition.condition),\n                amount: BigInt(postcondition.amount),\n            };\n        case 'ft-postcondition':\n            return {\n                type: StacksWireType.PostCondition,\n                conditionType: PostConditionType.Fungible,\n                principal: postcondition.address === 'origin'\n                    ? { type: StacksWireType.Principal, prefix: PostConditionPrincipalId.Origin }\n                    : parsePrincipalString(postcondition.address),\n                conditionCode: conditionTypeToByte(postcondition.condition),\n                amount: BigInt(postcondition.amount),\n                asset: parseAssetString(postcondition.asset),\n            };\n        case 'nft-postcondition':\n            return {\n                type: StacksWireType.PostCondition,\n                conditionType: PostConditionType.NonFungible,\n                principal: postcondition.address === 'origin'\n                    ? { type: StacksWireType.Principal, prefix: PostConditionPrincipalId.Origin }\n                    : parsePrincipalString(postcondition.address),\n                conditionCode: conditionTypeToByte(postcondition.condition),\n                asset: parseAssetString(postcondition.asset),\n                assetName: postcondition.assetId,\n            };\n        default:\n            throw new Error('Invalid post condition type');\n    }\n}\nexport function wireToPostCondition(wire) {\n    switch (wire.conditionType) {\n        case PostConditionType.STX:\n            return {\n                type: 'stx-postcondition',\n                address: principalWireToString(wire.principal),\n                condition: conditionByteToType(wire.conditionCode),\n                amount: wire.amount.toString(),\n            };\n        case PostConditionType.Fungible:\n            return {\n                type: 'ft-postcondition',\n                address: principalWireToString(wire.principal),\n                condition: conditionByteToType(wire.conditionCode),\n                amount: wire.amount.toString(),\n                asset: assetWireToString(wire.asset),\n            };\n        case PostConditionType.NonFungible:\n            return {\n                type: 'nft-postcondition',\n                address: principalWireToString(wire.principal),\n                condition: conditionByteToType(wire.conditionCode),\n                asset: assetWireToString(wire.asset),\n                assetId: wire.assetName,\n            };\n        default: {\n            const _exhaustiveCheck = wire;\n            throw new Error(`Invalid post condition type: ${_exhaustiveCheck}`);\n        }\n    }\n}\nexport function conditionTypeToByte(condition) {\n    return PostConditionCodeWireType[condition];\n}\nexport function conditionByteToType(wireType) {\n    return PostConditionCodeWireType[wireType];\n}\nexport function postConditionToHex(postcondition) {\n    const wire = postConditionToWire(postcondition);\n    return serializePostConditionWire(wire);\n}\nexport function postConditionModeFrom(mode) {\n    if (typeof mode === 'number')\n        return mode;\n    if (mode === 'allow')\n        return PostConditionMode.Allow;\n    if (mode === 'deny')\n        return PostConditionMode.Deny;\n    throw new Error(`Invalid post condition mode: ${mode}`);\n}\nfunction assetWireToString(asset) {\n    const address = addressToString(asset.address);\n    const contractId = `${address}.${asset.contractName.content}`;\n    return `${contractId}::${asset.assetName.content}`;\n}\nfunction principalWireToString(principal) {\n    switch (principal.prefix) {\n        case PostConditionPrincipalId.Origin:\n            return 'origin';\n        case PostConditionPrincipalId.Standard:\n            return addressToString(principal.address);\n        case PostConditionPrincipalId.Contract:\n            const address = addressToString(principal.address);\n            return `${address}.${principal.contractName.content}`;\n        default:\n            const _exhaustiveCheck = principal;\n            throw new Error(`Invalid principal type: ${_exhaustiveCheck}`);\n    }\n}\n//# sourceMappingURL=postcondition.js.map","export var ChainID;\n(function (ChainID) {\n    ChainID[ChainID[\"Testnet\"] = 2147483648] = \"Testnet\";\n    ChainID[ChainID[\"Mainnet\"] = 1] = \"Mainnet\";\n})(ChainID || (ChainID = {}));\nexport const DEFAULT_CHAIN_ID = ChainID.Mainnet;\nexport const MAX_STRING_LENGTH_BYTES = 128;\nexport const CLARITY_INT_SIZE = 128;\nexport const CLARITY_INT_BYTE_SIZE = 16;\nexport const COINBASE_BYTES_LENGTH = 32;\nexport const VRF_PROOF_BYTES_LENGTH = 80;\nexport const RECOVERABLE_ECDSA_SIG_LENGTH_BYTES = 65;\nexport const COMPRESSED_PUBKEY_LENGTH_BYTES = 32;\nexport const UNCOMPRESSED_PUBKEY_LENGTH_BYTES = 64;\nexport const MEMO_MAX_LENGTH_BYTES = 34;\nexport const DEFAULT_CORE_NODE_API_URL = 'https://api.mainnet.hiro.so';\nexport var StacksMessageType;\n(function (StacksMessageType) {\n    StacksMessageType[StacksMessageType[\"Address\"] = 0] = \"Address\";\n    StacksMessageType[StacksMessageType[\"Principal\"] = 1] = \"Principal\";\n    StacksMessageType[StacksMessageType[\"LengthPrefixedString\"] = 2] = \"LengthPrefixedString\";\n    StacksMessageType[StacksMessageType[\"MemoString\"] = 3] = \"MemoString\";\n    StacksMessageType[StacksMessageType[\"AssetInfo\"] = 4] = \"AssetInfo\";\n    StacksMessageType[StacksMessageType[\"PostCondition\"] = 5] = \"PostCondition\";\n    StacksMessageType[StacksMessageType[\"PublicKey\"] = 6] = \"PublicKey\";\n    StacksMessageType[StacksMessageType[\"LengthPrefixedList\"] = 7] = \"LengthPrefixedList\";\n    StacksMessageType[StacksMessageType[\"Payload\"] = 8] = \"Payload\";\n    StacksMessageType[StacksMessageType[\"MessageSignature\"] = 9] = \"MessageSignature\";\n    StacksMessageType[StacksMessageType[\"StructuredDataSignature\"] = 10] = \"StructuredDataSignature\";\n    StacksMessageType[StacksMessageType[\"TransactionAuthField\"] = 11] = \"TransactionAuthField\";\n})(StacksMessageType || (StacksMessageType = {}));\nexport function whenMessageType(messageType) {\n    return (messageTypeMap) => messageTypeMap[messageType];\n}\nexport var PayloadType;\n(function (PayloadType) {\n    PayloadType[PayloadType[\"TokenTransfer\"] = 0] = \"TokenTransfer\";\n    PayloadType[PayloadType[\"SmartContract\"] = 1] = \"SmartContract\";\n    PayloadType[PayloadType[\"VersionedSmartContract\"] = 6] = \"VersionedSmartContract\";\n    PayloadType[PayloadType[\"ContractCall\"] = 2] = \"ContractCall\";\n    PayloadType[PayloadType[\"PoisonMicroblock\"] = 3] = \"PoisonMicroblock\";\n    PayloadType[PayloadType[\"Coinbase\"] = 4] = \"Coinbase\";\n    PayloadType[PayloadType[\"CoinbaseToAltRecipient\"] = 5] = \"CoinbaseToAltRecipient\";\n    PayloadType[PayloadType[\"TenureChange\"] = 7] = \"TenureChange\";\n    PayloadType[PayloadType[\"NakamotoCoinbase\"] = 8] = \"NakamotoCoinbase\";\n})(PayloadType || (PayloadType = {}));\nexport var ClarityVersion;\n(function (ClarityVersion) {\n    ClarityVersion[ClarityVersion[\"Clarity1\"] = 1] = \"Clarity1\";\n    ClarityVersion[ClarityVersion[\"Clarity2\"] = 2] = \"Clarity2\";\n    ClarityVersion[ClarityVersion[\"Clarity3\"] = 3] = \"Clarity3\";\n})(ClarityVersion || (ClarityVersion = {}));\nexport var AnchorMode;\n(function (AnchorMode) {\n    AnchorMode[AnchorMode[\"OnChainOnly\"] = 1] = \"OnChainOnly\";\n    AnchorMode[AnchorMode[\"OffChainOnly\"] = 2] = \"OffChainOnly\";\n    AnchorMode[AnchorMode[\"Any\"] = 3] = \"Any\";\n})(AnchorMode || (AnchorMode = {}));\nexport const AnchorModeNames = ['onChainOnly', 'offChainOnly', 'any'];\nconst AnchorModeMap = {\n    [AnchorModeNames[0]]: AnchorMode.OnChainOnly,\n    [AnchorModeNames[1]]: AnchorMode.OffChainOnly,\n    [AnchorModeNames[2]]: AnchorMode.Any,\n    [AnchorMode.OnChainOnly]: AnchorMode.OnChainOnly,\n    [AnchorMode.OffChainOnly]: AnchorMode.OffChainOnly,\n    [AnchorMode.Any]: AnchorMode.Any,\n};\nexport function anchorModeFromNameOrValue(mode) {\n    if (mode in AnchorModeMap)\n        return AnchorModeMap[mode];\n    throw new Error(`Invalid anchor mode \"${mode}\", must be one of: ${AnchorModeNames.join(', ')}`);\n}\nexport var TransactionVersion;\n(function (TransactionVersion) {\n    TransactionVersion[TransactionVersion[\"Mainnet\"] = 0] = \"Mainnet\";\n    TransactionVersion[TransactionVersion[\"Testnet\"] = 128] = \"Testnet\";\n})(TransactionVersion || (TransactionVersion = {}));\nexport const DEFAULT_TRANSACTION_VERSION = TransactionVersion.Mainnet;\nexport var PostConditionMode;\n(function (PostConditionMode) {\n    PostConditionMode[PostConditionMode[\"Allow\"] = 1] = \"Allow\";\n    PostConditionMode[PostConditionMode[\"Deny\"] = 2] = \"Deny\";\n})(PostConditionMode || (PostConditionMode = {}));\nexport var PostConditionType;\n(function (PostConditionType) {\n    PostConditionType[PostConditionType[\"STX\"] = 0] = \"STX\";\n    PostConditionType[PostConditionType[\"Fungible\"] = 1] = \"Fungible\";\n    PostConditionType[PostConditionType[\"NonFungible\"] = 2] = \"NonFungible\";\n})(PostConditionType || (PostConditionType = {}));\nexport var AuthType;\n(function (AuthType) {\n    AuthType[AuthType[\"Standard\"] = 4] = \"Standard\";\n    AuthType[AuthType[\"Sponsored\"] = 5] = \"Sponsored\";\n})(AuthType || (AuthType = {}));\nexport var AddressHashMode;\n(function (AddressHashMode) {\n    AddressHashMode[AddressHashMode[\"SerializeP2PKH\"] = 0] = \"SerializeP2PKH\";\n    AddressHashMode[AddressHashMode[\"SerializeP2SH\"] = 1] = \"SerializeP2SH\";\n    AddressHashMode[AddressHashMode[\"SerializeP2WPKH\"] = 2] = \"SerializeP2WPKH\";\n    AddressHashMode[AddressHashMode[\"SerializeP2WSH\"] = 3] = \"SerializeP2WSH\";\n    AddressHashMode[AddressHashMode[\"SerializeP2SHNonSequential\"] = 5] = \"SerializeP2SHNonSequential\";\n    AddressHashMode[AddressHashMode[\"SerializeP2WSHNonSequential\"] = 7] = \"SerializeP2WSHNonSequential\";\n})(AddressHashMode || (AddressHashMode = {}));\nexport var AddressVersion;\n(function (AddressVersion) {\n    AddressVersion[AddressVersion[\"MainnetSingleSig\"] = 22] = \"MainnetSingleSig\";\n    AddressVersion[AddressVersion[\"MainnetMultiSig\"] = 20] = \"MainnetMultiSig\";\n    AddressVersion[AddressVersion[\"TestnetSingleSig\"] = 26] = \"TestnetSingleSig\";\n    AddressVersion[AddressVersion[\"TestnetMultiSig\"] = 21] = \"TestnetMultiSig\";\n})(AddressVersion || (AddressVersion = {}));\nexport var PubKeyEncoding;\n(function (PubKeyEncoding) {\n    PubKeyEncoding[PubKeyEncoding[\"Compressed\"] = 0] = \"Compressed\";\n    PubKeyEncoding[PubKeyEncoding[\"Uncompressed\"] = 1] = \"Uncompressed\";\n})(PubKeyEncoding || (PubKeyEncoding = {}));\nexport var FungibleConditionCode;\n(function (FungibleConditionCode) {\n    FungibleConditionCode[FungibleConditionCode[\"Equal\"] = 1] = \"Equal\";\n    FungibleConditionCode[FungibleConditionCode[\"Greater\"] = 2] = \"Greater\";\n    FungibleConditionCode[FungibleConditionCode[\"GreaterEqual\"] = 3] = \"GreaterEqual\";\n    FungibleConditionCode[FungibleConditionCode[\"Less\"] = 4] = \"Less\";\n    FungibleConditionCode[FungibleConditionCode[\"LessEqual\"] = 5] = \"LessEqual\";\n})(FungibleConditionCode || (FungibleConditionCode = {}));\nexport var NonFungibleConditionCode;\n(function (NonFungibleConditionCode) {\n    NonFungibleConditionCode[NonFungibleConditionCode[\"Sends\"] = 16] = \"Sends\";\n    NonFungibleConditionCode[NonFungibleConditionCode[\"DoesNotSend\"] = 17] = \"DoesNotSend\";\n})(NonFungibleConditionCode || (NonFungibleConditionCode = {}));\nexport var PostConditionPrincipalID;\n(function (PostConditionPrincipalID) {\n    PostConditionPrincipalID[PostConditionPrincipalID[\"Origin\"] = 1] = \"Origin\";\n    PostConditionPrincipalID[PostConditionPrincipalID[\"Standard\"] = 2] = \"Standard\";\n    PostConditionPrincipalID[PostConditionPrincipalID[\"Contract\"] = 3] = \"Contract\";\n})(PostConditionPrincipalID || (PostConditionPrincipalID = {}));\nexport var AssetType;\n(function (AssetType) {\n    AssetType[AssetType[\"STX\"] = 0] = \"STX\";\n    AssetType[AssetType[\"Fungible\"] = 1] = \"Fungible\";\n    AssetType[AssetType[\"NonFungible\"] = 2] = \"NonFungible\";\n})(AssetType || (AssetType = {}));\nexport var TxRejectedReason;\n(function (TxRejectedReason) {\n    TxRejectedReason[\"Serialization\"] = \"Serialization\";\n    TxRejectedReason[\"Deserialization\"] = \"Deserialization\";\n    TxRejectedReason[\"SignatureValidation\"] = \"SignatureValidation\";\n    TxRejectedReason[\"FeeTooLow\"] = \"FeeTooLow\";\n    TxRejectedReason[\"BadNonce\"] = \"BadNonce\";\n    TxRejectedReason[\"NotEnoughFunds\"] = \"NotEnoughFunds\";\n    TxRejectedReason[\"NoSuchContract\"] = \"NoSuchContract\";\n    TxRejectedReason[\"NoSuchPublicFunction\"] = \"NoSuchPublicFunction\";\n    TxRejectedReason[\"BadFunctionArgument\"] = \"BadFunctionArgument\";\n    TxRejectedReason[\"ContractAlreadyExists\"] = \"ContractAlreadyExists\";\n    TxRejectedReason[\"PoisonMicroblocksDoNotConflict\"] = \"PoisonMicroblocksDoNotConflict\";\n    TxRejectedReason[\"PoisonMicroblockHasUnknownPubKeyHash\"] = \"PoisonMicroblockHasUnknownPubKeyHash\";\n    TxRejectedReason[\"PoisonMicroblockIsInvalid\"] = \"PoisonMicroblockIsInvalid\";\n    TxRejectedReason[\"BadAddressVersionByte\"] = \"BadAddressVersionByte\";\n    TxRejectedReason[\"NoCoinbaseViaMempool\"] = \"NoCoinbaseViaMempool\";\n    TxRejectedReason[\"ServerFailureNoSuchChainTip\"] = \"ServerFailureNoSuchChainTip\";\n    TxRejectedReason[\"TooMuchChaining\"] = \"TooMuchChaining\";\n    TxRejectedReason[\"ConflictingNonceInMempool\"] = \"ConflictingNonceInMempool\";\n    TxRejectedReason[\"BadTransactionVersion\"] = \"BadTransactionVersion\";\n    TxRejectedReason[\"TransferRecipientCannotEqualSender\"] = \"TransferRecipientCannotEqualSender\";\n    TxRejectedReason[\"TransferAmountMustBePositive\"] = \"TransferAmountMustBePositive\";\n    TxRejectedReason[\"ServerFailureDatabase\"] = \"ServerFailureDatabase\";\n    TxRejectedReason[\"EstimatorError\"] = \"EstimatorError\";\n    TxRejectedReason[\"TemporarilyBlacklisted\"] = \"TemporarilyBlacklisted\";\n    TxRejectedReason[\"ServerFailureOther\"] = \"ServerFailureOther\";\n})(TxRejectedReason || (TxRejectedReason = {}));\n//# sourceMappingURL=constants.js.map","import { MAX_STRING_LENGTH_BYTES, PostConditionPrincipalID, StacksMessageType, } from './constants';\nimport { c32addressDecode } from 'c32check';\nimport { exceedsMaxLengthBytes } from './utils';\nexport function parseAssetInfoString(id) {\n    const [assetAddress, assetContractName, assetTokenName] = id.split(/\\.|::/);\n    const assetInfo = createAssetInfo(assetAddress, assetContractName, assetTokenName);\n    return assetInfo;\n}\nexport function createLPString(content, lengthPrefixBytes, maxLengthBytes) {\n    const prefixLength = lengthPrefixBytes || 1;\n    const maxLength = maxLengthBytes || MAX_STRING_LENGTH_BYTES;\n    if (exceedsMaxLengthBytes(content, maxLength)) {\n        throw new Error(`String length exceeds maximum bytes ${maxLength}`);\n    }\n    return {\n        type: StacksMessageType.LengthPrefixedString,\n        content,\n        lengthPrefixBytes: prefixLength,\n        maxLengthBytes: maxLength,\n    };\n}\nexport function createAssetInfo(addressString, contractName, assetName) {\n    return {\n        type: StacksMessageType.AssetInfo,\n        address: createAddress(addressString),\n        contractName: createLPString(contractName),\n        assetName: createLPString(assetName),\n    };\n}\nexport function createAddress(c32AddressString) {\n    const addressData = c32addressDecode(c32AddressString);\n    return {\n        type: StacksMessageType.Address,\n        version: addressData[0],\n        hash160: addressData[1],\n    };\n}\nexport function parsePrincipalString(principalString) {\n    if (principalString.includes('.')) {\n        const [address, contractName] = principalString.split('.');\n        return createContractPrincipal(address, contractName);\n    }\n    else {\n        return createStandardPrincipal(principalString);\n    }\n}\nexport function createContractPrincipal(addressString, contractName) {\n    const addr = createAddress(addressString);\n    const name = createLPString(contractName);\n    return {\n        type: StacksMessageType.Principal,\n        prefix: PostConditionPrincipalID.Contract,\n        address: addr,\n        contractName: name,\n    };\n}\nexport function createStandardPrincipal(addressString) {\n    const addr = createAddress(addressString);\n    return {\n        type: StacksMessageType.Principal,\n        prefix: PostConditionPrincipalID.Standard,\n        address: addr,\n    };\n}\n//# sourceMappingURL=postcondition-types.js.map","export var ClarityType;\n(function (ClarityType) {\n    ClarityType[ClarityType[\"Int\"] = 0] = \"Int\";\n    ClarityType[ClarityType[\"UInt\"] = 1] = \"UInt\";\n    ClarityType[ClarityType[\"Buffer\"] = 2] = \"Buffer\";\n    ClarityType[ClarityType[\"BoolTrue\"] = 3] = \"BoolTrue\";\n    ClarityType[ClarityType[\"BoolFalse\"] = 4] = \"BoolFalse\";\n    ClarityType[ClarityType[\"PrincipalStandard\"] = 5] = \"PrincipalStandard\";\n    ClarityType[ClarityType[\"PrincipalContract\"] = 6] = \"PrincipalContract\";\n    ClarityType[ClarityType[\"ResponseOk\"] = 7] = \"ResponseOk\";\n    ClarityType[ClarityType[\"ResponseErr\"] = 8] = \"ResponseErr\";\n    ClarityType[ClarityType[\"OptionalNone\"] = 9] = \"OptionalNone\";\n    ClarityType[ClarityType[\"OptionalSome\"] = 10] = \"OptionalSome\";\n    ClarityType[ClarityType[\"List\"] = 11] = \"List\";\n    ClarityType[ClarityType[\"Tuple\"] = 12] = \"Tuple\";\n    ClarityType[ClarityType[\"StringASCII\"] = 13] = \"StringASCII\";\n    ClarityType[ClarityType[\"StringUTF8\"] = 14] = \"StringUTF8\";\n})(ClarityType || (ClarityType = {}));\n//# sourceMappingURL=constants.js.map","class TransactionError extends Error {\n    constructor(message) {\n        super(message);\n        this.message = message;\n        this.name = this.constructor.name;\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        }\n    }\n}\nexport class SerializationError extends TransactionError {\n    constructor(message) {\n        super(message);\n    }\n}\nexport class DeserializationError extends TransactionError {\n    constructor(message) {\n        super(message);\n    }\n}\nexport class NoEstimateAvailableError extends TransactionError {\n    constructor(message) {\n        super(message);\n    }\n}\nexport class NotImplementedError extends TransactionError {\n    constructor(message) {\n        super(message);\n    }\n}\nexport class SigningError extends TransactionError {\n    constructor(message) {\n        super(message);\n    }\n}\nexport class VerificationError extends TransactionError {\n    constructor(message) {\n        super(message);\n    }\n}\n//# sourceMappingURL=errors.js.map","import { bytesToHex, bytesToUtf8, concatArray, hexToBytes, hexToInt, intToBytes, intToHex, utf8ToBytes, } from '@stacks/common';\nimport { MEMO_MAX_LENGTH_BYTES, AddressHashMode, AddressVersion, StacksMessageType, PostConditionPrincipalID, PostConditionType, FungibleConditionCode, NonFungibleConditionCode, } from './constants';\nimport { serializePublicKey, deserializePublicKey, isCompressed } from './keys';\nimport { exceedsMaxLengthBytes, hashP2PKH, rightPadHexToLength, hashP2SH, hashP2WSH, hashP2WPKH, } from './utils';\nimport { createLPString, } from './postcondition-types';\nimport { deserializePayload, serializePayload } from './payload';\nimport { DeserializationError, SerializationError } from './errors';\nimport { deserializeTransactionAuthField, deserializeMessageSignature, serializeMessageSignature, serializeTransactionAuthField, } from './signature';\nimport { addressHashModeToVersion, addressFromVersionHash, } from './common';\nimport { deserializeCV, serializeCV } from './clarity';\nexport function serializeStacksMessage(message) {\n    switch (message.type) {\n        case StacksMessageType.Address:\n            return serializeAddress(message);\n        case StacksMessageType.Principal:\n            return serializePrincipal(message);\n        case StacksMessageType.LengthPrefixedString:\n            return serializeLPString(message);\n        case StacksMessageType.MemoString:\n            return serializeMemoString(message);\n        case StacksMessageType.AssetInfo:\n            return serializeAssetInfo(message);\n        case StacksMessageType.PostCondition:\n            return serializePostCondition(message);\n        case StacksMessageType.PublicKey:\n            return serializePublicKey(message);\n        case StacksMessageType.LengthPrefixedList:\n            return serializeLPList(message);\n        case StacksMessageType.Payload:\n            return serializePayload(message);\n        case StacksMessageType.TransactionAuthField:\n            return serializeTransactionAuthField(message);\n        case StacksMessageType.MessageSignature:\n            return serializeMessageSignature(message);\n    }\n}\nexport function deserializeStacksMessage(bytesReader, type, listType) {\n    switch (type) {\n        case StacksMessageType.Address:\n            return deserializeAddress(bytesReader);\n        case StacksMessageType.Principal:\n            return deserializePrincipal(bytesReader);\n        case StacksMessageType.LengthPrefixedString:\n            return deserializeLPString(bytesReader);\n        case StacksMessageType.MemoString:\n            return deserializeMemoString(bytesReader);\n        case StacksMessageType.AssetInfo:\n            return deserializeAssetInfo(bytesReader);\n        case StacksMessageType.PostCondition:\n            return deserializePostCondition(bytesReader);\n        case StacksMessageType.PublicKey:\n            return deserializePublicKey(bytesReader);\n        case StacksMessageType.Payload:\n            return deserializePayload(bytesReader);\n        case StacksMessageType.LengthPrefixedList:\n            if (!listType) {\n                throw new DeserializationError('No List Type specified');\n            }\n            return deserializeLPList(bytesReader, listType);\n        case StacksMessageType.MessageSignature:\n            return deserializeMessageSignature(bytesReader);\n        default:\n            throw new Error('Could not recognize StacksMessageType');\n    }\n}\nexport function createEmptyAddress() {\n    return {\n        type: StacksMessageType.Address,\n        version: AddressVersion.MainnetSingleSig,\n        hash160: '0'.repeat(40),\n    };\n}\nexport function addressFromHashMode(hashMode, txVersion, data) {\n    const version = addressHashModeToVersion(hashMode, txVersion);\n    return addressFromVersionHash(version, data);\n}\nexport function addressFromPublicKeys(version, hashMode, numSigs, publicKeys) {\n    if (publicKeys.length === 0) {\n        throw Error('Invalid number of public keys');\n    }\n    if (hashMode === AddressHashMode.SerializeP2PKH || hashMode === AddressHashMode.SerializeP2WPKH) {\n        if (publicKeys.length !== 1 || numSigs !== 1) {\n            throw Error('Invalid number of public keys or signatures');\n        }\n    }\n    if (hashMode === AddressHashMode.SerializeP2WPKH ||\n        hashMode === AddressHashMode.SerializeP2WSH ||\n        hashMode === AddressHashMode.SerializeP2WSHNonSequential) {\n        if (!publicKeys.every(isCompressed)) {\n            throw Error('Public keys must be compressed for segwit');\n        }\n    }\n    switch (hashMode) {\n        case AddressHashMode.SerializeP2PKH:\n            return addressFromVersionHash(version, hashP2PKH(publicKeys[0].data));\n        case AddressHashMode.SerializeP2WPKH:\n            return addressFromVersionHash(version, hashP2WPKH(publicKeys[0].data));\n        case AddressHashMode.SerializeP2SH:\n        case AddressHashMode.SerializeP2SHNonSequential:\n            return addressFromVersionHash(version, hashP2SH(numSigs, publicKeys.map(serializePublicKey)));\n        case AddressHashMode.SerializeP2WSH:\n        case AddressHashMode.SerializeP2WSHNonSequential:\n            return addressFromVersionHash(version, hashP2WSH(numSigs, publicKeys.map(serializePublicKey)));\n    }\n}\nexport function serializeAddress(address) {\n    const bytesArray = [];\n    bytesArray.push(hexToBytes(intToHex(address.version, 1)));\n    bytesArray.push(hexToBytes(address.hash160));\n    return concatArray(bytesArray);\n}\nexport function deserializeAddress(bytesReader) {\n    const version = hexToInt(bytesToHex(bytesReader.readBytes(1)));\n    const data = bytesToHex(bytesReader.readBytes(20));\n    return { type: StacksMessageType.Address, version, hash160: data };\n}\nexport function serializePrincipal(principal) {\n    const bytesArray = [];\n    bytesArray.push(principal.prefix);\n    bytesArray.push(serializeAddress(principal.address));\n    if (principal.prefix === PostConditionPrincipalID.Contract) {\n        bytesArray.push(serializeLPString(principal.contractName));\n    }\n    return concatArray(bytesArray);\n}\nexport function deserializePrincipal(bytesReader) {\n    const prefix = bytesReader.readUInt8Enum(PostConditionPrincipalID, n => {\n        throw new DeserializationError(`Unexpected Principal payload type: ${n}`);\n    });\n    const address = deserializeAddress(bytesReader);\n    if (prefix === PostConditionPrincipalID.Standard) {\n        return { type: StacksMessageType.Principal, prefix, address };\n    }\n    const contractName = deserializeLPString(bytesReader);\n    return {\n        type: StacksMessageType.Principal,\n        prefix,\n        address,\n        contractName,\n    };\n}\nexport function serializeLPString(lps) {\n    const bytesArray = [];\n    const contentBytes = utf8ToBytes(lps.content);\n    const length = contentBytes.byteLength;\n    bytesArray.push(hexToBytes(intToHex(length, lps.lengthPrefixBytes)));\n    bytesArray.push(contentBytes);\n    return concatArray(bytesArray);\n}\nexport function deserializeLPString(bytesReader, prefixBytes, maxLength) {\n    prefixBytes = prefixBytes ? prefixBytes : 1;\n    const length = hexToInt(bytesToHex(bytesReader.readBytes(prefixBytes)));\n    const content = bytesToUtf8(bytesReader.readBytes(length));\n    return createLPString(content, prefixBytes, maxLength ?? 128);\n}\nexport function codeBodyString(content) {\n    return createLPString(content, 4, 100000);\n}\nexport function createMemoString(content) {\n    if (content && exceedsMaxLengthBytes(content, MEMO_MAX_LENGTH_BYTES)) {\n        throw new Error(`Memo exceeds maximum length of ${MEMO_MAX_LENGTH_BYTES} bytes`);\n    }\n    return { type: StacksMessageType.MemoString, content };\n}\nexport function serializeMemoString(memoString) {\n    const bytesArray = [];\n    const contentBytes = utf8ToBytes(memoString.content);\n    const paddedContent = rightPadHexToLength(bytesToHex(contentBytes), MEMO_MAX_LENGTH_BYTES * 2);\n    bytesArray.push(hexToBytes(paddedContent));\n    return concatArray(bytesArray);\n}\nexport function deserializeMemoString(bytesReader) {\n    let content = bytesToUtf8(bytesReader.readBytes(MEMO_MAX_LENGTH_BYTES));\n    content = content.replace(/\\u0000*$/, '');\n    return { type: StacksMessageType.MemoString, content };\n}\nexport function serializeAssetInfo(info) {\n    const bytesArray = [];\n    bytesArray.push(serializeAddress(info.address));\n    bytesArray.push(serializeLPString(info.contractName));\n    bytesArray.push(serializeLPString(info.assetName));\n    return concatArray(bytesArray);\n}\nexport function deserializeAssetInfo(bytesReader) {\n    return {\n        type: StacksMessageType.AssetInfo,\n        address: deserializeAddress(bytesReader),\n        contractName: deserializeLPString(bytesReader),\n        assetName: deserializeLPString(bytesReader),\n    };\n}\nexport function createLPList(values, lengthPrefixBytes) {\n    return {\n        type: StacksMessageType.LengthPrefixedList,\n        lengthPrefixBytes: lengthPrefixBytes || 4,\n        values,\n    };\n}\nexport function serializeLPList(lpList) {\n    const list = lpList.values;\n    const bytesArray = [];\n    bytesArray.push(hexToBytes(intToHex(list.length, lpList.lengthPrefixBytes)));\n    for (const l of list) {\n        bytesArray.push(serializeStacksMessage(l));\n    }\n    return concatArray(bytesArray);\n}\nexport function deserializeLPList(bytesReader, type, lengthPrefixBytes) {\n    const length = hexToInt(bytesToHex(bytesReader.readBytes(lengthPrefixBytes || 4)));\n    const l = [];\n    for (let index = 0; index < length; index++) {\n        switch (type) {\n            case StacksMessageType.Address:\n                l.push(deserializeAddress(bytesReader));\n                break;\n            case StacksMessageType.LengthPrefixedString:\n                l.push(deserializeLPString(bytesReader));\n                break;\n            case StacksMessageType.MemoString:\n                l.push(deserializeMemoString(bytesReader));\n                break;\n            case StacksMessageType.AssetInfo:\n                l.push(deserializeAssetInfo(bytesReader));\n                break;\n            case StacksMessageType.PostCondition:\n                l.push(deserializePostCondition(bytesReader));\n                break;\n            case StacksMessageType.PublicKey:\n                l.push(deserializePublicKey(bytesReader));\n                break;\n            case StacksMessageType.TransactionAuthField:\n                l.push(deserializeTransactionAuthField(bytesReader));\n                break;\n        }\n    }\n    return createLPList(l, lengthPrefixBytes);\n}\nexport function serializePostCondition(postCondition) {\n    const bytesArray = [];\n    bytesArray.push(postCondition.conditionType);\n    bytesArray.push(serializePrincipal(postCondition.principal));\n    if (postCondition.conditionType === PostConditionType.Fungible ||\n        postCondition.conditionType === PostConditionType.NonFungible) {\n        bytesArray.push(serializeAssetInfo(postCondition.assetInfo));\n    }\n    if (postCondition.conditionType === PostConditionType.NonFungible) {\n        bytesArray.push(serializeCV(postCondition.assetName));\n    }\n    bytesArray.push(postCondition.conditionCode);\n    if (postCondition.conditionType === PostConditionType.STX ||\n        postCondition.conditionType === PostConditionType.Fungible) {\n        if (postCondition.amount > BigInt('0xffffffffffffffff'))\n            throw new SerializationError('The post-condition amount may not be larger than 8 bytes');\n        bytesArray.push(intToBytes(postCondition.amount, false, 8));\n    }\n    return concatArray(bytesArray);\n}\nexport function deserializePostCondition(bytesReader) {\n    const postConditionType = bytesReader.readUInt8Enum(PostConditionType, n => {\n        throw new DeserializationError(`Could not read ${n} as PostConditionType`);\n    });\n    const principal = deserializePrincipal(bytesReader);\n    let conditionCode;\n    let assetInfo;\n    let amount;\n    switch (postConditionType) {\n        case PostConditionType.STX:\n            conditionCode = bytesReader.readUInt8Enum(FungibleConditionCode, n => {\n                throw new DeserializationError(`Could not read ${n} as FungibleConditionCode`);\n            });\n            amount = BigInt(`0x${bytesToHex(bytesReader.readBytes(8))}`);\n            return {\n                type: StacksMessageType.PostCondition,\n                conditionType: PostConditionType.STX,\n                principal,\n                conditionCode,\n                amount,\n            };\n        case PostConditionType.Fungible:\n            assetInfo = deserializeAssetInfo(bytesReader);\n            conditionCode = bytesReader.readUInt8Enum(FungibleConditionCode, n => {\n                throw new DeserializationError(`Could not read ${n} as FungibleConditionCode`);\n            });\n            amount = BigInt(`0x${bytesToHex(bytesReader.readBytes(8))}`);\n            return {\n                type: StacksMessageType.PostCondition,\n                conditionType: PostConditionType.Fungible,\n                principal,\n                conditionCode,\n                amount,\n                assetInfo,\n            };\n        case PostConditionType.NonFungible:\n            assetInfo = deserializeAssetInfo(bytesReader);\n            const assetName = deserializeCV(bytesReader);\n            conditionCode = bytesReader.readUInt8Enum(NonFungibleConditionCode, n => {\n                throw new DeserializationError(`Could not read ${n} as FungibleConditionCode`);\n            });\n            return {\n                type: StacksMessageType.PostCondition,\n                conditionType: PostConditionType.NonFungible,\n                principal,\n                conditionCode,\n                assetInfo,\n                assetName,\n            };\n    }\n}\n//# sourceMappingURL=types.js.map","import { concatArray, concatBytes, bigIntToBytes, toTwos, writeUInt32BE, utf8ToBytes, asciiToBytes, } from '@stacks/common';\nimport { serializeAddress, serializeLPString } from '../types';\nimport { createLPString } from '../postcondition-types';\nimport { ClarityType } from './constants';\nimport { SerializationError } from '../errors';\nimport { CLARITY_INT_BYTE_SIZE, CLARITY_INT_SIZE } from '../constants';\nfunction bytesWithTypeID(typeId, bytes) {\n    return concatArray([typeId, bytes]);\n}\nfunction serializeBoolCV(value) {\n    return new Uint8Array([value.type]);\n}\nfunction serializeOptionalCV(cv) {\n    if (cv.type === ClarityType.OptionalNone) {\n        return new Uint8Array([cv.type]);\n    }\n    else {\n        return bytesWithTypeID(cv.type, serializeCV(cv.value));\n    }\n}\nfunction serializeBufferCV(cv) {\n    const length = new Uint8Array(4);\n    writeUInt32BE(length, cv.buffer.length, 0);\n    return bytesWithTypeID(cv.type, concatBytes(length, cv.buffer));\n}\nfunction serializeIntCV(cv) {\n    const bytes = bigIntToBytes(toTwos(cv.value, BigInt(CLARITY_INT_SIZE)), CLARITY_INT_BYTE_SIZE);\n    return bytesWithTypeID(cv.type, bytes);\n}\nfunction serializeUIntCV(cv) {\n    const bytes = bigIntToBytes(cv.value, CLARITY_INT_BYTE_SIZE);\n    return bytesWithTypeID(cv.type, bytes);\n}\nfunction serializeStandardPrincipalCV(cv) {\n    return bytesWithTypeID(cv.type, serializeAddress(cv.address));\n}\nfunction serializeContractPrincipalCV(cv) {\n    return bytesWithTypeID(cv.type, concatBytes(serializeAddress(cv.address), serializeLPString(cv.contractName)));\n}\nfunction serializeResponseCV(cv) {\n    return bytesWithTypeID(cv.type, serializeCV(cv.value));\n}\nfunction serializeListCV(cv) {\n    const bytesArray = [];\n    const length = new Uint8Array(4);\n    writeUInt32BE(length, cv.list.length, 0);\n    bytesArray.push(length);\n    for (const value of cv.list) {\n        const serializedValue = serializeCV(value);\n        bytesArray.push(serializedValue);\n    }\n    return bytesWithTypeID(cv.type, concatArray(bytesArray));\n}\nfunction serializeTupleCV(cv) {\n    const bytesArray = [];\n    const length = new Uint8Array(4);\n    writeUInt32BE(length, Object.keys(cv.data).length, 0);\n    bytesArray.push(length);\n    const lexicographicOrder = Object.keys(cv.data).sort((a, b) => a.localeCompare(b));\n    for (const key of lexicographicOrder) {\n        const nameWithLength = createLPString(key);\n        bytesArray.push(serializeLPString(nameWithLength));\n        const serializedValue = serializeCV(cv.data[key]);\n        bytesArray.push(serializedValue);\n    }\n    return bytesWithTypeID(cv.type, concatArray(bytesArray));\n}\nfunction serializeStringCV(cv, encoding) {\n    const bytesArray = [];\n    const str = encoding == 'ascii' ? asciiToBytes(cv.data) : utf8ToBytes(cv.data);\n    const len = new Uint8Array(4);\n    writeUInt32BE(len, str.length, 0);\n    bytesArray.push(len);\n    bytesArray.push(str);\n    return bytesWithTypeID(cv.type, concatArray(bytesArray));\n}\nfunction serializeStringAsciiCV(cv) {\n    return serializeStringCV(cv, 'ascii');\n}\nfunction serializeStringUtf8CV(cv) {\n    return serializeStringCV(cv, 'utf8');\n}\nexport function serializeCV(value) {\n    switch (value.type) {\n        case ClarityType.BoolTrue:\n        case ClarityType.BoolFalse:\n            return serializeBoolCV(value);\n        case ClarityType.OptionalNone:\n        case ClarityType.OptionalSome:\n            return serializeOptionalCV(value);\n        case ClarityType.Buffer:\n            return serializeBufferCV(value);\n        case ClarityType.UInt:\n            return serializeUIntCV(value);\n        case ClarityType.Int:\n            return serializeIntCV(value);\n        case ClarityType.PrincipalStandard:\n            return serializeStandardPrincipalCV(value);\n        case ClarityType.PrincipalContract:\n            return serializeContractPrincipalCV(value);\n        case ClarityType.ResponseOk:\n        case ClarityType.ResponseErr:\n            return serializeResponseCV(value);\n        case ClarityType.List:\n            return serializeListCV(value);\n        case ClarityType.Tuple:\n            return serializeTupleCV(value);\n        case ClarityType.StringASCII:\n            return serializeStringAsciiCV(value);\n        case ClarityType.StringUTF8:\n            return serializeStringUtf8CV(value);\n        default:\n            throw new SerializationError('Unable to serialize. Invalid Clarity Value.');\n    }\n}\n//# sourceMappingURL=serialize.js.map","import { ripemd160 } from '@noble/hashes/ripemd160';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { sha512_256 } from '@noble/hashes/sha512';\nimport { utils } from '@noble/secp256k1';\nimport { bytesToHex, concatArray, concatBytes, utf8ToBytes, with0x } from '@stacks/common';\nimport { c32addressDecode } from 'c32check';\nimport lodashCloneDeep from 'lodash.clonedeep';\nimport { deserializeCV, serializeCV } from './clarity';\nexport { verify as verifySignature } from '@noble/secp256k1';\nexport const randomBytes = (bytesLength) => utils.randomBytes(bytesLength);\nexport const leftPadHex = (hexString) => hexString.length % 2 == 0 ? hexString : `0${hexString}`;\nexport const leftPadHexToLength = (hexString, length) => hexString.padStart(length, '0');\nexport const rightPadHexToLength = (hexString, length) => hexString.padEnd(length, '0');\nexport const exceedsMaxLengthBytes = (string, maxLengthBytes) => string ? utf8ToBytes(string).length > maxLengthBytes : false;\nexport function cloneDeep(obj) {\n    return lodashCloneDeep(obj);\n}\nexport function omit(obj, prop) {\n    const clone = cloneDeep(obj);\n    delete clone[prop];\n    return clone;\n}\nexport const hash160 = (input) => {\n    return ripemd160(sha256(input));\n};\nexport const txidFromData = (data) => {\n    return bytesToHex(sha512_256(data));\n};\nexport const txidFromBytes = txidFromData;\nexport const hashP2PKH = (input) => {\n    return bytesToHex(hash160(input));\n};\nexport const hashP2WPKH = (input) => {\n    const keyHash = hash160(input);\n    const redeemScript = concatBytes(new Uint8Array([0]), new Uint8Array([keyHash.length]), keyHash);\n    const redeemScriptHash = hash160(redeemScript);\n    return bytesToHex(redeemScriptHash);\n};\nexport const hashP2SH = (numSigs, pubKeys) => {\n    if (numSigs > 15 || pubKeys.length > 15) {\n        throw Error('P2SH multisig address can only contain up to 15 public keys');\n    }\n    const bytesArray = [];\n    bytesArray.push(80 + numSigs);\n    pubKeys.forEach(pubKey => {\n        bytesArray.push(pubKey.length);\n        bytesArray.push(pubKey);\n    });\n    bytesArray.push(80 + pubKeys.length);\n    bytesArray.push(174);\n    const redeemScript = concatArray(bytesArray);\n    const redeemScriptHash = hash160(redeemScript);\n    return bytesToHex(redeemScriptHash);\n};\nexport const hashP2WSH = (numSigs, pubKeys) => {\n    if (numSigs > 15 || pubKeys.length > 15) {\n        throw Error('P2WSH multisig address can only contain up to 15 public keys');\n    }\n    const scriptArray = [];\n    scriptArray.push(80 + numSigs);\n    pubKeys.forEach(pubKey => {\n        scriptArray.push(pubKey.length);\n        scriptArray.push(pubKey);\n    });\n    scriptArray.push(80 + pubKeys.length);\n    scriptArray.push(174);\n    const script = concatArray(scriptArray);\n    const digest = sha256(script);\n    const bytesArray = [];\n    bytesArray.push(0);\n    bytesArray.push(digest.length);\n    bytesArray.push(digest);\n    const redeemScript = concatArray(bytesArray);\n    const redeemScriptHash = hash160(redeemScript);\n    return bytesToHex(redeemScriptHash);\n};\nexport function isClarityName(name) {\n    const regex = /^[a-zA-Z]([a-zA-Z0-9]|[-_!?+<>=/*])*$|^[-+=/*]$|^[<>]=?$/;\n    return regex.test(name) && name.length < 128;\n}\nexport function cvToHex(cv) {\n    const serialized = serializeCV(cv);\n    return `0x${bytesToHex(serialized)}`;\n}\nexport function hexToCV(hex) {\n    return deserializeCV(hex);\n}\nexport const parseReadOnlyResponse = (response) => {\n    if (response.okay)\n        return hexToCV(response.result);\n    throw new Error(response.cause);\n};\nexport const validateStacksAddress = (stacksAddress) => {\n    try {\n        c32addressDecode(stacksAddress);\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n};\nexport const validateTxId = (txid) => {\n    if (txid === 'success')\n        return true;\n    const value = with0x(txid).toLowerCase();\n    if (value.length !== 66)\n        return false;\n    return with0x(BigInt(value).toString(16).padStart(64, '0')) === value;\n};\n//# sourceMappingURL=utils.js.map","import 'cross-fetch/polyfill';\nconst defaultFetchOpts = {\n    referrerPolicy: 'origin',\n    headers: {\n        'x-hiro-product': 'stacksjs',\n    },\n};\nexport const getFetchOptions = () => {\n    return defaultFetchOpts;\n};\nexport const setFetchOptions = (ops) => {\n    return Object.assign(defaultFetchOpts, ops);\n};\nexport async function fetchWrapper(input, init) {\n    const fetchOpts = {};\n    Object.assign(fetchOpts, defaultFetchOpts, init);\n    const fetchResult = await fetch(input, fetchOpts);\n    return fetchResult;\n}\nexport function hostMatches(host, pattern) {\n    if (typeof pattern === 'string')\n        return pattern === host;\n    return pattern.exec(host);\n}\nexport function createApiKeyMiddleware({ apiKey, host = /(.*)api(.*)(\\.stacks\\.co|\\.hiro\\.so)$/i, httpHeader = 'x-api-key', }) {\n    return {\n        pre: context => {\n            const reqUrl = new URL(context.url);\n            if (!hostMatches(reqUrl.host, host))\n                return;\n            const headers = context.init.headers instanceof Headers\n                ? context.init.headers\n                : (context.init.headers = new Headers(context.init.headers));\n            headers.set(httpHeader, apiKey);\n        },\n    };\n}\nfunction argsForCreateFetchFn(args) {\n    let fetchLib = fetchWrapper;\n    let middlewares = [];\n    if (args.length > 0 && typeof args[0] === 'function') {\n        fetchLib = args.shift();\n    }\n    if (args.length > 0) {\n        middlewares = args;\n    }\n    return { fetchLib, middlewares };\n}\nexport function createFetchFn(...args) {\n    const { fetchLib, middlewares } = argsForCreateFetchFn(args);\n    const fetchFn = async (url, init) => {\n        let fetchParams = { url, init: init ?? {} };\n        for (const middleware of middlewares) {\n            if (typeof middleware.pre === 'function') {\n                const result = await Promise.resolve(middleware.pre({\n                    fetch: fetchLib,\n                    ...fetchParams,\n                }));\n                fetchParams = result ?? fetchParams;\n            }\n        }\n        let response = await fetchLib(fetchParams.url, fetchParams.init);\n        for (const middleware of middlewares) {\n            if (typeof middleware.post === 'function') {\n                const result = await Promise.resolve(middleware.post({\n                    fetch: fetchLib,\n                    url: fetchParams.url,\n                    init: fetchParams.init,\n                    response: response?.clone() ?? response,\n                }));\n                response = result ?? response;\n            }\n        }\n        return response;\n    };\n    return fetchFn;\n}\n//# sourceMappingURL=fetch.js.map","import { TransactionVersion, ChainID } from '@stacks/common';\nimport { createFetchFn } from './fetch';\nexport const HIRO_MAINNET_DEFAULT = 'https://api.mainnet.hiro.so';\nexport const HIRO_TESTNET_DEFAULT = 'https://api.testnet.hiro.so';\nexport const HIRO_MOCKNET_DEFAULT = 'http://localhost:3999';\nexport const StacksNetworks = ['mainnet', 'testnet', 'devnet', 'mocknet'];\nexport class StacksNetwork {\n    constructor(networkConfig) {\n        this.version = TransactionVersion.Mainnet;\n        this.chainId = ChainID.Mainnet;\n        this.bnsLookupUrl = 'https://api.mainnet.hiro.so';\n        this.broadcastEndpoint = '/v2/transactions';\n        this.transferFeeEstimateEndpoint = '/v2/fees/transfer';\n        this.transactionFeeEstimateEndpoint = '/v2/fees/transaction';\n        this.accountEndpoint = '/v2/accounts';\n        this.contractAbiEndpoint = '/v2/contracts/interface';\n        this.readOnlyFunctionCallEndpoint = '/v2/contracts/call-read';\n        this.isMainnet = () => this.version === TransactionVersion.Mainnet;\n        this.getBroadcastApiUrl = () => `${this.coreApiUrl}${this.broadcastEndpoint}`;\n        this.getTransferFeeEstimateApiUrl = () => `${this.coreApiUrl}${this.transferFeeEstimateEndpoint}`;\n        this.getTransactionFeeEstimateApiUrl = () => `${this.coreApiUrl}${this.transactionFeeEstimateEndpoint}`;\n        this.getAccountApiUrl = (address) => `${this.coreApiUrl}${this.accountEndpoint}/${address}?proof=0`;\n        this.getAccountExtendedBalancesApiUrl = (address) => `${this.coreApiUrl}/extended/v1/address/${address}/balances`;\n        this.getAbiApiUrl = (address, contract) => `${this.coreApiUrl}${this.contractAbiEndpoint}/${address}/${contract}`;\n        this.getReadOnlyFunctionCallApiUrl = (contractAddress, contractName, functionName) => `${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}/${contractAddress}/${contractName}/${encodeURIComponent(functionName)}`;\n        this.getInfoUrl = () => `${this.coreApiUrl}/v2/info`;\n        this.getBlockTimeInfoUrl = () => `${this.coreApiUrl}/extended/v1/info/network_block_times`;\n        this.getPoxInfoUrl = () => `${this.coreApiUrl}/v2/pox`;\n        this.getRewardsUrl = (address, options) => {\n            let url = `${this.coreApiUrl}/extended/v1/burnchain/rewards/${address}`;\n            if (options) {\n                url = `${url}?limit=${options.limit}&offset=${options.offset}`;\n            }\n            return url;\n        };\n        this.getRewardsTotalUrl = (address) => `${this.coreApiUrl}/extended/v1/burnchain/rewards/${address}/total`;\n        this.getRewardHoldersUrl = (address, options) => {\n            let url = `${this.coreApiUrl}/extended/v1/burnchain/reward_slot_holders/${address}`;\n            if (options) {\n                url = `${url}?limit=${options.limit}&offset=${options.offset}`;\n            }\n            return url;\n        };\n        this.getStackerInfoUrl = (contractAddress, contractName) => `${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}\n    ${contractAddress}/${contractName}/get-stacker-info`;\n        this.getDataVarUrl = (contractAddress, contractName, dataVarName) => `${this.coreApiUrl}/v2/data_var/${contractAddress}/${contractName}/${dataVarName}?proof=0`;\n        this.getMapEntryUrl = (contractAddress, contractName, mapName) => `${this.coreApiUrl}/v2/map_entry/${contractAddress}/${contractName}/${mapName}?proof=0`;\n        this.coreApiUrl = networkConfig.url;\n        this.fetchFn = networkConfig.fetchFn ?? createFetchFn();\n    }\n    getNameInfo(fullyQualifiedName) {\n        const nameLookupURL = `${this.bnsLookupUrl}/v1/names/${fullyQualifiedName}`;\n        return this.fetchFn(nameLookupURL)\n            .then(resp => {\n            if (resp.status === 404) {\n                throw new Error('Name not found');\n            }\n            else if (resp.status !== 200) {\n                throw new Error(`Bad response status: ${resp.status}`);\n            }\n            else {\n                return resp.json();\n            }\n        })\n            .then(nameInfo => {\n            if (nameInfo.address) {\n                return Object.assign({}, nameInfo, { address: nameInfo.address });\n            }\n            else {\n                return nameInfo;\n            }\n        });\n    }\n}\nStacksNetwork.fromName = (networkName) => {\n    switch (networkName) {\n        case 'mainnet':\n            return new StacksMainnet();\n        case 'testnet':\n            return new StacksTestnet();\n        case 'devnet':\n            return new StacksDevnet();\n        case 'mocknet':\n            return new StacksMocknet();\n        default:\n            throw new Error(`Invalid network name provided. Must be one of the following: ${StacksNetworks.join(', ')}`);\n    }\n};\nStacksNetwork.fromNameOrNetwork = (network) => {\n    if (typeof network !== 'string' && 'version' in network) {\n        return network;\n    }\n    return StacksNetwork.fromName(network);\n};\nexport class StacksMainnet extends StacksNetwork {\n    constructor(opts) {\n        super({\n            url: opts?.url ?? HIRO_MAINNET_DEFAULT,\n            fetchFn: opts?.fetchFn,\n        });\n        this.version = TransactionVersion.Mainnet;\n        this.chainId = ChainID.Mainnet;\n    }\n}\nexport class StacksTestnet extends StacksNetwork {\n    constructor(opts) {\n        super({\n            url: opts?.url ?? HIRO_TESTNET_DEFAULT,\n            fetchFn: opts?.fetchFn,\n        });\n        this.version = TransactionVersion.Testnet;\n        this.chainId = ChainID.Testnet;\n    }\n}\nexport class StacksMocknet extends StacksNetwork {\n    constructor(opts) {\n        super({\n            url: opts?.url ?? HIRO_MOCKNET_DEFAULT,\n            fetchFn: opts?.fetchFn,\n        });\n        this.version = TransactionVersion.Testnet;\n        this.chainId = ChainID.Testnet;\n    }\n}\nexport const StacksDevnet = StacksMocknet;\n//# sourceMappingURL=network.js.map","const NAMESPACE = 'connect-ui';\n\n/**\n * Virtual DOM patching algorithm based on Snabbdom by\n * Simon Friis Vindum (@paldepind)\n * Licensed under the MIT License\n * https://github.com/snabbdom/snabbdom/blob/master/LICENSE\n *\n * Modified for Stencil's renderer and slot projection\n */\nlet scopeId;\nlet hostTagName;\nlet isSvgMode = false;\nlet queuePending = false;\nconst createTime = (fnName, tagName = '') => {\n    {\n        return () => {\n            return;\n        };\n    }\n};\nconst uniqueTime = (key, measureText) => {\n    {\n        return () => {\n            return;\n        };\n    }\n};\nconst HYDRATED_CSS = '{visibility:hidden}.hydrated{visibility:inherit}';\n/**\n * Default style mode id\n */\n/**\n * Reusable empty obj/array\n * Don't add values to these!!\n */\nconst EMPTY_OBJ = {};\n/**\n * Namespaces\n */\nconst SVG_NS = 'http://www.w3.org/2000/svg';\nconst HTML_NS = 'http://www.w3.org/1999/xhtml';\nconst isDef = (v) => v != null;\nconst isComplexType = (o) => {\n    // https://jsperf.com/typeof-fn-object/5\n    o = typeof o;\n    return o === 'object' || o === 'function';\n};\n/**\n * Helper method for querying a `meta` tag that contains a nonce value\n * out of a DOM's head.\n *\n * @param doc The DOM containing the `head` to query against\n * @returns The content of the meta tag representing the nonce value, or `undefined` if no tag\n * exists or the tag has no content.\n */\nfunction queryNonceMetaTagContent(doc) {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = doc.head) === null || _a === void 0 ? void 0 : _a.querySelector('meta[name=\"csp-nonce\"]')) === null || _b === void 0 ? void 0 : _b.getAttribute('content')) !== null && _c !== void 0 ? _c : undefined;\n}\n/**\n * Production h() function based on Preact by\n * Jason Miller (@developit)\n * Licensed under the MIT License\n * https://github.com/developit/preact/blob/master/LICENSE\n *\n * Modified for Stencil's compiler and vdom\n */\n// export function h(nodeName: string | d.FunctionalComponent, vnodeData: d.PropsType, child?: d.ChildType): d.VNode;\n// export function h(nodeName: string | d.FunctionalComponent, vnodeData: d.PropsType, ...children: d.ChildType[]): d.VNode;\nconst h = (nodeName, vnodeData, ...children) => {\n    let child = null;\n    let simple = false;\n    let lastSimple = false;\n    const vNodeChildren = [];\n    const walk = (c) => {\n        for (let i = 0; i < c.length; i++) {\n            child = c[i];\n            if (Array.isArray(child)) {\n                walk(child);\n            }\n            else if (child != null && typeof child !== 'boolean') {\n                if ((simple = typeof nodeName !== 'function' && !isComplexType(child))) {\n                    child = String(child);\n                }\n                if (simple && lastSimple) {\n                    // If the previous child was simple (string), we merge both\n                    vNodeChildren[vNodeChildren.length - 1].$text$ += child;\n                }\n                else {\n                    // Append a new vNode, if it's text, we create a text vNode\n                    vNodeChildren.push(simple ? newVNode(null, child) : child);\n                }\n                lastSimple = simple;\n            }\n        }\n    };\n    walk(children);\n    if (vnodeData) {\n        {\n            const classData = vnodeData.className || vnodeData.class;\n            if (classData) {\n                vnodeData.class =\n                    typeof classData !== 'object'\n                        ? classData\n                        : Object.keys(classData)\n                            .filter((k) => classData[k])\n                            .join(' ');\n            }\n        }\n    }\n    const vnode = newVNode(nodeName, null);\n    vnode.$attrs$ = vnodeData;\n    if (vNodeChildren.length > 0) {\n        vnode.$children$ = vNodeChildren;\n    }\n    return vnode;\n};\n/**\n * A utility function for creating a virtual DOM node from a tag and some\n * possible text content.\n *\n * @param tag the tag for this element\n * @param text possible text content for the node\n * @returns a newly-minted virtual DOM node\n */\nconst newVNode = (tag, text) => {\n    const vnode = {\n        $flags$: 0,\n        $tag$: tag,\n        $text$: text,\n        $elm$: null,\n        $children$: null,\n    };\n    {\n        vnode.$attrs$ = null;\n    }\n    return vnode;\n};\nconst Host = {};\n/**\n * Check whether a given node is a Host node or not\n *\n * @param node the virtual DOM node to check\n * @returns whether it's a Host node or not\n */\nconst isHost = (node) => node && node.$tag$ === Host;\n/**\n * Parse a new property value for a given property type.\n *\n * While the prop value can reasonably be expected to be of `any` type as far as TypeScript's type checker is concerned,\n * it is not safe to assume that the string returned by evaluating `typeof propValue` matches:\n *   1. `any`, the type given to `propValue` in the function signature\n *   2. the type stored from `propType`.\n *\n * This function provides the capability to parse/coerce a property's value to potentially any other JavaScript type.\n *\n * Property values represented in TSX preserve their type information. In the example below, the number 0 is passed to\n * a component. This `propValue` will preserve its type information (`typeof propValue === 'number'`). Note that is\n * based on the type of the value being passed in, not the type declared of the class member decorated with `@Prop`.\n * ```tsx\n * <my-cmp prop-val={0}></my-cmp>\n * ```\n *\n * HTML prop values on the other hand, will always a string\n *\n * @param propValue the new value to coerce to some type\n * @param propType the type of the prop, expressed as a binary number\n * @returns the parsed/coerced value\n */\nconst parsePropertyValue = (propValue, propType) => {\n    // ensure this value is of the correct prop type\n    if (propValue != null && !isComplexType(propValue)) {\n        if (propType & 4 /* MEMBER_FLAGS.Boolean */) {\n            // per the HTML spec, any string value means it is a boolean true value\n            // but we'll cheat here and say that the string \"false\" is the boolean false\n            return propValue === 'false' ? false : propValue === '' || !!propValue;\n        }\n        // redundant return here for better minification\n        return propValue;\n    }\n    // not sure exactly what type we want\n    // so no need to change to a different type\n    return propValue;\n};\nconst getElement = (ref) => (getHostRef(ref).$hostElement$ );\n/**\n * Helper function to create & dispatch a custom Event on a provided target\n * @param elm the target of the Event\n * @param name the name to give the custom Event\n * @param opts options for configuring a custom Event\n * @returns the custom Event\n */\nconst emitEvent = (elm, name, opts) => {\n    const ev = plt.ce(name, opts);\n    elm.dispatchEvent(ev);\n    return ev;\n};\nconst rootAppliedStyles = /*@__PURE__*/ new WeakMap();\nconst registerStyle = (scopeId, cssText, allowCS) => {\n    let style = styles.get(scopeId);\n    if (supportsConstructableStylesheets && allowCS) {\n        style = (style || new CSSStyleSheet());\n        if (typeof style === 'string') {\n            style = cssText;\n        }\n        else {\n            style.replaceSync(cssText);\n        }\n    }\n    else {\n        style = cssText;\n    }\n    styles.set(scopeId, style);\n};\nconst addStyle = (styleContainerNode, cmpMeta, mode, hostElm) => {\n    var _a;\n    let scopeId = getScopeId(cmpMeta);\n    const style = styles.get(scopeId);\n    // if an element is NOT connected then getRootNode() will return the wrong root node\n    // so the fallback is to always use the document for the root node in those cases\n    styleContainerNode = styleContainerNode.nodeType === 11 /* NODE_TYPE.DocumentFragment */ ? styleContainerNode : doc;\n    if (style) {\n        if (typeof style === 'string') {\n            styleContainerNode = styleContainerNode.head || styleContainerNode;\n            let appliedStyles = rootAppliedStyles.get(styleContainerNode);\n            let styleElm;\n            if (!appliedStyles) {\n                rootAppliedStyles.set(styleContainerNode, (appliedStyles = new Set()));\n            }\n            if (!appliedStyles.has(scopeId)) {\n                {\n                    {\n                        styleElm = doc.createElement('style');\n                        styleElm.innerHTML = style;\n                    }\n                    // Apply CSP nonce to the style tag if it exists\n                    const nonce = (_a = plt.$nonce$) !== null && _a !== void 0 ? _a : queryNonceMetaTagContent(doc);\n                    if (nonce != null) {\n                        styleElm.setAttribute('nonce', nonce);\n                    }\n                    styleContainerNode.insertBefore(styleElm, styleContainerNode.querySelector('link'));\n                }\n                if (appliedStyles) {\n                    appliedStyles.add(scopeId);\n                }\n            }\n        }\n        else if (!styleContainerNode.adoptedStyleSheets.includes(style)) {\n            styleContainerNode.adoptedStyleSheets = [...styleContainerNode.adoptedStyleSheets, style];\n        }\n    }\n    return scopeId;\n};\nconst attachStyles = (hostRef) => {\n    const cmpMeta = hostRef.$cmpMeta$;\n    const elm = hostRef.$hostElement$;\n    const flags = cmpMeta.$flags$;\n    const endAttachStyles = createTime('attachStyles', cmpMeta.$tagName$);\n    const scopeId = addStyle(elm.shadowRoot ? elm.shadowRoot : elm.getRootNode(), cmpMeta);\n    if (flags & 10 /* CMP_FLAGS.needsScopedEncapsulation */) {\n        // only required when we're NOT using native shadow dom (slot)\n        // or this browser doesn't support native shadow dom\n        // and this host element was NOT created with SSR\n        // let's pick out the inner content for slot projection\n        // create a node to represent where the original\n        // content was first placed, which is useful later on\n        // DOM WRITE!!\n        elm['s-sc'] = scopeId;\n        elm.classList.add(scopeId + '-h');\n    }\n    endAttachStyles();\n};\nconst getScopeId = (cmp, mode) => 'sc-' + (cmp.$tagName$);\n/**\n * Production setAccessor() function based on Preact by\n * Jason Miller (@developit)\n * Licensed under the MIT License\n * https://github.com/developit/preact/blob/master/LICENSE\n *\n * Modified for Stencil's compiler and vdom\n */\nconst setAccessor = (elm, memberName, oldValue, newValue, isSvg, flags) => {\n    if (oldValue !== newValue) {\n        let isProp = isMemberInElement(elm, memberName);\n        let ln = memberName.toLowerCase();\n        if (memberName === 'class') {\n            const classList = elm.classList;\n            const oldClasses = parseClassList(oldValue);\n            const newClasses = parseClassList(newValue);\n            classList.remove(...oldClasses.filter((c) => c && !newClasses.includes(c)));\n            classList.add(...newClasses.filter((c) => c && !oldClasses.includes(c)));\n        }\n        else if ((!isProp ) &&\n            memberName[0] === 'o' &&\n            memberName[1] === 'n') {\n            // Event Handlers\n            // so if the member name starts with \"on\" and the 3rd characters is\n            // a capital letter, and it's not already a member on the element,\n            // then we're assuming it's an event listener\n            if (memberName[2] === '-') {\n                // on- prefixed events\n                // allows to be explicit about the dom event to listen without any magic\n                // under the hood:\n                // <my-cmp on-click> // listens for \"click\"\n                // <my-cmp on-Click> // listens for \"Click\"\n                // <my-cmp on-ionChange> // listens for \"ionChange\"\n                // <my-cmp on-EVENTS> // listens for \"EVENTS\"\n                memberName = memberName.slice(3);\n            }\n            else if (isMemberInElement(win, ln)) {\n                // standard event\n                // the JSX attribute could have been \"onMouseOver\" and the\n                // member name \"onmouseover\" is on the window's prototype\n                // so let's add the listener \"mouseover\", which is all lowercased\n                memberName = ln.slice(2);\n            }\n            else {\n                // custom event\n                // the JSX attribute could have been \"onMyCustomEvent\"\n                // so let's trim off the \"on\" prefix and lowercase the first character\n                // and add the listener \"myCustomEvent\"\n                // except for the first character, we keep the event name case\n                memberName = ln[2] + memberName.slice(3);\n            }\n            if (oldValue) {\n                plt.rel(elm, memberName, oldValue, false);\n            }\n            if (newValue) {\n                plt.ael(elm, memberName, newValue, false);\n            }\n        }\n        else {\n            // Set property if it exists and it's not a SVG\n            const isComplex = isComplexType(newValue);\n            if ((isProp || (isComplex && newValue !== null)) && !isSvg) {\n                try {\n                    if (!elm.tagName.includes('-')) {\n                        const n = newValue == null ? '' : newValue;\n                        // Workaround for Safari, moving the <input> caret when re-assigning the same valued\n                        if (memberName === 'list') {\n                            isProp = false;\n                        }\n                        else if (oldValue == null || elm[memberName] != n) {\n                            elm[memberName] = n;\n                        }\n                    }\n                    else {\n                        elm[memberName] = newValue;\n                    }\n                }\n                catch (e) { }\n            }\n            if (newValue == null || newValue === false) {\n                if (newValue !== false || elm.getAttribute(memberName) === '') {\n                    {\n                        elm.removeAttribute(memberName);\n                    }\n                }\n            }\n            else if ((!isProp || flags & 4 /* VNODE_FLAGS.isHost */ || isSvg) && !isComplex) {\n                newValue = newValue === true ? '' : newValue;\n                {\n                    elm.setAttribute(memberName, newValue);\n                }\n            }\n        }\n    }\n};\nconst parseClassListRegex = /\\s/;\nconst parseClassList = (value) => (!value ? [] : value.split(parseClassListRegex));\nconst updateElement = (oldVnode, newVnode, isSvgMode, memberName) => {\n    // if the element passed in is a shadow root, which is a document fragment\n    // then we want to be adding attrs/props to the shadow root's \"host\" element\n    // if it's not a shadow root, then we add attrs/props to the same element\n    const elm = newVnode.$elm$.nodeType === 11 /* NODE_TYPE.DocumentFragment */ && newVnode.$elm$.host\n        ? newVnode.$elm$.host\n        : newVnode.$elm$;\n    const oldVnodeAttrs = (oldVnode && oldVnode.$attrs$) || EMPTY_OBJ;\n    const newVnodeAttrs = newVnode.$attrs$ || EMPTY_OBJ;\n    {\n        // remove attributes no longer present on the vnode by setting them to undefined\n        for (memberName in oldVnodeAttrs) {\n            if (!(memberName in newVnodeAttrs)) {\n                setAccessor(elm, memberName, oldVnodeAttrs[memberName], undefined, isSvgMode, newVnode.$flags$);\n            }\n        }\n    }\n    // add new & update changed attributes\n    for (memberName in newVnodeAttrs) {\n        setAccessor(elm, memberName, oldVnodeAttrs[memberName], newVnodeAttrs[memberName], isSvgMode, newVnode.$flags$);\n    }\n};\n/**\n * Create a DOM Node corresponding to one of the children of a given VNode.\n *\n * @param oldParentVNode the parent VNode from the previous render\n * @param newParentVNode the parent VNode from the current render\n * @param childIndex the index of the VNode, in the _new_ parent node's\n * children, for which we will create a new DOM node\n * @param parentElm the parent DOM node which our new node will be a child of\n * @returns the newly created node\n */\nconst createElm = (oldParentVNode, newParentVNode, childIndex, parentElm) => {\n    // tslint:disable-next-line: prefer-const\n    const newVNode = newParentVNode.$children$[childIndex];\n    let i = 0;\n    let elm;\n    let childNode;\n    if (newVNode.$text$ !== null) {\n        // create text node\n        elm = newVNode.$elm$ = doc.createTextNode(newVNode.$text$);\n    }\n    else {\n        if (!isSvgMode) {\n            isSvgMode = newVNode.$tag$ === 'svg';\n        }\n        // create element\n        elm = newVNode.$elm$ = (doc.createElementNS(isSvgMode ? SVG_NS : HTML_NS, newVNode.$tag$)\n            );\n        if (isSvgMode && newVNode.$tag$ === 'foreignObject') {\n            isSvgMode = false;\n        }\n        // add css classes, attrs, props, listeners, etc.\n        {\n            updateElement(null, newVNode, isSvgMode);\n        }\n        if (isDef(scopeId) && elm['s-si'] !== scopeId) {\n            // if there is a scopeId and this is the initial render\n            // then let's add the scopeId as a css class\n            elm.classList.add((elm['s-si'] = scopeId));\n        }\n        if (newVNode.$children$) {\n            for (i = 0; i < newVNode.$children$.length; ++i) {\n                // create the node\n                childNode = createElm(oldParentVNode, newVNode, i);\n                // return node could have been null\n                if (childNode) {\n                    // append our new node\n                    elm.appendChild(childNode);\n                }\n            }\n        }\n        {\n            if (newVNode.$tag$ === 'svg') {\n                // Only reset the SVG context when we're exiting <svg> element\n                isSvgMode = false;\n            }\n            else if (elm.tagName === 'foreignObject') {\n                // Reenter SVG context when we're exiting <foreignObject> element\n                isSvgMode = true;\n            }\n        }\n    }\n    return elm;\n};\n/**\n * Create DOM nodes corresponding to a list of {@link d.Vnode} objects and\n * add them to the DOM in the appropriate place.\n *\n * @param parentElm the DOM node which should be used as a parent for the new\n * DOM nodes\n * @param before a child of the `parentElm` which the new children should be\n * inserted before (optional)\n * @param parentVNode the parent virtual DOM node\n * @param vnodes the new child virtual DOM nodes to produce DOM nodes for\n * @param startIdx the index in the child virtual DOM nodes at which to start\n * creating DOM nodes (inclusive)\n * @param endIdx the index in the child virtual DOM nodes at which to stop\n * creating DOM nodes (inclusive)\n */\nconst addVnodes = (parentElm, before, parentVNode, vnodes, startIdx, endIdx) => {\n    let containerElm = (parentElm);\n    let childNode;\n    if (containerElm.shadowRoot && containerElm.tagName === hostTagName) {\n        containerElm = containerElm.shadowRoot;\n    }\n    for (; startIdx <= endIdx; ++startIdx) {\n        if (vnodes[startIdx]) {\n            childNode = createElm(null, parentVNode, startIdx);\n            if (childNode) {\n                vnodes[startIdx].$elm$ = childNode;\n                containerElm.insertBefore(childNode, before);\n            }\n        }\n    }\n};\n/**\n * Remove the DOM elements corresponding to a list of {@link d.VNode} objects.\n * This can be used to, for instance, clean up after a list of children which\n * should no longer be shown.\n *\n * This function also handles some of Stencil's slot relocation logic.\n *\n * @param vnodes a list of virtual DOM nodes to remove\n * @param startIdx the index at which to start removing nodes (inclusive)\n * @param endIdx the index at which to stop removing nodes (inclusive)\n * @param vnode a VNode\n * @param elm an element\n */\nconst removeVnodes = (vnodes, startIdx, endIdx, vnode, elm) => {\n    for (; startIdx <= endIdx; ++startIdx) {\n        if ((vnode = vnodes[startIdx])) {\n            elm = vnode.$elm$;\n            // remove the vnode's element from the dom\n            elm.remove();\n        }\n    }\n};\n/**\n * Reconcile the children of a new VNode with the children of an old VNode by\n * traversing the two collections of children, identifying nodes that are\n * conserved or changed, calling out to `patch` to make any necessary\n * updates to the DOM, and rearranging DOM nodes as needed.\n *\n * The algorithm for reconciling children works by analyzing two 'windows' onto\n * the two arrays of children (`oldCh` and `newCh`). We keep track of the\n * 'windows' by storing start and end indices and references to the\n * corresponding array entries. Initially the two 'windows' are basically equal\n * to the entire array, but we progressively narrow the windows until there are\n * no children left to update by doing the following:\n *\n * 1. Skip any `null` entries at the beginning or end of the two arrays, so\n *    that if we have an initial array like the following we'll end up dealing\n *    only with a window bounded by the highlighted elements:\n *\n *    [null, null, VNode1 , ... , VNode2, null, null]\n *                 ^^^^^^         ^^^^^^\n *\n * 2. Check to see if the elements at the head and tail positions are equal\n *    across the windows. This will basically detect elements which haven't\n *    been added, removed, or changed position, i.e. if you had the following\n *    VNode elements (represented as HTML):\n *\n *    oldVNode: `<div><p><span>HEY</span></p></div>`\n *    newVNode: `<div><p><span>THERE</span></p></div>`\n *\n *    Then when comparing the children of the `<div>` tag we check the equality\n *    of the VNodes corresponding to the `<p>` tags and, since they are the\n *    same tag in the same position, we'd be able to avoid completely\n *    re-rendering the subtree under them with a new DOM element and would just\n *    call out to `patch` to handle reconciling their children and so on.\n *\n * 3. Check, for both windows, to see if the element at the beginning of the\n *    window corresponds to the element at the end of the other window. This is\n *    a heuristic which will let us identify _some_ situations in which\n *    elements have changed position, for instance it _should_ detect that the\n *    children nodes themselves have not changed but merely moved in the\n *    following example:\n *\n *    oldVNode: `<div><element-one /><element-two /></div>`\n *    newVNode: `<div><element-two /><element-one /></div>`\n *\n *    If we find cases like this then we also need to move the concrete DOM\n *    elements corresponding to the moved children to write the re-order to the\n *    DOM.\n *\n * 4. Finally, if VNodes have the `key` attribute set on them we check for any\n *    nodes in the old children which have the same key as the first element in\n *    our window on the new children. If we find such a node we handle calling\n *    out to `patch`, moving relevant DOM nodes, and so on, in accordance with\n *    what we find.\n *\n * Finally, once we've narrowed our 'windows' to the point that either of them\n * collapse (i.e. they have length 0) we then handle any remaining VNode\n * insertion or deletion that needs to happen to get a DOM state that correctly\n * reflects the new child VNodes. If, for instance, after our window on the old\n * children has collapsed we still have more nodes on the new children that\n * we haven't dealt with yet then we need to add them, or if the new children\n * collapse but we still have unhandled _old_ children then we need to make\n * sure the corresponding DOM nodes are removed.\n *\n * @param parentElm the node into which the parent VNode is rendered\n * @param oldCh the old children of the parent node\n * @param newVNode the new VNode which will replace the parent\n * @param newCh the new children of the parent node\n */\nconst updateChildren = (parentElm, oldCh, newVNode, newCh) => {\n    let oldStartIdx = 0;\n    let newStartIdx = 0;\n    let oldEndIdx = oldCh.length - 1;\n    let oldStartVnode = oldCh[0];\n    let oldEndVnode = oldCh[oldEndIdx];\n    let newEndIdx = newCh.length - 1;\n    let newStartVnode = newCh[0];\n    let newEndVnode = newCh[newEndIdx];\n    let node;\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n        if (oldStartVnode == null) {\n            // VNode might have been moved left\n            oldStartVnode = oldCh[++oldStartIdx];\n        }\n        else if (oldEndVnode == null) {\n            oldEndVnode = oldCh[--oldEndIdx];\n        }\n        else if (newStartVnode == null) {\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else if (newEndVnode == null) {\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (isSameVnode(oldStartVnode, newStartVnode)) {\n            // if the start nodes are the same then we should patch the new VNode\n            // onto the old one, and increment our `newStartIdx` and `oldStartIdx`\n            // indices to reflect that. We don't need to move any DOM Nodes around\n            // since things are matched up in order.\n            patch(oldStartVnode, newStartVnode);\n            oldStartVnode = oldCh[++oldStartIdx];\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else if (isSameVnode(oldEndVnode, newEndVnode)) {\n            // likewise, if the end nodes are the same we patch new onto old and\n            // decrement our end indices, and also likewise in this case we don't\n            // need to move any DOM Nodes.\n            patch(oldEndVnode, newEndVnode);\n            oldEndVnode = oldCh[--oldEndIdx];\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (isSameVnode(oldStartVnode, newEndVnode)) {\n            patch(oldStartVnode, newEndVnode);\n            // We need to move the element for `oldStartVnode` into a position which\n            // will be appropriate for `newEndVnode`. For this we can use\n            // `.insertBefore` and `oldEndVnode.$elm$.nextSibling`. If there is a\n            // sibling for `oldEndVnode.$elm$` then we want to move the DOM node for\n            // `oldStartVnode` between `oldEndVnode` and it's sibling, like so:\n            //\n            // <old-start-node />\n            // <some-intervening-node />\n            // <old-end-node />\n            // <!-- ->              <-- `oldStartVnode.$elm$` should be inserted here\n            // <next-sibling />\n            //\n            // If instead `oldEndVnode.$elm$` has no sibling then we just want to put\n            // the node for `oldStartVnode` at the end of the children of\n            // `parentElm`. Luckily, `Node.nextSibling` will return `null` if there\n            // aren't any siblings, and passing `null` to `Node.insertBefore` will\n            // append it to the children of the parent element.\n            parentElm.insertBefore(oldStartVnode.$elm$, oldEndVnode.$elm$.nextSibling);\n            oldStartVnode = oldCh[++oldStartIdx];\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (isSameVnode(oldEndVnode, newStartVnode)) {\n            patch(oldEndVnode, newStartVnode);\n            // We've already checked above if `oldStartVnode` and `newStartVnode` are\n            // the same node, so since we're here we know that they are not. Thus we\n            // can move the element for `oldEndVnode` _before_ the element for\n            // `oldStartVnode`, leaving `oldStartVnode` to be reconciled in the\n            // future.\n            parentElm.insertBefore(oldEndVnode.$elm$, oldStartVnode.$elm$);\n            oldEndVnode = oldCh[--oldEndIdx];\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else {\n            {\n                // We either didn't find an element in the old children that matches\n                // the key of the first new child OR the build is not using `key`\n                // attributes at all. In either case we need to create a new element\n                // for the new node.\n                node = createElm(oldCh && oldCh[newStartIdx], newVNode, newStartIdx);\n                newStartVnode = newCh[++newStartIdx];\n            }\n            if (node) {\n                // if we created a new node then handle inserting it to the DOM\n                {\n                    oldStartVnode.$elm$.parentNode.insertBefore(node, oldStartVnode.$elm$);\n                }\n            }\n        }\n    }\n    if (oldStartIdx > oldEndIdx) {\n        // we have some more new nodes to add which don't match up with old nodes\n        addVnodes(parentElm, newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].$elm$, newVNode, newCh, newStartIdx, newEndIdx);\n    }\n    else if (newStartIdx > newEndIdx) {\n        // there are nodes in the `oldCh` array which no longer correspond to nodes\n        // in the new array, so lets remove them (which entails cleaning up the\n        // relevant DOM nodes)\n        removeVnodes(oldCh, oldStartIdx, oldEndIdx);\n    }\n};\n/**\n * Compare two VNodes to determine if they are the same\n *\n * **NB**: This function is an equality _heuristic_ based on the available\n * information set on the two VNodes and can be misleading under certain\n * circumstances. In particular, if the two nodes do not have `key` attrs\n * (available under `$key$` on VNodes) then the function falls back on merely\n * checking that they have the same tag.\n *\n * So, in other words, if `key` attrs are not set on VNodes which may be\n * changing order within a `children` array or something along those lines then\n * we could obtain a false negative and then have to do needless re-rendering\n * (i.e. we'd say two VNodes aren't equal when in fact they should be).\n *\n * @param leftVNode the first VNode to check\n * @param rightVNode the second VNode to check\n * @returns whether they're equal or not\n */\nconst isSameVnode = (leftVNode, rightVNode) => {\n    // compare if two vnode to see if they're \"technically\" the same\n    // need to have the same element tag, and same key to be the same\n    if (leftVNode.$tag$ === rightVNode.$tag$) {\n        return true;\n    }\n    return false;\n};\n/**\n * Handle reconciling an outdated VNode with a new one which corresponds to\n * it. This function handles flushing updates to the DOM and reconciling the\n * children of the two nodes (if any).\n *\n * @param oldVNode an old VNode whose DOM element and children we want to update\n * @param newVNode a new VNode representing an updated version of the old one\n */\nconst patch = (oldVNode, newVNode) => {\n    const elm = (newVNode.$elm$ = oldVNode.$elm$);\n    const oldChildren = oldVNode.$children$;\n    const newChildren = newVNode.$children$;\n    const tag = newVNode.$tag$;\n    const text = newVNode.$text$;\n    if (text === null) {\n        {\n            // test if we're rendering an svg element, or still rendering nodes inside of one\n            // only add this to the when the compiler sees we're using an svg somewhere\n            isSvgMode = tag === 'svg' ? true : tag === 'foreignObject' ? false : isSvgMode;\n        }\n        {\n            {\n                // either this is the first render of an element OR it's an update\n                // AND we already know it's possible it could have changed\n                // this updates the element's css classes, attrs, props, listeners, etc.\n                updateElement(oldVNode, newVNode, isSvgMode);\n            }\n        }\n        if (oldChildren !== null && newChildren !== null) {\n            // looks like there's child vnodes for both the old and new vnodes\n            // so we need to call `updateChildren` to reconcile them\n            updateChildren(elm, oldChildren, newVNode, newChildren);\n        }\n        else if (newChildren !== null) {\n            // no old child vnodes, but there are new child vnodes to add\n            if (oldVNode.$text$ !== null) {\n                // the old vnode was text, so be sure to clear it out\n                elm.textContent = '';\n            }\n            // add the new vnode children\n            addVnodes(elm, null, newVNode, newChildren, 0, newChildren.length - 1);\n        }\n        else if (oldChildren !== null) {\n            // no new child vnodes, but there are old child vnodes to remove\n            removeVnodes(oldChildren, 0, oldChildren.length - 1);\n        }\n        if (isSvgMode && tag === 'svg') {\n            isSvgMode = false;\n        }\n    }\n    else if (oldVNode.$text$ !== text) {\n        // update the text content for the text only vnode\n        // and also only if the text is different than before\n        elm.data = text;\n    }\n};\n/**\n * The main entry point for Stencil's virtual DOM-based rendering engine\n *\n * Given a {@link d.HostRef} container and some virtual DOM nodes, this\n * function will handle creating a virtual DOM tree with a single root, patching\n * the current virtual DOM tree onto an old one (if any), dealing with slot\n * relocation, and reflecting attributes.\n *\n * @param hostRef data needed to root and render the virtual DOM tree, such as\n * the DOM node into which it should be rendered.\n * @param renderFnResults the virtual DOM nodes to be rendered\n */\nconst renderVdom = (hostRef, renderFnResults) => {\n    const hostElm = hostRef.$hostElement$;\n    const oldVNode = hostRef.$vnode$ || newVNode(null, null);\n    const rootVnode = isHost(renderFnResults) ? renderFnResults : h(null, null, renderFnResults);\n    hostTagName = hostElm.tagName;\n    rootVnode.$tag$ = null;\n    rootVnode.$flags$ |= 4 /* VNODE_FLAGS.isHost */;\n    hostRef.$vnode$ = rootVnode;\n    rootVnode.$elm$ = oldVNode.$elm$ = (hostElm.shadowRoot || hostElm );\n    {\n        scopeId = hostElm['s-sc'];\n    }\n    // synchronous patch\n    patch(oldVNode, rootVnode);\n};\nconst attachToAncestor = (hostRef, ancestorComponent) => {\n    if (ancestorComponent && !hostRef.$onRenderResolve$ && ancestorComponent['s-p']) {\n        ancestorComponent['s-p'].push(new Promise((r) => (hostRef.$onRenderResolve$ = r)));\n    }\n};\nconst scheduleUpdate = (hostRef, isInitialLoad) => {\n    {\n        hostRef.$flags$ |= 16 /* HOST_FLAGS.isQueuedForUpdate */;\n    }\n    if (hostRef.$flags$ & 4 /* HOST_FLAGS.isWaitingForChildren */) {\n        hostRef.$flags$ |= 512 /* HOST_FLAGS.needsRerender */;\n        return;\n    }\n    attachToAncestor(hostRef, hostRef.$ancestorComponent$);\n    // there is no ancestor component or the ancestor component\n    // has already fired off its lifecycle update then\n    // fire off the initial update\n    const dispatch = () => dispatchHooks(hostRef, isInitialLoad);\n    return writeTask(dispatch) ;\n};\nconst dispatchHooks = (hostRef, isInitialLoad) => {\n    const endSchedule = createTime('scheduleUpdate', hostRef.$cmpMeta$.$tagName$);\n    const instance = hostRef.$lazyInstance$ ;\n    let promise;\n    endSchedule();\n    return then(promise, () => updateComponent(hostRef, instance, isInitialLoad));\n};\nconst updateComponent = async (hostRef, instance, isInitialLoad) => {\n    // updateComponent\n    const elm = hostRef.$hostElement$;\n    const endUpdate = createTime('update', hostRef.$cmpMeta$.$tagName$);\n    const rc = elm['s-rc'];\n    if (isInitialLoad) {\n        // DOM WRITE!\n        attachStyles(hostRef);\n    }\n    const endRender = createTime('render', hostRef.$cmpMeta$.$tagName$);\n    {\n        callRender(hostRef, instance);\n    }\n    if (rc) {\n        // ok, so turns out there are some child host elements\n        // waiting on this parent element to load\n        // let's fire off all update callbacks waiting\n        rc.map((cb) => cb());\n        elm['s-rc'] = undefined;\n    }\n    endRender();\n    endUpdate();\n    {\n        const childrenPromises = elm['s-p'];\n        const postUpdate = () => postUpdateComponent(hostRef);\n        if (childrenPromises.length === 0) {\n            postUpdate();\n        }\n        else {\n            Promise.all(childrenPromises).then(postUpdate);\n            hostRef.$flags$ |= 4 /* HOST_FLAGS.isWaitingForChildren */;\n            childrenPromises.length = 0;\n        }\n    }\n};\nconst callRender = (hostRef, instance, elm) => {\n    try {\n        instance = instance.render() ;\n        {\n            hostRef.$flags$ &= ~16 /* HOST_FLAGS.isQueuedForUpdate */;\n        }\n        {\n            hostRef.$flags$ |= 2 /* HOST_FLAGS.hasRendered */;\n        }\n        {\n            {\n                // looks like we've got child nodes to render into this host element\n                // or we need to update the css class/attrs on the host element\n                // DOM WRITE!\n                {\n                    renderVdom(hostRef, instance);\n                }\n            }\n        }\n    }\n    catch (e) {\n        consoleError(e, hostRef.$hostElement$);\n    }\n    return null;\n};\nconst postUpdateComponent = (hostRef) => {\n    const tagName = hostRef.$cmpMeta$.$tagName$;\n    const elm = hostRef.$hostElement$;\n    const endPostUpdate = createTime('postUpdate', tagName);\n    const ancestorComponent = hostRef.$ancestorComponent$;\n    if (!(hostRef.$flags$ & 64 /* HOST_FLAGS.hasLoadedComponent */)) {\n        hostRef.$flags$ |= 64 /* HOST_FLAGS.hasLoadedComponent */;\n        {\n            // DOM WRITE!\n            addHydratedFlag(elm);\n        }\n        endPostUpdate();\n        {\n            hostRef.$onReadyResolve$(elm);\n            if (!ancestorComponent) {\n                appDidLoad();\n            }\n        }\n    }\n    else {\n        endPostUpdate();\n    }\n    // load events fire from bottom to top\n    // the deepest elements load first then bubbles up\n    {\n        if (hostRef.$onRenderResolve$) {\n            hostRef.$onRenderResolve$();\n            hostRef.$onRenderResolve$ = undefined;\n        }\n        if (hostRef.$flags$ & 512 /* HOST_FLAGS.needsRerender */) {\n            nextTick(() => scheduleUpdate(hostRef, false));\n        }\n        hostRef.$flags$ &= ~(4 /* HOST_FLAGS.isWaitingForChildren */ | 512 /* HOST_FLAGS.needsRerender */);\n    }\n    // ( •_•)\n    // ( •_•)>⌐■-■\n    // (⌐■_■)\n};\nconst appDidLoad = (who) => {\n    // on appload\n    // we have finish the first big initial render\n    {\n        addHydratedFlag(doc.documentElement);\n    }\n    nextTick(() => emitEvent(win, 'appload', { detail: { namespace: NAMESPACE } }));\n};\nconst then = (promise, thenFn) => {\n    return promise && promise.then ? promise.then(thenFn) : thenFn();\n};\nconst addHydratedFlag = (elm) => elm.classList.add('hydrated')\n    ;\nconst getValue = (ref, propName) => getHostRef(ref).$instanceValues$.get(propName);\nconst setValue = (ref, propName, newVal, cmpMeta) => {\n    // check our new property value against our internal value\n    const hostRef = getHostRef(ref);\n    const oldVal = hostRef.$instanceValues$.get(propName);\n    const flags = hostRef.$flags$;\n    const instance = hostRef.$lazyInstance$ ;\n    newVal = parsePropertyValue(newVal, cmpMeta.$members$[propName][0]);\n    // explicitly check for NaN on both sides, as `NaN === NaN` is always false\n    const areBothNaN = Number.isNaN(oldVal) && Number.isNaN(newVal);\n    const didValueChange = newVal !== oldVal && !areBothNaN;\n    if ((!(flags & 8 /* HOST_FLAGS.isConstructingInstance */) || oldVal === undefined) && didValueChange) {\n        // gadzooks! the property's value has changed!!\n        // set our new value!\n        hostRef.$instanceValues$.set(propName, newVal);\n        if (instance) {\n            if ((flags & (2 /* HOST_FLAGS.hasRendered */ | 16 /* HOST_FLAGS.isQueuedForUpdate */)) === 2 /* HOST_FLAGS.hasRendered */) {\n                // looks like this value actually changed, so we've got work to do!\n                // but only if we've already rendered, otherwise just chill out\n                // queue that we need to do an update, but don't worry about queuing\n                // up millions cuz this function ensures it only runs once\n                scheduleUpdate(hostRef, false);\n            }\n        }\n    }\n};\n/**\n * Attach a series of runtime constructs to a compiled Stencil component\n * constructor, including getters and setters for the `@Prop` and `@State`\n * decorators, callbacks for when attributes change, and so on.\n *\n * @param Cstr the constructor for a component that we need to process\n * @param cmpMeta metadata collected previously about the component\n * @param flags a number used to store a series of bit flags\n * @returns a reference to the same constructor passed in (but now mutated)\n */\nconst proxyComponent = (Cstr, cmpMeta, flags) => {\n    if (cmpMeta.$members$) {\n        // It's better to have a const than two Object.entries()\n        const members = Object.entries(cmpMeta.$members$);\n        const prototype = Cstr.prototype;\n        members.map(([memberName, [memberFlags]]) => {\n            if ((memberFlags & 31 /* MEMBER_FLAGS.Prop */ ||\n                    ((flags & 2 /* PROXY_FLAGS.proxyState */) && memberFlags & 32 /* MEMBER_FLAGS.State */))) {\n                // proxyComponent - prop\n                Object.defineProperty(prototype, memberName, {\n                    get() {\n                        // proxyComponent, get value\n                        return getValue(this, memberName);\n                    },\n                    set(newValue) {\n                        // proxyComponent, set value\n                        setValue(this, memberName, newValue, cmpMeta);\n                    },\n                    configurable: true,\n                    enumerable: true,\n                });\n            }\n        });\n        if ((flags & 1 /* PROXY_FLAGS.isElementConstructor */)) {\n            const attrNameToPropName = new Map();\n            prototype.attributeChangedCallback = function (attrName, _oldValue, newValue) {\n                plt.jmp(() => {\n                    const propName = attrNameToPropName.get(attrName);\n                    //  In a web component lifecycle the attributeChangedCallback runs prior to connectedCallback\n                    //  in the case where an attribute was set inline.\n                    //  ```html\n                    //    <my-component some-attribute=\"some-value\"></my-component>\n                    //  ```\n                    //\n                    //  There is an edge case where a developer sets the attribute inline on a custom element and then\n                    //  programmatically changes it before it has been upgraded as shown below:\n                    //\n                    //  ```html\n                    //    <!-- this component has _not_ been upgraded yet -->\n                    //    <my-component id=\"test\" some-attribute=\"some-value\"></my-component>\n                    //    <script>\n                    //      // grab non-upgraded component\n                    //      el = document.querySelector(\"#test\");\n                    //      el.someAttribute = \"another-value\";\n                    //      // upgrade component\n                    //      customElements.define('my-component', MyComponent);\n                    //    </script>\n                    //  ```\n                    //  In this case if we do not unshadow here and use the value of the shadowing property, attributeChangedCallback\n                    //  will be called with `newValue = \"some-value\"` and will set the shadowed property (this.someAttribute = \"another-value\")\n                    //  to the value that was set inline i.e. \"some-value\" from above example. When\n                    //  the connectedCallback attempts to unshadow it will use \"some-value\" as the initial value rather than \"another-value\"\n                    //\n                    //  The case where the attribute was NOT set inline but was not set programmatically shall be handled/unshadowed\n                    //  by connectedCallback as this attributeChangedCallback will not fire.\n                    //\n                    //  https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n                    //\n                    //  TODO(STENCIL-16) we should think about whether or not we actually want to be reflecting the attributes to\n                    //  properties here given that this goes against best practices outlined here\n                    //  https://developers.google.com/web/fundamentals/web-components/best-practices#avoid-reentrancy\n                    if (this.hasOwnProperty(propName)) {\n                        newValue = this[propName];\n                        delete this[propName];\n                    }\n                    else if (prototype.hasOwnProperty(propName) &&\n                        typeof this[propName] === 'number' &&\n                        this[propName] == newValue) {\n                        // if the propName exists on the prototype of `Cstr`, this update may be a result of Stencil using native\n                        // APIs to reflect props as attributes. Calls to `setAttribute(someElement, propName)` will result in\n                        // `propName` to be converted to a `DOMString`, which may not be what we want for other primitive props.\n                        return;\n                    }\n                    this[propName] = newValue === null && typeof this[propName] === 'boolean' ? false : newValue;\n                });\n            };\n            // create an array of attributes to observe\n            // and also create a map of html attribute name to js property name\n            Cstr.observedAttributes = members\n                .filter(([_, m]) => m[0] & 15 /* MEMBER_FLAGS.HasAttribute */) // filter to only keep props that should match attributes\n                .map(([propName, m]) => {\n                const attrName = m[1] || propName;\n                attrNameToPropName.set(attrName, propName);\n                return attrName;\n            });\n        }\n    }\n    return Cstr;\n};\nconst initializeComponent = async (elm, hostRef, cmpMeta, hmrVersionId, Cstr) => {\n    // initializeComponent\n    if ((hostRef.$flags$ & 32 /* HOST_FLAGS.hasInitializedComponent */) === 0) {\n        {\n            // we haven't initialized this element yet\n            hostRef.$flags$ |= 32 /* HOST_FLAGS.hasInitializedComponent */;\n            // lazy loaded components\n            // request the component's implementation to be\n            // wired up with the host element\n            Cstr = loadModule(cmpMeta);\n            if (Cstr.then) {\n                // Await creates a micro-task avoid if possible\n                const endLoad = uniqueTime();\n                Cstr = await Cstr;\n                endLoad();\n            }\n            if (!Cstr.isProxied) {\n                proxyComponent(Cstr, cmpMeta, 2 /* PROXY_FLAGS.proxyState */);\n                Cstr.isProxied = true;\n            }\n            const endNewInstance = createTime('createInstance', cmpMeta.$tagName$);\n            // ok, time to construct the instance\n            // but let's keep track of when we start and stop\n            // so that the getters/setters don't incorrectly step on data\n            {\n                hostRef.$flags$ |= 8 /* HOST_FLAGS.isConstructingInstance */;\n            }\n            // construct the lazy-loaded component implementation\n            // passing the hostRef is very important during\n            // construction in order to directly wire together the\n            // host element and the lazy-loaded instance\n            try {\n                new Cstr(hostRef);\n            }\n            catch (e) {\n                consoleError(e);\n            }\n            {\n                hostRef.$flags$ &= ~8 /* HOST_FLAGS.isConstructingInstance */;\n            }\n            endNewInstance();\n        }\n        if (Cstr.style) {\n            // this component has styles but we haven't registered them yet\n            let style = Cstr.style;\n            const scopeId = getScopeId(cmpMeta);\n            if (!styles.has(scopeId)) {\n                const endRegisterStyles = createTime('registerStyles', cmpMeta.$tagName$);\n                registerStyle(scopeId, style, !!(cmpMeta.$flags$ & 1 /* CMP_FLAGS.shadowDomEncapsulation */));\n                endRegisterStyles();\n            }\n        }\n    }\n    // we've successfully created a lazy instance\n    const ancestorComponent = hostRef.$ancestorComponent$;\n    const schedule = () => scheduleUpdate(hostRef, true);\n    if (ancestorComponent && ancestorComponent['s-rc']) {\n        // this is the initial load and this component it has an ancestor component\n        // but the ancestor component has NOT fired its will update lifecycle yet\n        // so let's just cool our jets and wait for the ancestor to continue first\n        // this will get fired off when the ancestor component\n        // finally gets around to rendering its lazy self\n        // fire off the initial update\n        ancestorComponent['s-rc'].push(schedule);\n    }\n    else {\n        schedule();\n    }\n};\nconst connectedCallback = (elm) => {\n    if ((plt.$flags$ & 1 /* PLATFORM_FLAGS.isTmpDisconnected */) === 0) {\n        const hostRef = getHostRef(elm);\n        const cmpMeta = hostRef.$cmpMeta$;\n        const endConnected = createTime('connectedCallback', cmpMeta.$tagName$);\n        if (!(hostRef.$flags$ & 1 /* HOST_FLAGS.hasConnected */)) {\n            // first time this component has connected\n            hostRef.$flags$ |= 1 /* HOST_FLAGS.hasConnected */;\n            {\n                // find the first ancestor component (if there is one) and register\n                // this component as one of the actively loading child components for its ancestor\n                let ancestorComponent = elm;\n                while ((ancestorComponent = ancestorComponent.parentNode || ancestorComponent.host)) {\n                    // climb up the ancestors looking for the first\n                    // component that hasn't finished its lifecycle update yet\n                    if (ancestorComponent['s-p']) {\n                        // we found this components first ancestor component\n                        // keep a reference to this component's ancestor component\n                        attachToAncestor(hostRef, (hostRef.$ancestorComponent$ = ancestorComponent));\n                        break;\n                    }\n                }\n            }\n            // Lazy properties\n            // https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n            if (cmpMeta.$members$) {\n                Object.entries(cmpMeta.$members$).map(([memberName, [memberFlags]]) => {\n                    if (memberFlags & 31 /* MEMBER_FLAGS.Prop */ && elm.hasOwnProperty(memberName)) {\n                        const value = elm[memberName];\n                        delete elm[memberName];\n                        elm[memberName] = value;\n                    }\n                });\n            }\n            {\n                initializeComponent(elm, hostRef, cmpMeta);\n            }\n        }\n        endConnected();\n    }\n};\nconst disconnectedCallback = (elm) => {\n    if ((plt.$flags$ & 1 /* PLATFORM_FLAGS.isTmpDisconnected */) === 0) {\n        getHostRef(elm);\n    }\n};\nconst bootstrapLazy = (lazyBundles, options = {}) => {\n    var _a;\n    const endBootstrap = createTime();\n    const cmpTags = [];\n    const exclude = options.exclude || [];\n    const customElements = win.customElements;\n    const head = doc.head;\n    const metaCharset = /*@__PURE__*/ head.querySelector('meta[charset]');\n    const visibilityStyle = /*@__PURE__*/ doc.createElement('style');\n    const deferredConnectedCallbacks = [];\n    let appLoadFallback;\n    let isBootstrapping = true;\n    Object.assign(plt, options);\n    plt.$resourcesUrl$ = new URL(options.resourcesUrl || './', doc.baseURI).href;\n    lazyBundles.map((lazyBundle) => {\n        lazyBundle[1].map((compactMeta) => {\n            const cmpMeta = {\n                $flags$: compactMeta[0],\n                $tagName$: compactMeta[1],\n                $members$: compactMeta[2],\n                $listeners$: compactMeta[3],\n            };\n            {\n                cmpMeta.$members$ = compactMeta[2];\n            }\n            const tagName = cmpMeta.$tagName$;\n            const HostElement = class extends HTMLElement {\n                // StencilLazyHost\n                constructor(self) {\n                    // @ts-ignore\n                    super(self);\n                    self = this;\n                    registerHost(self, cmpMeta);\n                    if (cmpMeta.$flags$ & 1 /* CMP_FLAGS.shadowDomEncapsulation */) {\n                        // this component is using shadow dom\n                        // and this browser supports shadow dom\n                        // add the read-only property \"shadowRoot\" to the host element\n                        // adding the shadow root build conditionals to minimize runtime\n                        {\n                            {\n                                self.attachShadow({ mode: 'open' });\n                            }\n                        }\n                    }\n                }\n                connectedCallback() {\n                    if (appLoadFallback) {\n                        clearTimeout(appLoadFallback);\n                        appLoadFallback = null;\n                    }\n                    if (isBootstrapping) {\n                        // connectedCallback will be processed once all components have been registered\n                        deferredConnectedCallbacks.push(this);\n                    }\n                    else {\n                        plt.jmp(() => connectedCallback(this));\n                    }\n                }\n                disconnectedCallback() {\n                    plt.jmp(() => disconnectedCallback(this));\n                }\n                componentOnReady() {\n                    return getHostRef(this).$onReadyPromise$;\n                }\n            };\n            cmpMeta.$lazyBundleId$ = lazyBundle[0];\n            if (!exclude.includes(tagName) && !customElements.get(tagName)) {\n                cmpTags.push(tagName);\n                customElements.define(tagName, proxyComponent(HostElement, cmpMeta, 1 /* PROXY_FLAGS.isElementConstructor */));\n            }\n        });\n    });\n    {\n        visibilityStyle.innerHTML = cmpTags + HYDRATED_CSS;\n        visibilityStyle.setAttribute('data-styles', '');\n        // Apply CSP nonce to the style tag if it exists\n        const nonce = (_a = plt.$nonce$) !== null && _a !== void 0 ? _a : queryNonceMetaTagContent(doc);\n        if (nonce != null) {\n            visibilityStyle.setAttribute('nonce', nonce);\n        }\n        head.insertBefore(visibilityStyle, metaCharset ? metaCharset.nextSibling : head.firstChild);\n    }\n    // Process deferred connectedCallbacks now all components have been registered\n    isBootstrapping = false;\n    if (deferredConnectedCallbacks.length) {\n        deferredConnectedCallbacks.map((host) => host.connectedCallback());\n    }\n    else {\n        {\n            plt.jmp(() => (appLoadFallback = setTimeout(appDidLoad, 30)));\n        }\n    }\n    // Fallback appLoad event\n    endBootstrap();\n};\n/**\n * Assigns the given value to the nonce property on the runtime platform object.\n * During runtime, this value is used to set the nonce attribute on all dynamically created script and style tags.\n * @param nonce The value to be assigned to the platform nonce property.\n * @returns void\n */\nconst setNonce = (nonce) => (plt.$nonce$ = nonce);\nconst hostRefs = /*@__PURE__*/ new WeakMap();\nconst getHostRef = (ref) => hostRefs.get(ref);\nconst registerInstance = (lazyInstance, hostRef) => hostRefs.set((hostRef.$lazyInstance$ = lazyInstance), hostRef);\nconst registerHost = (elm, cmpMeta) => {\n    const hostRef = {\n        $flags$: 0,\n        $hostElement$: elm,\n        $cmpMeta$: cmpMeta,\n        $instanceValues$: new Map(),\n    };\n    {\n        hostRef.$onReadyPromise$ = new Promise((r) => (hostRef.$onReadyResolve$ = r));\n        elm['s-p'] = [];\n        elm['s-rc'] = [];\n    }\n    return hostRefs.set(elm, hostRef);\n};\nconst isMemberInElement = (elm, memberName) => memberName in elm;\nconst consoleError = (e, el) => (0, console.error)(e, el);\nconst cmpModules = /*@__PURE__*/ new Map();\nconst loadModule = (cmpMeta, hostRef, hmrVersionId) => {\n    // loadModuleImport\n    const exportName = cmpMeta.$tagName$.replace(/-/g, '_');\n    const bundleId = cmpMeta.$lazyBundleId$;\n    const module = cmpModules.get(bundleId) ;\n    if (module) {\n        return module[exportName];\n    }\n    \n    if (!hmrVersionId || !BUILD.hotModuleReplacement) {\n      const processMod = importedModule => {\n        cmpModules.set(bundleId, importedModule);\n        return importedModule[exportName];\n      }\n      switch(bundleId) {\n        \n        case 'connect-modal':\n          return import(\n            /* webpackMode: \"lazy\" */\n            './connect-modal.entry.js').then(processMod, consoleError);\n      }\n    }\n    return import(\n    /* @vite-ignore */\n    /* webpackInclude: /\\.entry\\.js$/ */\n    /* webpackExclude: /\\.system\\.entry\\.js$/ */\n    /* webpackMode: \"lazy\" */\n    `./${bundleId}.entry.js${''}`).then((importedModule) => {\n        {\n            cmpModules.set(bundleId, importedModule);\n        }\n        return importedModule[exportName];\n    }, consoleError);\n};\nconst styles = /*@__PURE__*/ new Map();\nconst win = typeof window !== 'undefined' ? window : {};\nconst doc = win.document || { head: {} };\nconst plt = {\n    $flags$: 0,\n    $resourcesUrl$: '',\n    jmp: (h) => h(),\n    raf: (h) => requestAnimationFrame(h),\n    ael: (el, eventName, listener, opts) => el.addEventListener(eventName, listener, opts),\n    rel: (el, eventName, listener, opts) => el.removeEventListener(eventName, listener, opts),\n    ce: (eventName, opts) => new CustomEvent(eventName, opts),\n};\nconst promiseResolve = (v) => Promise.resolve(v);\nconst supportsConstructableStylesheets = /*@__PURE__*/ (() => {\n        try {\n            new CSSStyleSheet();\n            return typeof new CSSStyleSheet().replaceSync === 'function';\n        }\n        catch (e) { }\n        return false;\n    })()\n    ;\nconst queueDomReads = [];\nconst queueDomWrites = [];\nconst queueTask = (queue, write) => (cb) => {\n    queue.push(cb);\n    if (!queuePending) {\n        queuePending = true;\n        if (write && plt.$flags$ & 4 /* PLATFORM_FLAGS.queueSync */) {\n            nextTick(flush);\n        }\n        else {\n            plt.raf(flush);\n        }\n    }\n};\nconst consume = (queue) => {\n    for (let i = 0; i < queue.length; i++) {\n        try {\n            queue[i](performance.now());\n        }\n        catch (e) {\n            consoleError(e);\n        }\n    }\n    queue.length = 0;\n};\nconst flush = () => {\n    // always force a bunch of medium callbacks to run, but still have\n    // a throttle on how many can run in a certain time\n    // DOM READS!!!\n    consume(queueDomReads);\n    // DOM WRITES!!!\n    {\n        consume(queueDomWrites);\n        if ((queuePending = queueDomReads.length > 0)) {\n            // still more to do yet, but we've run out of time\n            // let's let this thing cool off and try again in the next tick\n            plt.raf(flush);\n        }\n    }\n};\nconst nextTick = /*@__PURE__*/ (cb) => promiseResolve().then(cb);\nconst writeTask = /*@__PURE__*/ queueTask(queueDomWrites, true);\n\nexport { bootstrapLazy as b, getElement as g, h, promiseResolve as p, registerInstance as r, setNonce as s };\n","import { p as promiseResolve, b as bootstrapLazy } from './index-f9076013.js';\nexport { s as setNonce } from './index-f9076013.js';\n\n/*\n Stencil Client Patch Esm v2.22.3 | MIT Licensed | https://stenciljs.com\n */\nconst patchEsm = () => {\n    return promiseResolve();\n};\n\nconst defineCustomElements = (win, options) => {\n  if (typeof window === 'undefined') return Promise.resolve();\n  return patchEsm().then(() => {\n  return bootstrapLazy([[\"connect-modal\",[[1,\"connect-modal\",{\"defaultProviders\":[16],\"installedProviders\":[16],\"persistSelection\":[4,\"persist-selection\"],\"callback\":[16],\"cancelCallback\":[16]}]]]], options);\n  });\n};\n\nexport { defineCustomElements };\n","\n(function(){if(\"undefined\"!==typeof window&&void 0!==window.Reflect&&void 0!==window.customElements){var a=HTMLElement;window.HTMLElement=function(){return Reflect.construct(a,[],this.constructor)};HTMLElement.prototype=a.prototype;HTMLElement.prototype.constructor=HTMLElement;Object.setPrototypeOf(HTMLElement,a)}})();\nexport * from '../dist/esm/polyfills/index.js';\nexport * from '../dist/esm/loader.js';\n","import {AppConfig,UserSession}from'@stacks/auth';export*from'@stacks/auth';import {decodeToken,SECP256K1Client,createUnsecuredToken,TokenSigner}from'jsontokens';import {getProviderFromId,getSelectedProviderId,clearSelectedProviderId,getInstalledProviders}from'@stacks/connect-ui';export{clearSelectedProviderId,getSelectedProviderId,setSelectedProviderId}from'@stacks/connect-ui';import {StacksNetwork,StacksMainnet,StacksTestnet}from'@stacks/network-v6';import {TransactionVersion,ChainId}from'@stacks/network';import {bytesToHex,hexToBytes}from'@stacks/common';import {serializeCV,postConditionToHex,deserializeTransaction}from'@stacks/transactions';import {serializeCV as serializeCV$1,serializePostCondition}from'@stacks/transactions-v6';import {defineCustomElements}from'@stacks/connect-ui/loader';var rt=Object.defineProperty,st=Object.defineProperties;var at=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var O=(e,t,n)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a=(e,t)=>{for(var n in t||(t={}))k.call(t,n)&&O(e,n,t[n]);if(x)for(var n of x(t))E.call(t,n)&&O(e,n,t[n]);return e},u=(e,t)=>st(e,at(t));var g=(e,t)=>{var n={};for(var o in e)k.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&x)for(var o of x(e))t.indexOf(o)<0&&E.call(e,o)&&(n[o]=e[o]);return n};function l(){return getProviderFromId(getSelectedProviderId())||window.StacksProvider||window.BlockstackProvider}function Ie(){return !!l()}function y(e){return e?typeof e==\"string\"?StacksNetwork.fromName(e):\"version\"in e?e:\"url\"in e?new StacksMainnet({url:e.url}):e.transactionVersion===TransactionVersion.Mainnet?new StacksMainnet({url:e.client.baseUrl}):new StacksTestnet({url:e.client.baseUrl}):new StacksTestnet}var Te=\"https://app.blockstack.org\";typeof window!=\"undefined\"&&(window.__CONNECT_VERSION__=\"__VERSION__\");var Mt=()=>{let e=navigator.userAgent;return /android/i.test(e)||/iPad|iPhone|iPod/.test(e)?!0:/windows phone/i.test(e)},xe=()=>!Mt(),b=e=>{if(!e){let t=new AppConfig([\"store_write\"],document.location.href);e=new UserSession({appConfig:t});}return e},U=async(e,t=l())=>{if(!t)throw new Error(\"[Connect] No installed Stacks wallet found\");let{redirectTo:n=\"/\",manifestPath:o,onFinish:s,onCancel:r,sendToSignIn:i=!1,userSession:d,appDetails:p}=e,c=b(d);c.isUserSignedIn()&&c.signUserOut();let C=c.generateAndStoreTransitKey(),T=c.makeAuthRequest(C,`${document.location.origin}${n}`,`${document.location.origin}${o}`,c.appConfig.scopes,void 0,void 0,{sendToSignIn:i,appDetails:p,connectVersion:\"__VERSION__\"});try{let j=await t.authenticationRequest(T);await c.handlePendingSignIn(j);let A=decodeToken(j),ot=A==null?void 0:A.payload;s==null||s({authResponse:j,authResponsePayload:ot,userSession:c});}catch(j){console.error(\"[Connect] Error during auth request\",j),r==null||r();}},fe=async e=>(e=b(e),e.isUserSignedIn()?e.loadUserData():e.isSignInPending()?e.handlePendingSignIn():null);var St=(o=>(o.ContractCall=\"contract_call\",o.ContractDeploy=\"smart_contract\",o.STXTransfer=\"token_transfer\",o))(St||{}),yt=(r=>(r.BUFFER=\"buffer\",r.UINT=\"uint\",r.INT=\"int\",r.PRINCIPAL=\"principal\",r.BOOL=\"bool\",r))(yt||{});var D=e=>{let t=e;if(!t){let n=new AppConfig([\"store_write\"],document.location.href);t=new UserSession({appConfig:n});}return t};function M(e){try{return D(e).loadUserData().appPrivateKey}catch(t){return !1}}var S=e=>{let n=D(e).loadUserData().appPrivateKey,o=SECP256K1Client.derivePublicKey(n);return {privateKey:n,publicKey:o}};function wt(e){var p;let{stxAddress:t,userSession:n,network:o}=e;if(t)return t;if(!n||!o)return;let s=(p=n==null?void 0:n.loadUserData().profile)==null?void 0:p.stxAddress,r={[ChainId.Mainnet]:\"mainnet\",[ChainId.Testnet]:\"testnet\"},i=y(o);return s==null?void 0:s[r[i.chainId]]}function Nt(e){let t=y(e.network),n=D(e.userSession),o=u(a({},e),{network:t,userSession:n});return a({stxAddress:wt(o)},o)}async function f(e,t){let{postConditions:n}=e;return n&&n.length>0&&typeof n[0]!=\"string\"&&(typeof n[0].type==\"string\"?n=n.map(postConditionToHex):n=n.map(s=>bytesToHex(serializePostCondition(s)))),new TokenSigner(\"ES256k\",t).signAsync(u(a({},e),{postConditions:n}))}function w(e){let{postConditions:t}=e;return t&&t.length>0&&typeof t[0]!=\"string\"&&(typeof t[0].type==\"string\"?t=t.map(postConditionToHex):t=t.map(n=>bytesToHex(serializePostCondition(n)))),createUnsecuredToken(u(a({},e),{postConditions:t}))}var Pt=async({token:e,options:t},n)=>{var o,s,r;try{let i=await n.transactionRequest(e),{txRaw:d}=i,p=hexToBytes(d.replace(/^0x/,\"\")),c=deserializeTransaction(p);if(\"sponsored\"in t&&t.sponsored){(o=t.onFinish)==null||o.call(t,u(a({},i),{stacksTransaction:c}));return}(s=t.onFinish)==null||s.call(t,u(a({},i),{stacksTransaction:c}));}catch(i){console.error(\"[Connect] Error during transaction request\",i),(r=t.onCancel)==null||r.call(t);}},mt=async e=>{let d=e,{functionArgs:t,appDetails:n,userSession:o}=d,s=g(d,[\"functionArgs\",\"appDetails\",\"userSession\"]),r=t.map(p=>typeof p==\"string\"?p:typeof p.type==\"string\"?serializeCV(p):bytesToHex(serializeCV$1(p)));if(M(o)){let{privateKey:p,publicKey:c}=S(o),C=u(a({},s),{functionArgs:r,txType:\"contract_call\",publicKey:c});return n&&(C.appDetails=n),f(C,p)}let i=u(a({},s),{functionArgs:r,txType:\"contract_call\"});return n&&(i.appDetails=n),w(i)},Ot=async e=>{let r=e,{appDetails:t,userSession:n}=r,o=g(r,[\"appDetails\",\"userSession\"]);if(M(n)){let{privateKey:i,publicKey:d}=S(n),p=u(a({},o),{publicKey:d,txType:\"smart_contract\"});return t&&(p.appDetails=t),f(p,i)}let s=u(a({},o),{txType:\"smart_contract\"});return t&&(s.appDetails=t),w(s)},kt=async e=>{let i=e,{amount:t,appDetails:n,userSession:o}=i,s=g(i,[\"amount\",\"appDetails\",\"userSession\"]);if(M(o)){let{privateKey:d,publicKey:p}=S(o),c=u(a({},s),{amount:t.toString(10),publicKey:p,txType:\"token_transfer\"});return n&&(c.appDetails=n),f(c,d)}let r=u(a({},s),{amount:t.toString(10),txType:\"token_transfer\"});return n&&(r.appDetails=n),w(r)},Et=async e=>{let i=e,{txHex:t,appDetails:n,userSession:o}=i,s=g(i,[\"txHex\",\"appDetails\",\"userSession\"]);if(M(o)){let{privateKey:d,publicKey:p}=S(o),c=u(a({},s),{txHex:t,publicKey:p});return n&&(c.appDetails=n),f(c,d)}let r=u(a({},s),{txHex:t});return n&&(r.appDetails=n),w(r)};async function N(e,t,n){let o=await t(u(a(a({},Nt(e)),e),{network:y(e.network)}));return Pt({token:o,options:e},n)}function Y(e,t=l()){if(!t)throw new Error(\"[Connect] No installed Stacks wallet found\");return N(e,mt,t)}function B(e,t=l()){if(!t)throw new Error(\"[Connect] No installed Stacks wallet found\");return N(e,Ot,t)}function G(e,t=l()){if(!t)throw new Error(\"[Connect] No installed Stacks wallet found\");return N(e,kt,t)}function q(e,t=l()){if(!t)throw new Error(\"[Connect] No installed Stacks wallet found\");return N(e,Et,t)}async function bt(e,t){return new TokenSigner(\"ES256k\",t).signAsync(a({},e))}function Ut(e){let t=y(e.network),n=D(e.userSession),o=u(a({},e),{network:t,userSession:n});return a({},o)}async function vt({token:e,options:t},n){var o,s;if(!n)throw new Error(\"[Connect] No installed Stacks wallet found\");try{let r=await n.psbtRequest(e);(o=t.onFinish)==null||o.call(t,r);}catch(r){console.error(\"[Connect] Error during psbt request\",r),(s=t.onCancel)==null||s.call(t);}}var Rt=async e=>{let d=e,{allowedSighash:t,hex:n,signAtIndex:o,userSession:s}=d,r=g(d,[\"allowedSighash\",\"hex\",\"signAtIndex\",\"userSession\"]);if(M(s)){let{privateKey:p,publicKey:c}=S(s),C=u(a({},r),{allowedSighash:t,hex:n,signAtIndex:o,publicKey:c});return bt(C,p)}let i=a({},r);return createUnsecuredToken(i)};async function Qt(e,t,n){let o=await t(a(a({},Ut(e)),e));return vt({token:o,options:e},n)}function F(e,t=l()){return Qt(e,Rt,t)}function Gt(e){var d;let{userSession:t,network:n}=e;if(!t||!n)return;let o=(d=t==null?void 0:t.loadUserData().profile)==null?void 0:d.stxAddress,s={[ChainId.Mainnet]:\"mainnet\",[ChainId.Testnet]:\"testnet\"},r=y(n);return o==null?void 0:o[s[r.chainId]]}async function qt(e,t){return new TokenSigner(\"ES256k\",t).signAsync(a({},e))}function m(e){let t=y(e.network),n=D(e.userSession),o=u(a({},e),{network:t,userSession:n});return a({stxAddress:Gt(o)},o)}async function Ft({token:e,options:t},n){var o,s;try{let r=await n.signatureRequest(e);(o=t.onFinish)==null||o.call(t,r);}catch(r){console.error(\"[Connect] Error during signature request\",r),(s=t.onCancel)==null||s.call(t);}}var Zt=async e=>{let s=e,{userSession:t}=s,n=g(s,[\"userSession\"]);if(M(t)){let{privateKey:r,publicKey:i}=S(t),d=u(a({},n),{publicKey:i});return qt(d,r)}let o=a({},n);return createUnsecuredToken(o)};async function Wt(e,t,n){let o=await t(a(a({},m(e)),e));return Ft({token:o,options:e},n)}function W(e,t=l()){if(!t)throw new Error(\"[Connect] No installed Stacks wallet found\");return Wt(e,Zt,t)}async function Kt(e,t,n){let o=await t(a(a({},m(e)),e));return Ht({token:o,options:e},n)}function _(e){let{message:t,domain:n}=e;return typeof t.type==\"string\"&&typeof n.type==\"string\"?u(a({},e),{message:serializeCV(t),domain:serializeCV(n)}):u(a({},e),{message:bytesToHex(serializeCV$1(t)),domain:bytesToHex(serializeCV$1(n))})}async function _t(e,t){return new TokenSigner(\"ES256k\",t).signAsync(_(e))}async function Jt(e){let o=e,{userSession:t}=o,n=g(o,[\"userSession\"]);if(M(t)){let{privateKey:s,publicKey:r}=S(t),i=u(a({},n),{publicKey:r});return _t(i,s)}return createUnsecuredToken(_(e))}async function Ht({token:e,options:t},n){var o,s;try{let r=await n.structuredDataSignatureRequest(e);(o=t.onFinish)==null||o.call(t,r);}catch(r){console.error(\"[Connect] Error during signature request\",r),(s=t.onCancel)==null||s.call(t);}}function J(e,t=l()){if(!t)throw new Error(\"[Connect] No installed Stacks wallet found\");return Kt(e,Jt,t)}async function ee(e,t){return new TokenSigner(\"ES256k\",t).signAsync(a({},e))}function ne(e){let t=y(e.network),n=D(e.userSession),o=u(a({},e),{network:t,userSession:n});return a({},o)}async function oe({token:e,options:t},n){var o,s;try{let r=await n.profileUpdateRequest(e);(o=t.onFinish)==null||o.call(t,r);}catch(r){console.error(\"[Connect] Error during signature request\",r),(s=t.onCancel)==null||s.call(t);}}var re=async e=>{let r=e,{userSession:t,profile:n}=r,o=g(r,[\"userSession\",\"profile\"]);if(M(t)){let{privateKey:i,publicKey:d}=S(t),p=u(a({},o),{profile:n,publicKey:d});return ee(p,i)}let s=a({},o);return createUnsecuredToken(s)};async function se(e,t,n){let o=await t(a(a({},ne(e)),e));return oe({token:o,options:e},n)}function H(e,t=l()){if(!t)throw new Error(\"[Connect] No installed Stacks wallet found\");return se(e,re,t)}var ae=(r=>(r[r.DEFAULT=0]=\"DEFAULT\",r[r.ALL=1]=\"ALL\",r[r.NONE=2]=\"NONE\",r[r.SINGLE=3]=\"SINGLE\",r[r.ANYONECANPAY=128]=\"ANYONECANPAY\",r))(ae||{});var tt=\"asigna-stx\",$=(e,t)=>new Promise(n=>{function o(s){s.data.source===tt&&s.data[t]&&(n(s.data[t]),window.removeEventListener(\"message\",o));}window.addEventListener(\"message\",o),window.top.postMessage(ce(e,t),\"*\");}),ie={authenticationRequest:async e=>$(e,\"authenticationRequest\"),transactionRequest:async e=>$(e,\"transactionRequest\")},ce=(e,t)=>({source:tt,[t]:e}),et=()=>{if(typeof window==\"undefined\")return;window.top!==window.self&&(window.AsignaProvider=ie);};et();var nt=[{id:\"LeatherProvider\",name:\"Leather\",icon:\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iMjYuODM4NyIgZmlsbD0iIzEyMTAwRiIvPgo8cGF0aCBkPSJNNzQuOTE3MSA1Mi43MTE0QzgyLjQ3NjYgNTEuNTQwOCA5My40MDg3IDQzLjU4MDQgOTMuNDA4NyAzNy4zNzYxQzkzLjQwODcgMzUuNTAzMSA5MS44OTY4IDM0LjIxNTQgODkuNjg3MSAzNC4yMTU0Qzg1LjUwMDQgMzQuMjE1NCA3OC40MDYxIDQwLjUzNjggNzQuOTE3MSA1Mi43MTE0Wk0zOS45MTEgODMuNDk5MUMzMC4wMjU2IDgzLjQ5OTEgMjkuMjExNSA5My4zMzI0IDM5LjA5NjkgOTMuMzMyNEM0My41MTYzIDkzLjMzMjQgNDguODY2MSA5MS41NzY0IDUxLjY1NzMgODguNDE1N0M0Ny41ODY4IDg0LjkwMzggNDQuMjE0MSA4My40OTkxIDM5LjkxMSA4My40OTkxWk0xMDIuODI5IDc5LjI4NDhDMTAzLjQxIDk1Ljc5MDcgOTUuMDM2OSAxMDUuMDM5IDgwLjg0ODQgMTA1LjAzOUM3Mi40NzQ4IDEwNS4wMzkgNjguMjg4MSAxMDEuODc4IDU5LjMzMyA5Ni4wMjQ5QzU0LjY4MSAxMDEuMTc2IDQ1Ljg0MjMgMTA1LjAzOSAzOC41MTU0IDEwNS4wMzlDMTMuMjc4NSAxMDUuMDM5IDE0LjMyNTIgNzIuODQ2MyA0MC4wMjczIDcyLjg0NjNDNDUuMzc3MSA3Mi44NDYzIDQ5LjkxMjggNzQuMjUxMSA1NS43Mjc3IDc3Ljg4TDU5LjU2NTYgNjQuNDE3N0M0My43NDg5IDYwLjA4NjQgMzUuODQwNSA0Ny45MTE4IDQzLjYzMjYgMzAuNDY5M0g1Ni4xOTI5QzQ5LjIxNSA0Mi4wNTg2IDUzLjk4MzIgNTEuNjU3OCA2Mi44MjIgNTIuNzExNEM2Ny41OTAzIDM1LjczNzIgNzcuODI0NiAyMi41MDkgOTEuNDMxNiAyMi41MDlDOTkuMTA3NCAyMi41MDkgMTA1LjE1NSAyNy41NDI4IDEwNS4xNTUgMzYuNjczN0MxMDUuMTU1IDUxLjMwNjYgODYuMDgxOSA2My4yNDcxIDcxLjY2MDcgNjQuNDE3N0w2NS43Mjk1IDg1LjM3MjFDNzIuNDc0OCA5My4yMTUzIDkxLjE5OSAxMDAuODI0IDkxLjE5OSA3OS4yODQ4SDEwMi44MjlaIiBmaWxsPSIjRjVGMUVEIi8+Cjwvc3ZnPgo=\",webUrl:\"https://leather.io\",chromeWebStoreUrl:\"https://chrome.google.com/webstore/detail/hiro-wallet/ldinpeekobnhjjdofggfgjlcehhmanlj\",mozillaAddOnsUrl:\"https://leather.io/install-extension\"},{id:\"XverseProviders.StacksProvider\",name:\"Xverse Wallet\",icon:\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGZpbGw9IiMxNzE3MTciIGQ9Ik0wIDBoNjAwdjYwMEgweiIvPjxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTQ0MCA0MzUuNHYtNTFjMC0yLS44LTMuOS0yLjItNS4zTDIyMCAxNjIuMmE3LjYgNy42IDAgMCAwLTUuNC0yLjJoLTUxLjFjLTIuNSAwLTQuNiAyLTQuNiA0LjZ2NDcuM2MwIDIgLjggNCAyLjIgNS40bDc4LjIgNzcuOGE0LjYgNC42IDAgMCAxIDAgNi41bC03OSA3OC43Yy0xIC45LTEuNCAyLTEuNCAzLjJ2NTJjMCAyLjQgMiA0LjUgNC42IDQuNUgyNDljMi42IDAgNC42LTIgNC42LTQuNlY0MDVjMC0xLjIuNS0yLjQgMS40LTMuM2w0Mi40LTQyLjJhNC42IDQuNiAwIDAgMSA2LjQgMGw3OC43IDc4LjRhNy42IDcuNiAwIDAgMCA1LjQgMi4yaDQ3LjVjMi41IDAgNC42LTIgNC42LTQuNloiLz48cGF0aCBmaWxsPSIjRUU3QTMwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0zMjUuNiAyMjcuMmg0Mi44YzIuNiAwIDQuNiAyLjEgNC42IDQuNnY0Mi42YzAgNCA1IDYuMSA4IDMuMmw1OC43LTU4LjVjLjgtLjggMS4zLTIgMS4zLTMuMnYtNTEuMmMwLTIuNi0yLTQuNi00LjYtNC42TDM4NCAxNjBjLTEuMiAwLTIuNC41LTMuMyAxLjNsLTU4LjQgNTguMWE0LjYgNC42IDAgMCAwIDMuMiA3LjhaIi8+PC9nPjwvc3ZnPg==\",webUrl:\"https://xverse.app\",chromeWebStoreUrl:\"https://chrome.google.com/webstore/detail/xverse-wallet/idnnbdplmphpflfnlkomgpfbpcgelopg\",googlePlayStoreUrl:\"https://play.google.com/store/apps/details?id=com.secretkeylabs.xverse\",iOSAppStoreUrl:\"https://apps.apple.com/app/xverse-bitcoin-web3-wallet/id1552272513\",mozillaAddOnsUrl:\"https://www.xverse.app/download\"},{id:\"AsignaProvider\",name:\"Asigna Multisig\",icon:\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMDEwMCIgZD0iTTAgMGgzMnYzMkgweiIvPjxwYXRoIGZpbGw9InVybCgjYSkiIGQ9Ik0xNS4xMSA1LjU1YTMgMyAwIDAgMC0xLjgyIDEuM2wtLjA1LjA4LS40My43Mi0uMDcuMTEtLjUuODUtLjA1LjA5LTEuMjkgMi4xOC0uMDQuMDctLjQ3LjgtLjA2LjEtLjQ2Ljc4LS4wNy4xMS0xLjYzIDIuNzYtLjA3LjExLS4zOC42Ni0uMDUuMDgtLjczIDEuMjQtLjM1LjYtLjQuNjctLjA1LjA5TDUuMSAyMC43bC0uMTEuMTgtLjE0LjIzLS4wNy4xMy0uMzMuNTUtLjA0LjA3di4wMWExLjI2IDEuMjYgMCAwIDAtLjE0LjQ3IDEuMzEgMS4zMSAwIDAgMCAxLjI0IDEuNGgxLjVsLjA1LS4wNi4wNC0uMDYuODctMS4yMS4wNS0uMDguNzctMS4wNy4wNS0uMDcuNC0uNTcuMDUtLjA2LjI0LS4zNGExLjUyIDEuNTIgMCAwIDEgMS4zOS0uNjIgMS41IDEuNSAwIDAgMSAuNjQuMiAxLjQ3IDEuNDcgMCAwIDEgLjczIDEuMjcgMS40NCAxLjQ0IDAgMCAxLS4yNy44NGwtLjYzLjg4LS4wNS4wNy0uMzIuNDUtLjA2LjA4LS4wOC4xMi0uMTIuMTYtLjA1LjA4aDIuMTNhMi4zMiAyLjMyIDAgMCAwIDEuNzctLjk2bDEuMTgtMS42My43Ny0xLjA4IDEuMy0xLjhhMS4yNCAxLjI0IDAgMCAxIC41NS0uNDNsLjA4LS4wM2ExLjMgMS4zIDAgMCAxIC4zLS4wNiAxLjI4IDEuMjggMCAwIDEgMS4xNS41NGwuMTEuMmExLjEzIDEuMTMgMCAwIDEgLjEuNDEgMS4xOSAxLjE5IDAgMCAxLS4yMy43N2wtLjAzLjA1LS41Ny44LS43Ljk4LS4yNy4zN2ExLjIyIDEuMjIgMCAwIDAtLjIuNSAxLjA1IDEuMDUgMCAwIDAtLjAyLjIzdi4wNmExLjE3IDEuMTcgMCAwIDAgLjE0LjQzbC4wMi4wNS4wNy4xYTEuNDQgMS40NCAwIDAgMCAuMS4xMWwuMDUuMDYuMDEuMDFhMS44IDEuOCAwIDAgMCAuMTQuMWMwIC4wMi4wMi4wMy4wNC4wM2ExIDEgMCAwIDAgLjA4LjA1bC4wNy4wNGExLjI1IDEuMjUgMCAwIDAgLjUuMWg2LjljLjEgMCAuMi0uMDEuMjktLjAzbC4wNi0uMDJhMS4yNyAxLjI3IDAgMCAwIC4yNy0uMS41Ny41NyAwIDAgMCAuMDctLjAzIDEuMjEgMS4yMSAwIDAgMCAuMjYtLjE5bC4wOC0uMDdhLjkyLjkyIDAgMCAwIC4xNS0uMTkgMS41NSAxLjU1IDAgMCAwIC4wOS0uMTdsLjAyLS4wNWExLjIyIDEuMjIgMCAwIDAgLjA4LS4yNnYtLjA0bC4wMi0uMDh2LS4wOGExLjMyIDEuMzIgMCAwIDAtLjItLjc0bC0xLjYtMi42NC0uMDYtLjEtLjItLjMyLS4zMy0uNTR2LS4wMWwtLjA1LS4wOC0xLjMtMi4xNS0uMDctLjEtLjA0LS4wNi0uOC0xLjMyLS4wNC0uMDctLjItLjM0LS4xLS4xNC0uMS0uMTYtLjUzLS45LS4xMy0uMi0uMDktLjE0LTIuMTctMy41Ny0uMDQtLjA3LS43Mi0xLjE5LS4wNS0uMDctLjQtLjY1YTIuNjUgMi42NSAwIDAgMC0uMy0uNCAyLjk2IDIuOTYgMCAwIDAtLjk3LS43NCAzLjA0IDMuMDQgMCAwIDAtMS4zLS4zYy0uMjUgMC0uNS4wNC0uNzQuMVoiLz48cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJNMTkgMTYuM2E1LjQ1IDUuNDUgMCAwIDAtLjgzIDEuNTZsLS4wNC4xNWExLjM2IDEuMzYgMCAwIDEgLjI4LS4xNiAxLjI0IDEuMjQgMCAwIDEgLjM4LS4wOGguMWExLjI4IDEuMjggMCAwIDEgMS4wNS41NGMuMDQuMDYuMDguMTMuMS4yYTEuMjQgMS4yNCAwIDAgMSAuMDkuMjcgMS4xOSAxLjE5IDAgMCAxLS4yLjkxbC0uMDQuMDUtLjU3Ljc5LS43Ljk5LS4yNy4zN2ExLjIzIDEuMjMgMCAwIDAtLjIuNDIgMS4wNiAxLjA2IDAgMCAwLS4wMi4zMXYuMDZhMS4xNyAxLjE3IDAgMCAwIC4xNi40Ny45My45MyAwIDAgMCAuMDcuMSAxLjUgMS41IDAgMCAwIC4xLjEybC4wNS4wNmguMDFhMS45NCAxLjk0IDAgMCAwIC4wOS4wOCAxIDEgMCAwIDAgLjE3LjFsLjA3LjA0YTEuMjUgMS4yNSAwIDAgMCAuNS4xaDYuOWMuMSAwIC4yIDAgLjI4LS4wMmwuMDctLjAyYTEuMzIgMS4zMiAwIDAgMCAuMzQtLjEzbC4xNi0uMS4wMy0uMDNhMS4yOSAxLjI5IDAgMCAwIC4yLS4yIDIuNDMgMi40MyAwIDAgMCAuMTItLjE3Yy4wMy0uMDMuMDUtLjA4LjA3LS4xMmwuMDItLjA1YTEuMjEgMS4yMSAwIDAgMCAuMDktLjN2LS4wOGwuMDEtLjA5YTEuMzIgMS4zMiAwIDAgMC0uMi0uNzNsLTEuNi0yLjY0LS4wNi0uMS0uMi0uMzItLjMzLS41NHYtLjAybC0uMDUtLjA3LTEuMy0yLjE1LS4xMi0uMDctLjA3LS4wNGE0Ljk0IDQuOTQgMCAwIDAtMi40Ni0uNjdjLTEuMDMgMC0xLjc2LjU3LTIuMjYgMS4yWiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xMi4yOSAyMS4wOGMwIC4yOS0uMDkuNTgtLjI3Ljg0bC0xLjMxIDEuODRIN2wyLjUyLTMuNTNhMS41NCAxLjU0IDAgMCAxIDIuMS0uMzZjLjQzLjI4LjY2Ljc0LjY2IDEuMloiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTEuMTYgMjEuMjVhLjU2LjU2IDAgMCAxLS41Ny41NS41Ni41NiAwIDAgMS0uNTctLjU2LjU2LjU2IDAgMCAxIC41Ny0uNTUuNTYuNTYgMCAwIDEgLjU3LjU2WiIvPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iYSIgeDE9IjE1LjIzIiB4Mj0iMTkuMyIgeTE9IjI1Ljc4IiB5Mj0iNi4xMSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM2NTIyRjQiLz48c3RvcCBvZmZzZXQ9Ii41NSIgc3RvcC1jb2xvcj0iIzlCNkJGRiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0E1ODVGRiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMjIuNTkiIHgyPSIyNC44IiB5MT0iMjQuNzEiIHkyPSIxNS41MyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM0MjFGOEIiLz48c3RvcCBvZmZzZXQ9Ii41NSIgc3RvcC1jb2xvcj0iIzcyMzBGRiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzk3NzNGRiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjwvc3ZnPg==\",webUrl:\"https://asigna.io\",chromeWebStoreUrl:\"https://stx.asigna.io/\"}];function I(e,t=!0){return function(o,s){var A;if(s)return e(o,s);let r=getSelectedProviderId(),i=l();if(r&&i)return e(o,i);if(typeof window==\"undefined\")return;defineCustomElements(window);let d=(A=o==null?void 0:o.defaultProviders)!=null?A:nt,p=getInstalledProviders(d),c=document.createElement(\"connect-modal\");c.defaultProviders=d,c.installedProviders=p,c.persistSelection=t;let C=document.body.style.overflow;document.body.style.overflow=\"hidden\";let T=()=>{c.remove(),document.body.style.overflow=C;};c.callback=L=>{T(),e(o,L);},c.cancelCallback=()=>{var L;T(),(L=o.onCancel)==null||L.call(o);},document.body.appendChild(c);let j=L=>{L.key===\"Escape\"&&(document.removeEventListener(\"keydown\",j),c.remove());};document.addEventListener(\"keydown\",j);}}var ge=I(U,!1),En=I(G),hn=I(Y),zn=I(B),bn=I(q),Un=I(F),vn=I(H),Rn=I(W),Qn=I(J),Yn=clearSelectedProviderId,Bn=ge;\nexport{yt as ContractCallArgumentType,nt as DEFAULT_PROVIDERS,ae as SignatureHash,St as TransactionTypes,U as authenticate,Te as defaultAuthURL,Yn as disconnect,ne as getDefaultProfileUpdateRequestOptions,Ut as getDefaultPsbtRequestOptions,m as getDefaultSignatureRequestOptions,S as getKeys,b as getOrCreateUserSession,l as getStacksProvider,wt as getStxAddress,fe as getUserData,D as getUserSession,M as hasAppPrivateKey,Mt as isMobile,Ie as isStacksWalletInstalled,y as legacyNetworkFromConnectNetwork,mt as makeContractCallToken,Ot as makeContractDeployToken,re as makeProfileUpdateToken,Rt as makePsbtToken,kt as makeSTXTransferToken,Et as makeSignTransaction,Y as openContractCall,B as openContractDeploy,H as openProfileUpdateRequestPopup,F as openPsbtRequestPopup,G as openSTXTransfer,q as openSignTransaction,W as openSignatureRequestPopup,J as openStructuredDataSignatureRequestPopup,xe as shouldUsePopup,Bn as showBlockstackConnect,ge as showConnect,hn as showContractCall,zn as showContractDeploy,vn as showProfileUpdate,Un as showPsbt,En as showSTXTransfer,Rn as showSignMessage,Qn as showSignStructuredMessage,bn as showSignTransaction,Zt as signMessage,Jt as signStructuredMessage};//# sourceMappingURL=index.mjs.map\n//# sourceMappingURL=index.mjs.map","export var ChainID;\n(function (ChainID) {\n    ChainID[ChainID[\"Testnet\"] = 2147483648] = \"Testnet\";\n    ChainID[ChainID[\"Mainnet\"] = 1] = \"Mainnet\";\n})(ChainID || (ChainID = {}));\nexport const DEFAULT_CHAIN_ID = ChainID.Mainnet;\nexport const MAX_STRING_LENGTH_BYTES = 128;\nexport const CLARITY_INT_SIZE = 128;\nexport const CLARITY_INT_BYTE_SIZE = 16;\nexport const COINBASE_BYTES_LENGTH = 32;\nexport const VRF_PROOF_BYTES_LENGTH = 80;\nexport const RECOVERABLE_ECDSA_SIG_LENGTH_BYTES = 65;\nexport const COMPRESSED_PUBKEY_LENGTH_BYTES = 32;\nexport const UNCOMPRESSED_PUBKEY_LENGTH_BYTES = 64;\nexport const MEMO_MAX_LENGTH_BYTES = 34;\nexport const DEFAULT_CORE_NODE_API_URL = 'https://api.mainnet.hiro.so';\nexport var StacksMessageType;\n(function (StacksMessageType) {\n    StacksMessageType[StacksMessageType[\"Address\"] = 0] = \"Address\";\n    StacksMessageType[StacksMessageType[\"Principal\"] = 1] = \"Principal\";\n    StacksMessageType[StacksMessageType[\"LengthPrefixedString\"] = 2] = \"LengthPrefixedString\";\n    StacksMessageType[StacksMessageType[\"MemoString\"] = 3] = \"MemoString\";\n    StacksMessageType[StacksMessageType[\"AssetInfo\"] = 4] = \"AssetInfo\";\n    StacksMessageType[StacksMessageType[\"PostCondition\"] = 5] = \"PostCondition\";\n    StacksMessageType[StacksMessageType[\"PublicKey\"] = 6] = \"PublicKey\";\n    StacksMessageType[StacksMessageType[\"LengthPrefixedList\"] = 7] = \"LengthPrefixedList\";\n    StacksMessageType[StacksMessageType[\"Payload\"] = 8] = \"Payload\";\n    StacksMessageType[StacksMessageType[\"MessageSignature\"] = 9] = \"MessageSignature\";\n    StacksMessageType[StacksMessageType[\"StructuredDataSignature\"] = 10] = \"StructuredDataSignature\";\n    StacksMessageType[StacksMessageType[\"TransactionAuthField\"] = 11] = \"TransactionAuthField\";\n})(StacksMessageType || (StacksMessageType = {}));\nexport function whenMessageType(messageType) {\n    return (messageTypeMap) => messageTypeMap[messageType];\n}\nexport var PayloadType;\n(function (PayloadType) {\n    PayloadType[PayloadType[\"TokenTransfer\"] = 0] = \"TokenTransfer\";\n    PayloadType[PayloadType[\"SmartContract\"] = 1] = \"SmartContract\";\n    PayloadType[PayloadType[\"VersionedSmartContract\"] = 6] = \"VersionedSmartContract\";\n    PayloadType[PayloadType[\"ContractCall\"] = 2] = \"ContractCall\";\n    PayloadType[PayloadType[\"PoisonMicroblock\"] = 3] = \"PoisonMicroblock\";\n    PayloadType[PayloadType[\"Coinbase\"] = 4] = \"Coinbase\";\n    PayloadType[PayloadType[\"CoinbaseToAltRecipient\"] = 5] = \"CoinbaseToAltRecipient\";\n    PayloadType[PayloadType[\"TenureChange\"] = 7] = \"TenureChange\";\n    PayloadType[PayloadType[\"NakamotoCoinbase\"] = 8] = \"NakamotoCoinbase\";\n})(PayloadType || (PayloadType = {}));\nexport var ClarityVersion;\n(function (ClarityVersion) {\n    ClarityVersion[ClarityVersion[\"Clarity1\"] = 1] = \"Clarity1\";\n    ClarityVersion[ClarityVersion[\"Clarity2\"] = 2] = \"Clarity2\";\n    ClarityVersion[ClarityVersion[\"Clarity3\"] = 3] = \"Clarity3\";\n})(ClarityVersion || (ClarityVersion = {}));\nexport var AnchorMode;\n(function (AnchorMode) {\n    AnchorMode[AnchorMode[\"OnChainOnly\"] = 1] = \"OnChainOnly\";\n    AnchorMode[AnchorMode[\"OffChainOnly\"] = 2] = \"OffChainOnly\";\n    AnchorMode[AnchorMode[\"Any\"] = 3] = \"Any\";\n})(AnchorMode || (AnchorMode = {}));\nexport const AnchorModeNames = ['onChainOnly', 'offChainOnly', 'any'];\nconst AnchorModeMap = {\n    [AnchorModeNames[0]]: AnchorMode.OnChainOnly,\n    [AnchorModeNames[1]]: AnchorMode.OffChainOnly,\n    [AnchorModeNames[2]]: AnchorMode.Any,\n    [AnchorMode.OnChainOnly]: AnchorMode.OnChainOnly,\n    [AnchorMode.OffChainOnly]: AnchorMode.OffChainOnly,\n    [AnchorMode.Any]: AnchorMode.Any,\n};\nexport function anchorModeFromNameOrValue(mode) {\n    if (mode in AnchorModeMap)\n        return AnchorModeMap[mode];\n    throw new Error(`Invalid anchor mode \"${mode}\", must be one of: ${AnchorModeNames.join(', ')}`);\n}\nexport var TransactionVersion;\n(function (TransactionVersion) {\n    TransactionVersion[TransactionVersion[\"Mainnet\"] = 0] = \"Mainnet\";\n    TransactionVersion[TransactionVersion[\"Testnet\"] = 128] = \"Testnet\";\n})(TransactionVersion || (TransactionVersion = {}));\nexport const DEFAULT_TRANSACTION_VERSION = TransactionVersion.Mainnet;\nexport var PostConditionMode;\n(function (PostConditionMode) {\n    PostConditionMode[PostConditionMode[\"Allow\"] = 1] = \"Allow\";\n    PostConditionMode[PostConditionMode[\"Deny\"] = 2] = \"Deny\";\n})(PostConditionMode || (PostConditionMode = {}));\nexport var PostConditionType;\n(function (PostConditionType) {\n    PostConditionType[PostConditionType[\"STX\"] = 0] = \"STX\";\n    PostConditionType[PostConditionType[\"Fungible\"] = 1] = \"Fungible\";\n    PostConditionType[PostConditionType[\"NonFungible\"] = 2] = \"NonFungible\";\n})(PostConditionType || (PostConditionType = {}));\nexport var AuthType;\n(function (AuthType) {\n    AuthType[AuthType[\"Standard\"] = 4] = \"Standard\";\n    AuthType[AuthType[\"Sponsored\"] = 5] = \"Sponsored\";\n})(AuthType || (AuthType = {}));\nexport var AddressHashMode;\n(function (AddressHashMode) {\n    AddressHashMode[AddressHashMode[\"SerializeP2PKH\"] = 0] = \"SerializeP2PKH\";\n    AddressHashMode[AddressHashMode[\"SerializeP2SH\"] = 1] = \"SerializeP2SH\";\n    AddressHashMode[AddressHashMode[\"SerializeP2WPKH\"] = 2] = \"SerializeP2WPKH\";\n    AddressHashMode[AddressHashMode[\"SerializeP2WSH\"] = 3] = \"SerializeP2WSH\";\n    AddressHashMode[AddressHashMode[\"SerializeP2SHNonSequential\"] = 5] = \"SerializeP2SHNonSequential\";\n    AddressHashMode[AddressHashMode[\"SerializeP2WSHNonSequential\"] = 7] = \"SerializeP2WSHNonSequential\";\n})(AddressHashMode || (AddressHashMode = {}));\nexport var AddressVersion;\n(function (AddressVersion) {\n    AddressVersion[AddressVersion[\"MainnetSingleSig\"] = 22] = \"MainnetSingleSig\";\n    AddressVersion[AddressVersion[\"MainnetMultiSig\"] = 20] = \"MainnetMultiSig\";\n    AddressVersion[AddressVersion[\"TestnetSingleSig\"] = 26] = \"TestnetSingleSig\";\n    AddressVersion[AddressVersion[\"TestnetMultiSig\"] = 21] = \"TestnetMultiSig\";\n})(AddressVersion || (AddressVersion = {}));\nexport var PubKeyEncoding;\n(function (PubKeyEncoding) {\n    PubKeyEncoding[PubKeyEncoding[\"Compressed\"] = 0] = \"Compressed\";\n    PubKeyEncoding[PubKeyEncoding[\"Uncompressed\"] = 1] = \"Uncompressed\";\n})(PubKeyEncoding || (PubKeyEncoding = {}));\nexport var FungibleConditionCode;\n(function (FungibleConditionCode) {\n    FungibleConditionCode[FungibleConditionCode[\"Equal\"] = 1] = \"Equal\";\n    FungibleConditionCode[FungibleConditionCode[\"Greater\"] = 2] = \"Greater\";\n    FungibleConditionCode[FungibleConditionCode[\"GreaterEqual\"] = 3] = \"GreaterEqual\";\n    FungibleConditionCode[FungibleConditionCode[\"Less\"] = 4] = \"Less\";\n    FungibleConditionCode[FungibleConditionCode[\"LessEqual\"] = 5] = \"LessEqual\";\n})(FungibleConditionCode || (FungibleConditionCode = {}));\nexport var NonFungibleConditionCode;\n(function (NonFungibleConditionCode) {\n    NonFungibleConditionCode[NonFungibleConditionCode[\"Sends\"] = 16] = \"Sends\";\n    NonFungibleConditionCode[NonFungibleConditionCode[\"DoesNotSend\"] = 17] = \"DoesNotSend\";\n})(NonFungibleConditionCode || (NonFungibleConditionCode = {}));\nexport var PostConditionPrincipalID;\n(function (PostConditionPrincipalID) {\n    PostConditionPrincipalID[PostConditionPrincipalID[\"Origin\"] = 1] = \"Origin\";\n    PostConditionPrincipalID[PostConditionPrincipalID[\"Standard\"] = 2] = \"Standard\";\n    PostConditionPrincipalID[PostConditionPrincipalID[\"Contract\"] = 3] = \"Contract\";\n})(PostConditionPrincipalID || (PostConditionPrincipalID = {}));\nexport var AssetType;\n(function (AssetType) {\n    AssetType[AssetType[\"STX\"] = 0] = \"STX\";\n    AssetType[AssetType[\"Fungible\"] = 1] = \"Fungible\";\n    AssetType[AssetType[\"NonFungible\"] = 2] = \"NonFungible\";\n})(AssetType || (AssetType = {}));\nexport var TxRejectedReason;\n(function (TxRejectedReason) {\n    TxRejectedReason[\"Serialization\"] = \"Serialization\";\n    TxRejectedReason[\"Deserialization\"] = \"Deserialization\";\n    TxRejectedReason[\"SignatureValidation\"] = \"SignatureValidation\";\n    TxRejectedReason[\"FeeTooLow\"] = \"FeeTooLow\";\n    TxRejectedReason[\"BadNonce\"] = \"BadNonce\";\n    TxRejectedReason[\"NotEnoughFunds\"] = \"NotEnoughFunds\";\n    TxRejectedReason[\"NoSuchContract\"] = \"NoSuchContract\";\n    TxRejectedReason[\"NoSuchPublicFunction\"] = \"NoSuchPublicFunction\";\n    TxRejectedReason[\"BadFunctionArgument\"] = \"BadFunctionArgument\";\n    TxRejectedReason[\"ContractAlreadyExists\"] = \"ContractAlreadyExists\";\n    TxRejectedReason[\"PoisonMicroblocksDoNotConflict\"] = \"PoisonMicroblocksDoNotConflict\";\n    TxRejectedReason[\"PoisonMicroblockHasUnknownPubKeyHash\"] = \"PoisonMicroblockHasUnknownPubKeyHash\";\n    TxRejectedReason[\"PoisonMicroblockIsInvalid\"] = \"PoisonMicroblockIsInvalid\";\n    TxRejectedReason[\"BadAddressVersionByte\"] = \"BadAddressVersionByte\";\n    TxRejectedReason[\"NoCoinbaseViaMempool\"] = \"NoCoinbaseViaMempool\";\n    TxRejectedReason[\"ServerFailureNoSuchChainTip\"] = \"ServerFailureNoSuchChainTip\";\n    TxRejectedReason[\"TooMuchChaining\"] = \"TooMuchChaining\";\n    TxRejectedReason[\"ConflictingNonceInMempool\"] = \"ConflictingNonceInMempool\";\n    TxRejectedReason[\"BadTransactionVersion\"] = \"BadTransactionVersion\";\n    TxRejectedReason[\"TransferRecipientCannotEqualSender\"] = \"TransferRecipientCannotEqualSender\";\n    TxRejectedReason[\"TransferAmountMustBePositive\"] = \"TransferAmountMustBePositive\";\n    TxRejectedReason[\"ServerFailureDatabase\"] = \"ServerFailureDatabase\";\n    TxRejectedReason[\"EstimatorError\"] = \"EstimatorError\";\n    TxRejectedReason[\"TemporarilyBlacklisted\"] = \"TemporarilyBlacklisted\";\n    TxRejectedReason[\"ServerFailureOther\"] = \"ServerFailureOther\";\n})(TxRejectedReason || (TxRejectedReason = {}));\n//# sourceMappingURL=constants.js.map","import { MAX_STRING_LENGTH_BYTES, PostConditionPrincipalID, StacksMessageType, } from './constants';\nimport { c32addressDecode } from 'c32check';\nimport { exceedsMaxLengthBytes } from './utils';\nexport function parseAssetInfoString(id) {\n    const [assetAddress, assetContractName, assetTokenName] = id.split(/\\.|::/);\n    const assetInfo = createAssetInfo(assetAddress, assetContractName, assetTokenName);\n    return assetInfo;\n}\nexport function createLPString(content, lengthPrefixBytes, maxLengthBytes) {\n    const prefixLength = lengthPrefixBytes || 1;\n    const maxLength = maxLengthBytes || MAX_STRING_LENGTH_BYTES;\n    if (exceedsMaxLengthBytes(content, maxLength)) {\n        throw new Error(`String length exceeds maximum bytes ${maxLength}`);\n    }\n    return {\n        type: StacksMessageType.LengthPrefixedString,\n        content,\n        lengthPrefixBytes: prefixLength,\n        maxLengthBytes: maxLength,\n    };\n}\nexport function createAssetInfo(addressString, contractName, assetName) {\n    return {\n        type: StacksMessageType.AssetInfo,\n        address: createAddress(addressString),\n        contractName: createLPString(contractName),\n        assetName: createLPString(assetName),\n    };\n}\nexport function createAddress(c32AddressString) {\n    const addressData = c32addressDecode(c32AddressString);\n    return {\n        type: StacksMessageType.Address,\n        version: addressData[0],\n        hash160: addressData[1],\n    };\n}\nexport function parsePrincipalString(principalString) {\n    if (principalString.includes('.')) {\n        const [address, contractName] = principalString.split('.');\n        return createContractPrincipal(address, contractName);\n    }\n    else {\n        return createStandardPrincipal(principalString);\n    }\n}\nexport function createContractPrincipal(addressString, contractName) {\n    const addr = createAddress(addressString);\n    const name = createLPString(contractName);\n    return {\n        type: StacksMessageType.Principal,\n        prefix: PostConditionPrincipalID.Contract,\n        address: addr,\n        contractName: name,\n    };\n}\nexport function createStandardPrincipal(addressString) {\n    const addr = createAddress(addressString);\n    return {\n        type: StacksMessageType.Principal,\n        prefix: PostConditionPrincipalID.Standard,\n        address: addr,\n    };\n}\n//# sourceMappingURL=postcondition-types.js.map","export var ClarityType;\n(function (ClarityType) {\n    ClarityType[ClarityType[\"Int\"] = 0] = \"Int\";\n    ClarityType[ClarityType[\"UInt\"] = 1] = \"UInt\";\n    ClarityType[ClarityType[\"Buffer\"] = 2] = \"Buffer\";\n    ClarityType[ClarityType[\"BoolTrue\"] = 3] = \"BoolTrue\";\n    ClarityType[ClarityType[\"BoolFalse\"] = 4] = \"BoolFalse\";\n    ClarityType[ClarityType[\"PrincipalStandard\"] = 5] = \"PrincipalStandard\";\n    ClarityType[ClarityType[\"PrincipalContract\"] = 6] = \"PrincipalContract\";\n    ClarityType[ClarityType[\"ResponseOk\"] = 7] = \"ResponseOk\";\n    ClarityType[ClarityType[\"ResponseErr\"] = 8] = \"ResponseErr\";\n    ClarityType[ClarityType[\"OptionalNone\"] = 9] = \"OptionalNone\";\n    ClarityType[ClarityType[\"OptionalSome\"] = 10] = \"OptionalSome\";\n    ClarityType[ClarityType[\"List\"] = 11] = \"List\";\n    ClarityType[ClarityType[\"Tuple\"] = 12] = \"Tuple\";\n    ClarityType[ClarityType[\"StringASCII\"] = 13] = \"StringASCII\";\n    ClarityType[ClarityType[\"StringUTF8\"] = 14] = \"StringUTF8\";\n})(ClarityType || (ClarityType = {}));\n//# sourceMappingURL=constants.js.map","import { utf8ToBytes } from '@stacks/common';\nimport { addressToString } from '../../common';\nimport { createAddress, createLPString } from '../../postcondition-types';\nimport { ClarityType } from '../constants';\nfunction principalToString(principal) {\n    if (principal.type === ClarityType.PrincipalStandard) {\n        return addressToString(principal.address);\n    }\n    else if (principal.type === ClarityType.PrincipalContract) {\n        const address = addressToString(principal.address);\n        return `${address}.${principal.contractName.content}`;\n    }\n    else {\n        throw new Error(`Unexpected principal data: ${JSON.stringify(principal)}`);\n    }\n}\nfunction principalCV(principal) {\n    if (principal.includes('.')) {\n        const [address, contractName] = principal.split('.');\n        return contractPrincipalCV(address, contractName);\n    }\n    else {\n        return standardPrincipalCV(principal);\n    }\n}\nfunction standardPrincipalCV(addressString) {\n    const addr = createAddress(addressString);\n    return { type: ClarityType.PrincipalStandard, address: addr };\n}\nfunction standardPrincipalCVFromAddress(address) {\n    return { type: ClarityType.PrincipalStandard, address };\n}\nfunction contractPrincipalCV(addressString, contractName) {\n    const addr = createAddress(addressString);\n    const lengthPrefixedContractName = createLPString(contractName);\n    return contractPrincipalCVFromAddress(addr, lengthPrefixedContractName);\n}\nfunction contractPrincipalCVFromAddress(address, contractName) {\n    if (utf8ToBytes(contractName.content).byteLength >= 128) {\n        throw new Error('Contract name must be less than 128 bytes');\n    }\n    return { type: ClarityType.PrincipalContract, address, contractName };\n}\nfunction contractPrincipalCVFromStandard(sp, contractName) {\n    const lengthPrefixedContractName = createLPString(contractName);\n    return {\n        type: ClarityType.PrincipalContract,\n        address: sp.address,\n        contractName: lengthPrefixedContractName,\n    };\n}\nexport { principalCV, principalToString, standardPrincipalCV, standardPrincipalCVFromAddress, contractPrincipalCV, contractPrincipalCVFromAddress, contractPrincipalCVFromStandard, };\n//# sourceMappingURL=principalCV.js.map","import { ClarityType } from '../constants';\nconst trueCV = () => ({ type: ClarityType.BoolTrue });\nconst falseCV = () => ({ type: ClarityType.BoolFalse });\nconst boolCV = (bool) => (bool ? trueCV() : falseCV());\nexport { boolCV, trueCV, falseCV };\n//# sourceMappingURL=booleanCV.js.map","import { intToBigInt } from '@stacks/common';\nimport { ClarityType } from '../constants';\nconst MAX_U128 = BigInt('0xffffffffffffffffffffffffffffffff');\nconst MIN_U128 = BigInt(0);\nconst MAX_I128 = BigInt('0x7fffffffffffffffffffffffffffffff');\nconst MIN_I128 = BigInt('-170141183460469231731687303715884105728');\nconst intCV = (value) => {\n    const bigInt = intToBigInt(value, true);\n    if (bigInt > MAX_I128) {\n        throw new RangeError(`Cannot construct clarity integer from value greater than ${MAX_I128}`);\n    }\n    else if (bigInt < MIN_I128) {\n        throw new RangeError(`Cannot construct clarity integer form value less than ${MIN_I128}`);\n    }\n    return { type: ClarityType.Int, value: bigInt };\n};\nconst uintCV = (value) => {\n    const bigInt = intToBigInt(value, false);\n    if (bigInt < MIN_U128) {\n        throw new RangeError('Cannot construct unsigned clarity integer from negative value');\n    }\n    else if (bigInt > MAX_U128) {\n        throw new RangeError(`Cannot construct unsigned clarity integer greater than ${MAX_U128}`);\n    }\n    return { type: ClarityType.UInt, value: bigInt };\n};\nexport { intCV, uintCV };\n//# sourceMappingURL=intCV.js.map","import { ClarityType } from '../constants';\nconst stringAsciiCV = (data) => {\n    return { type: ClarityType.StringASCII, data };\n};\nconst stringUtf8CV = (data) => {\n    return { type: ClarityType.StringUTF8, data };\n};\nconst stringCV = (data, encoding) => {\n    switch (encoding) {\n        case 'ascii':\n            return stringAsciiCV(data);\n        case 'utf8':\n            return stringUtf8CV(data);\n    }\n};\nexport { stringAsciiCV, stringUtf8CV, stringCV };\n//# sourceMappingURL=stringCV.js.map","import { ripemd160 } from '@noble/hashes/ripemd160';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { sha512_256 } from '@noble/hashes/sha512';\nimport { utils } from '@noble/secp256k1';\nimport { bytesToHex, concatArray, concatBytes, utf8ToBytes, with0x } from '@stacks/common';\nimport { c32addressDecode } from 'c32check';\nimport lodashCloneDeep from 'lodash.clonedeep';\nimport { deserializeCV, serializeCV } from './clarity';\nexport { verify as verifySignature } from '@noble/secp256k1';\nexport const randomBytes = (bytesLength) => utils.randomBytes(bytesLength);\nexport const leftPadHex = (hexString) => hexString.length % 2 == 0 ? hexString : `0${hexString}`;\nexport const leftPadHexToLength = (hexString, length) => hexString.padStart(length, '0');\nexport const rightPadHexToLength = (hexString, length) => hexString.padEnd(length, '0');\nexport const exceedsMaxLengthBytes = (string, maxLengthBytes) => string ? utf8ToBytes(string).length > maxLengthBytes : false;\nexport function cloneDeep(obj) {\n    return lodashCloneDeep(obj);\n}\nexport function omit(obj, prop) {\n    const clone = cloneDeep(obj);\n    delete clone[prop];\n    return clone;\n}\nexport const hash160 = (input) => {\n    return ripemd160(sha256(input));\n};\nexport const txidFromData = (data) => {\n    return bytesToHex(sha512_256(data));\n};\nexport const txidFromBytes = txidFromData;\nexport const hashP2PKH = (input) => {\n    return bytesToHex(hash160(input));\n};\nexport const hashP2WPKH = (input) => {\n    const keyHash = hash160(input);\n    const redeemScript = concatBytes(new Uint8Array([0]), new Uint8Array([keyHash.length]), keyHash);\n    const redeemScriptHash = hash160(redeemScript);\n    return bytesToHex(redeemScriptHash);\n};\nexport const hashP2SH = (numSigs, pubKeys) => {\n    if (numSigs > 15 || pubKeys.length > 15) {\n        throw Error('P2SH multisig address can only contain up to 15 public keys');\n    }\n    const bytesArray = [];\n    bytesArray.push(80 + numSigs);\n    pubKeys.forEach(pubKey => {\n        bytesArray.push(pubKey.length);\n        bytesArray.push(pubKey);\n    });\n    bytesArray.push(80 + pubKeys.length);\n    bytesArray.push(174);\n    const redeemScript = concatArray(bytesArray);\n    const redeemScriptHash = hash160(redeemScript);\n    return bytesToHex(redeemScriptHash);\n};\nexport const hashP2WSH = (numSigs, pubKeys) => {\n    if (numSigs > 15 || pubKeys.length > 15) {\n        throw Error('P2WSH multisig address can only contain up to 15 public keys');\n    }\n    const scriptArray = [];\n    scriptArray.push(80 + numSigs);\n    pubKeys.forEach(pubKey => {\n        scriptArray.push(pubKey.length);\n        scriptArray.push(pubKey);\n    });\n    scriptArray.push(80 + pubKeys.length);\n    scriptArray.push(174);\n    const script = concatArray(scriptArray);\n    const digest = sha256(script);\n    const bytesArray = [];\n    bytesArray.push(0);\n    bytesArray.push(digest.length);\n    bytesArray.push(digest);\n    const redeemScript = concatArray(bytesArray);\n    const redeemScriptHash = hash160(redeemScript);\n    return bytesToHex(redeemScriptHash);\n};\nexport function isClarityName(name) {\n    const regex = /^[a-zA-Z]([a-zA-Z0-9]|[-_!?+<>=/*])*$|^[-+=/*]$|^[<>]=?$/;\n    return regex.test(name) && name.length < 128;\n}\nexport function cvToHex(cv) {\n    const serialized = serializeCV(cv);\n    return `0x${bytesToHex(serialized)}`;\n}\nexport function hexToCV(hex) {\n    return deserializeCV(hex);\n}\nexport const parseReadOnlyResponse = (response) => {\n    if (response.okay)\n        return hexToCV(response.result);\n    throw new Error(response.cause);\n};\nexport const validateStacksAddress = (stacksAddress) => {\n    try {\n        c32addressDecode(stacksAddress);\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n};\nexport const validateTxId = (txid) => {\n    if (txid === 'success')\n        return true;\n    const value = with0x(txid).toLowerCase();\n    if (value.length !== 66)\n        return false;\n    return with0x(BigInt(value).toString(16).padStart(64, '0')) === value;\n};\n//# sourceMappingURL=utils.js.map","import { intToBigInt } from '@stacks/common';\nimport { PostConditionType, StacksMessageType, } from './constants';\nimport { parseAssetInfoString, parsePrincipalString, } from './postcondition-types';\nexport function createSTXPostCondition(principal, conditionCode, amount) {\n    if (typeof principal === 'string') {\n        principal = parsePrincipalString(principal);\n    }\n    return {\n        type: StacksMessageType.PostCondition,\n        conditionType: PostConditionType.STX,\n        principal,\n        conditionCode,\n        amount: intToBigInt(amount, false),\n    };\n}\nexport function createFungiblePostCondition(principal, conditionCode, amount, assetInfo) {\n    if (typeof principal === 'string') {\n        principal = parsePrincipalString(principal);\n    }\n    if (typeof assetInfo === 'string') {\n        assetInfo = parseAssetInfoString(assetInfo);\n    }\n    return {\n        type: StacksMessageType.PostCondition,\n        conditionType: PostConditionType.Fungible,\n        principal,\n        conditionCode,\n        amount: intToBigInt(amount, false),\n        assetInfo,\n    };\n}\nexport function createNonFungiblePostCondition(principal, conditionCode, assetInfo, assetName) {\n    if (typeof principal === 'string') {\n        principal = parsePrincipalString(principal);\n    }\n    if (typeof assetInfo === 'string') {\n        assetInfo = parseAssetInfoString(assetInfo);\n    }\n    return {\n        type: StacksMessageType.PostCondition,\n        conditionType: PostConditionType.NonFungible,\n        principal,\n        conditionCode,\n        assetInfo,\n        assetName,\n    };\n}\n//# sourceMappingURL=postcondition.js.map","import { bytesToHex, hexToBytes, intToBigInt } from '@stacks/common';\nimport { StacksNetwork, StacksMainnet, StacksTestnet, createFetchFn, } from '@stacks/network';\nimport { c32address } from 'c32check';\nimport { createMultiSigSpendingCondition, createSingleSigSpendingCondition, createSponsoredAuth, createStandardAuth, isSingleSig, } from './authorization';\nimport { deserializeCV, serializeCV } from './clarity';\nimport { AddressHashMode, AddressVersion, PayloadType, PostConditionMode, TransactionVersion, RECOVERABLE_ECDSA_SIG_LENGTH_BYTES, StacksMessageType, ClarityVersion, } from './constants';\nimport { validateContractCall } from './contract-abi';\nimport { NoEstimateAvailableError } from './errors';\nimport { createStacksPrivateKey, createStacksPublicKey, getPublicKey, pubKeyfromPrivKey, publicKeyFromBytes, publicKeyToAddress, publicKeyToString, } from './keys';\nimport { createContractCallPayload, createSmartContractPayload, createTokenTransferPayload, serializePayload, } from './payload';\nimport { createFungiblePostCondition, createNonFungiblePostCondition, createSTXPostCondition, } from './postcondition';\nimport { createAddress, createContractPrincipal, createStandardPrincipal, } from './postcondition-types';\nimport { TransactionSigner } from './signer';\nimport { StacksTransaction } from './transaction';\nimport { addressFromPublicKeys, createLPList } from './types';\nimport { cvToHex, omit, parseReadOnlyResponse, validateTxId } from './utils';\nasync function _getNonceApi(address, network) {\n    const url = `${network.coreApiUrl}/extended/v1/address/${address}/nonces`;\n    const response = await network.fetchFn(url);\n    const result = await response.json();\n    return BigInt(result.possible_next_nonce);\n}\nexport async function getNonce(address, network) {\n    const derivedNetwork = StacksNetwork.fromNameOrNetwork(network ?? new StacksMainnet());\n    const url = derivedNetwork.getAccountApiUrl(address);\n    try {\n        return await _getNonceApi(address, derivedNetwork);\n    }\n    catch (e) { }\n    const response = await derivedNetwork.fetchFn(url);\n    if (!response.ok) {\n        let msg = '';\n        try {\n            msg = await response.text();\n        }\n        catch (error) { }\n        throw new Error(`Error fetching nonce. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`);\n    }\n    const responseText = await response.text();\n    const result = JSON.parse(responseText);\n    return BigInt(result.nonce);\n}\nexport async function estimateTransfer(transaction, network) {\n    if (transaction.payload.payloadType !== PayloadType.TokenTransfer) {\n        throw new Error(`Transaction fee estimation only possible with ${PayloadType[PayloadType.TokenTransfer]} transactions. Invoked with: ${PayloadType[transaction.payload.payloadType]}`);\n    }\n    return estimateTransferUnsafe(transaction, network);\n}\nexport async function estimateTransferUnsafe(transaction, network) {\n    const requestHeaders = {\n        Accept: 'application/text',\n    };\n    const fetchOptions = {\n        method: 'GET',\n        headers: requestHeaders,\n    };\n    const derivedNetwork = StacksNetwork.fromNameOrNetwork(network ?? deriveNetwork(transaction));\n    const url = derivedNetwork.getTransferFeeEstimateApiUrl();\n    const response = await derivedNetwork.fetchFn(url, fetchOptions);\n    if (!response.ok) {\n        let msg = '';\n        try {\n            msg = await response.text();\n        }\n        catch (error) { }\n        throw new Error(`Error estimating transaction fee. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`);\n    }\n    const feeRateResult = await response.text();\n    const txBytes = BigInt(transaction.serialize().byteLength);\n    const feeRate = BigInt(feeRateResult);\n    return feeRate * txBytes;\n}\nexport async function estimateTransaction(transactionPayload, estimatedLen, network) {\n    const options = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n            transaction_payload: bytesToHex(serializePayload(transactionPayload)),\n            ...(estimatedLen ? { estimated_len: estimatedLen } : {}),\n        }),\n    };\n    const derivedNetwork = StacksNetwork.fromNameOrNetwork(network ?? new StacksMainnet());\n    const url = derivedNetwork.getTransactionFeeEstimateApiUrl();\n    const response = await derivedNetwork.fetchFn(url, options);\n    if (!response.ok) {\n        const body = await response.text().then(str => {\n            try {\n                return JSON.parse(str);\n            }\n            catch (error) {\n                return str;\n            }\n        });\n        if (body?.reason === 'NoEstimateAvailable' ||\n            (typeof body === 'string' && body.includes('NoEstimateAvailable'))) {\n            throw new NoEstimateAvailableError(body?.reason_data?.message ?? '');\n        }\n        throw new Error(`Error estimating transaction fee. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${body}\"`);\n    }\n    const data = await response.json();\n    return data.estimations;\n}\nexport async function broadcastTransaction(transaction, network, attachment) {\n    const rawTx = transaction.serialize();\n    const derivedNetwork = StacksNetwork.fromNameOrNetwork(network ?? deriveNetwork(transaction));\n    const url = derivedNetwork.getBroadcastApiUrl();\n    return broadcastRawTransaction(rawTx, url, attachment, derivedNetwork.fetchFn);\n}\nexport async function broadcastRawTransaction(rawTx, url, attachment, fetchFn = createFetchFn()) {\n    const options = {\n        method: 'POST',\n        headers: { 'Content-Type': attachment ? 'application/json' : 'application/octet-stream' },\n        body: attachment\n            ? JSON.stringify({\n                tx: bytesToHex(rawTx),\n                attachment: bytesToHex(attachment),\n            })\n            : rawTx,\n    };\n    const response = await fetchFn(url, options);\n    if (!response.ok) {\n        try {\n            return (await response.json());\n        }\n        catch (e) {\n            throw Error(`Failed to broadcast transaction: ${e.message}`);\n        }\n    }\n    const text = await response.text();\n    const txid = text.replace(/[\"]+/g, '');\n    if (!validateTxId(txid))\n        throw new Error(text);\n    return { txid };\n}\nexport async function getAbi(address, contractName, network) {\n    const options = {\n        method: 'GET',\n    };\n    const derivedNetwork = StacksNetwork.fromNameOrNetwork(network);\n    const url = derivedNetwork.getAbiApiUrl(address, contractName);\n    const response = await derivedNetwork.fetchFn(url, options);\n    if (!response.ok) {\n        const msg = await response.text().catch(() => '');\n        throw new Error(`Error fetching contract ABI for contract \"${contractName}\" at address ${address}. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`);\n    }\n    return JSON.parse(await response.text());\n}\nfunction deriveNetwork(transaction) {\n    switch (transaction.version) {\n        case TransactionVersion.Mainnet:\n            return new StacksMainnet();\n        case TransactionVersion.Testnet:\n            return new StacksTestnet();\n    }\n}\nexport async function makeUnsignedSTXTokenTransfer(txOptions) {\n    const defaultOptions = {\n        fee: BigInt(0),\n        nonce: BigInt(0),\n        network: new StacksMainnet(),\n        memo: '',\n        sponsored: false,\n    };\n    const options = Object.assign(defaultOptions, txOptions);\n    const payload = createTokenTransferPayload(options.recipient, options.amount, options.memo);\n    let authorization = null;\n    let spendingCondition = null;\n    if ('publicKey' in options) {\n        spendingCondition = createSingleSigSpendingCondition(AddressHashMode.SerializeP2PKH, options.publicKey, options.nonce, options.fee);\n    }\n    else {\n        const hashMode = options.useNonSequentialMultiSig\n            ? AddressHashMode.SerializeP2SHNonSequential\n            : AddressHashMode.SerializeP2SH;\n        const publicKeys = options.address\n            ? sortPublicKeysForAddress(options.publicKeys, options.numSignatures, hashMode, createAddress(options.address).hash160)\n            : options.publicKeys;\n        spendingCondition = createMultiSigSpendingCondition(hashMode, options.numSignatures, publicKeys, options.nonce, options.fee);\n    }\n    if (options.sponsored) {\n        authorization = createSponsoredAuth(spendingCondition);\n    }\n    else {\n        authorization = createStandardAuth(spendingCondition);\n    }\n    const network = StacksNetwork.fromNameOrNetwork(options.network);\n    const transaction = new StacksTransaction(network.version, authorization, payload, undefined, undefined, options.anchorMode, network.chainId);\n    if (txOptions.fee === undefined || txOptions.fee === null) {\n        const fee = await estimateTransactionFeeWithFallback(transaction, network);\n        transaction.setFee(fee);\n    }\n    if (txOptions.nonce === undefined || txOptions.nonce === null) {\n        const addressVersion = options.network.version === TransactionVersion.Mainnet\n            ? AddressVersion.MainnetSingleSig\n            : AddressVersion.TestnetSingleSig;\n        const senderAddress = c32address(addressVersion, transaction.auth.spendingCondition.signer);\n        const txNonce = await getNonce(senderAddress, options.network);\n        transaction.setNonce(txNonce);\n    }\n    return transaction;\n}\nexport async function makeSTXTokenTransfer(txOptions) {\n    if ('senderKey' in txOptions) {\n        const publicKey = publicKeyToString(getPublicKey(createStacksPrivateKey(txOptions.senderKey)));\n        const options = omit(txOptions, 'senderKey');\n        const transaction = await makeUnsignedSTXTokenTransfer({ publicKey, ...options });\n        const privKey = createStacksPrivateKey(txOptions.senderKey);\n        const signer = new TransactionSigner(transaction);\n        signer.signOrigin(privKey);\n        return transaction;\n    }\n    else {\n        const options = omit(txOptions, 'signerKeys');\n        const transaction = await makeUnsignedSTXTokenTransfer(options);\n        mutatingSignAppendMultiSig(transaction, txOptions.publicKeys.slice(), txOptions.signerKeys, txOptions.address);\n        return transaction;\n    }\n}\nexport async function estimateContractDeploy(transaction, network) {\n    if (transaction.payload.payloadType !== PayloadType.SmartContract &&\n        transaction.payload.payloadType !== PayloadType.VersionedSmartContract) {\n        throw new Error(`Contract deploy fee estimation only possible with ${PayloadType[PayloadType.SmartContract]} transactions. Invoked with: ${PayloadType[transaction.payload.payloadType]}`);\n    }\n    const requestHeaders = {\n        Accept: 'application/text',\n    };\n    const fetchOptions = {\n        method: 'GET',\n        headers: requestHeaders,\n    };\n    const derivedNetwork = StacksNetwork.fromNameOrNetwork(network ?? deriveNetwork(transaction));\n    const url = derivedNetwork.getTransferFeeEstimateApiUrl();\n    const response = await derivedNetwork.fetchFn(url, fetchOptions);\n    if (!response.ok) {\n        const msg = await response.text().catch(() => '');\n        throw new Error(`Error estimating contract deploy fee. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`);\n    }\n    const feeRateResult = await response.text();\n    const txBytes = intToBigInt(transaction.serialize().byteLength, false);\n    const feeRate = intToBigInt(feeRateResult, false);\n    return feeRate * txBytes;\n}\nexport async function makeContractDeploy(txOptions) {\n    if ('senderKey' in txOptions) {\n        const publicKey = publicKeyToString(getPublicKey(createStacksPrivateKey(txOptions.senderKey)));\n        const options = omit(txOptions, 'senderKey');\n        const transaction = await makeUnsignedContractDeploy({ publicKey, ...options });\n        const privKey = createStacksPrivateKey(txOptions.senderKey);\n        const signer = new TransactionSigner(transaction);\n        signer.signOrigin(privKey);\n        return transaction;\n    }\n    else {\n        const options = omit(txOptions, 'signerKeys');\n        const transaction = await makeUnsignedContractDeploy(options);\n        mutatingSignAppendMultiSig(transaction, txOptions.publicKeys.slice(), txOptions.signerKeys, txOptions.address);\n        return transaction;\n    }\n}\nexport async function makeUnsignedContractDeploy(txOptions) {\n    const defaultOptions = {\n        fee: BigInt(0),\n        nonce: BigInt(0),\n        network: new StacksMainnet(),\n        postConditionMode: PostConditionMode.Deny,\n        sponsored: false,\n        clarityVersion: ClarityVersion.Clarity2,\n    };\n    const options = Object.assign(defaultOptions, txOptions);\n    const payload = createSmartContractPayload(options.contractName, options.codeBody, options.clarityVersion);\n    let authorization = null;\n    let spendingCondition = null;\n    if ('publicKey' in options) {\n        spendingCondition = createSingleSigSpendingCondition(AddressHashMode.SerializeP2PKH, options.publicKey, options.nonce, options.fee);\n    }\n    else {\n        const hashMode = options.useNonSequentialMultiSig\n            ? AddressHashMode.SerializeP2SHNonSequential\n            : AddressHashMode.SerializeP2SH;\n        const publicKeys = options.address\n            ? sortPublicKeysForAddress(options.publicKeys, options.numSignatures, hashMode, createAddress(options.address).hash160)\n            : options.publicKeys;\n        spendingCondition = createMultiSigSpendingCondition(hashMode, options.numSignatures, publicKeys, options.nonce, options.fee);\n    }\n    if (options.sponsored) {\n        authorization = createSponsoredAuth(spendingCondition);\n    }\n    else {\n        authorization = createStandardAuth(spendingCondition);\n    }\n    const network = StacksNetwork.fromNameOrNetwork(options.network);\n    const postConditions = [];\n    if (options.postConditions && options.postConditions.length > 0) {\n        options.postConditions.forEach(postCondition => {\n            postConditions.push(postCondition);\n        });\n    }\n    const lpPostConditions = createLPList(postConditions);\n    const transaction = new StacksTransaction(network.version, authorization, payload, lpPostConditions, options.postConditionMode, options.anchorMode, network.chainId);\n    if (txOptions.fee === undefined || txOptions.fee === null) {\n        const fee = await estimateTransactionFeeWithFallback(transaction, network);\n        transaction.setFee(fee);\n    }\n    if (txOptions.nonce === undefined || txOptions.nonce === null) {\n        const addressVersion = options.network.version === TransactionVersion.Mainnet\n            ? AddressVersion.MainnetSingleSig\n            : AddressVersion.TestnetSingleSig;\n        const senderAddress = c32address(addressVersion, transaction.auth.spendingCondition.signer);\n        const txNonce = await getNonce(senderAddress, options.network);\n        transaction.setNonce(txNonce);\n    }\n    return transaction;\n}\nexport async function estimateContractFunctionCall(transaction, network) {\n    if (transaction.payload.payloadType !== PayloadType.ContractCall) {\n        throw new Error(`Contract call fee estimation only possible with ${PayloadType[PayloadType.ContractCall]} transactions. Invoked with: ${PayloadType[transaction.payload.payloadType]}`);\n    }\n    const requestHeaders = {\n        Accept: 'application/text',\n    };\n    const fetchOptions = {\n        method: 'GET',\n        headers: requestHeaders,\n    };\n    const derivedNetwork = StacksNetwork.fromNameOrNetwork(network ?? deriveNetwork(transaction));\n    const url = derivedNetwork.getTransferFeeEstimateApiUrl();\n    const response = await derivedNetwork.fetchFn(url, fetchOptions);\n    if (!response.ok) {\n        const msg = await response.text().catch(() => '');\n        throw new Error(`Error estimating contract call fee. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`);\n    }\n    const feeRateResult = await response.text();\n    const txBytes = intToBigInt(transaction.serialize().byteLength, false);\n    const feeRate = intToBigInt(feeRateResult, false);\n    return feeRate * txBytes;\n}\nexport async function makeUnsignedContractCall(txOptions) {\n    const defaultOptions = {\n        fee: BigInt(0),\n        nonce: BigInt(0),\n        network: new StacksMainnet(),\n        postConditionMode: PostConditionMode.Deny,\n        sponsored: false,\n    };\n    const options = Object.assign(defaultOptions, txOptions);\n    const payload = createContractCallPayload(options.contractAddress, options.contractName, options.functionName, options.functionArgs);\n    if (options?.validateWithAbi) {\n        let abi;\n        if (typeof options.validateWithAbi === 'boolean') {\n            if (options?.network) {\n                abi = await getAbi(options.contractAddress, options.contractName, options.network);\n            }\n            else {\n                throw new Error('Network option must be provided in order to validate with ABI');\n            }\n        }\n        else {\n            abi = options.validateWithAbi;\n        }\n        validateContractCall(payload, abi);\n    }\n    let spendingCondition = null;\n    let authorization = null;\n    if ('publicKey' in options) {\n        spendingCondition = createSingleSigSpendingCondition(AddressHashMode.SerializeP2PKH, options.publicKey, options.nonce, options.fee);\n    }\n    else {\n        const hashMode = options.useNonSequentialMultiSig\n            ? AddressHashMode.SerializeP2SHNonSequential\n            : AddressHashMode.SerializeP2SH;\n        const publicKeys = options.address\n            ? sortPublicKeysForAddress(options.publicKeys, options.numSignatures, hashMode, createAddress(options.address).hash160)\n            : options.publicKeys;\n        spendingCondition = createMultiSigSpendingCondition(hashMode, options.numSignatures, publicKeys, options.nonce, options.fee);\n    }\n    if (options.sponsored) {\n        authorization = createSponsoredAuth(spendingCondition);\n    }\n    else {\n        authorization = createStandardAuth(spendingCondition);\n    }\n    const network = StacksNetwork.fromNameOrNetwork(options.network);\n    const postConditions = [];\n    if (options.postConditions && options.postConditions.length > 0) {\n        options.postConditions.forEach(postCondition => {\n            postConditions.push(postCondition);\n        });\n    }\n    const lpPostConditions = createLPList(postConditions);\n    const transaction = new StacksTransaction(network.version, authorization, payload, lpPostConditions, options.postConditionMode, options.anchorMode, network.chainId);\n    if (txOptions.fee === undefined || txOptions.fee === null) {\n        const fee = await estimateTransactionFeeWithFallback(transaction, network);\n        transaction.setFee(fee);\n    }\n    if (txOptions.nonce === undefined || txOptions.nonce === null) {\n        const addressVersion = network.version === TransactionVersion.Mainnet\n            ? AddressVersion.MainnetSingleSig\n            : AddressVersion.TestnetSingleSig;\n        const senderAddress = c32address(addressVersion, transaction.auth.spendingCondition.signer);\n        const txNonce = await getNonce(senderAddress, network);\n        transaction.setNonce(txNonce);\n    }\n    return transaction;\n}\nexport async function makeContractCall(txOptions) {\n    if ('senderKey' in txOptions) {\n        const publicKey = publicKeyToString(getPublicKey(createStacksPrivateKey(txOptions.senderKey)));\n        const options = omit(txOptions, 'senderKey');\n        const transaction = await makeUnsignedContractCall({ publicKey, ...options });\n        const privKey = createStacksPrivateKey(txOptions.senderKey);\n        const signer = new TransactionSigner(transaction);\n        signer.signOrigin(privKey);\n        return transaction;\n    }\n    else {\n        const options = omit(txOptions, 'signerKeys');\n        const transaction = await makeUnsignedContractCall(options);\n        mutatingSignAppendMultiSig(transaction, txOptions.publicKeys.slice(), txOptions.signerKeys, txOptions.address);\n        return transaction;\n    }\n}\nexport function makeStandardSTXPostCondition(address, conditionCode, amount) {\n    return createSTXPostCondition(createStandardPrincipal(address), conditionCode, amount);\n}\nexport function makeContractSTXPostCondition(address, contractName, conditionCode, amount) {\n    return createSTXPostCondition(createContractPrincipal(address, contractName), conditionCode, amount);\n}\nexport function makeStandardFungiblePostCondition(address, conditionCode, amount, assetInfo) {\n    return createFungiblePostCondition(createStandardPrincipal(address), conditionCode, amount, assetInfo);\n}\nexport function makeContractFungiblePostCondition(address, contractName, conditionCode, amount, assetInfo) {\n    return createFungiblePostCondition(createContractPrincipal(address, contractName), conditionCode, amount, assetInfo);\n}\nexport function makeStandardNonFungiblePostCondition(address, conditionCode, assetInfo, assetId) {\n    return createNonFungiblePostCondition(createStandardPrincipal(address), conditionCode, assetInfo, assetId);\n}\nexport function makeContractNonFungiblePostCondition(address, contractName, conditionCode, assetInfo, assetId) {\n    return createNonFungiblePostCondition(createContractPrincipal(address, contractName), conditionCode, assetInfo, assetId);\n}\nexport async function callReadOnlyFunction(readOnlyFunctionOptions) {\n    const defaultOptions = {\n        network: new StacksMainnet(),\n    };\n    const options = Object.assign(defaultOptions, readOnlyFunctionOptions);\n    const { contractName, contractAddress, functionName, functionArgs, senderAddress } = options;\n    const network = StacksNetwork.fromNameOrNetwork(options.network);\n    const url = network.getReadOnlyFunctionCallApiUrl(contractAddress, contractName, functionName);\n    const args = functionArgs.map(arg => cvToHex(arg));\n    const body = JSON.stringify({\n        sender: senderAddress,\n        arguments: args,\n    });\n    const response = await network.fetchFn(url, {\n        method: 'POST',\n        body,\n        headers: {\n            'Content-Type': 'application/json',\n        },\n    });\n    if (!response.ok) {\n        const msg = await response.text().catch(() => '');\n        throw new Error(`Error calling read-only function. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`);\n    }\n    return response.json().then(responseJson => parseReadOnlyResponse(responseJson));\n}\nexport async function getContractMapEntry(getContractMapEntryOptions) {\n    const defaultOptions = {\n        network: new StacksMainnet(),\n    };\n    const { contractAddress, contractName, mapName, mapKey, network } = Object.assign(defaultOptions, getContractMapEntryOptions);\n    const derivedNetwork = StacksNetwork.fromNameOrNetwork(network);\n    const url = derivedNetwork.getMapEntryUrl(contractAddress, contractName, mapName);\n    const serializedKeyBytes = serializeCV(mapKey);\n    const serializedKeyHex = '0x' + bytesToHex(serializedKeyBytes);\n    const fetchOptions = {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n        },\n        body: JSON.stringify(serializedKeyHex),\n    };\n    const response = await derivedNetwork.fetchFn(url, fetchOptions);\n    if (!response.ok) {\n        const msg = await response.text().catch(() => '');\n        throw new Error(`Error fetching map entry for map \"${mapName}\" in contract \"${contractName}\" at address ${contractAddress}, using map key \"${serializedKeyHex}\". Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`);\n    }\n    const responseBody = await response.text();\n    const responseJson = JSON.parse(responseBody);\n    if (!responseJson.data) {\n        throw new Error(`Error fetching map entry for map \"${mapName}\" in contract \"${contractName}\" at address ${contractAddress}, using map key \"${serializedKeyHex}\". Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the response: \"${responseBody}\"`);\n    }\n    let deserializedCv;\n    try {\n        deserializedCv = deserializeCV(responseJson.data);\n    }\n    catch (error) {\n        throw new Error(`Error deserializing Clarity value \"${responseJson.data}\": ${error}`);\n    }\n    return deserializedCv;\n}\nexport async function sponsorTransaction(sponsorOptions) {\n    const defaultOptions = {\n        fee: 0,\n        sponsorNonce: 0,\n        sponsorAddressHashmode: AddressHashMode.SerializeP2PKH,\n        network: sponsorOptions.transaction.version === TransactionVersion.Mainnet\n            ? new StacksMainnet()\n            : new StacksTestnet(),\n    };\n    const options = Object.assign(defaultOptions, sponsorOptions);\n    const network = StacksNetwork.fromNameOrNetwork(options.network);\n    const sponsorPubKey = pubKeyfromPrivKey(options.sponsorPrivateKey);\n    if (sponsorOptions.fee === undefined || sponsorOptions.fee === null) {\n        let txFee = 0;\n        switch (options.transaction.payload.payloadType) {\n            case PayloadType.TokenTransfer:\n            case PayloadType.SmartContract:\n            case PayloadType.VersionedSmartContract:\n            case PayloadType.ContractCall:\n                const estimatedLen = estimateTransactionByteLength(options.transaction);\n                try {\n                    txFee = (await estimateTransaction(options.transaction.payload, estimatedLen, network))[1]\n                        .fee;\n                }\n                catch (e) {\n                    throw e;\n                }\n                break;\n            default:\n                throw new Error(`Sponsored transactions not supported for transaction type ${PayloadType[options.transaction.payload.payloadType]}`);\n        }\n        options.transaction.setFee(txFee);\n        options.fee = txFee;\n    }\n    if (sponsorOptions.sponsorNonce === undefined || sponsorOptions.sponsorNonce === null) {\n        const addressVersion = network.version === TransactionVersion.Mainnet\n            ? AddressVersion.MainnetSingleSig\n            : AddressVersion.TestnetSingleSig;\n        const senderAddress = publicKeyToAddress(addressVersion, sponsorPubKey);\n        const sponsorNonce = await getNonce(senderAddress, network);\n        options.sponsorNonce = sponsorNonce;\n    }\n    const sponsorSpendingCondition = createSingleSigSpendingCondition(options.sponsorAddressHashmode, publicKeyToString(sponsorPubKey), options.sponsorNonce, options.fee);\n    options.transaction.setSponsor(sponsorSpendingCondition);\n    const privKey = createStacksPrivateKey(options.sponsorPrivateKey);\n    const signer = TransactionSigner.createSponsorSigner(options.transaction, sponsorSpendingCondition);\n    signer.signSponsor(privKey);\n    return signer.transaction;\n}\nexport function estimateTransactionByteLength(transaction) {\n    const hashMode = transaction.auth.spendingCondition.hashMode;\n    const multiSigHashModes = [AddressHashMode.SerializeP2SH, AddressHashMode.SerializeP2WSH];\n    if (multiSigHashModes.includes(hashMode)) {\n        const multiSigSpendingCondition = transaction.auth\n            .spendingCondition;\n        const existingSignatures = multiSigSpendingCondition.fields.filter(field => field.contents.type === StacksMessageType.MessageSignature).length;\n        const totalSignatureLength = (multiSigSpendingCondition.signaturesRequired - existingSignatures) *\n            (RECOVERABLE_ECDSA_SIG_LENGTH_BYTES + 1);\n        return transaction.serialize().byteLength + totalSignatureLength;\n    }\n    else {\n        return transaction.serialize().byteLength;\n    }\n}\nexport async function estimateTransactionFeeWithFallback(transaction, network) {\n    try {\n        const estimatedLen = estimateTransactionByteLength(transaction);\n        return (await estimateTransaction(transaction.payload, estimatedLen, network))[1].fee;\n    }\n    catch (error) {\n        if (error instanceof NoEstimateAvailableError) {\n            return await estimateTransferUnsafe(transaction, network);\n        }\n        throw error;\n    }\n}\nfunction mutatingSignAppendMultiSig(transaction, publicKeys, signerKeys, address) {\n    if (isSingleSig(transaction.auth.spendingCondition)) {\n        throw new Error('Transaction is not a multi-sig transaction');\n    }\n    const signer = new TransactionSigner(transaction);\n    const pubs = address\n        ? sortPublicKeysForAddress(publicKeys, transaction.auth.spendingCondition.signaturesRequired, transaction.auth.spendingCondition.hashMode, createAddress(address).hash160)\n        : publicKeys;\n    for (const publicKey of pubs) {\n        const signerKey = signerKeys.find(key => bytesToHex(pubKeyfromPrivKey(key).data) === publicKey);\n        if (signerKey) {\n            signer.signOrigin(createStacksPrivateKey(signerKey));\n        }\n        else {\n            signer.appendOrigin(publicKeyFromBytes(hexToBytes(publicKey)));\n        }\n    }\n}\nfunction sortPublicKeysForAddress(publicKeys, numSigs, hashMode, hash) {\n    const hashUnsorted = addressFromPublicKeys(0, hashMode, numSigs, publicKeys.map(createStacksPublicKey)).hash160;\n    if (hashUnsorted === hash)\n        return publicKeys;\n    const publicKeysSorted = publicKeys.slice().sort();\n    const hashSorted = addressFromPublicKeys(0, hashMode, numSigs, publicKeysSorted.map(createStacksPublicKey)).hash160;\n    if (hashSorted === hash)\n        return publicKeysSorted;\n    throw new Error('Failed to find matching multi-sig address given public-keys.');\n}\n//# sourceMappingURL=builders.js.map"],"file":"assets/stacks-3bcf8144.js"}