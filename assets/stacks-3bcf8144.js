import{g as _a,a as An,c as Gt}from"./vendor-39f54801.js";const ql="https://browser.blockstack.org/auth",Zl={"@type":"Person","@context":"http://schema.org"},Da=["store_write"],Ql="blockstack-session",Xl={network:{layer1:"placeholder"},logLevel:"debug"},tn={MISSING_PARAMETER:"missing_parameter",REMOTE_SERVICE_ERROR:"remote_service_error",INVALID_STATE:"invalid_state",NO_SESSION_DATA:"no_session_data",DOES_NOT_EXIST:"does_not_exist",FAILED_DECRYPTION_ERROR:"failed_decryption_error",INVALID_DID_ERROR:"invalid_did_error",NOT_ENOUGH_FUNDS_ERROR:"not_enough_error",INVALID_AMOUNT_ERROR:"invalid_amount_error",LOGIN_FAILED_ERROR:"login_failed",SIGNATURE_VERIFICATION_ERROR:"signature_verification_failure",CONFLICT_ERROR:"conflict_error",NOT_ENOUGH_PROOF_ERROR:"not_enough_proof_error",BAD_PATH_ERROR:"bad_path_error",VALIDATION_ERROR:"validation_error",PAYLOAD_TOO_LARGE_ERROR:"payload_too_large_error",PRECONDITION_FAILED_ERROR:"precondition_failed_error",UNKNOWN:"unknown"};Object.freeze(tn);let In=class extends Error{constructor(e){super();let n=e.message,r=`Error Code: ${e.code}`,s=this.stack;if(s)r+=`Stack Trace:
${s}`;else try{throw new Error}catch(i){s=i.stack}n+=`
If you believe this exception is caused by a bug in stacks.js,
      please file a bug report: https://github.com/blockstack/stacks.js/issues

${r}`,this.message=n,this.code=e.code,this.parameter=e.parameter?e.parameter:void 0}toString(){return`${super.toString()}
    code: ${this.code} param: ${this.parameter?this.parameter:"n/a"}`}};class Wl extends In{constructor(e,n=""){super({code:tn.MISSING_PARAMETER,message:n,parameter:e}),this.name="MissingParametersError"}}class Gi extends In{constructor(e=""){super({code:tn.INVALID_DID_ERROR,message:e}),this.name="InvalidDIDError"}}class Tn extends In{constructor(e){const n=`Failed to login: ${e}`;super({code:tn.LOGIN_FAILED_ERROR,message:n}),this.message=n,this.name="LoginFailedError"}}class is extends In{constructor(e){super({code:tn.INVALID_STATE,message:e}),this.message=e,this.name="InvalidStateError"}}class Oa extends In{constructor(e){super({code:tn.INVALID_STATE,message:e}),this.message=e,this.name="NoSessionDataError"}}const Yi=["debug","info","warn","error","none"],os={};for(let t=0;t<Yi.length;t++){const e=Yi[t];os[e]=t}class je{static error(e){this.shouldLog("error")&&console.error(this.logMessage("error",e))}static warn(e){this.shouldLog("warn")&&console.warn(this.logMessage("warn",e))}static info(e){this.shouldLog("info")&&console.log(this.logMessage("info",e))}static debug(e){this.shouldLog("debug")&&console.log(this.logMessage("debug",e))}static logMessage(e,n){return`[${e.toUpperCase()}] ${n}`}static shouldLog(e){return os[Xl.logLevel]<=os[e]}}function Jl(){return new Date(new Date().setMonth(new Date().getMonth()+1))}function tf(){return new Date(new Date().setHours(new Date().getHours()+1))}function Vr(t,e){(t===void 0||t==="")&&(t="0.0.0"),(e===void 0||t==="")&&(e="0.0.0");const n=t.split(".").map(s=>parseInt(s,10)),r=e.split(".").map(s=>parseInt(s,10));for(let s=0;s<e.length;s++)if(s>=t.length&&r.push(0),n[s]<r[s])return!1;return!0}function ef(){let t=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(e==="x"?n:n&3|8).toString(16)})}function nf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unexpected runtime environment - no supported globalThis scope (`window`, `self`, `globalThis`) available")}function rf(t,e,n){return n?`Use of '${n}' requires \`${e}\` which is unavailable on the '${t}' object within the currently executing environment.`:`\`${e}\` is unavailable on the '${t}' object within the currently executing environment.`}function ks(t,{throwIfUnavailable:e,usageDesc:n,returnEmptyObject:r}={}){let s;try{if(s=nf(),s){const i=s[t];if(i)return i}}catch(i){je.error(`Error getting object '${t}' from globalThis scope '${s}': ${i}`)}if(e){const i=rf(s,t.toString(),n);throw je.error(i),new Error(i)}if(r)return{}}function sf(t){return/^0x/i.test(t)?t.slice(2):t}Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function of(t){if(typeof t!="string")throw new TypeError(`hexToBytes: expected string, got ${typeof t}`);t=sf(t),t=t.length%2?`0${t}`:t;const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=n*2,s=t.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[n]=i}return e}function af(t){return new TextDecoder().decode(t)}const cf="https://hub.blockstack.org",uf={referrerPolicy:"origin",headers:{"x-hiro-product":"stacksjs"}};async function lf(t,e){const n={};return Object.assign(n,uf,e),await fetch(t,n)}function ff(t){let e=lf,n=[];return t.length>0&&typeof t[0]=="function"&&(e=t.shift()),t.length>0&&(n=t),{fetchLib:e,middlewares:n}}function hf(...t){const{fetchLib:e,middlewares:n}=ff(t);return async(s,i)=>{let o={url:s,init:i??{}};for(const u of n)typeof u.pre=="function"&&(o=await Promise.resolve(u.pre({fetch:e,...o}))??o);let a=await e(o.url,o.init);for(const u of n)typeof u.post=="function"&&(a=await Promise.resolve(u.post({fetch:e,url:o.url,init:o.init,response:(a==null?void 0:a.clone())??a}))??a);return a}}class Hs{constructor(e=Da.slice(),n=(a=>(a=ks("location",{returnEmptyObject:!0}))==null?void 0:a.origin)(),r="",s="/manifest.json",i=void 0,o=ql){this.appDomain=n,this.scopes=e,this.redirectPath=r,this.manifestPath=s,this.coreNode=i,this.authenticatorURL=o}redirectURI(){return`${this.appDomain}${this.redirectPath}`}manifestURI(){return`${this.appDomain}${this.manifestPath}`}}function as(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function df(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function Ua(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function gf(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");as(t.outputLen),as(t.blockLen)}function pf(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function yf(t,e){Ua(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const we={number:as,bool:df,bytes:Ua,hash:gf,exists:pf,output:yf},wf={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Sf=Object.freeze(Object.defineProperty({__proto__:null,crypto:wf},Symbol.toStringTag,{value:"Module"}));/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gr=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Bt=(t,e)=>t<<32-e|t>>>e,bf=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!bf)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function mf(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function Fs(t){if(typeof t=="string"&&(t=mf(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}class Ta{clone(){return this._cloneInto()}}function Be(t){const e=r=>t().update(Fs(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}class Pa extends Ta{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,we.hash(e);const r=Fs(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return we.exists(this),this.iHash.update(e),this}digestInto(e){we.exists(this),we.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const _e=(t,e,n)=>new Pa(t,e).update(n).digest();_e.create=(t,e)=>new Pa(t,e);const Ef=Object.freeze(Object.defineProperty({__proto__:null,hmac:_e},Symbol.toStringTag,{value:"Module"}));function Af(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),u=r?4:0,l=r?0:4;t.setUint32(e+u,o,r),t.setUint32(e+l,a,r)}class zs extends Ta{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Gr(this.buffer)}update(e){we.exists(this);const{view:n,buffer:r,blockLen:s}=this;e=Fs(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const u=Gr(e);for(;s<=i-o;o+=s)this.process(u,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){we.exists(this),we.output(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let h=o;h<s;h++)n[h]=0;Af(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Gr(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,f=this.get();if(l>f.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,f[h],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const If=(t,e,n)=>t&e^~t&n,vf=(t,e,n)=>t&e^t&n^e&n,xf=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Jt=new Uint32Array(64);class ja extends zs{constructor(){super(64,32,8,!1),this.A=Wt[0]|0,this.B=Wt[1]|0,this.C=Wt[2]|0,this.D=Wt[3]|0,this.E=Wt[4]|0,this.F=Wt[5]|0,this.G=Wt[6]|0,this.H=Wt[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:u}=this;return[e,n,r,s,i,o,a,u]}set(e,n,r,s,i,o,a,u){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,n){for(let h=0;h<16;h++,n+=4)Jt[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const y=Jt[h-15],p=Jt[h-2],b=Bt(y,7)^Bt(y,18)^y>>>3,m=Bt(p,17)^Bt(p,19)^p>>>10;Jt[h]=m+Jt[h-7]+b+Jt[h-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:u,G:l,H:f}=this;for(let h=0;h<64;h++){const y=Bt(a,6)^Bt(a,11)^Bt(a,25),p=f+y+If(a,u,l)+xf[h]+Jt[h]|0,m=(Bt(r,2)^Bt(r,13)^Bt(r,22))+vf(r,s,i)|0;f=l,l=u,u=a,a=o+p|0,o=i,i=s,s=r,r=p+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,l=l+this.G|0,f=f+this.H|0,this.set(r,s,i,o,a,u,l,f)}roundClean(){Jt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Mf extends ja{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Et=Be(()=>new ja),$f=Be(()=>new Mf),Nf=Object.freeze(Object.defineProperty({__proto__:null,sha224:$f,sha256:Et},Symbol.toStringTag,{value:"Module"})),Lf={},ka=Object.freeze(Object.defineProperty({__proto__:null,default:Lf},Symbol.toStringTag,{value:"Module"}));/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const j=BigInt(0),Z=BigInt(1),se=BigInt(2),dn=BigInt(3),qi=BigInt(8),z=Object.freeze({a:j,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Z,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),Zi=(t,e)=>(t+e/se)/e,Pn={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){const{n:e}=z,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Z*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Zi(i*t,e),u=Zi(-r*t,e);let l=I(t-a*n-u*s,e),f=I(-a*r-u*i,e);const h=l>o,y=f>o;if(h&&(l=e-l),y&&(f=e-f),l>o||f>o)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:h,k1:l,k2neg:y,k2:f}}},$t=32,Ee=32,Ha=32,Jn=$t+1,tr=2*$t+1;function Qi(t){const{a:e,b:n}=z,r=I(t*t),s=I(r*t);return I(s+e*t+n)}const jn=z.a===j;class Rs extends Error{constructor(e){super(e)}}function Xi(t){if(!(t instanceof H))throw new TypeError("JacobianPoint expected")}class H{constructor(e,n,r){this.x=e,this.y=n,this.z=r}static fromAffine(e){if(!(e instanceof U))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(U.ZERO)?H.ZERO:new H(e.x,e.y,Z)}static toAffineBatch(e){const n=Of(e.map(r=>r.z));return e.map((r,s)=>r.toAffine(n[s]))}static normalizeZ(e){return H.toAffineBatch(e).map(H.fromAffine)}equals(e){Xi(e);const{x:n,y:r,z:s}=this,{x:i,y:o,z:a}=e,u=I(s*s),l=I(a*a),f=I(n*l),h=I(i*u),y=I(I(r*a)*l),p=I(I(o*s)*u);return f===h&&y===p}negate(){return new H(this.x,I(-this.y),this.z)}double(){const{x:e,y:n,z:r}=this,s=I(e*e),i=I(n*n),o=I(i*i),a=e+i,u=I(se*(I(a*a)-s-o)),l=I(dn*s),f=I(l*l),h=I(f-se*u),y=I(l*(u-h)-qi*o),p=I(se*n*r);return new H(h,y,p)}add(e){Xi(e);const{x:n,y:r,z:s}=this,{x:i,y:o,z:a}=e;if(i===j||o===j)return this;if(n===j||r===j)return e;const u=I(s*s),l=I(a*a),f=I(n*l),h=I(i*u),y=I(I(r*a)*l),p=I(I(o*s)*u),b=I(h-f),m=I(p-y);if(b===j)return m===j?this.double():H.ZERO;const x=I(b*b),B=I(b*x),_=I(f*x),N=I(m*m-B-se*_),S=I(m*(_-N)-y*B),A=I(s*a*b);return new H(N,S,A)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const n=H.ZERO;if(typeof e=="bigint"&&e===j)return n;let r=to(e);if(r===Z)return this;if(!jn){let h=n,y=this;for(;r>j;)r&Z&&(h=h.add(y)),y=y.double(),r>>=Z;return h}let{k1neg:s,k1:i,k2neg:o,k2:a}=Pn.splitScalar(r),u=n,l=n,f=this;for(;i>j||a>j;)i&Z&&(u=u.add(f)),a&Z&&(l=l.add(f)),f=f.double(),i>>=Z,a>>=Z;return s&&(u=u.negate()),o&&(l=l.negate()),l=new H(I(l.x*Pn.beta),l.y,l.z),u.add(l)}precomputeWindow(e){const n=jn?128/e+1:256/e+1,r=[];let s=this,i=s;for(let o=0;o<n;o++){i=s,r.push(i);for(let a=1;a<2**(e-1);a++)i=i.add(s),r.push(i);s=i.double()}return r}wNAF(e,n){!n&&this.equals(H.BASE)&&(n=U.BASE);const r=n&&n._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let s=n&&cs.get(n);s||(s=this.precomputeWindow(r),n&&r!==1&&(s=H.normalizeZ(s),cs.set(n,s)));let i=H.ZERO,o=H.BASE;const a=1+(jn?128/r:256/r),u=2**(r-1),l=BigInt(2**r-1),f=2**r,h=BigInt(r);for(let y=0;y<a;y++){const p=y*u;let b=Number(e&l);e>>=h,b>u&&(b-=f,e+=Z);const m=p,x=p+Math.abs(b)-1,B=y%2!==0,_=b<0;b===0?o=o.add(kn(B,s[m])):i=i.add(kn(_,s[x]))}return{p:i,f:o}}multiply(e,n){let r=to(e),s,i;if(jn){const{k1neg:o,k1:a,k2neg:u,k2:l}=Pn.splitScalar(r);let{p:f,f:h}=this.wNAF(a,n),{p:y,f:p}=this.wNAF(l,n);f=kn(o,f),y=kn(u,y),y=new H(I(y.x*Pn.beta),y.y,y.z),s=f.add(y),i=h.add(p)}else{const{p:o,f:a}=this.wNAF(r,n);s=o,i=a}return H.normalizeZ([s,i])[0]}toAffine(e){const{x:n,y:r,z:s}=this,i=this.equals(H.ZERO);e==null&&(e=i?qi:en(s));const o=e,a=I(o*o),u=I(a*o),l=I(n*a),f=I(r*u),h=I(s*o);if(i)return U.ZERO;if(h!==Z)throw new Error("invZ was invalid");return new U(l,f)}}H.BASE=new H(z.Gx,z.Gy,Z);H.ZERO=new H(j,Z,j);function kn(t,e){const n=e.negate();return t?n:e}const cs=new WeakMap;class U{constructor(e,n){this.x=e,this.y=n}_setWindowSize(e){this._WINDOW_SIZE=e,cs.delete(this)}hasEvenY(){return this.y%se===j}static fromCompressedHex(e){const n=e.length===32,r=pt(n?e:e.subarray(1));if(!qn(r))throw new Error("Point is not on curve");const s=Qi(r);let i=Df(s);const o=(i&Z)===Z;n?o&&(i=I(-i)):(e[0]&1)===1!==o&&(i=I(-i));const a=new U(r,i);return a.assertValidity(),a}static fromUncompressedHex(e){const n=pt(e.subarray(1,$t+1)),r=pt(e.subarray($t+1,$t*2+1)),s=new U(n,r);return s.assertValidity(),s}static fromHex(e){const n=Pt(e),r=n.length,s=n[0];if(r===$t)return this.fromCompressedHex(n);if(r===Jn&&(s===2||s===3))return this.fromCompressedHex(n);if(r===tr&&s===4)return this.fromUncompressedHex(n);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Jn} compressed bytes or ${tr} uncompressed bytes, not ${r}`)}static fromPrivateKey(e){return U.BASE.multiply(Ae(e))}static fromSignature(e,n,r){const{r:s,s:i}=Ra(n);if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");const o=Ks(Pt(e)),{n:a}=z,u=r===2||r===3?s+a:s,l=en(u,a),f=I(-o*l,a),h=I(i*l,a),y=r&1?"03":"02",p=U.fromHex(y+ie(u)),b=U.BASE.multiplyAndAddUnsafe(p,f,h);if(!b)throw new Error("Cannot recover signature: point at infinify");return b.assertValidity(),b}toRawBytes(e=!1){return oe(this.toHex(e))}toHex(e=!1){const n=ie(this.x);return e?`${this.hasEvenY()?"02":"03"}${n}`:`04${n}${ie(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:n,y:r}=this;if(!qn(n)||!qn(r))throw new Error(e);const s=I(r*r),i=Qi(n);if(I(s-i)!==j)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new U(this.x,I(-this.y))}double(){return H.fromAffine(this).double().toAffine()}add(e){return H.fromAffine(this).add(H.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return H.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,n,r){const s=H.fromAffine(this),i=n===j||n===Z||this!==U.BASE?s.multiplyUnsafe(n):s.multiply(n),o=H.fromAffine(e).multiplyUnsafe(r),a=i.add(o);return a.equals(H.ZERO)?void 0:a.toAffine()}}U.BASE=new U(z.Gx,z.Gy);U.ZERO=new U(j,j);function Wi(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function Ji(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${Re(t)}`);const e=t[1],n=t.subarray(2,e+2);if(!e||n.length!==e)throw new Error("Invalid signature integer: wrong length");if(n[0]===0&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:pt(n),left:t.subarray(e+2)}}function Cf(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${Re(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:n}=Ji(t.subarray(2)),{data:r,left:s}=Ji(n);if(s.length)throw new Error(`Invalid signature: left bytes after parsing: ${Re(s)}`);return{r:e,s:r}}class Nt{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromCompact(e){const n=e instanceof Uint8Array,r="Signature.fromCompact";if(typeof e!="string"&&!n)throw new TypeError(`${r}: Expected string or Uint8Array`);const s=n?Re(e):e;if(s.length!==128)throw new Error(`${r}: Expected 64-byte hex`);return new Nt(er(s.slice(0,64)),er(s.slice(64,128)))}static fromDER(e){const n=e instanceof Uint8Array;if(typeof e!="string"&&!n)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r,s}=Cf(n?e:oe(e));return new Nt(r,s)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:n}=this;if(!Ve(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Ve(n))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=z.n>>Z;return this.s>e}normalizeS(){return this.hasHighS()?new Nt(this.r,I(-this.s,z.n)):this}toDERRawBytes(){return oe(this.toDERHex())}toDERHex(){const e=Wi(fn(this.s)),n=Wi(fn(this.r)),r=e.length/2,s=n.length/2,i=fn(r),o=fn(s);return`30${fn(s+r+4)}02${o}${n}02${i}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return oe(this.toCompactHex())}toCompactHex(){return ie(this.r)+ie(this.s)}}function re(...t){if(!t.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const e=t.reduce((r,s)=>r+s.length,0),n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Bf=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Re(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let n=0;n<t.length;n++)e+=Bf[t[n]];return e}const _f=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function ie(t){if(typeof t!="bigint")throw new Error("Expected bigint");if(!(j<=t&&t<_f))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function Ke(t){const e=oe(ie(t));if(e.length!==32)throw new Error("Error: expected 32 bytes");return e}function fn(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function er(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function oe(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=n*2,s=t.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[n]=i}return e}function pt(t){return er(Re(t))}function Pt(t){return t instanceof Uint8Array?Uint8Array.from(t):oe(t)}function to(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&Ve(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function I(t,e=z.P){const n=t%e;return n>=j?n:e+n}function St(t,e){const{P:n}=z;let r=t;for(;e-- >j;)r*=r,r%=n;return r}function Df(t){const{P:e}=z,n=BigInt(6),r=BigInt(11),s=BigInt(22),i=BigInt(23),o=BigInt(44),a=BigInt(88),u=t*t*t%e,l=u*u*t%e,f=St(l,dn)*l%e,h=St(f,dn)*l%e,y=St(h,se)*u%e,p=St(y,r)*y%e,b=St(p,s)*p%e,m=St(b,o)*b%e,x=St(m,a)*m%e,B=St(x,o)*b%e,_=St(B,dn)*l%e,N=St(_,i)*p%e,S=St(N,n)*u%e,A=St(S,se);if(A*A%e!==t)throw new Error("Cannot find square root");return A}function en(t,e=z.P){if(t===j||e<=j)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=I(t,e),r=e,s=j,i=Z;for(;n!==j;){const a=r/n,u=r%n,l=s-i*a;r=n,n=u,s=i,i=l}if(r!==Z)throw new Error("invert: does not exist");return I(s,e)}function Of(t,e=z.P){const n=new Array(t.length),r=t.reduce((i,o,a)=>o===j?i:(n[a]=i,I(i*o,e)),Z),s=en(r,e);return t.reduceRight((i,o,a)=>o===j?i:(n[a]=I(i*n[a],e),I(i*o,e)),s),n}function Uf(t){const e=t.length*8-Ee*8,n=pt(t);return e>0?n>>BigInt(e):n}function Ks(t,e=!1){const n=Uf(t);if(e)return n;const{n:r}=z;return n>=r?n-r:n}let ze,gn;class Fa{constructor(e,n){if(this.hashLen=e,this.qByteLen=n,typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof n!="number"||n<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return W.hmacSha256(this.k,...e)}hmacSync(...e){return gn(this.k,...e)}checkSync(){if(typeof gn!="function")throw new Rs("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const r=this.v.slice();n.push(r),e+=this.v.length}return re(...n)}generateSync(){this.checkSync(),this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const r=this.v.slice();n.push(r),e+=this.v.length}return re(...n)}}function Ve(t){return j<t&&t<z.n}function qn(t){return j<t&&t<z.P}function za(t,e,n,r=!0){const{n:s}=z,i=Ks(t,!0);if(!Ve(i))return;const o=en(i,s),a=U.BASE.multiply(i),u=I(a.x,s);if(u===j)return;const l=I(o*I(e+n*u,s),s);if(l===j)return;let f=new Nt(u,l),h=(a.x===f.r?0:2)|Number(a.y&Z);return r&&f.hasHighS()&&(f=f.normalizeS(),h^=1),{sig:f,recovery:h}}function Ae(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==2*Ee)throw new Error("Expected 32 bytes of private key");e=er(t)}else if(t instanceof Uint8Array){if(t.length!==Ee)throw new Error("Expected 32 bytes of private key");e=pt(t)}else throw new TypeError("Expected valid private key");if(!Ve(e))throw new Error("Expected private key: 0 < key < n");return e}function Vs(t){return t instanceof U?(t.assertValidity(),t):U.fromHex(t)}function Ra(t){if(t instanceof Nt)return t.assertValidity(),t;try{return Nt.fromDER(t)}catch{return Nt.fromCompact(t)}}function Sr(t,e=!1){return U.fromPrivateKey(t).toRawBytes(e)}function Tf(t,e,n,r=!1){return U.fromSignature(t,e,n).toRawBytes(r)}function eo(t){const e=t instanceof Uint8Array,n=typeof t=="string",r=(e||n)&&t.length;return e?r===Jn||r===tr:n?r===Jn*2||r===tr*2:t instanceof U}function Gs(t,e,n=!1){if(eo(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!eo(e))throw new TypeError("getSharedSecret: second arg must be public key");const r=Vs(e);return r.assertValidity(),r.multiply(Ae(t)).toRawBytes(n)}function Ka(t){const e=t.length>$t?t.slice(0,$t):t;return pt(e)}function Pf(t){const e=Ka(t),n=I(e,z.n);return Va(n<j?e:n)}function Va(t){return Ke(t)}function Ga(t,e,n){if(t==null)throw new Error(`sign: expected valid message hash, not "${t}"`);const r=Pt(t),s=Ae(e),i=[Va(s),Pf(r)];if(n!=null){n===!0&&(n=W.randomBytes($t));const u=Pt(n);if(u.length!==$t)throw new Error(`sign: Expected ${$t} bytes of extra data`);i.push(u)}const o=re(...i),a=Ka(r);return{seed:o,m:a,d:s}}function Ya(t,e){const{sig:n,recovery:r}=t,{der:s,recovered:i}=Object.assign({canonical:!0,der:!0},e),o=s?n.toDERRawBytes():n.toCompactRawBytes();return i?[o,r]:o}async function jf(t,e,n={}){const{seed:r,m:s,d:i}=Ga(t,e,n.extraEntropy),o=new Fa(Ha,Ee);await o.reseed(r);let a;for(;!(a=za(await o.generate(),s,i,n.canonical));)await o.reseed();return Ya(a,n)}function Ys(t,e,n={}){const{seed:r,m:s,d:i}=Ga(t,e,n.extraEntropy),o=new Fa(Ha,Ee);o.reseedSync(r);let a;for(;!(a=za(o.generateSync(),s,i,n.canonical));)o.reseedSync();return Ya(a,n)}const kf={strict:!0};function Hf(t,e,n,r=kf){let s;try{s=Ra(t),e=Pt(e)}catch{return!1}const{r:i,s:o}=s;if(r.strict&&s.hasHighS())return!1;const a=Ks(e);let u;try{u=Vs(n)}catch{return!1}const{n:l}=z,f=en(o,l),h=I(a*f,l),y=I(i*f,l),p=U.BASE.multiplyAndAddUnsafe(u,h,y);return p?I(p.x,l)===i:!1}function nr(t){return I(pt(t),z.n)}class Ge{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromHex(e){const n=Pt(e);if(n.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${n.length}`);const r=pt(n.subarray(0,32)),s=pt(n.subarray(32,64));return new Ge(r,s)}assertValidity(){const{r:e,s:n}=this;if(!qn(e)||!Ve(n))throw new Error("Invalid signature")}toHex(){return ie(this.r)+ie(this.s)}toRawBytes(){return oe(this.toHex())}}function Ff(t){return U.fromPrivateKey(t).toRawX()}class qa{constructor(e,n,r=W.randomBytes()){if(e==null)throw new TypeError(`sign: Expected valid message, not "${e}"`);this.m=Pt(e);const{x:s,scalar:i}=this.getScalar(Ae(n));if(this.px=s,this.d=i,this.rand=Pt(r),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(e){const n=U.fromPrivateKey(e),r=n.hasEvenY()?e:z.n-e;return{point:n,scalar:r,x:n.toRawX()}}initNonce(e,n){return Ke(e^pt(n))}finalizeNonce(e){const n=I(pt(e),z.n);if(n===j)throw new Error("sign: Creation of signature failed. k is zero");const{point:r,x:s,scalar:i}=this.getScalar(n);return{R:r,rx:s,k:i}}finalizeSig(e,n,r,s){return new Ge(e.x,I(n+r*s,z.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m:e,d:n,px:r,rand:s}=this,i=W.taggedHash,o=this.initNonce(n,await i(ne.aux,s)),{R:a,rx:u,k:l}=this.finalizeNonce(await i(ne.nonce,o,r,e)),f=nr(await i(ne.challenge,u,r,e)),h=this.finalizeSig(a,l,f,n);return await Xa(h,e,r)||this.error(),h}calcSync(){const{m:e,d:n,px:r,rand:s}=this,i=W.taggedHashSync,o=this.initNonce(n,i(ne.aux,s)),{R:a,rx:u,k:l}=this.finalizeNonce(i(ne.nonce,o,r,e)),f=nr(i(ne.challenge,u,r,e)),h=this.finalizeSig(a,l,f,n);return Wa(h,e,r)||this.error(),h}}async function zf(t,e,n){return new qa(t,e,n).calc()}function Rf(t,e,n){return new qa(t,e,n).calcSync()}function Za(t,e,n){const r=t instanceof Ge,s=r?t:Ge.fromHex(t);return r&&s.assertValidity(),{...s,m:Pt(e),P:Vs(n)}}function Qa(t,e,n,r){const s=U.BASE.multiplyAndAddUnsafe(e,Ae(n),I(-r,z.n));return!(!s||!s.hasEvenY()||s.x!==t)}async function Xa(t,e,n){try{const{r,s,m:i,P:o}=Za(t,e,n),a=nr(await W.taggedHash(ne.challenge,Ke(r),o.toRawX(),i));return Qa(r,o,s,a)}catch{return!1}}function Wa(t,e,n){try{const{r,s,m:i,P:o}=Za(t,e,n),a=nr(W.taggedHashSync(ne.challenge,Ke(r),o.toRawX(),i));return Qa(r,o,s,a)}catch(r){if(r instanceof Rs)throw r;return!1}}const Kf={Signature:Ge,getPublicKey:Ff,sign:zf,verify:Xa,signSync:Rf,verifySync:Wa};U.BASE._setWindowSize(8);const ft={node:ka,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},ne={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},Hn={},W={bytesToHex:Re,hexToBytes:oe,concatBytes:re,mod:I,invert:en,isValidPrivateKey(t){try{return Ae(t),!0}catch{return!1}},_bigintTo32Bytes:Ke,_normalizePrivateKey:Ae,hashToPrivateKey:t=>{t=Pt(t);const e=Ee+8;if(t.length<e||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const n=I(pt(t),z.n-Z)+Z;return Ke(n)},randomBytes:(t=32)=>{if(ft.web)return ft.web.getRandomValues(new Uint8Array(t));if(ft.node){const{randomBytes:e}=ft.node;return Uint8Array.from(e(t))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>W.hashToPrivateKey(W.randomBytes(Ee+8)),precompute(t=8,e=U.BASE){const n=e===U.BASE?e:new U(e.x,e.y);return n._setWindowSize(t),n.multiply(dn),n},sha256:async(...t)=>{if(ft.web){const e=await ft.web.subtle.digest("SHA-256",re(...t));return new Uint8Array(e)}else if(ft.node){const{createHash:e}=ft.node,n=e("sha256");return t.forEach(r=>n.update(r)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(ft.web){const n=await ft.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=re(...e),s=await ft.web.subtle.sign("HMAC",n,r);return new Uint8Array(s)}else if(ft.node){const{createHmac:n}=ft.node,r=n("sha256",t);return e.forEach(s=>r.update(s)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let n=Hn[t];if(n===void 0){const r=await W.sha256(Uint8Array.from(t,s=>s.charCodeAt(0)));n=re(r,r),Hn[t]=n}return W.sha256(n,...e)},taggedHashSync:(t,...e)=>{if(typeof ze!="function")throw new Rs("sha256Sync is undefined, you need to set it");let n=Hn[t];if(n===void 0){const r=ze(Uint8Array.from(t,s=>s.charCodeAt(0)));n=re(r,r),Hn[t]=n}return ze(n,...e)},_JacobianPoint:H};Object.defineProperties(W,{sha256Sync:{configurable:!1,get(){return ze},set(t){ze||(ze=t)}},hmacSha256Sync:{configurable:!1,get(){return gn},set(t){gn||(gn=t)}}});const Vf=Object.freeze(Object.defineProperty({__proto__:null,CURVE:z,Point:U,Signature:Nt,getPublicKey:Sr,getSharedSecret:Gs,recoverPublicKey:Tf,schnorr:Kf,sign:jf,signSync:Ys,utils:W,verify:Hf},Symbol.toStringTag,{value:"Module"})),Ja={MISSING_PARAMETER:"missing_parameter",REMOTE_SERVICE_ERROR:"remote_service_error",INVALID_STATE:"invalid_state",NO_SESSION_DATA:"no_session_data",DOES_NOT_EXIST:"does_not_exist",FAILED_DECRYPTION_ERROR:"failed_decryption_error",INVALID_DID_ERROR:"invalid_did_error",NOT_ENOUGH_FUNDS_ERROR:"not_enough_error",INVALID_AMOUNT_ERROR:"invalid_amount_error",LOGIN_FAILED_ERROR:"login_failed",SIGNATURE_VERIFICATION_ERROR:"signature_verification_failure",CONFLICT_ERROR:"conflict_error",NOT_ENOUGH_PROOF_ERROR:"not_enough_proof_error",BAD_PATH_ERROR:"bad_path_error",VALIDATION_ERROR:"validation_error",PAYLOAD_TOO_LARGE_ERROR:"payload_too_large_error",PRECONDITION_FAILED_ERROR:"precondition_failed_error",UNKNOWN:"unknown"};Object.freeze(Ja);class Gf extends Error{constructor(e){super();let n=e.message,r=`Error Code: ${e.code}`,s=this.stack;if(s)r+=`Stack Trace:
${s}`;else try{throw new Error}catch(i){s=i.stack}n+=`
If you believe this exception is caused by a bug in stacks.js,
      please file a bug report: https://github.com/blockstack/stacks.js/issues

${r}`,this.message=n,this.code=e.code,this.parameter=e.parameter?e.parameter:void 0}toString(){return`${super.toString()}
    code: ${this.code} param: ${this.parameter?this.parameter:"n/a"}`}}class no extends Gf{constructor(e="Unable to decrypt cipher object."){super({code:Ja.FAILED_DECRYPTION_ERROR,message:e}),this.message=e,this.name="FailedDecryptionError"}}function Yf(t){return/^0x/i.test(t)?t.slice(2):t}const qf=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Se(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(const n of t)e+=qf[n];return e}function ke(t){if(typeof t!="string")throw new TypeError(`hexToBytes: expected string, got ${typeof t}`);t=Yf(t),t=t.length%2?`0${t}`:t;const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=n*2,s=t.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[n]=i}return e}function tc(t){return new TextEncoder().encode(t)}function Zf(t){return new TextDecoder().decode(t)}function Ye(...t){if(!t.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const e=t.reduce((r,s)=>r+s.length,0),n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function Qf(t){const e=typeof t=="string"?ke(t):t;if(e.length!=32&&e.length!=33)throw new Error(`Improperly formatted private-key. Private-key byte length should be 32 or 33. Length provided: ${e.length}`);if(e.length==33&&e[32]!==1)throw new Error("Improperly formatted private-key. 33 bytes indicate compressed key, but the last byte must be == 01");return e}var vn={};vn.byteLength=eh;var Xf=vn.toByteArray=rh,Wf=vn.fromByteArray=oh,_t=[],bt=[],Jf=typeof Uint8Array<"u"?Uint8Array:Array,Yr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Pe=0,th=Yr.length;Pe<th;++Pe)_t[Pe]=Yr[Pe],bt[Yr.charCodeAt(Pe)]=Pe;bt["-".charCodeAt(0)]=62;bt["_".charCodeAt(0)]=63;function ec(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function eh(t){var e=ec(t),n=e[0],r=e[1];return(n+r)*3/4-r}function nh(t,e,n){return(e+n)*3/4-n}function rh(t){var e,n=ec(t),r=n[0],s=n[1],i=new Jf(nh(t,r,s)),o=0,a=s>0?r-4:r,u;for(u=0;u<a;u+=4)e=bt[t.charCodeAt(u)]<<18|bt[t.charCodeAt(u+1)]<<12|bt[t.charCodeAt(u+2)]<<6|bt[t.charCodeAt(u+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=bt[t.charCodeAt(u)]<<2|bt[t.charCodeAt(u+1)]>>4,i[o++]=e&255),s===1&&(e=bt[t.charCodeAt(u)]<<10|bt[t.charCodeAt(u+1)]<<4|bt[t.charCodeAt(u+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function sh(t){return _t[t>>18&63]+_t[t>>12&63]+_t[t>>6&63]+_t[t&63]}function ih(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(sh(r));return s.join("")}function oh(t){for(var e,n=t.length,r=n%3,s=[],i=16383,o=0,a=n-r;o<a;o+=i)s.push(ih(t,o,o+i>a?a:o+i));return r===1?(e=t[n-1],s.push(_t[e>>2]+_t[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(_t[e>>10]+_t[e>>4&63]+_t[e<<2&63]+"=")),s.join("")}function ah(){return typeof crypto<"u"&&typeof crypto.subtle<"u"}const ch='Crypto lib not found. Either the WebCrypto "crypto.subtle" or Node.js "crypto" module must be available.';async function uh(){if(ah())return{lib:crypto.subtle,name:"subtleCrypto"};try{return{lib:require("crypto"),name:"nodeCrypto"}}catch{throw new Error(ch)}}class lh{constructor(e,n){this.createCipher=e,this.createDecipher=n}async encrypt(e,n,r,s){if(e!=="aes-128-cbc"&&e!=="aes-256-cbc")throw new Error(`Unsupported cipher algorithm "${e}"`);const i=this.createCipher(e,n,r),o=new Uint8Array(Ye(i.update(s),i.final()));return Promise.resolve(o)}async decrypt(e,n,r,s){if(e!=="aes-128-cbc"&&e!=="aes-256-cbc")throw new Error(`Unsupported cipher algorithm "${e}"`);const i=this.createDecipher(e,n,r),o=new Uint8Array(Ye(i.update(s),i.final()));return Promise.resolve(o)}}class fh{constructor(e){this.subtleCrypto=e}async encrypt(e,n,r,s){let i,o;if(e==="aes-128-cbc")i="AES-CBC",o=128;else if(e==="aes-256-cbc")i="AES-CBC",o=256;else throw new Error(`Unsupported cipher algorithm "${e}"`);const a=await this.subtleCrypto.importKey("raw",n,{name:i,length:o},!1,["encrypt"]),u=await this.subtleCrypto.encrypt({name:i,iv:r},a,s);return new Uint8Array(u)}async decrypt(e,n,r,s){let i,o;if(e==="aes-128-cbc")i="AES-CBC",o=128;else if(e==="aes-256-cbc")i="AES-CBC",o=256;else throw new Error(`Unsupported cipher algorithm "${e}"`);const a=await this.subtleCrypto.importKey("raw",n,{name:i,length:o},!1,["decrypt"]),u=await this.subtleCrypto.decrypt({name:i,iv:r},a,s);return new Uint8Array(u)}}async function nc(){const t=await uh();return t.name==="subtleCrypto"?new fh(t.lib):new lh(t.lib.createCipheriv,t.lib.createDecipheriv)}function hh(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var s=t.charAt(r),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=r}var o=t.length,a=t.charAt(0),u=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function f(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var b=0,m=0,x=0,B=p.length;x!==B&&p[x]===0;)x++,b++;for(var _=(B-x)*l+1>>>0,N=new Uint8Array(_);x!==B;){for(var S=p[x],A=0,$=_-1;(S!==0||A<m)&&$!==-1;$--,A++)S+=256*N[$]>>>0,N[$]=S%o>>>0,S=S/o>>>0;if(S!==0)throw new Error("Non-zero carry");m=A,x++}for(var C=_-m;C!==_&&N[C]===0;)C++;for(var T=a.repeat(b);C<_;++C)T+=t.charAt(N[C]);return T}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;for(var b=0,m=0,x=0;p[b]===a;)m++,b++;for(var B=(p.length-b)*u+1>>>0,_=new Uint8Array(B);p[b];){var N=p.charCodeAt(b);if(N>255)return;var S=e[N];if(S===255)return;for(var A=0,$=B-1;(S!==0||A<x)&&$!==-1;$--,A++)S+=o*_[$]>>>0,_[$]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");x=A,b++}for(var C=B-x;C!==B&&_[C]===0;)C++;for(var T=new Uint8Array(m+(B-C)),d=m;C!==B;)T[d++]=_[C++];return T}function y(p){var b=h(p);if(b)return b;throw new Error("Non-base"+o+" character")}return{encode:f,decodeUnsafe:h,decode:y}}var rc=hh;const dh=rc,gh="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var ph=dh(gh);const yh=_a(ph),wh=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),sc=Uint8Array.from({length:16},(t,e)=>e),Sh=sc.map(t=>(9*t+5)%16);let qs=[sc],Zs=[Sh];for(let t=0;t<4;t++)for(let e of[qs,Zs])e.push(e[t].map(n=>wh[n]));const ic=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),bh=qs.map((t,e)=>t.map(n=>ic[e][n])),mh=Zs.map((t,e)=>t.map(n=>ic[e][n])),Eh=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Ah=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Fn=(t,e)=>t<<e|t>>>32-e;function ro(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const zn=new Uint32Array(16);class Ih extends zs{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:s,h4:i}=this;return[e,n,r,s,i]}set(e,n,r,s,i){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=s|0,this.h4=i|0}process(e,n){for(let p=0;p<16;p++,n+=4)zn[p]=e.getUint32(n,!0);let r=this.h0|0,s=r,i=this.h1|0,o=i,a=this.h2|0,u=a,l=this.h3|0,f=l,h=this.h4|0,y=h;for(let p=0;p<5;p++){const b=4-p,m=Eh[p],x=Ah[p],B=qs[p],_=Zs[p],N=bh[p],S=mh[p];for(let A=0;A<16;A++){const $=Fn(r+ro(p,i,a,l)+zn[B[A]]+m,N[A])+h|0;r=h,h=l,l=Fn(a,10)|0,a=i,i=$}for(let A=0;A<16;A++){const $=Fn(s+ro(b,o,u,f)+zn[_[A]]+x,S[A])+y|0;s=y,y=f,f=Fn(u,10)|0,u=o,o=$}}this.set(this.h1+a+f|0,this.h2+l+y|0,this.h3+h+s|0,this.h4+r+o|0,this.h0+i+u|0)}roundClean(){zn.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Qs=Be(()=>new Ih);function vh(t){return Qs(t)}const Rn=BigInt(2**32-1),us=BigInt(32);function oc(t,e=!1){return e?{h:Number(t&Rn),l:Number(t>>us&Rn)}:{h:Number(t>>us&Rn)|0,l:Number(t&Rn)|0}}function xh(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=oc(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Mh=(t,e)=>BigInt(t>>>0)<<us|BigInt(e>>>0),$h=(t,e,n)=>t>>>n,Nh=(t,e,n)=>t<<32-n|e>>>n,Lh=(t,e,n)=>t>>>n|e<<32-n,Ch=(t,e,n)=>t<<32-n|e>>>n,Bh=(t,e,n)=>t<<64-n|e>>>n-32,_h=(t,e,n)=>t>>>n-32|e<<64-n,Dh=(t,e)=>e,Oh=(t,e)=>t,Uh=(t,e,n)=>t<<n|e>>>32-n,Th=(t,e,n)=>e<<n|t>>>32-n,Ph=(t,e,n)=>e<<n-32|t>>>64-n,jh=(t,e,n)=>t<<n-32|e>>>64-n;function kh(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Hh=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Fh=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,zh=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Rh=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Kh=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Vh=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,O={fromBig:oc,split:xh,toBig:Mh,shrSH:$h,shrSL:Nh,rotrSH:Lh,rotrSL:Ch,rotrBH:Bh,rotrBL:_h,rotr32H:Dh,rotr32L:Oh,rotlSH:Uh,rotlSL:Th,rotlBH:Ph,rotlBL:jh,add:kh,add3L:Hh,add3H:Fh,add4L:zh,add4H:Rh,add5H:Vh,add5L:Kh},[Gh,Yh]=O.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),te=new Uint32Array(80),ee=new Uint32Array(80);class br extends zs{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:u,Eh:l,El:f,Fh:h,Fl:y,Gh:p,Gl:b,Hh:m,Hl:x}=this;return[e,n,r,s,i,o,a,u,l,f,h,y,p,b,m,x]}set(e,n,r,s,i,o,a,u,l,f,h,y,p,b,m,x){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=l|0,this.El=f|0,this.Fh=h|0,this.Fl=y|0,this.Gh=p|0,this.Gl=b|0,this.Hh=m|0,this.Hl=x|0}process(e,n){for(let N=0;N<16;N++,n+=4)te[N]=e.getUint32(n),ee[N]=e.getUint32(n+=4);for(let N=16;N<80;N++){const S=te[N-15]|0,A=ee[N-15]|0,$=O.rotrSH(S,A,1)^O.rotrSH(S,A,8)^O.shrSH(S,A,7),C=O.rotrSL(S,A,1)^O.rotrSL(S,A,8)^O.shrSL(S,A,7),T=te[N-2]|0,d=ee[N-2]|0,E=O.rotrSH(T,d,19)^O.rotrBH(T,d,61)^O.shrSH(T,d,6),L=O.rotrSL(T,d,19)^O.rotrBL(T,d,61)^O.shrSL(T,d,6),Y=O.add4L(C,L,ee[N-7],ee[N-16]),q=O.add4H(Y,$,E,te[N-7],te[N-16]);te[N]=q|0,ee[N]=Y|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:u,Dh:l,Dl:f,Eh:h,El:y,Fh:p,Fl:b,Gh:m,Gl:x,Hh:B,Hl:_}=this;for(let N=0;N<80;N++){const S=O.rotrSH(h,y,14)^O.rotrSH(h,y,18)^O.rotrBH(h,y,41),A=O.rotrSL(h,y,14)^O.rotrSL(h,y,18)^O.rotrBL(h,y,41),$=h&p^~h&m,C=y&b^~y&x,T=O.add5L(_,A,C,Yh[N],ee[N]),d=O.add5H(T,B,S,$,Gh[N],te[N]),E=T|0,L=O.rotrSH(r,s,28)^O.rotrBH(r,s,34)^O.rotrBH(r,s,39),Y=O.rotrSL(r,s,28)^O.rotrBL(r,s,34)^O.rotrBL(r,s,39),q=r&i^r&a^i&a,k=s&o^s&u^o&u;B=m|0,_=x|0,m=p|0,x=b|0,p=h|0,b=y|0,{h,l:y}=O.add(l|0,f|0,d|0,E|0),l=a|0,f=u|0,a=i|0,u=o|0,i=r|0,o=s|0;const Ct=O.add3L(E,Y,k);r=O.add3H(Ct,d,L,q),s=Ct|0}({h:r,l:s}=O.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=O.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:u}=O.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:l,l:f}=O.add(this.Dh|0,this.Dl|0,l|0,f|0),{h,l:y}=O.add(this.Eh|0,this.El|0,h|0,y|0),{h:p,l:b}=O.add(this.Fh|0,this.Fl|0,p|0,b|0),{h:m,l:x}=O.add(this.Gh|0,this.Gl|0,m|0,x|0),{h:B,l:_}=O.add(this.Hh|0,this.Hl|0,B|0,_|0),this.set(r,s,i,o,a,u,l,f,h,y,p,b,m,x,B,_)}roundClean(){te.fill(0),ee.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class qh extends br{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Zh extends br{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Qh extends br{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Xh=Be(()=>new br);Be(()=>new qh);const Wh=Be(()=>new Zh);Be(()=>new Qh);function ac(t){return Et(t)}function Jh(t){return Xh(t)}const td=0;W.hmacSha256Sync=(t,...e)=>{const n=_e.create(Et,t);return e.forEach(r=>n.update(r)),n.digest()};function ed(){return Se(W.randomPrivateKey())}function nd(t){const e=Et(Et(t));return yh.encode(Ye(t,e).slice(0,t.length+4))}function rd(t,e){return nd(Ye(new Uint8Array([t]),e.slice(0,20)))}function cc(t,e=td){const n=typeof t=="string"?ke(t):t,r=vh(ac(n));return rd(e,r)}function uc(t){const e=Qf(t);return Se(Sr(e.slice(0,32),!0))}W.hmacSha256Sync=(t,...e)=>{const n=_e.create(Et,t);return e.forEach(r=>n.update(r)),n.digest()};var rr;(function(t){t.InvalidFormat="InvalidFormat",t.IsNotPoint="IsNotPoint"})(rr||(rr={}));async function sd(t,e,n){return await(await nc()).encrypt("aes-256-cbc",e,t,n)}async function id(t,e,n){return await(await nc()).decrypt("aes-256-cbc",e,t,n)}function lc(t,e){return _e(Et,t,e)}function od(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function fc(t){const e=Jh(t);return{encryptionKey:e.slice(0,32),hmacKey:e.slice(32)}}function ad(t){return t.match(/^[0-9a-f]+$/i)!==null}function cd(t){const e={result:!1,reason_data:"Invalid public key format",reason:rr.InvalidFormat},n={result:!1,reason_data:"Public key is not a point",reason:rr.IsNotPoint};if(t.length!==66&&t.length!==130)return e;const r=t.slice(0,2);if(t.length===130&&r!=="04"||t.length===66&&r!=="02"&&r!=="03"||!ad(t))return e;try{return U.fromHex(t).assertValidity(),{result:!0,reason_data:null,reason:null}}catch{return n}}async function ud(t,e,n,r){const s=cd(t);if(!s.result)throw s;const i=W.randomPrivateKey(),o=Sr(i,!0);let a=Gs(i,t,!0);a=a.slice(1);const u=fc(a),l=W.randomBytes(16),f=await sd(l,u.encryptionKey,e),h=Ye(l,o,f),y=lc(u.hmacKey,h);let p;if(!r||r==="hex")p=Se(f);else if(r==="base64")p=Wf(f);else throw new Error(`Unexpected cipherTextEncoding "${r}"`);const b={iv:Se(l),ephemeralPK:Se(o),cipherText:p,mac:Se(y),wasString:n};return r&&r!=="hex"&&(b.cipherTextEncoding=r),b}async function hc(t,e){if(!e.ephemeralPK)throw new no("Unable to get public key from cipher object. You might be trying to decrypt an unencrypted object.");const n=e.ephemeralPK;let r=Gs(t,n,!0);r=r.slice(1);const s=fc(r),i=ke(e.iv);let o;if(!e.cipherTextEncoding||e.cipherTextEncoding==="hex")o=ke(e.cipherText);else if(e.cipherTextEncoding==="base64")o=Xf(e.cipherText);else throw new Error(`Unexpected cipherTextEncoding "${e.cipherText}"`);const a=Ye(i,ke(n),o),u=lc(s.hmacKey,a),l=ke(e.mac);if(!od(l,u))throw new no("Decryption failed: failure in MAC check");const f=await id(i,s.encryptionKey,o);return e.wasString?Zf(f):f}function ld(t,e){const n=typeof e=="string"?tc(e):e,r=uc(t),s=ac(n),i=Ys(s,t);return{signature:Se(i),publicKey:r}}async function fd(t,e){const n=Object.assign({},e);let r;if(!n.publicKey){if(!n.privateKey)throw new Error("Either public key or private key must be supplied for encryption.");n.publicKey=uc(n.privateKey)}const s=typeof n.wasString=="boolean"?n.wasString:typeof t=="string",i=typeof t=="string"?tc(t):t,o=await ud(n.publicKey,i,s,n.cipherTextEncoding);let a=JSON.stringify(o);if(n.sign){typeof n.sign=="string"?r=n.sign:r||(r=n.privateKey);const u=ld(r,a),l={signature:u.signature,publicKey:u.publicKey,cipherText:a};a=JSON.stringify(l)}return a}function hd(t,e){const n=Object.assign({},e);if(!n.privateKey)throw new Error("Private key is required for decryption.");try{const r=JSON.parse(t);return hc(n.privateKey,r)}catch(r){throw r instanceof SyntaxError?new Error("Failed to parse encrypted content JSON. The content may not be encrypted. If using getFile, try passing { decrypt: false }."):r}}var nn={};const dd=An(Sf);(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const e=dd,n=S=>new Uint8Array(S.buffer,S.byteOffset,S.byteLength);t.u8=n;const r=S=>new Uint32Array(S.buffer,S.byteOffset,Math.floor(S.byteLength/4));t.u32=r;const s=S=>new DataView(S.buffer,S.byteOffset,S.byteLength);t.createView=s;const i=(S,A)=>S<<32-A|S>>>A;if(t.rotr=i,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(S,A)=>A.toString(16).padStart(2,"0"));function a(S){if(!(S instanceof Uint8Array))throw new Error("Uint8Array expected");let A="";for(let $=0;$<S.length;$++)A+=o[S[$]];return A}t.bytesToHex=a;function u(S){if(typeof S!="string")throw new TypeError("hexToBytes: expected string, got "+typeof S);if(S.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const A=new Uint8Array(S.length/2);for(let $=0;$<A.length;$++){const C=$*2,T=S.slice(C,C+2),d=Number.parseInt(T,16);if(Number.isNaN(d)||d<0)throw new Error("Invalid byte sequence");A[$]=d}return A}t.hexToBytes=u;const l=async()=>{};t.nextTick=l;async function f(S,A,$){let C=Date.now();for(let T=0;T<S;T++){$(T);const d=Date.now()-C;d>=0&&d<A||(await(0,t.nextTick)(),C+=d)}}t.asyncLoop=f;function h(S){if(typeof S!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof S}`);return new TextEncoder().encode(S)}t.utf8ToBytes=h;function y(S){if(typeof S=="string"&&(S=h(S)),!(S instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof S})`);return S}t.toBytes=y;function p(...S){if(!S.every(C=>C instanceof Uint8Array))throw new Error("Uint8Array list expected");if(S.length===1)return S[0];const A=S.reduce((C,T)=>C+T.length,0),$=new Uint8Array(A);for(let C=0,T=0;C<S.length;C++){const d=S[C];$.set(d,T),T+=d.length}return $}t.concatBytes=p;class b{clone(){return this._cloneInto()}}t.Hash=b;const m=S=>Object.prototype.toString.call(S)==="[object Object]"&&S.constructor===Object;function x(S,A){if(A!==void 0&&(typeof A!="object"||!m(A)))throw new TypeError("Options should be object or undefined");return Object.assign(S,A)}t.checkOpts=x;function B(S){const A=C=>S().update(y(C)).digest(),$=S();return A.outputLen=$.outputLen,A.blockLen=$.blockLen,A.create=()=>S(),A}t.wrapConstructor=B;function _(S){const A=(C,T)=>S(T).update(y(C)).digest(),$=S({});return A.outputLen=$.outputLen,A.blockLen=$.blockLen,A.create=C=>S(C),A}t.wrapConstructorWithOpts=_;function N(S=32){if(e.crypto.web)return e.crypto.web.getRandomValues(new Uint8Array(S));if(e.crypto.node)return new Uint8Array(e.crypto.node.randomBytes(S).buffer);throw new Error("The environment doesn't have randomBytes function")}t.randomBytes=N})(nn);const mr=An(Nf);var it={},qe={},at={};Object.defineProperty(at,"__esModule",{value:!0});at.decode=at.encode=at.unescape=at.escape=at.pad=void 0;const dc=vn;function Xs(t){return`${t}${"=".repeat(4-(t.length%4||4))}`}at.pad=Xs;function gc(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}at.escape=gc;function pc(t){return Xs(t).replace(/-/g,"+").replace(/_/g,"/")}at.unescape=pc;function gd(t){return gc((0,dc.fromByteArray)(new TextEncoder().encode(t)))}at.encode=gd;function pd(t){return new TextDecoder().decode((0,dc.toByteArray)(Xs(pc(t))))}at.decode=pd;var Er={},Ar={};const yd=An(Ef),wd=An(Vf);var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.joseToDer=Ze.derToJose=void 0;const yc=vn,wc=at;function qr(t){return(t/8|0)+(t%8===0?0:1)}const Sd={ES256:qr(256),ES384:qr(384),ES512:qr(521)};function Sc(t){const e=Sd[t];if(e)return e;throw new Error(`Unknown algorithm "${t}"`)}const sr=128,bc=0,bd=32,md=16,Ed=2,mc=md|bd|bc<<6,ir=Ed|bc<<6;function Ec(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")return(0,yc.toByteArray)((0,wc.pad)(t));throw new TypeError("ECDSA signature must be a Base64 string or a Uint8Array")}function Ad(t,e){const n=Ec(t),r=Sc(e),s=r+1,i=n.length;let o=0;if(n[o++]!==mc)throw new Error('Could not find expected "seq"');let a=n[o++];if(a===(sr|1)&&(a=n[o++]),i-o<a)throw new Error(`"seq" specified length of "${a}", only "${i-o}" remaining`);if(n[o++]!==ir)throw new Error('Could not find expected "int" for "r"');const u=n[o++];if(i-o-2<u)throw new Error(`"r" specified length of "${u}", only "${i-o-2}" available`);if(s<u)throw new Error(`"r" specified length of "${u}", max of "${s}" is acceptable`);const l=o;if(o+=u,n[o++]!==ir)throw new Error('Could not find expected "int" for "s"');const f=n[o++];if(i-o!==f)throw new Error(`"s" specified length of "${f}", expected "${i-o}"`);if(s<f)throw new Error(`"s" specified length of "${f}", max of "${s}" is acceptable`);const h=o;if(o+=f,o!==i)throw new Error(`Expected to consume entire array, but "${i-o}" bytes remain`);const y=r-u,p=r-f,b=new Uint8Array(y+u+p+f);for(o=0;o<y;++o)b[o]=0;b.set(n.subarray(l+Math.max(-y,0),l+u),o),o=r;for(const m=o;o<m+p;++o)b[o]=0;return b.set(n.subarray(h+Math.max(-p,0),h+f),o),(0,wc.escape)((0,yc.fromByteArray)(b))}Ze.derToJose=Ad;function so(t,e,n){let r=0;for(;e+r<n&&t[e+r]===0;)++r;return t[e+r]>=sr&&--r,r}function Id(t,e){t=Ec(t);const n=Sc(e),r=t.length;if(r!==n*2)throw new TypeError(`"${e}" signatures must be "${n*2}" bytes, saw "${r}"`);const s=so(t,0,n),i=so(t,n,t.length),o=n-s,a=n-i,u=1+1+o+1+1+a,l=u<sr,f=new Uint8Array((l?2:3)+u);let h=0;return f[h++]=mc,l?f[h++]=u:(f[h++]=sr|1,f[h++]=u&255),f[h++]=ir,f[h++]=o,s<0?(f[h++]=0,f.set(t.subarray(0,n),h),h+=n):(f.set(t.subarray(s,n),h),h+=n-s),f[h++]=ir,f[h++]=a,i<0?(f[h++]=0,f.set(t.subarray(n),h)):f.set(t.subarray(n+i),h),f}Ze.joseToDer=Id;var qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.InvalidTokenError=qt.MissingParametersError=void 0;class vd extends Error{constructor(e){super(),this.name="MissingParametersError",this.message=e||""}}qt.MissingParametersError=vd;class xd extends Error{constructor(e){super(),this.name="InvalidTokenError",this.message=e||""}}qt.InvalidTokenError=xd;Object.defineProperty(Ar,"__esModule",{value:!0});Ar.SECP256K1Client=void 0;const Md=yd,$d=mr,Zn=wd,io=Ze,oo=qt,ao=nn;Zn.utils.hmacSha256Sync=(t,...e)=>{const n=Md.hmac.create($d.sha256,t);return e.forEach(r=>n.update(r)),n.digest()};class Ac{static derivePublicKey(e,n=!0){return e.length===66&&(e=e.slice(0,64)),e.length<64&&(e=e.padStart(64,"0")),(0,ao.bytesToHex)(Zn.getPublicKey(e,n))}static signHash(e,n,r="jose"){if(!e||!n)throw new oo.MissingParametersError("a signing input hash and private key are all required");const s=Zn.signSync(e,n.slice(0,64),{der:!0,canonical:!1});if(r==="der")return(0,ao.bytesToHex)(s);if(r==="jose")return(0,io.derToJose)(s,"ES256");throw Error("Invalid signature format")}static loadSignature(e){return(0,io.joseToDer)(e,"ES256")}static verifyHash(e,n,r){if(!e||!n||!r)throw new oo.MissingParametersError("a signing input hash, der signature, and public key are all required");return Zn.verify(n,e,r,{strict:!1})}}Ar.SECP256K1Client=Ac;Ac.algorithmName="ES256K";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.cryptoClients=t.SECP256K1Client=void 0;const e=Ar;Object.defineProperty(t,"SECP256K1Client",{enumerable:!0,get:function(){return e.SECP256K1Client}});const n={ES256K:e.SECP256K1Client};t.cryptoClients=n})(Er);var Ie={};const Nd=An(ka);var Ld=Gt&&Gt.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(f){try{l(r.next(f))}catch(h){o(h)}}function u(f){try{l(r.throw(f))}catch(h){o(h)}}function l(f){f.done?i(f.value):s(f.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.hashSha256Async=Ie.hashSha256=void 0;const Cd=mr;function Ic(t){return(0,Cd.sha256)(t)}Ie.hashSha256=Ic;function Bd(t){return Ld(this,void 0,void 0,function*(){try{if(typeof crypto<"u"&&typeof crypto.subtle<"u"){const n=typeof t=="string"?new TextEncoder().encode(t):t,r=yield crypto.subtle.digest("SHA-256",n);return new Uint8Array(r)}else{const n=Nd;if(!n.createHash)throw new Error("`crypto` module does not contain `createHash`");return Promise.resolve(n.createHash("sha256").update(t).digest())}}catch(e){return console.log(e),console.log('Crypto lib not found. Neither the globalThis `crypto.subtle` Web Crypto API, nor the or the Node.js `require("crypto").createHash` module is available. Falling back to JS implementation.'),Promise.resolve(Ic(t))}})}Ie.hashSha256Async=Bd;var _d=Gt&&Gt.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(f){try{l(r.next(f))}catch(h){o(h)}}function u(f){try{l(r.throw(f))}catch(h){o(h)}}function l(f){f.done?i(f.value):s(f.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(qe,"__esModule",{value:!0});qe.TokenSigner=qe.createUnsecuredToken=void 0;const ls=at,co=Er,Dd=qt,uo=Ie;function fs(t,e){const n=[],r=ls.encode(JSON.stringify(e));n.push(r);const s=ls.encode(JSON.stringify(t));return n.push(s),n.join(".")}function Od(t){return fs(t,{typ:"JWT",alg:"none"})+"."}qe.createUnsecuredToken=Od;class Ud{constructor(e,n){if(!(e&&n))throw new Dd.MissingParametersError("a signing algorithm and private key are required");if(typeof e!="string")throw new Error("signing algorithm parameter must be a string");if(e=e.toUpperCase(),!co.cryptoClients.hasOwnProperty(e))throw new Error("invalid signing algorithm");this.tokenType="JWT",this.cryptoClient=co.cryptoClients[e],this.rawPrivateKey=n}header(e={}){const n={typ:this.tokenType,alg:this.cryptoClient.algorithmName};return Object.assign({},n,e)}sign(e,n=!1,r={}){const s=this.header(r),i=fs(e,s),o=(0,uo.hashSha256)(i);return this.createWithSignedHash(e,n,s,i,o)}signAsync(e,n=!1,r={}){return _d(this,void 0,void 0,function*(){const s=this.header(r),i=fs(e,s),o=yield(0,uo.hashSha256Async)(i);return this.createWithSignedHash(e,n,s,i,o)})}createWithSignedHash(e,n,r,s,i){const o=this.cryptoClient.signHash(i,this.rawPrivateKey);return n?{header:[ls.encode(JSON.stringify(r))],payload:JSON.stringify(e),signature:[o]}:[s,o].join(".")}}qe.TokenSigner=Ud;var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.TokenVerifier=void 0;const Td=at,lo=Er,Pd=qt,Kn=Ie;class jd{constructor(e,n){if(!(e&&n))throw new Pd.MissingParametersError("a signing algorithm and public key are required");if(typeof e!="string")throw"signing algorithm parameter must be a string";if(e=e.toUpperCase(),!lo.cryptoClients.hasOwnProperty(e))throw"invalid signing algorithm";this.tokenType="JWT",this.cryptoClient=lo.cryptoClients[e],this.rawPublicKey=n}verify(e){return typeof e=="string"?this.verifyCompact(e,!1):typeof e=="object"?this.verifyExpanded(e,!1):!1}verifyAsync(e){return typeof e=="string"?this.verifyCompact(e,!0):typeof e=="object"?this.verifyExpanded(e,!0):Promise.resolve(!1)}verifyCompact(e,n){const r=e.split("."),s=r[0]+"."+r[1],i=o=>{const a=this.cryptoClient.loadSignature(r[2]);return this.cryptoClient.verifyHash(o,a,this.rawPublicKey)};if(n)return(0,Kn.hashSha256Async)(s).then(o=>i(o));{const o=(0,Kn.hashSha256)(s);return i(o)}}verifyExpanded(e,n){const r=[e.header.join("."),Td.encode(e.payload)].join(".");let s=!0;const i=o=>(e.signature.map(a=>{const u=this.cryptoClient.loadSignature(a);this.cryptoClient.verifyHash(o,u,this.rawPublicKey)||(s=!1)}),s);if(n)return(0,Kn.hashSha256Async)(r).then(o=>i(o));{const o=(0,Kn.hashSha256)(r);return i(o)}}}Ir.TokenVerifier=jd;var vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.decodeToken=void 0;const Vn=at;function kd(t){if(typeof t=="string"){const e=t.split("."),n=JSON.parse(Vn.decode(e[0])),r=JSON.parse(Vn.decode(e[1])),s=e[2];return{header:n,payload:r,signature:s}}else if(typeof t=="object"){if(typeof t.payload!="string")throw new Error("Expected token payload to be a base64 or json string");let e=t.payload;t.payload[0]!=="{"&&(e=Vn.decode(e));const n=[];return t.header.map(r=>{const s=JSON.parse(Vn.decode(r));n.push(s)}),{header:n,payload:JSON.parse(e),signature:t.signature}}}vr.decodeToken=kd;(function(t){var e=Gt&&Gt.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=Gt&&Gt.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,r,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(qe,t),n(Ir,t),n(vr,t),n(qt,t),n(Er,t)})(it);function Hd(t){return`did:btc-addr:${t}`}function Fd(t){const e=t.split(":");if(e.length!==3)throw new Gi("Decentralized IDs must have 3 parts");if(e[0].toLowerCase()!=="did")throw new Gi('Decentralized IDs must start with "did"');return e[1].toLowerCase()}function vc(t){if(t)return Fd(t)==="btc-addr"?t.split(":")[2]:void 0}const zd="1.4.0";function Rd(){return ed()}function Kd(t,e,n,r=Da.slice(),s,i=Jl().getTime(),o={}){const a=p=>{const b=ks("location",{throwIfUnavailable:!0,usageDesc:`makeAuthRequest([${p}=undefined])`});return b==null?void 0:b.origin};e||(e=`${a("redirectURI")}/`),n||(n=`${a("manifestURI")}/manifest.json`),s||(s=a("appDomain"));const u=Object.assign({},o,{jti:ef(),iat:Math.floor(new Date().getTime()/1e3),exp:Math.floor(i/1e3),iss:null,public_keys:[],domain_name:s,manifest_uri:n,redirect_uri:e,version:zd,do_not_include_profile:!0,supports_hub_url:!0,scopes:r}),l=it.SECP256K1Client.derivePublicKey(t);u.public_keys=[l];const f=cc(l);return u.iss=Hd(f),new it.TokenSigner("ES256k",t).sign(u)}async function fo(t,e){const n=af(of(e)),r=JSON.parse(n),s=await hc(t,r);if(typeof s!="string")throw new Error("Unable to correctly decrypt private key");return s}function Vd(t){const e=it.decodeToken(t).payload;if(typeof e=="string")throw new Error("Unexpected token payload type of string");const n=e.public_keys;if(n.length===1){const r=n[0];try{return new it.TokenVerifier("ES256k",r).verify(t)}catch{return!1}}else throw new Error("Multiple public keys are not supported")}function Gd(t){const e=it.decodeToken(t).payload;if(typeof e=="string")throw new Error("Unexpected token payload type of string");const n=e.public_keys,r=vc(e.iss);if(n.length===1){if(cc(n[0])===r)return!0}else throw new Error("Multiple public keys are not supported");return!1}function Yd(t){const e=it.decodeToken(t).payload;if(typeof e=="string")throw new Error("Unexpected token payload type of string");if(e.iat){if(typeof e.iat!="number")return!1;const n=new Date(e.iat*1e3);return!(new Date().getTime()<n.getTime())}else return!0}function qd(t){const e=it.decodeToken(t).payload;if(typeof e=="string")throw new Error("Unexpected token payload type of string");if(e.exp){if(typeof e.exp!="number")return!1;const n=new Date(e.exp*1e3);return!(new Date().getTime()>n.getTime())}else return!0}async function Zd(t){return(await Promise.all([qd(t),Yd(t),Vd(t),Gd(t)])).every(n=>n)}const ho="1.0.0";class ae{constructor(e){this.version=ho,this.userData=e.userData,this.transitKey=e.transitKey,this.etags=e.etags?e.etags:{}}static fromJSON(e){if(e.version!==ho)throw new is(`JSON data version ${e.version} not supported by SessionData`);const n={coreNode:e.coreNode,userData:e.userData,transitKey:e.transitKey,etags:e.etags};return new ae(n)}toString(){return JSON.stringify(this)}}class xc{constructor(e){if(e){const n=new ae(e);this.setSessionData(n)}}getSessionData(){throw new Error("Abstract class")}setSessionData(e){throw new Error("Abstract class")}deleteSessionData(){throw new Error("Abstract class")}}class go extends xc{constructor(e){super(e),this.sessionData||this.setSessionData(new ae({}))}getSessionData(){if(!this.sessionData)throw new Oa("No session data was found.");return this.sessionData}setSessionData(e){return this.sessionData=e,!0}deleteSessionData(){return this.setSessionData(new ae({})),!0}}class po extends xc{constructor(e){if(super(e),e&&e.storeOptions&&e.storeOptions.localStorageKey&&typeof e.storeOptions.localStorageKey=="string"?this.key=e.storeOptions.localStorageKey:this.key=Ql,!localStorage.getItem(this.key)){const r=new ae({});this.setSessionData(r)}}getSessionData(){const e=localStorage.getItem(this.key);if(!e)throw new Oa("No session data was found in localStorage");const n=JSON.parse(e);return ae.fromJSON(n)}setSessionData(e){return localStorage.setItem(this.key,e.toString()),!0}deleteSessionData(){return localStorage.removeItem(this.key),this.setSessionData(new ae({})),!0}}function Qd(t){return/^0x/i.test(t)?t.slice(2):t}const Xd=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Wd(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(const n of t)e+=Xd[n];return e}function Jd(t){if(typeof t!="string")throw new TypeError(`hexToBytes: expected string, got ${typeof t}`);t=Qd(t),t=t.length%2?`0${t}`:t;const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=n*2,s=t.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[n]=i}return e}const tg="https://api.mainnet.hiro.so",eg="https://api.testnet.hiro.so",ng="http://localhost:3999";var yn;(function(t){t[t.Mainnet=1]="Mainnet",t[t.Testnet=2147483648]="Testnet"})(yn||(yn={}));var or;(function(t){t[t.Mainnet=385875968]="Mainnet",t[t.Testnet=4278190080]="Testnet"})(or||(or={}));yn.Mainnet;var Yt;(function(t){t[t.Mainnet=0]="Mainnet",t[t.Testnet=128]="Testnet"})(Yt||(Yt={}));var Ot;(function(t){t[t.MainnetSingleSig=22]="MainnetSingleSig",t[t.MainnetMultiSig=20]="MainnetMultiSig",t[t.TestnetSingleSig=26]="TestnetSingleSig",t[t.TestnetMultiSig=21]="TestnetMultiSig"})(Ot||(Ot={}));Yt.Mainnet;const Mc={chainId:yn.Mainnet,transactionVersion:Yt.Mainnet,peerNetworkId:or.Mainnet,magicBytes:"X2",bootAddress:"SP000000000000000000002Q6VF78",addressVersion:{singleSig:Ot.MainnetSingleSig,multiSig:Ot.MainnetMultiSig},client:{baseUrl:tg}},hs={chainId:yn.Testnet,transactionVersion:Yt.Testnet,peerNetworkId:or.Testnet,magicBytes:"T2",bootAddress:"ST000000000000000000002AMW42H",addressVersion:{singleSig:Ot.TestnetSingleSig,multiSig:Ot.TestnetMultiSig},client:{baseUrl:eg}},Qn={...hs,addressVersion:{...hs.addressVersion},magicBytes:"id",client:{baseUrl:ng}},rg={...Qn,addressVersion:{...Qn.addressVersion},client:{...Qn.client}};function sg(t){switch(t){case"mainnet":return Mc;case"testnet":return hs;case"devnet":return Qn;case"mocknet":return rg;default:throw new Error(`Unknown network name: ${t}`)}}function $c(t){return typeof t=="string"?sg(t):t}var yo;(function(t){t[t.TokenTransfer=0]="TokenTransfer",t[t.SmartContract=1]="SmartContract",t[t.VersionedSmartContract=6]="VersionedSmartContract",t[t.ContractCall=2]="ContractCall",t[t.PoisonMicroblock=3]="PoisonMicroblock",t[t.Coinbase=4]="Coinbase",t[t.CoinbaseToAltRecipient=5]="CoinbaseToAltRecipient",t[t.TenureChange=7]="TenureChange",t[t.NakamotoCoinbase=8]="NakamotoCoinbase"})(yo||(yo={}));var wo;(function(t){t[t.Clarity1=1]="Clarity1",t[t.Clarity2=2]="Clarity2",t[t.Clarity3=3]="Clarity3"})(wo||(wo={}));var It;(function(t){t[t.OnChainOnly=1]="OnChainOnly",t[t.OffChainOnly=2]="OffChainOnly",t[t.Any=3]="Any"})(It||(It={}));const Zr=["onChainOnly","offChainOnly","any"];Zr[0]+"",It.OnChainOnly,Zr[1]+"",It.OffChainOnly,Zr[2]+"",It.Any,It.OnChainOnly+"",It.OnChainOnly,It.OffChainOnly+"",It.OffChainOnly,It.Any+"",It.Any;var So;(function(t){t[t.Allow=1]="Allow",t[t.Deny=2]="Deny"})(So||(So={}));var bo;(function(t){t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible"})(bo||(bo={}));var mo;(function(t){t[t.Standard=4]="Standard",t[t.Sponsored=5]="Sponsored"})(mo||(mo={}));var Vt;(function(t){t[t.P2PKH=0]="P2PKH",t[t.P2SH=1]="P2SH",t[t.P2WPKH=2]="P2WPKH",t[t.P2WSH=3]="P2WSH",t[t.P2SHNonSequential=5]="P2SHNonSequential",t[t.P2WSHNonSequential=7]="P2WSHNonSequential"})(Vt||(Vt={}));var Eo;(function(t){t[t.Compressed=0]="Compressed",t[t.Uncompressed=1]="Uncompressed"})(Eo||(Eo={}));var Ao;(function(t){t[t.Equal=1]="Equal",t[t.Greater=2]="Greater",t[t.GreaterEqual=3]="GreaterEqual",t[t.Less=4]="Less",t[t.LessEqual=5]="LessEqual"})(Ao||(Ao={}));var Io;(function(t){t[t.Sends=16]="Sends",t[t.DoesNotSend=17]="DoesNotSend"})(Io||(Io={}));var vo;(function(t){t[t.Origin=1]="Origin",t[t.Standard=2]="Standard",t[t.Contract=3]="Contract"})(vo||(vo={}));var xo;(function(t){t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible"})(xo||(xo={}));var Mo;(function(t){t[t.BlockFound=0]="BlockFound",t[t.Extended=1]="Extended"})(Mo||(Mo={}));var $o;(function(t){t[t.PublicKeyCompressed=0]="PublicKeyCompressed",t[t.PublicKeyUncompressed=1]="PublicKeyUncompressed",t[t.SignatureCompressed=2]="SignatureCompressed",t[t.SignatureUncompressed=3]="SignatureUncompressed"})($o||($o={}));var No;(function(t){t.Serialization="Serialization",t.Deserialization="Deserialization",t.SignatureValidation="SignatureValidation",t.FeeTooLow="FeeTooLow",t.BadNonce="BadNonce",t.NotEnoughFunds="NotEnoughFunds",t.NoSuchContract="NoSuchContract",t.NoSuchPublicFunction="NoSuchPublicFunction",t.BadFunctionArgument="BadFunctionArgument",t.ContractAlreadyExists="ContractAlreadyExists",t.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",t.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",t.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",t.BadAddressVersionByte="BadAddressVersionByte",t.NoCoinbaseViaMempool="NoCoinbaseViaMempool",t.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",t.ServerFailureDatabase="ServerFailureDatabase",t.ServerFailureOther="ServerFailureOther"})(No||(No={}));var xn={},Ws={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.c32decode=t.c32normalize=t.c32encode=t.c32=void 0;const e=nn;t.c32="0123456789ABCDEFGHJKMNPQRSTVWXYZ";const n="0123456789abcdef";function r(o,a){if(!o.match(/^[0-9a-fA-F]*$/))throw new Error("Not a hex-encoded string");o.length%2!==0&&(o=`0${o}`),o=o.toLowerCase();let u=[],l=0;for(let p=o.length-1;p>=0;p--)if(l<4){const b=n.indexOf(o[p])>>l;let m=0;p!==0&&(m=n.indexOf(o[p-1]));const x=1+l,B=m%(1<<x)<<5-x,_=t.c32[b+B];l=x,u.unshift(_)}else l=0;let f=0;for(let p=0;p<u.length&&u[p]==="0";p++)f++;u=u.slice(f);const h=new TextDecoder().decode((0,e.hexToBytes)(o)).match(/^\u0000*/),y=h?h[0].length:0;for(let p=0;p<y;p++)u.unshift(t.c32[0]);if(a){const p=a-u.length;for(let b=0;b<p;b++)u.unshift(t.c32[0])}return u.join("")}t.c32encode=r;function s(o){return o.toUpperCase().replace(/O/g,"0").replace(/L|I/g,"1")}t.c32normalize=s;function i(o,a){if(o=s(o),!o.match(`^[${t.c32}]*$`))throw new Error("Not a c32-encoded string");const u=o.match(`^${t.c32[0]}*`),l=u?u[0].length:0;let f=[],h=0,y=0;for(let m=o.length-1;m>=0;m--){y===4&&(f.unshift(n[h]),y=0,h=0);const B=(t.c32.indexOf(o[m])<<y)+h,_=n[B%16];if(y+=1,h=B>>4,h>1<<y)throw new Error("Panic error in decoding.");f.unshift(_)}f.unshift(n[h]),f.length%2===1&&f.unshift("0");let p=0;for(let m=0;m<f.length&&f[m]==="0";m++)p++;f=f.slice(p-p%2);let b=f.join("");for(let m=0;m<l;m++)b=`00${b}`;if(a){const m=a*2-b.length;for(let x=0;x<m;x+=2)b=`00${b}`}return b}t.c32decode=i})(Ws);var ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.c32checkDecode=ve.c32checkEncode=void 0;const Lo=mr,Co=nn,pn=Ws;function Nc(t){const e=(0,Lo.sha256)((0,Lo.sha256)((0,Co.hexToBytes)(t)));return(0,Co.bytesToHex)(e.slice(0,4))}function ig(t,e){if(t<0||t>=32)throw new Error("Invalid version (must be between 0 and 31)");if(!e.match(/^[0-9a-fA-F]*$/))throw new Error("Invalid data (not a hex string)");e=e.toLowerCase(),e.length%2!==0&&(e=`0${e}`);let n=t.toString(16);n.length===1&&(n=`0${n}`);const r=Nc(`${n}${e}`),s=(0,pn.c32encode)(`${e}${r}`);return`${pn.c32[t]}${s}`}ve.c32checkEncode=ig;function og(t){t=(0,pn.c32normalize)(t);const e=(0,pn.c32decode)(t.slice(1)),n=t[0],r=pn.c32.indexOf(n),s=e.slice(-8);let i=r.toString(16);if(i.length===1&&(i=`0${i}`),Nc(`${i}${e.substring(0,e.length-8)}`)!==s)throw new Error("Invalid c32check string: checksum mismatch");return[r,e.substring(0,e.length-8)]}ve.c32checkDecode=og;var Lc={},Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.decode=Qe.encode=void 0;const ar=mr,Bo=nn,Cc=rc,Bc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";function ag(t,e="00"){const n=typeof t=="string"?(0,Bo.hexToBytes)(t):t,r=typeof e=="string"?(0,Bo.hexToBytes)(e):t;if(!(n instanceof Uint8Array)||!(r instanceof Uint8Array))throw new TypeError("Argument must be of type Uint8Array or string");const s=(0,ar.sha256)((0,ar.sha256)(new Uint8Array([...r,...n])));return Cc(Bc).encode([...r,...n,...s.slice(0,4)])}Qe.encode=ag;function cg(t){const e=Cc(Bc).decode(t),n=e.slice(0,1),r=e.slice(1,-4),s=(0,ar.sha256)((0,ar.sha256)(new Uint8Array([...n,...r])));return e.slice(-4).forEach((i,o)=>{if(i!==s[o])throw new Error("Invalid checksum")}),{prefix:n,data:r}}Qe.decode=cg;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.c32ToB58=t.b58ToC32=t.c32addressDecode=t.c32address=t.versions=void 0;const e=ve,n=Qe,r=nn;t.versions={mainnet:{p2pkh:22,p2sh:20},testnet:{p2pkh:26,p2sh:21}};const s={};s[0]=t.versions.mainnet.p2pkh,s[5]=t.versions.mainnet.p2sh,s[111]=t.versions.testnet.p2pkh,s[196]=t.versions.testnet.p2sh;const i={};i[t.versions.mainnet.p2pkh]=0,i[t.versions.mainnet.p2sh]=5,i[t.versions.testnet.p2pkh]=111,i[t.versions.testnet.p2sh]=196;function o(f,h){if(!h.match(/^[0-9a-fA-F]{40}$/))throw new Error("Invalid argument: not a hash160 hex string");return`S${(0,e.c32checkEncode)(f,h)}`}t.c32address=o;function a(f){if(f.length<=5)throw new Error("Invalid c32 address: invalid length");if(f[0]!="S")throw new Error('Invalid c32 address: must start with "S"');return(0,e.c32checkDecode)(f.slice(1))}t.c32addressDecode=a;function u(f,h=-1){const y=n.decode(f),p=(0,r.bytesToHex)(y.data),b=parseInt((0,r.bytesToHex)(y.prefix),16);let m;return h<0?(m=b,s[b]!==void 0&&(m=s[b])):m=h,o(m,p)}t.b58ToC32=u;function l(f,h=-1){const y=a(f),p=y[0],b=y[1];let m;h<0?(m=p,i[p]!==void 0&&(m=i[p])):m=h;let x=m.toString(16);return x.length===1&&(x=`0${x}`),n.encode(b,x)}t.c32ToB58=l})(Lc);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.b58ToC32=t.c32ToB58=t.versions=t.c32normalize=t.c32addressDecode=t.c32address=t.c32checkDecode=t.c32checkEncode=t.c32decode=t.c32encode=void 0;const e=Ws;Object.defineProperty(t,"c32encode",{enumerable:!0,get:function(){return e.c32encode}}),Object.defineProperty(t,"c32decode",{enumerable:!0,get:function(){return e.c32decode}}),Object.defineProperty(t,"c32normalize",{enumerable:!0,get:function(){return e.c32normalize}});const n=ve;Object.defineProperty(t,"c32checkEncode",{enumerable:!0,get:function(){return n.c32checkEncode}}),Object.defineProperty(t,"c32checkDecode",{enumerable:!0,get:function(){return n.c32checkDecode}});const r=Lc;Object.defineProperty(t,"c32address",{enumerable:!0,get:function(){return r.c32address}}),Object.defineProperty(t,"c32addressDecode",{enumerable:!0,get:function(){return r.c32addressDecode}}),Object.defineProperty(t,"c32ToB58",{enumerable:!0,get:function(){return r.c32ToB58}}),Object.defineProperty(t,"b58ToC32",{enumerable:!0,get:function(){return r.b58ToC32}}),Object.defineProperty(t,"versions",{enumerable:!0,get:function(){return r.versions}})})(xn);function ug(t,e){switch(e=$c(e??Mc),t){case Vt.P2PKH:switch(e.transactionVersion){case Yt.Mainnet:return Ot.MainnetSingleSig;case Yt.Testnet:return Ot.TestnetSingleSig;default:throw new Error(`Unexpected transactionVersion ${e.transactionVersion} for hashMode ${t}`)}case Vt.P2SH:case Vt.P2SHNonSequential:case Vt.P2WPKH:case Vt.P2WSH:case Vt.P2WSHNonSequential:switch(e.transactionVersion){case Yt.Mainnet:return Ot.MainnetMultiSig;case Yt.Testnet:return Ot.TestnetMultiSig;default:throw new Error(`Unexpected transactionVersion ${e.transactionVersion} for hashMode ${t}`)}default:throw new Error(`Unexpected hashMode ${t}`)}}var cr={exports:{}};cr.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",s=9007199254740991,i="[object Arguments]",o="[object Array]",a="[object Boolean]",u="[object Date]",l="[object Error]",f="[object Function]",h="[object GeneratorFunction]",y="[object Map]",p="[object Number]",b="[object Object]",m="[object Promise]",x="[object RegExp]",B="[object Set]",_="[object String]",N="[object Symbol]",S="[object WeakMap]",A="[object ArrayBuffer]",$="[object DataView]",C="[object Float32Array]",T="[object Float64Array]",d="[object Int8Array]",E="[object Int16Array]",L="[object Int32Array]",Y="[object Uint8Array]",q="[object Uint8ClampedArray]",k="[object Uint16Array]",Ct="[object Uint32Array]",he=/[\\^$.*+?()[\]{}|]/g,cn=/\w*$/,Mu=/^\[object .+?Constructor\]$/,$u=/^(?:0|[1-9]\d*)$/,K={};K[i]=K[o]=K[A]=K[$]=K[a]=K[u]=K[C]=K[T]=K[d]=K[E]=K[L]=K[y]=K[p]=K[b]=K[x]=K[B]=K[_]=K[N]=K[Y]=K[q]=K[k]=K[Ct]=!0,K[l]=K[f]=K[S]=!1;var Nu=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,Lu=typeof self=="object"&&self&&self.Object===Object&&self,zt=Nu||Lu||Function("return this")(),Ei=e&&!e.nodeType&&e,Ai=Ei&&!0&&t&&!t.nodeType&&t,Cu=Ai&&Ai.exports===Ei;function Bu(c,g){return c.set(g[0],g[1]),c}function _u(c,g){return c.add(g),c}function Du(c,g){for(var w=-1,M=c?c.length:0;++w<M&&g(c[w],w,c)!==!1;);return c}function Ou(c,g){for(var w=-1,M=g.length,et=c.length;++w<M;)c[et+w]=g[w];return c}function Ii(c,g,w,M){var et=-1,ot=c?c.length:0;for(M&&ot&&(w=c[++et]);++et<ot;)w=g(w,c[et],et,c);return w}function Uu(c,g){for(var w=-1,M=Array(c);++w<c;)M[w]=g(w);return M}function Tu(c,g){return c==null?void 0:c[g]}function vi(c){var g=!1;if(c!=null&&typeof c.toString!="function")try{g=!!(c+"")}catch{}return g}function xi(c){var g=-1,w=Array(c.size);return c.forEach(function(M,et){w[++g]=[et,M]}),w}function Or(c,g){return function(w){return c(g(w))}}function Mi(c){var g=-1,w=Array(c.size);return c.forEach(function(M){w[++g]=M}),w}var Pu=Array.prototype,ju=Function.prototype,Cn=Object.prototype,Ur=zt["__core-js_shared__"],$i=function(){var c=/[^.]+$/.exec(Ur&&Ur.keys&&Ur.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Ni=ju.toString,Xt=Cn.hasOwnProperty,Bn=Cn.toString,ku=RegExp("^"+Ni.call(Xt).replace(he,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Li=Cu?zt.Buffer:void 0,Ci=zt.Symbol,Bi=zt.Uint8Array,Hu=Or(Object.getPrototypeOf,Object),Fu=Object.create,zu=Cn.propertyIsEnumerable,Ru=Pu.splice,_i=Object.getOwnPropertySymbols,Ku=Li?Li.isBuffer:void 0,Vu=Or(Object.keys,Object),Tr=Ue(zt,"DataView"),un=Ue(zt,"Map"),Pr=Ue(zt,"Promise"),jr=Ue(zt,"Set"),kr=Ue(zt,"WeakMap"),ln=Ue(Object,"create"),Gu=pe(Tr),Yu=pe(un),qu=pe(Pr),Zu=pe(jr),Qu=pe(kr),Di=Ci?Ci.prototype:void 0,Oi=Di?Di.valueOf:void 0;function de(c){var g=-1,w=c?c.length:0;for(this.clear();++g<w;){var M=c[g];this.set(M[0],M[1])}}function Xu(){this.__data__=ln?ln(null):{}}function Wu(c){return this.has(c)&&delete this.__data__[c]}function Ju(c){var g=this.__data__;if(ln){var w=g[c];return w===r?void 0:w}return Xt.call(g,c)?g[c]:void 0}function tl(c){var g=this.__data__;return ln?g[c]!==void 0:Xt.call(g,c)}function el(c,g){var w=this.__data__;return w[c]=ln&&g===void 0?r:g,this}de.prototype.clear=Xu,de.prototype.delete=Wu,de.prototype.get=Ju,de.prototype.has=tl,de.prototype.set=el;function Rt(c){var g=-1,w=c?c.length:0;for(this.clear();++g<w;){var M=c[g];this.set(M[0],M[1])}}function nl(){this.__data__=[]}function rl(c){var g=this.__data__,w=_n(g,c);if(w<0)return!1;var M=g.length-1;return w==M?g.pop():Ru.call(g,w,1),!0}function sl(c){var g=this.__data__,w=_n(g,c);return w<0?void 0:g[w][1]}function il(c){return _n(this.__data__,c)>-1}function ol(c,g){var w=this.__data__,M=_n(w,c);return M<0?w.push([c,g]):w[M][1]=g,this}Rt.prototype.clear=nl,Rt.prototype.delete=rl,Rt.prototype.get=sl,Rt.prototype.has=il,Rt.prototype.set=ol;function De(c){var g=-1,w=c?c.length:0;for(this.clear();++g<w;){var M=c[g];this.set(M[0],M[1])}}function al(){this.__data__={hash:new de,map:new(un||Rt),string:new de}}function cl(c){return Dn(this,c).delete(c)}function ul(c){return Dn(this,c).get(c)}function ll(c){return Dn(this,c).has(c)}function fl(c,g){return Dn(this,c).set(c,g),this}De.prototype.clear=al,De.prototype.delete=cl,De.prototype.get=ul,De.prototype.has=ll,De.prototype.set=fl;function Oe(c){this.__data__=new Rt(c)}function hl(){this.__data__=new Rt}function dl(c){return this.__data__.delete(c)}function gl(c){return this.__data__.get(c)}function pl(c){return this.__data__.has(c)}function yl(c,g){var w=this.__data__;if(w instanceof Rt){var M=w.__data__;if(!un||M.length<n-1)return M.push([c,g]),this;w=this.__data__=new De(M)}return w.set(c,g),this}Oe.prototype.clear=hl,Oe.prototype.delete=dl,Oe.prototype.get=gl,Oe.prototype.has=pl,Oe.prototype.set=yl;function wl(c,g){var w=zr(c)||Fl(c)?Uu(c.length,String):[],M=w.length,et=!!M;for(var ot in c)(g||Xt.call(c,ot))&&!(et&&(ot=="length"||Pl(ot,M)))&&w.push(ot);return w}function Ui(c,g,w){var M=c[g];(!(Xt.call(c,g)&&ki(M,w))||w===void 0&&!(g in c))&&(c[g]=w)}function _n(c,g){for(var w=c.length;w--;)if(ki(c[w][0],g))return w;return-1}function Sl(c,g){return c&&Ti(g,Rr(g),c)}function Hr(c,g,w,M,et,ot,wt){var ut;if(M&&(ut=ot?M(c,et,ot,wt):M(c)),ut!==void 0)return ut;if(!On(c))return c;var zi=zr(c);if(zi){if(ut=Ol(c),!g)return Bl(c,ut)}else{var Te=ge(c),Ri=Te==f||Te==h;if(Rl(c))return vl(c,g);if(Te==b||Te==i||Ri&&!ot){if(vi(c))return ot?c:{};if(ut=Ul(Ri?{}:c),!g)return _l(c,Sl(ut,c))}else{if(!K[Te])return ot?c:{};ut=Tl(c,Te,Hr,g)}}wt||(wt=new Oe);var Ki=wt.get(c);if(Ki)return Ki;if(wt.set(c,ut),!zi)var Vi=w?Dl(c):Rr(c);return Du(Vi||c,function(Kr,Un){Vi&&(Un=Kr,Kr=c[Un]),Ui(ut,Un,Hr(Kr,g,w,M,Un,c,wt))}),ut}function bl(c){return On(c)?Fu(c):{}}function ml(c,g,w){var M=g(c);return zr(c)?M:Ou(M,w(c))}function El(c){return Bn.call(c)}function Al(c){if(!On(c)||kl(c))return!1;var g=Fi(c)||vi(c)?ku:Mu;return g.test(pe(c))}function Il(c){if(!ji(c))return Vu(c);var g=[];for(var w in Object(c))Xt.call(c,w)&&w!="constructor"&&g.push(w);return g}function vl(c,g){if(g)return c.slice();var w=new c.constructor(c.length);return c.copy(w),w}function Fr(c){var g=new c.constructor(c.byteLength);return new Bi(g).set(new Bi(c)),g}function xl(c,g){var w=g?Fr(c.buffer):c.buffer;return new c.constructor(w,c.byteOffset,c.byteLength)}function Ml(c,g,w){var M=g?w(xi(c),!0):xi(c);return Ii(M,Bu,new c.constructor)}function $l(c){var g=new c.constructor(c.source,cn.exec(c));return g.lastIndex=c.lastIndex,g}function Nl(c,g,w){var M=g?w(Mi(c),!0):Mi(c);return Ii(M,_u,new c.constructor)}function Ll(c){return Oi?Object(Oi.call(c)):{}}function Cl(c,g){var w=g?Fr(c.buffer):c.buffer;return new c.constructor(w,c.byteOffset,c.length)}function Bl(c,g){var w=-1,M=c.length;for(g||(g=Array(M));++w<M;)g[w]=c[w];return g}function Ti(c,g,w,M){w||(w={});for(var et=-1,ot=g.length;++et<ot;){var wt=g[et],ut=M?M(w[wt],c[wt],wt,w,c):void 0;Ui(w,wt,ut===void 0?c[wt]:ut)}return w}function _l(c,g){return Ti(c,Pi(c),g)}function Dl(c){return ml(c,Rr,Pi)}function Dn(c,g){var w=c.__data__;return jl(g)?w[typeof g=="string"?"string":"hash"]:w.map}function Ue(c,g){var w=Tu(c,g);return Al(w)?w:void 0}var Pi=_i?Or(_i,Object):Gl,ge=El;(Tr&&ge(new Tr(new ArrayBuffer(1)))!=$||un&&ge(new un)!=y||Pr&&ge(Pr.resolve())!=m||jr&&ge(new jr)!=B||kr&&ge(new kr)!=S)&&(ge=function(c){var g=Bn.call(c),w=g==b?c.constructor:void 0,M=w?pe(w):void 0;if(M)switch(M){case Gu:return $;case Yu:return y;case qu:return m;case Zu:return B;case Qu:return S}return g});function Ol(c){var g=c.length,w=c.constructor(g);return g&&typeof c[0]=="string"&&Xt.call(c,"index")&&(w.index=c.index,w.input=c.input),w}function Ul(c){return typeof c.constructor=="function"&&!ji(c)?bl(Hu(c)):{}}function Tl(c,g,w,M){var et=c.constructor;switch(g){case A:return Fr(c);case a:case u:return new et(+c);case $:return xl(c,M);case C:case T:case d:case E:case L:case Y:case q:case k:case Ct:return Cl(c,M);case y:return Ml(c,M,w);case p:case _:return new et(c);case x:return $l(c);case B:return Nl(c,M,w);case N:return Ll(c)}}function Pl(c,g){return g=g??s,!!g&&(typeof c=="number"||$u.test(c))&&c>-1&&c%1==0&&c<g}function jl(c){var g=typeof c;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?c!=="__proto__":c===null}function kl(c){return!!$i&&$i in c}function ji(c){var g=c&&c.constructor,w=typeof g=="function"&&g.prototype||Cn;return c===w}function pe(c){if(c!=null){try{return Ni.call(c)}catch{}try{return c+""}catch{}}return""}function Hl(c){return Hr(c,!0,!0)}function ki(c,g){return c===g||c!==c&&g!==g}function Fl(c){return zl(c)&&Xt.call(c,"callee")&&(!zu.call(c,"callee")||Bn.call(c)==i)}var zr=Array.isArray;function Hi(c){return c!=null&&Kl(c.length)&&!Fi(c)}function zl(c){return Vl(c)&&Hi(c)}var Rl=Ku||Yl;function Fi(c){var g=On(c)?Bn.call(c):"";return g==f||g==h}function Kl(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=s}function On(c){var g=typeof c;return!!c&&(g=="object"||g=="function")}function Vl(c){return!!c&&typeof c=="object"}function Rr(c){return Hi(c)?wl(c):Il(c)}function Gl(){return[]}function Yl(){return!1}t.exports=Hl})(cr,cr.exports);var lg=cr.exports;const fg=_a(lg);var ds;(function(t){t[t.Address=0]="Address",t[t.Principal=1]="Principal",t[t.LengthPrefixedString=2]="LengthPrefixedString",t[t.MemoString=3]="MemoString",t[t.Asset=4]="Asset",t[t.PostCondition=5]="PostCondition",t[t.PublicKey=6]="PublicKey",t[t.LengthPrefixedList=7]="LengthPrefixedList",t[t.Payload=8]="Payload",t[t.MessageSignature=9]="MessageSignature",t[t.StructuredDataSignature=10]="StructuredDataSignature",t[t.TransactionAuthField=11]="TransactionAuthField"})(ds||(ds={}));function hg(t,e){return{type:ds.Address,version:t,hash160:e}}function dg(t){return xn.c32address(t.version,t.hash160)}const gg=t=>Qs(Et(t)),pg=t=>Wd(gg(t));W.hmacSha256Sync=(t,...e)=>{const n=_e.create(Et,t);return e.forEach(r=>n.update(r)),n.digest()};function yg(t,e="mainnet"){e=$c(e),t=typeof t=="string"?Jd(t):t;const n=ug(Vt.P2PKH,e),r=hg(n,pg(t));return dg(r)}function wg(t,e){const n=it.decodeToken(t),r=n.payload;if(typeof r=="string")throw new Error("Unexpected token payload type of string");if(r.hasOwnProperty("subject")&&r.subject){if(!r.subject.hasOwnProperty("publicKey"))throw new Error("Token doesn't have a subject public key")}else throw new Error("Token doesn't have a subject");if(r.hasOwnProperty("issuer")&&r.issuer){if(!r.issuer.hasOwnProperty("publicKey"))throw new Error("Token doesn't have an issuer public key")}else throw new Error("Token doesn't have an issuer");if(!r.hasOwnProperty("claim"))throw new Error("Token doesn't have a claim");const s=r.issuer.publicKey,i=yg(s);if(e!==s){if(e!==i)throw new Error("Token issuer public key does not match the verifying value")}const o=new it.TokenVerifier(n.header.alg,s);if(!o)throw new Error("Invalid token verifier");if(!o.verify(t))throw new Error("Token verification failed");return n}function Sg(t,e=null){let n;e?n=wg(t,e):n=it.decodeToken(t);let r={};if(n.hasOwnProperty("payload")){const s=n.payload;if(typeof s=="string")throw new Error("Unexpected token payload type of string");s.hasOwnProperty("claim")&&(r=s.claim)}return r}const _o="_blockstackDidCheckEchoReply",bg="echoReply",mg="authContinuation";function Eg(t){return t?(/^[?#]/.test(t)?t.slice(1):t).split("&").reduce((n,r)=>{const[s,i]=r.split("=");return n[s]=i?decodeURIComponent(i.replace(/\+/g," ")):"",n},{}):{}}function Ag(){let t;if(typeof self<"u")t=self;else if(typeof window<"u")t=window;else return!1;if(!t.location||!t.localStorage)return!1;const e=t[_o];if(typeof e=="boolean")return e;const n=Eg(t.location.search),r=n[bg];if(r){t[_o]=!0;const s=`echo-reply-${r}`;return t.localStorage.setItem(s,"success"),t.setTimeout(()=>{const i=n[mg];t.location.href=i},10),!0}return!1}class ur{constructor(e){let n=!0;if(typeof window>"u"&&typeof self>"u"&&(n=!1),e&&e.appConfig)this.appConfig=e.appConfig;else if(n)this.appConfig=new Hs;else throw new Wl("You need to specify options.appConfig");e&&e.sessionStore?this.store=e.sessionStore:n?e?this.store=new po(e.sessionOptions):this.store=new po:e?this.store=new go(e.sessionOptions):this.store=new go}makeAuthRequestToken(e,n,r,s,i,o=tf().getTime(),a={}){const u=this.appConfig;if(!u)throw new is("Missing AppConfig");return e=e||this.generateAndStoreTransitKey(),n=n||u.redirectURI(),r=r||u.manifestURI(),s=s||u.scopes,i=i||u.appDomain,Kd(e,n,r,s,i,o,a)}generateAndStoreTransitKey(){const e=this.store.getSessionData(),n=Rd();return e.transitKey=n,this.store.setSessionData(e),n}getAuthResponseToken(){var r;const e=(r=ks("location",{throwIfUnavailable:!0,usageDesc:"getAuthResponseToken"}))==null?void 0:r.search;return new URLSearchParams(e).get("authResponse")??""}isSignInPending(){try{if(Ag())return je.info("protocolEchoReply detected from isSignInPending call, the page is about to redirect."),!0}catch(e){je.error(`Error checking for protocol echo reply isSignInPending: ${e}`)}return!!this.getAuthResponseToken()}isUserSignedIn(){return!!this.store.getSessionData().userData}async handlePendingSignIn(e=this.getAuthResponseToken(),n=hf()){const r=this.store.getSessionData();if(r.userData)throw new Tn("Existing user session found.");const s=this.store.getSessionData().transitKey;this.appConfig&&this.appConfig.coreNode;const i=it.decodeToken(e).payload;if(typeof i=="string")throw new Error("Unexpected token payload type of string");if(!await Zd(e))throw new Tn("Invalid authentication response.");let a=i.private_key,u=i.core_token;if(Vr(i.version,"1.1.0"))if(s!==void 0&&s!=null){if(i.private_key!==void 0&&i.private_key!==null)try{a=await fo(s,i.private_key)}catch{if(je.warn("Failed decryption of appPrivateKey, will try to use as given"),!W.isValidPrivateKey(i.private_key))throw new Tn("Failed decrypting appPrivateKey. Usually means that the transit key has changed during login.")}if(u!=null)try{u=await fo(s,u)}catch{je.info("Failed decryption of coreSessionToken, will try to use as given")}}else throw new Tn("Authenticating with protocol > 1.1.0 requires transit key, and none found.");let l=cf,f;Vr(i.version,"1.2.0")&&i.hubUrl!==null&&i.hubUrl!==void 0&&(l=i.hubUrl),Vr(i.version,"1.3.0")&&i.associationToken!==null&&i.associationToken!==void 0&&(f=i.associationToken);const h={profile:i.profile,email:i.email,decentralizedID:i.iss,identityAddress:vc(i.iss),appPrivateKey:a,coreSessionToken:u,authResponseToken:e,hubUrl:l,appPrivateKeyFromWalletSalt:i.appPrivateKeyFromWalletSalt,coreNode:i.blockstackAPIUrl,gaiaAssociationToken:f},y=i.profile_url;if(!h.profile&&y){const p=await n(y);if(!p.ok)h.profile=Object.assign({},Zl);else{const b=await p.text(),m=JSON.parse(b);h.profile=Sg(m[0].token)}}else h.profile=i.profile;return r.userData=h,this.store.setSessionData(r),h}loadUserData(){const e=this.store.getSessionData().userData;if(!e)throw new is("No user data found. Did the user sign in?");return e}encryptContent(e,n){const r=Object.assign({},n);return r.privateKey||(r.privateKey=this.loadUserData().appPrivateKey),fd(e,r)}decryptContent(e,n){const r=Object.assign({},n);return r.privateKey||(r.privateKey=this.loadUserData().appPrivateKey),hd(e,r)}signUserOut(e){this.store.deleteSessionData(),e&&typeof location<"u"&&location.href&&(location.href=e)}}ur.prototype.makeAuthRequest=ur.prototype.makeAuthRequestToken;const Ig=()=>typeof window>"u"?[]:window.webbtc_stx_providers?window.webbtc_stx_providers:[],vg=(t=[])=>{if(typeof window>"u")return[];const e=Ig(),n=t.filter(r=>e.find(i=>i.id===r.id)?!1:!!_c(r.id));return e.concat(n)},_c=t=>t==null?void 0:t.split(".").reduce((e,n)=>e==null?void 0:e[n],window),Dc="STX_PROVIDER",Oc=()=>typeof window>"u"?null:window.localStorage.getItem(Dc),zw=t=>{typeof window<"u"&&window.localStorage.setItem(Dc,t)};(function(){(function(t){(function(e){var n={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function r(d){return d&&DataView.prototype.isPrototypeOf(d)}if(n.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(d){return d&&s.indexOf(Object.prototype.toString.call(d))>-1};function o(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(d))throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function a(d){return typeof d!="string"&&(d=String(d)),d}function u(d){var E={next:function(){var L=d.shift();return{done:L===void 0,value:L}}};return n.iterable&&(E[Symbol.iterator]=function(){return E}),E}function l(d){this.map={},d instanceof l?d.forEach(function(E,L){this.append(L,E)},this):Array.isArray(d)?d.forEach(function(E){this.append(E[0],E[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(E){this.append(E,d[E])},this)}l.prototype.append=function(d,E){d=o(d),E=a(E);var L=this.map[d];this.map[d]=L?L+", "+E:E},l.prototype.delete=function(d){delete this.map[o(d)]},l.prototype.get=function(d){return d=o(d),this.has(d)?this.map[d]:null},l.prototype.has=function(d){return this.map.hasOwnProperty(o(d))},l.prototype.set=function(d,E){this.map[o(d)]=a(E)},l.prototype.forEach=function(d,E){for(var L in this.map)this.map.hasOwnProperty(L)&&d.call(E,this.map[L],L,this)},l.prototype.keys=function(){var d=[];return this.forEach(function(E,L){d.push(L)}),u(d)},l.prototype.values=function(){var d=[];return this.forEach(function(E){d.push(E)}),u(d)},l.prototype.entries=function(){var d=[];return this.forEach(function(E,L){d.push([L,E])}),u(d)},n.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);function f(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function h(d){return new Promise(function(E,L){d.onload=function(){E(d.result)},d.onerror=function(){L(d.error)}})}function y(d){var E=new FileReader,L=h(E);return E.readAsArrayBuffer(d),L}function p(d){var E=new FileReader,L=h(E);return E.readAsText(d),L}function b(d){for(var E=new Uint8Array(d),L=new Array(E.length),Y=0;Y<E.length;Y++)L[Y]=String.fromCharCode(E[Y]);return L.join("")}function m(d){if(d.slice)return d.slice(0);var E=new Uint8Array(d.byteLength);return E.set(new Uint8Array(d)),E.buffer}function x(){return this.bodyUsed=!1,this._initBody=function(d){this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:n.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:n.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():n.arrayBuffer&&n.blob&&r(d)?(this._bodyArrayBuffer=m(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||i(d))?this._bodyArrayBuffer=m(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var d=f(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var d=f(this);if(d)return d;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(b(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}var B=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(d){var E=d.toUpperCase();return B.indexOf(E)>-1?E:d}function N(d,E){E=E||{};var L=E.body;if(d instanceof N){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,E.headers||(this.headers=new l(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!L&&d._bodyInit!=null&&(L=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=E.credentials||this.credentials||"same-origin",(E.headers||!this.headers)&&(this.headers=new l(E.headers)),this.method=_(E.method||this.method||"GET"),this.mode=E.mode||this.mode||null,this.signal=E.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(L)}N.prototype.clone=function(){return new N(this,{body:this._bodyInit})};function S(d){var E=new FormData;return d.trim().split("&").forEach(function(L){if(L){var Y=L.split("="),q=Y.shift().replace(/\+/g," "),k=Y.join("=").replace(/\+/g," ");E.append(decodeURIComponent(q),decodeURIComponent(k))}}),E}function A(d){var E=new l,L=d.replace(/\r?\n[\t ]+/g," ");return L.split(/\r?\n/).forEach(function(Y){var q=Y.split(":"),k=q.shift().trim();if(k){var Ct=q.join(":").trim();E.append(k,Ct)}}),E}x.call(N.prototype);function $(d,E){E||(E={}),this.type="default",this.status=E.status===void 0?200:E.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in E?E.statusText:"OK",this.headers=new l(E.headers),this.url=E.url||"",this._initBody(d)}x.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},$.error=function(){var d=new $(null,{status:0,statusText:""});return d.type="error",d};var C=[301,302,303,307,308];$.redirect=function(d,E){if(C.indexOf(E)===-1)throw new RangeError("Invalid status code");return new $(null,{status:E,headers:{location:d}})},e.DOMException=t.DOMException;try{new e.DOMException}catch{e.DOMException=function(E,L){this.message=E,this.name=L;var Y=Error(E);this.stack=Y.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function T(d,E){return new Promise(function(L,Y){var q=new N(d,E);if(q.signal&&q.signal.aborted)return Y(new e.DOMException("Aborted","AbortError"));var k=new XMLHttpRequest;function Ct(){k.abort()}k.onload=function(){var he={status:k.status,statusText:k.statusText,headers:A(k.getAllResponseHeaders()||"")};he.url="responseURL"in k?k.responseURL:he.headers.get("X-Request-URL");var cn="response"in k?k.response:k.responseText;L(new $(cn,he))},k.onerror=function(){Y(new TypeError("Network request failed"))},k.ontimeout=function(){Y(new TypeError("Network request failed"))},k.onabort=function(){Y(new e.DOMException("Aborted","AbortError"))},k.open(q.method,q.url,!0),q.credentials==="include"?k.withCredentials=!0:q.credentials==="omit"&&(k.withCredentials=!1),"responseType"in k&&n.blob&&(k.responseType="blob"),q.headers.forEach(function(he,cn){k.setRequestHeader(cn,he)}),q.signal&&(q.signal.addEventListener("abort",Ct),k.onreadystatechange=function(){k.readyState===4&&q.signal.removeEventListener("abort",Ct)}),k.send(typeof q._bodyInit>"u"?null:q._bodyInit)})}return T.polyfill=!0,t.fetch||(t.fetch=T,t.Headers=l,t.Request=N,t.Response=$),e.Headers=l,e.Request=N,e.Response=$,e.fetch=T,Object.defineProperty(e,"__esModule",{value:!0}),e})({})})(typeof self<"u"?self:Gt)})();const xg={referrerPolicy:"origin",headers:{"x-hiro-product":"stacksjs"}};async function Mg(t,e){const n={};return Object.assign(n,xg,e),await fetch(t,n)}function $g(t){let e=Mg,n=[];return t.length>0&&typeof t[0]=="function"&&(e=t.shift()),t.length>0&&(n=t),{fetchLib:e,middlewares:n}}function Ng(...t){const{fetchLib:e,middlewares:n}=$g(t);return async(s,i)=>{let o={url:s,init:i??{}};for(const u of n)typeof u.pre=="function"&&(o=await Promise.resolve(u.pre({fetch:e,...o}))??o);let a=await e(o.url,o.init);for(const u of n)typeof u.post=="function"&&(a=await Promise.resolve(u.post({fetch:e,url:o.url,init:o.init,response:(a==null?void 0:a.clone())??a}))??a);return a}}function Lg(t,e,n){return ti(xr(t,e),n)}function xr(t,e){let n=t;if(typeof n=="number"){if(!Number.isInteger(n))throw new RangeError("Invalid value. Values of type 'number' must be an integer.");if(n>Number.MAX_SAFE_INTEGER)throw new RangeError(`Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`);return BigInt(n)}if(typeof n=="string")if(n.toLowerCase().startsWith("0x")){let r=n.slice(2);r=r.padStart(r.length+r.length%2,"0"),n=wn(r)}else try{return BigInt(n)}catch(r){if(r instanceof SyntaxError)throw new RangeError(`Invalid value. String integer '${n}' is not finite.`)}if(typeof n=="bigint")return n;if(n instanceof Uint8Array)if(e){const r=_g(BigInt(`0x${Do(n)}`),BigInt(n.byteLength*8));return BigInt(r.toString())}else return BigInt(`0x${Do(n)}`);if(n!=null&&typeof n=="object"&&n.constructor.name==="BN")return BigInt(n.toString());throw new TypeError("Invalid value type. Must be a number, bigint, integer-string, hex-string, or Uint8Array.")}function Js(t,e=8){return(typeof t=="bigint"?t:xr(t,!1)).toString(16).padStart(e*2,"0")}function ti(t,e=16){const n=Js(t,e);return wn(n)}function Cg(t,e){if(t<-(BigInt(1)<<e-BigInt(1))||(BigInt(1)<<e-BigInt(1))-BigInt(1)<t)throw`Unable to represent integer in width: ${e}`;return t>=BigInt(0)?BigInt(t):t+(BigInt(1)<<e)}function Bg(t,e){return t&BigInt(1)<<e}function _g(t,e){return Bg(t,e-BigInt(1))?t-(BigInt(1)<<e):t}const Dg=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Do(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(const n of t)e+=Dg[n];return e}function wn(t){if(typeof t!="string")throw new TypeError(`hexToBytes: expected string, got ${typeof t}`);t=t.startsWith("0x")||t.startsWith("0X")?t.slice(2):t;const e=t.length%2?`0${t}`:t,n=new Uint8Array(e.length/2);for(let r=0;r<n.length;r++){const s=r*2,i=e.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Mn(t){return new TextEncoder().encode(t)}function Og(t){const e=[];for(let n=0;n<t.length;n++)e.push(t.charCodeAt(n)&255);return new Uint8Array(e)}function Ug(t){return!Number.isInteger(t)||t<0||t>255}function Oo(t){if(t.some(Ug))throw new Error("Some values are invalid bytes.");return new Uint8Array(t)}function ei(...t){if(!t.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const e=t.reduce((r,s)=>r+s.length,0),n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function Qt(t){return ei(...t.map(e=>typeof e=="number"?Oo([e]):e instanceof Array?Oo(e):e))}var jt;(function(t){t[t.Testnet=2147483648]="Testnet",t[t.Mainnet=1]="Mainnet"})(jt||(jt={}));var At;(function(t){t[t.Mainnet=0]="Mainnet",t[t.Testnet=128]="Testnet"})(At||(At={}));var Uo;(function(t){t[t.Mainnet=385875968]="Mainnet",t[t.Testnet=4278190080]="Testnet"})(Uo||(Uo={}));function Mr(t,e,n=0){return t[n+3]=e,e>>>=8,t[n+2]=e,e>>>=8,t[n+1]=e,e>>>=8,t[n]=e,t}const Tg="https://api.mainnet.hiro.so",Pg="https://api.testnet.hiro.so",jg="http://localhost:3999",kg=["mainnet","testnet","devnet","mocknet"];let xe=class{constructor(e){this.version=At.Mainnet,this.chainId=jt.Mainnet,this.bnsLookupUrl="https://api.mainnet.hiro.so",this.broadcastEndpoint="/v2/transactions",this.transferFeeEstimateEndpoint="/v2/fees/transfer",this.transactionFeeEstimateEndpoint="/v2/fees/transaction",this.accountEndpoint="/v2/accounts",this.contractAbiEndpoint="/v2/contracts/interface",this.readOnlyFunctionCallEndpoint="/v2/contracts/call-read",this.isMainnet=()=>this.version===At.Mainnet,this.getBroadcastApiUrl=()=>`${this.coreApiUrl}${this.broadcastEndpoint}`,this.getTransferFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transferFeeEstimateEndpoint}`,this.getTransactionFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transactionFeeEstimateEndpoint}`,this.getAccountApiUrl=n=>`${this.coreApiUrl}${this.accountEndpoint}/${n}?proof=0`,this.getAccountExtendedBalancesApiUrl=n=>`${this.coreApiUrl}/extended/v1/address/${n}/balances`,this.getAbiApiUrl=(n,r)=>`${this.coreApiUrl}${this.contractAbiEndpoint}/${n}/${r}`,this.getReadOnlyFunctionCallApiUrl=(n,r,s)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}/${n}/${r}/${encodeURIComponent(s)}`,this.getInfoUrl=()=>`${this.coreApiUrl}/v2/info`,this.getBlockTimeInfoUrl=()=>`${this.coreApiUrl}/extended/v1/info/network_block_times`,this.getPoxInfoUrl=()=>`${this.coreApiUrl}/v2/pox`,this.getRewardsUrl=(n,r)=>{let s=`${this.coreApiUrl}/extended/v1/burnchain/rewards/${n}`;return r&&(s=`${s}?limit=${r.limit}&offset=${r.offset}`),s},this.getRewardsTotalUrl=n=>`${this.coreApiUrl}/extended/v1/burnchain/rewards/${n}/total`,this.getRewardHoldersUrl=(n,r)=>{let s=`${this.coreApiUrl}/extended/v1/burnchain/reward_slot_holders/${n}`;return r&&(s=`${s}?limit=${r.limit}&offset=${r.offset}`),s},this.getStackerInfoUrl=(n,r)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}
    ${n}/${r}/get-stacker-info`,this.getDataVarUrl=(n,r,s)=>`${this.coreApiUrl}/v2/data_var/${n}/${r}/${s}?proof=0`,this.getMapEntryUrl=(n,r,s)=>`${this.coreApiUrl}/v2/map_entry/${n}/${r}/${s}?proof=0`,this.coreApiUrl=e.url,this.fetchFn=e.fetchFn??Ng()}getNameInfo(e){const n=`${this.bnsLookupUrl}/v1/names/${e}`;return this.fetchFn(n).then(r=>{if(r.status===404)throw new Error("Name not found");if(r.status!==200)throw new Error(`Bad response status: ${r.status}`);return r.json()}).then(r=>r.address?Object.assign({},r,{address:r.address}):r)}};xe.fromName=t=>{switch(t){case"mainnet":return new gs;case"testnet":return new ps;case"devnet":return new Hg;case"mocknet":return new Uc;default:throw new Error(`Invalid network name provided. Must be one of the following: ${kg.join(", ")}`)}};xe.fromNameOrNetwork=t=>typeof t!="string"&&"version"in t?t:xe.fromName(t);let gs=class extends xe{constructor(e){super({url:(e==null?void 0:e.url)??Tg,fetchFn:e==null?void 0:e.fetchFn}),this.version=At.Mainnet,this.chainId=jt.Mainnet}},ps=class extends xe{constructor(e){super({url:(e==null?void 0:e.url)??Pg,fetchFn:e==null?void 0:e.fetchFn}),this.version=At.Testnet,this.chainId=jt.Testnet}},Uc=class extends xe{constructor(e){super({url:(e==null?void 0:e.url)??jg,fetchFn:e==null?void 0:e.fetchFn}),this.version=At.Testnet,this.chainId=jt.Testnet}};const Hg=Uc;var Me;(function(t){t[t.Mainnet=1]="Mainnet",t[t.Testnet=2147483648]="Testnet"})(Me||(Me={}));var lr;(function(t){t[t.Mainnet=385875968]="Mainnet",t[t.Testnet=4278190080]="Testnet"})(lr||(lr={}));Me.Mainnet;var $e;(function(t){t[t.Mainnet=0]="Mainnet",t[t.Testnet=128]="Testnet"})($e||($e={}));var Ne;(function(t){t[t.MainnetSingleSig=22]="MainnetSingleSig",t[t.MainnetMultiSig=20]="MainnetMultiSig",t[t.TestnetSingleSig=26]="TestnetSingleSig",t[t.TestnetMultiSig=21]="TestnetMultiSig"})(Ne||(Ne={}));$e.Mainnet;function ce(t,e){return ni(ct(t),e)}function ct(t){if(typeof t=="bigint")return t;if(typeof t=="string")return BigInt(t);if(typeof t=="number"){if(!Number.isInteger(t))throw new RangeError("Invalid value. Values of type 'number' must be an integer.");if(t>Number.MAX_SAFE_INTEGER)throw new RangeError(`Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`);return BigInt(t)}if(lt(t,Uint8Array))return BigInt(`0x${D(t)}`);throw new TypeError("intToBigInt: Invalid value type. Must be a number, bigint, BigInt-compatible string, or Uint8Array.")}function Fg(t){return/^0x/i.test(t)?t.slice(2):t}function To(t){if(typeof t!="string")throw new TypeError(`hexToBigInt: expected string, got ${typeof t}`);return BigInt(`0x${t}`)}function $n(t,e=8){return(typeof t=="bigint"?t:ct(t)).toString(16).padStart(e*2,"0")}function $r(t){return parseInt(t,16)}function ni(t,e=16){const n=$n(t,e);return V(n)}function zg(t,e){if(t<-(BigInt(1)<<e-BigInt(1))||(BigInt(1)<<e-BigInt(1))-BigInt(1)<t)throw`Unable to represent integer in width: ${e}`;return t>=BigInt(0)?BigInt(t):t+(BigInt(1)<<e)}function Rg(t,e){return t&BigInt(1)<<e}function ys(t){return Kg(BigInt(`0x${D(t)}`),BigInt(t.byteLength*8))}function Kg(t,e){return Rg(t,e-BigInt(1))?t-(BigInt(1)<<e):t}const Vg=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function D(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(const n of t)e+=Vg[n];return e}function V(t){if(typeof t!="string")throw new TypeError(`hexToBytes: expected string, got ${typeof t}`);t=Fg(t),t=t.length%2?`0${t}`:t;const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=n*2,s=t.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[n]=i}return e}function Nn(t){return new TextEncoder().encode(t)}function ri(t){return new TextDecoder().decode(t)}function Gg(t){const e=[];for(let n=0;n<t.length;n++)e.push(t.charCodeAt(n)&255);return new Uint8Array(e)}function Yg(t){return String.fromCharCode.apply(null,t)}function qg(t){return!Number.isInteger(t)||t<0||t>255}function Po(t){if(t.some(qg))throw new Error("Some values are invalid bytes.");return new Uint8Array(t)}function Nr(...t){if(!t.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const e=t.reduce((r,s)=>r+s.length,0),n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function J(t){return Nr(...t.map(e=>typeof e=="number"?Po([e]):e instanceof Array?Po(e):e))}function lt(t,e){var n,r;return t instanceof e||((r=(n=t==null?void 0:t.constructor)==null?void 0:n.name)==null?void 0:r.toLowerCase())===e.name}const Zg="https://api.mainnet.hiro.so",Qg="https://api.testnet.hiro.so",Xg="http://localhost:3999",Wg=33,Qr=32;function Jg(t){if(t.length<Qr*2*2+1)throw new Error("Invalid signature");const e=t.slice(0,2),n=t.slice(2,2+Qr*2),r=t.slice(2+Qr*2);return{recoveryId:$r(e),r:n,s:r}}function Tc(t){const e=typeof t=="string"?V(t):t;if(e.length!=32&&e.length!=33)throw new Error(`Improperly formatted private-key. Private-key byte length should be 32 or 33. Length provided: ${e.length}`);if(e.length==33&&e[32]!==1)throw new Error("Improperly formatted private-key. 33 bytes indicate compressed key, but the last byte must be == 01");return e}function t0(t,e){return(t[e+0]<<8|t[e+1])>>>0}function e0(t,e,n=0){return t[n+0]=e>>>8,t[n+1]=e>>>0,t}function n0(t,e){return t[e]}function r0(t,e,n=0){return t[n]=e,t}function s0(t,e){return t[e]*2**24+t[e+1]*2**16+t[e+2]*2**8+t[e+3]}function Le(t,e,n=0){return t[n+3]=e,e>>>=8,t[n+2]=e,e>>>=8,t[n+1]=e,e>>>=8,t[n]=e,t}const i0={chainId:Me.Mainnet,transactionVersion:$e.Mainnet,peerNetworkId:lr.Mainnet,magicBytes:"X2",bootAddress:"SP000000000000000000002Q6VF78",addressVersion:{singleSig:Ne.MainnetSingleSig,multiSig:Ne.MainnetMultiSig},client:{baseUrl:Zg}},ws={chainId:Me.Testnet,transactionVersion:$e.Testnet,peerNetworkId:lr.Testnet,magicBytes:"T2",bootAddress:"ST000000000000000000002AMW42H",addressVersion:{singleSig:Ne.TestnetSingleSig,multiSig:Ne.TestnetMultiSig},client:{baseUrl:Qg}},Xn={...ws,addressVersion:{...ws.addressVersion},magicBytes:"id",client:{baseUrl:Xg}},o0={...Xn,addressVersion:{...Xn.addressVersion},client:{...Xn.client}};function a0(t){switch(t){case"mainnet":return i0;case"testnet":return ws;case"devnet":return Xn;case"mocknet":return o0;default:throw new Error(`Unknown network name: ${t}`)}}function c0(t){return typeof t=="string"?a0(t):t}function u0(t){const e=Object.values(t).filter(r=>typeof r=="number"),n=new Set(e);return r=>n.has(r)}const jo=new Map;function Pc(t,e){const n=jo.get(t);if(n!==void 0)return n(e);const r=u0(t);return jo.set(t,r),Pc(t,e)}class G{constructor(e){this.consumed=0,this.source=typeof e=="string"?V(e):e}readBytes(e){const n=this.source.subarray(this.consumed,this.consumed+e);return this.consumed+=e,n}readUInt32BE(){return s0(this.readBytes(4),0)}readUInt8(){return n0(this.readBytes(1),0)}readUInt16BE(){return t0(this.readBytes(2),0)}readBigUIntLE(e){const n=this.readBytes(e).slice().reverse(),r=D(n);return BigInt(`0x${r}`)}readBigUIntBE(e){const n=this.readBytes(e),r=D(n);return BigInt(`0x${r}`)}get readOffset(){return this.consumed}set readOffset(e){this.consumed=e}get internalBytes(){return this.source}readUInt8Enum(e,n){const r=this.readUInt8();if(Pc(e,r))return r;throw n(r)}}const l0=128,f0=128,jc=16,me=32,Ss=80,Lr=65,h0=32,d0=64,fr=34,g0=1+16*1024*1024,p0=165,y0=16,w0=16,S0=20,b0=w0+2+S0,m0=b0+4,E0=g0+(p0+y0*m0);var F;(function(t){t[t.TokenTransfer=0]="TokenTransfer",t[t.SmartContract=1]="SmartContract",t[t.VersionedSmartContract=6]="VersionedSmartContract",t[t.ContractCall=2]="ContractCall",t[t.PoisonMicroblock=3]="PoisonMicroblock",t[t.Coinbase=4]="Coinbase",t[t.CoinbaseToAltRecipient=5]="CoinbaseToAltRecipient",t[t.TenureChange=7]="TenureChange",t[t.NakamotoCoinbase=8]="NakamotoCoinbase"})(F||(F={}));var bs;(function(t){t[t.Clarity1=1]="Clarity1",t[t.Clarity2=2]="Clarity2",t[t.Clarity3=3]="Clarity3"})(bs||(bs={}));var ht;(function(t){t[t.OnChainOnly=1]="OnChainOnly",t[t.OffChainOnly=2]="OffChainOnly",t[t.Any=3]="Any"})(ht||(ht={}));const Xr=["onChainOnly","offChainOnly","any"];Xr[0]+"",ht.OnChainOnly,Xr[1]+"",ht.OffChainOnly,Xr[2]+"",ht.Any,ht.OnChainOnly+"",ht.OnChainOnly,ht.OffChainOnly+"",ht.OffChainOnly,ht.Any+"",ht.Any;var hr;(function(t){t[t.Allow=1]="Allow",t[t.Deny=2]="Deny"})(hr||(hr={}));var rt;(function(t){t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible"})(rt||(rt={}));var X;(function(t){t[t.Standard=4]="Standard",t[t.Sponsored=5]="Sponsored"})(X||(X={}));var R;(function(t){t[t.P2PKH=0]="P2PKH",t[t.P2SH=1]="P2SH",t[t.P2WPKH=2]="P2WPKH",t[t.P2WSH=3]="P2WSH",t[t.P2SHNonSequential=5]="P2SHNonSequential",t[t.P2WSHNonSequential=7]="P2WSHNonSequential"})(R||(R={}));var Q;(function(t){t[t.Compressed=0]="Compressed",t[t.Uncompressed=1]="Uncompressed"})(Q||(Q={}));var dr;(function(t){t[t.Equal=1]="Equal",t[t.Greater=2]="Greater",t[t.GreaterEqual=3]="GreaterEqual",t[t.Less=4]="Less",t[t.LessEqual=5]="LessEqual"})(dr||(dr={}));var ms;(function(t){t[t.Sends=16]="Sends",t[t.DoesNotSend=17]="DoesNotSend"})(ms||(ms={}));var yt;(function(t){t[t.Origin=1]="Origin",t[t.Standard=2]="Standard",t[t.Contract=3]="Contract"})(yt||(yt={}));var ko;(function(t){t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible"})(ko||(ko={}));var Es;(function(t){t[t.BlockFound=0]="BlockFound",t[t.Extended=1]="Extended"})(Es||(Es={}));var Mt;(function(t){t[t.PublicKeyCompressed=0]="PublicKeyCompressed",t[t.PublicKeyUncompressed=1]="PublicKeyUncompressed",t[t.SignatureCompressed=2]="SignatureCompressed",t[t.SignatureUncompressed=3]="SignatureUncompressed"})(Mt||(Mt={}));var Ho;(function(t){t.Serialization="Serialization",t.Deserialization="Deserialization",t.SignatureValidation="SignatureValidation",t.FeeTooLow="FeeTooLow",t.BadNonce="BadNonce",t.NotEnoughFunds="NotEnoughFunds",t.NoSuchContract="NoSuchContract",t.NoSuchPublicFunction="NoSuchPublicFunction",t.BadFunctionArgument="BadFunctionArgument",t.ContractAlreadyExists="ContractAlreadyExists",t.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",t.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",t.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",t.BadAddressVersionByte="BadAddressVersionByte",t.NoCoinbaseViaMempool="NoCoinbaseViaMempool",t.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",t.ServerFailureDatabase="ServerFailureDatabase",t.ServerFailureOther="ServerFailureOther"})(Ho||(Ho={}));let Cr=class extends Error{constructor(e){super(e),this.message=e,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},He=class extends Cr{constructor(e){super(e)}};class gt extends Cr{constructor(e){super(e)}}class gr extends Cr{constructor(e){super(e)}}class be extends Cr{constructor(e){super(e)}}var P;(function(t){t.Int="int",t.UInt="uint",t.Buffer="buffer",t.BoolTrue="true",t.BoolFalse="false",t.PrincipalStandard="address",t.PrincipalContract="contract",t.ResponseOk="ok",t.ResponseErr="err",t.OptionalNone="none",t.OptionalSome="some",t.List="list",t.Tuple="tuple",t.StringASCII="ascii",t.StringUTF8="utf8"})(P||(P={}));var tt;(function(t){t[t.int=0]="int",t[t.uint=1]="uint",t[t.buffer=2]="buffer",t[t.true=3]="true",t[t.false=4]="false",t[t.address=5]="address",t[t.contract=6]="contract",t[t.ok=7]="ok",t[t.err=8]="err",t[t.none=9]="none",t[t.some=10]="some",t[t.list=11]="list",t[t.tuple=12]="tuple",t[t.ascii=13]="ascii",t[t.utf8=14]="utf8"})(tt||(tt={}));function si(t){return tt[t]}const A0=()=>({type:P.BoolTrue}),I0=()=>({type:P.BoolFalse}),v0=t=>{if(t.byteLength>1048576)throw new Error("Cannot construct clarity buffer that is greater than 1MB");return{type:P.Buffer,value:D(t)}},Fo=BigInt("0xffffffffffffffffffffffffffffffff"),x0=BigInt(0),zo=BigInt("0x7fffffffffffffffffffffffffffffff"),Ro=BigInt("-170141183460469231731687303715884105728"),M0=t=>{typeof t=="string"&&t.toLowerCase().startsWith("0x")&&(t=ys(V(t))),lt(t,Uint8Array)&&(t=ys(t));const e=ct(t);if(e>zo)throw new RangeError(`Cannot construct clarity integer from value greater than ${zo}`);if(e<Ro)throw new RangeError(`Cannot construct clarity integer form value less than ${Ro}`);return{type:P.Int,value:e}},$0=t=>{const e=ct(t);if(e<x0)throw new RangeError("Cannot construct unsigned clarity integer from negative value");if(e>Fo)throw new RangeError(`Cannot construct unsigned clarity integer greater than ${Fo}`);return{type:P.UInt,value:e}};function N0(t){return{type:P.List,value:t}}function kc(){return{type:P.OptionalNone}}function Hc(t){return{type:P.OptionalSome,value:t}}var v;(function(t){t[t.Address=0]="Address",t[t.Principal=1]="Principal",t[t.LengthPrefixedString=2]="LengthPrefixedString",t[t.MemoString=3]="MemoString",t[t.Asset=4]="Asset",t[t.PostCondition=5]="PostCondition",t[t.PublicKey=6]="PublicKey",t[t.LengthPrefixedList=7]="LengthPrefixedList",t[t.Payload=8]="Payload",t[t.MessageSignature=9]="MessageSignature",t[t.StructuredDataSignature=10]="StructuredDataSignature",t[t.TransactionAuthField=11]="TransactionAuthField"})(v||(v={}));function L0(){return{type:v.Address,version:Ne.MainnetSingleSig,hash160:"0".repeat(40)}}function Ko(t){if(t&&Zc(t,fr))throw new Error(`Memo exceeds maximum length of ${fr} bytes`);return{type:v.MemoString,content:t}}function ii(t,e){return{type:v.LengthPrefixedList,lengthPrefixBytes:e||4,values:t}}function As(t){if(V(t).byteLength!=Lr)throw Error("Invalid signature");return{type:v.MessageSignature,data:t}}function C0(t,e,n){return typeof t=="string"&&(t=G0(t)),typeof n=="string"&&(n=Ko(n)),{type:v.Payload,payloadType:F.TokenTransfer,recipient:t,amount:ct(e),memo:n??Ko("")}}function B0(t,e,n,r){return typeof e=="string"&&(e=Lt(e)),typeof n=="string"&&(n=Lt(n)),{type:v.Payload,payloadType:F.ContractCall,contractAddress:typeof t=="string"?fe(t):t,contractName:e,functionName:n,functionArgs:r}}function _0(t){return Lt(t,4,1e5)}function Vo(t,e,n){return typeof t=="string"&&(t=Lt(t)),typeof e=="string"&&(e=_0(e)),typeof n=="number"?{type:v.Payload,payloadType:F.VersionedSmartContract,clarityVersion:n,contractName:t,codeBody:e}:{type:v.Payload,payloadType:F.SmartContract,contractName:t,codeBody:e}}function D0(){return{type:v.Payload,payloadType:F.PoisonMicroblock}}function Go(t,e){if(t.byteLength!=me)throw Error(`Coinbase buffer size must be ${me} bytes`);return e!=null?{type:v.Payload,payloadType:F.CoinbaseToAltRecipient,coinbaseBytes:t,recipient:e}:{type:v.Payload,payloadType:F.Coinbase,coinbaseBytes:t}}function O0(t,e,n){if(t.byteLength!=me)throw Error(`Coinbase buffer size must be ${me} bytes`);if(n.byteLength!=Ss)throw Error(`VRF proof buffer size must be ${Ss} bytes`);return{type:v.Payload,payloadType:F.NakamotoCoinbase,coinbaseBytes:t,recipient:e.type===P.OptionalSome?e.value:void 0,vrfProof:n}}function U0(t,e,n,r,s,i,o){return{type:v.Payload,payloadType:F.TenureChange,tenureHash:t,previousTenureHash:e,burnViewHash:n,previousTenureEnd:r,previousTenureBlocks:s,cause:i,publicKeyHash:o}}function Lt(t,e,n){const r=e||1,s=n||l0;if(Zc(t,s))throw new Error(`String length exceeds maximum bytes ${s}`);return{type:v.LengthPrefixedString,content:t,lengthPrefixBytes:r,maxLengthBytes:s}}function T0(t,e,n){return{type:v.Asset,address:fe(t),contractName:Lt(e),assetName:Lt(n)}}function fe(t){const e=xn.c32addressDecode(t);return{type:v.Address,version:e[0],hash160:e[1]}}function P0(t,e){const n=fe(t),r=Lt(e);return{type:v.Principal,prefix:yt.Contract,address:n,contractName:r}}function j0(t){const e=fe(t);return{type:v.Principal,prefix:yt.Standard,address:e}}function Fe(t,e){return{pubKeyEncoding:t,type:v.TransactionAuthField,contents:e}}function Kt(t){switch(t.type){case v.Address:return Ln(t);case v.Principal:return Fc(t);case v.LengthPrefixedString:return We(t);case v.MemoString:return H0(t);case v.Asset:return Rc(t);case v.PostCondition:return Vc(t);case v.PublicKey:return xs(t);case v.LengthPrefixedList:return oi(t);case v.Payload:return Gc(t);case v.TransactionAuthField:return V0(t);case v.MessageSignature:return ai(t)}}function Ln(t){const e=[];return e.push(V($n(t.version,1))),e.push(V(t.hash160)),J(e)}function Xe(t){const e=lt(t,G)?t:new G(t),n=$r(D(e.readBytes(1))),r=D(e.readBytes(20));return{type:v.Address,version:n,hash160:r}}function Fc(t){const e=[];return e.push(t.prefix),(t.prefix===yt.Standard||t.prefix===yt.Contract)&&e.push(Ln(t.address)),t.prefix===yt.Contract&&e.push(We(t.contractName)),J(e)}function k0(t){const e=lt(t,G)?t:new G(t),n=e.readUInt8Enum(yt,i=>{throw new gt(`Unexpected Principal payload type: ${i}`)});if(n===yt.Origin)return{type:v.Principal,prefix:n};const r=Xe(e);if(n===yt.Standard)return{type:v.Principal,prefix:n,address:r};const s=mt(e);return{type:v.Principal,prefix:n,address:r,contractName:s}}function We(t){const e=[],n=Nn(t.content),r=n.byteLength;return e.push(V($n(r,t.lengthPrefixBytes))),e.push(n),J(e)}function mt(t,e,n){e=e||1;const r=lt(t,G)?t:new G(t),s=$r(D(r.readBytes(e))),i=ri(r.readBytes(s));return Lt(i,e,n??128)}function H0(t){const e=[],n=Nn(t.content),r=pp(D(n),fr*2);return e.push(V(r)),J(e)}function zc(t){const e=lt(t,G)?t:new G(t);let n=ri(e.readBytes(fr));return n=n.replace(/\u0000*$/,""),{type:v.MemoString,content:n}}function Rc(t){const e=[];return e.push(Ln(t.address)),e.push(We(t.contractName)),e.push(We(t.assetName)),J(e)}function Is(t){const e=lt(t,G)?t:new G(t);return{type:v.Asset,address:Xe(e),contractName:mt(e),assetName:mt(e)}}function oi(t){const e=t.values,n=[];n.push(V($n(e.length,t.lengthPrefixBytes)));for(const r of e)n.push(Kt(r));return J(n)}function Kc(t,e,n){const r=lt(t,G)?t:new G(t),s=$r(D(r.readBytes(n||4))),i=[];for(let o=0;o<s;o++)switch(e){case v.Address:i.push(Xe(r));break;case v.LengthPrefixedString:i.push(mt(r));break;case v.MemoString:i.push(zc(r));break;case v.Asset:i.push(Is(r));break;case v.PostCondition:i.push(z0(r));break;case v.PublicKey:i.push(Ms(r));break;case v.TransactionAuthField:i.push(K0(r));break}return ii(i,n)}function F0(t){return D(Vc(t))}function Vc(t){const e=[];if(e.push(t.conditionType),e.push(Fc(t.principal)),(t.conditionType===rt.Fungible||t.conditionType===rt.NonFungible)&&e.push(Rc(t.asset)),t.conditionType===rt.NonFungible&&e.push(Ut(t.assetName)),e.push(t.conditionCode),t.conditionType===rt.STX||t.conditionType===rt.Fungible){if(t.amount>BigInt("0xffffffffffffffff"))throw new He("The post-condition amount may not be larger than 8 bytes");e.push(ce(t.amount,8))}return J(e)}function z0(t){const e=lt(t,G)?t:new G(t),n=e.readUInt8Enum(rt,a=>{throw new gt(`Could not read ${a} as PostConditionType`)}),r=k0(e);let s,i,o;switch(n){case rt.STX:return s=e.readUInt8Enum(dr,u=>{throw new gt(`Could not read ${u} as FungibleConditionCode`)}),o=BigInt(`0x${D(e.readBytes(8))}`),{type:v.PostCondition,conditionType:rt.STX,principal:r,conditionCode:s,amount:o};case rt.Fungible:return i=Is(e),s=e.readUInt8Enum(dr,u=>{throw new gt(`Could not read ${u} as FungibleConditionCode`)}),o=BigInt(`0x${D(e.readBytes(8))}`),{type:v.PostCondition,conditionType:rt.Fungible,principal:r,conditionCode:s,amount:o,asset:i};case rt.NonFungible:i=Is(e);const a=Dt(e);return s=e.readUInt8Enum(ms,u=>{throw new gt(`Could not read ${u} as FungibleConditionCode`)}),{type:v.PostCondition,conditionType:rt.NonFungible,principal:r,conditionCode:s,asset:i,assetName:a}}}function Gc(t){const e=[];switch(e.push(t.payloadType),t.payloadType){case F.TokenTransfer:e.push(Ut(t.recipient)),e.push(ce(t.amount,8)),e.push(Kt(t.memo));break;case F.ContractCall:e.push(Kt(t.contractAddress)),e.push(Kt(t.contractName)),e.push(Kt(t.functionName));const n=new Uint8Array(4);Le(n,t.functionArgs.length,0),e.push(n),t.functionArgs.forEach(r=>{e.push(Ut(r))});break;case F.SmartContract:e.push(Kt(t.contractName)),e.push(Kt(t.codeBody));break;case F.VersionedSmartContract:e.push(t.clarityVersion),e.push(Kt(t.contractName)),e.push(Kt(t.codeBody));break;case F.PoisonMicroblock:break;case F.Coinbase:e.push(t.coinbaseBytes);break;case F.CoinbaseToAltRecipient:e.push(t.coinbaseBytes),e.push(Ut(t.recipient));break;case F.NakamotoCoinbase:e.push(t.coinbaseBytes),e.push(Ut(t.recipient?Hc(t.recipient):kc())),e.push(t.vrfProof);break;case F.TenureChange:e.push(V(t.tenureHash)),e.push(V(t.previousTenureHash)),e.push(V(t.burnViewHash)),e.push(V(t.previousTenureEnd)),e.push(Le(new Uint8Array(4),t.previousTenureBlocks)),e.push(r0(new Uint8Array(1),t.cause)),e.push(V(t.publicKeyHash));break}return J(e)}function R0(t){const e=lt(t,G)?t:new G(t);switch(e.readUInt8Enum(F,r=>{throw new Error(`Cannot recognize PayloadType: ${r}`)})){case F.TokenTransfer:const r=Dt(e),s=ct(e.readBytes(8)),i=zc(e);return C0(r,s,i);case F.ContractCall:const o=Xe(e),a=mt(e),u=mt(e),l=[],f=e.readUInt32BE();for(let S=0;S<f;S++){const A=Dt(e);l.push(A)}return B0(o,a,u,l);case F.SmartContract:const h=mt(e),y=mt(e,4,1e5);return Vo(h,y);case F.VersionedSmartContract:{const S=e.readUInt8Enum(bs,C=>{throw new Error(`Cannot recognize ClarityVersion: ${C}`)}),A=mt(e),$=mt(e,4,E0);return Vo(A,$,S)}case F.PoisonMicroblock:return D0();case F.Coinbase:{const S=e.readBytes(me);return Go(S)}case F.CoinbaseToAltRecipient:{const S=e.readBytes(me),A=Dt(e);return Go(S,A)}case F.NakamotoCoinbase:{const S=e.readBytes(me),A=Dt(e),$=e.readBytes(Ss);return O0(S,A,$)}case F.TenureChange:const p=D(e.readBytes(20)),b=D(e.readBytes(20)),m=D(e.readBytes(20)),x=D(e.readBytes(32)),B=e.readUInt32BE(),_=e.readUInt8Enum(Es,S=>{throw new Error(`Cannot recognize TenureChangeCause: ${S}`)}),N=D(e.readBytes(20));return U0(p,b,m,x,B,_,N)}}function vs(t){const e=lt(t,G)?t:new G(t);return As(D(e.readBytes(Lr)))}function K0(t){const e=lt(t,G)?t:new G(t),n=e.readUInt8Enum(Mt,r=>{throw new gt(`Could not read ${r} as AuthFieldType`)});switch(n){case Mt.PublicKeyCompressed:return Fe(Q.Compressed,Ms(e));case Mt.PublicKeyUncompressed:return Fe(Q.Uncompressed,rn(Mp(Ms(e).data)));case Mt.SignatureCompressed:return Fe(Q.Compressed,vs(e));case Mt.SignatureUncompressed:return Fe(Q.Uncompressed,vs(e));default:throw new Error(`Unknown auth field type: ${JSON.stringify(n)}`)}}function ai(t){return V(t.data)}function V0(t){const e=[];switch(t.contents.type){case v.PublicKey:e.push(t.pubKeyEncoding===Q.Compressed?Mt.PublicKeyCompressed:Mt.PublicKeyUncompressed),e.push(V(xp(t.contents.data)));break;case v.MessageSignature:e.push(t.pubKeyEncoding===Q.Compressed?Mt.SignatureCompressed:Mt.SignatureUncompressed),e.push(ai(t.contents));break}return J(e)}function xs(t){return t.data.slice()}function Ms(t){const e=lt(t,G)?t:new G(t),n=e.readUInt8(),r=n===4?d0:h0;return rn(J([n,e.readBytes(r)]))}function ci(t,e,n,r){if(r.length===0)throw Error("Invalid number of public keys");if((e===R.P2PKH||e===R.P2WPKH)&&(r.length!==1||n!==1))throw Error("Invalid number of public keys or signatures");if((e===R.P2WPKH||e===R.P2WSH||e===R.P2WSHNonSequential)&&!r.map(s=>s.data).every(sn))throw Error("Public keys must be compressed for segwit");switch(e){case R.P2PKH:return Gn(t,yp(r[0].data));case R.P2WPKH:return Gn(t,wp(r[0].data));case R.P2SH:case R.P2SHNonSequential:return Gn(t,Sp(n,r.map(xs)));case R.P2WSH:case R.P2WSHNonSequential:return Gn(t,bp(n,r.map(xs)))}}function Gn(t,e){return{type:v.Address,version:t,hash160:e}}function ui(t){return xn.c32address(t.version,t.hash160)}function Yo(t){const[e,n,r]=t.split(/\.|::/);return T0(e,n,r)}function Wr(t){if(t.includes(".")){const[e,n]=t.split(".");return P0(e,n)}else return j0(t)}function G0(t){if(t.includes(".")){const[e,n]=t.split(".");return Z0(e,n)}else return Y0(t)}function Y0(t){const e=fe(t);return{type:P.PrincipalStandard,value:ui(e)}}function q0(t){return{type:P.PrincipalStandard,value:ui(t)}}function Z0(t,e){const n=fe(t),r=Lt(e);return Yc(n,r)}function Yc(t,e){if(Nn(e.content).byteLength>=128)throw new Error("Contract name must be less than 128 bytes");return{type:P.PrincipalContract,value:`${ui(t)}.${e.content}`}}function Q0(t){return{type:P.ResponseErr,value:t}}function X0(t){return{type:P.ResponseOk,value:t}}const W0=t=>({type:P.StringASCII,value:t}),J0=t=>({type:P.StringUTF8,value:t});function tp(t){for(const e in t)if(!mp(e))throw new Error(`"${e}" is not a valid Clarity name`);return{type:P.Tuple,value:t}}function Dt(t){let e;if(typeof t=="string"){const r=t.slice(0,2).toLowerCase()==="0x";e=new G(V(r?t.slice(2):t))}else t instanceof Uint8Array?e=new G(t):e=t;switch(e.readUInt8Enum(tt,r=>{throw new gt(`Cannot recognize Clarity Type: ${r}`)})){case tt.int:return M0(ys(e.readBytes(16)));case tt.uint:return $0(e.readBytes(16));case tt.buffer:const r=e.readUInt32BE();return v0(e.readBytes(r));case tt.true:return A0();case tt.false:return I0();case tt.address:const s=Xe(e);return q0(s);case tt.contract:const i=Xe(e),o=mt(e);return Yc(i,o);case tt.ok:return X0(Dt(e));case tt.err:return Q0(Dt(e));case tt.none:return kc();case tt.some:return Hc(Dt(e));case tt.list:const a=e.readUInt32BE(),u=[];for(let m=0;m<a;m++)u.push(Dt(e));return N0(u);case tt.tuple:const l=e.readUInt32BE(),f={};for(let m=0;m<l;m++){const x=mt(e).content;if(x===void 0)throw new gt('"content" is undefined');f[x]=Dt(e)}return tp(f);case tt.ascii:const h=e.readUInt32BE(),y=Yg(e.readBytes(h));return W0(y);case tt.utf8:const p=e.readUInt32BE(),b=ri(e.readBytes(p));return J0(b);default:throw new gt("Unable to deserialize Clarity Value from Uint8Array. Could not find valid Clarity Type.")}}function Ht(t,e){return J([si(t),e])}function ep(t){return new Uint8Array([si(t.type)])}function np(t){return t.type===P.OptionalNone?new Uint8Array([si(t.type)]):Ht(t.type,Ut(t.value))}function rp(t){const e=new Uint8Array(4);return Le(e,Math.ceil(t.value.length/2),0),Ht(t.type,Nr(e,V(t.value)))}function sp(t){const e=ni(zg(BigInt(t.value),BigInt(f0)),jc);return Ht(t.type,e)}function ip(t){const e=ni(BigInt(t.value),jc);return Ht(t.type,e)}function op(t){return Ht(t.type,Ln(fe(t.value)))}function ap(t){const[e,n]=Ep(t.value);return Ht(t.type,Nr(Ln(fe(e)),We(Lt(n))))}function cp(t){return Ht(t.type,Ut(t.value))}function up(t){const e=[],n=new Uint8Array(4);Le(n,t.value.length,0),e.push(n);for(const r of t.value){const s=Ut(r);e.push(s)}return Ht(t.type,J(e))}function lp(t){const e=[],n=new Uint8Array(4);Le(n,Object.keys(t.value).length,0),e.push(n);const r=Object.keys(t.value).sort((s,i)=>s.localeCompare(i));for(const s of r){const i=Lt(s);e.push(We(i));const o=Ut(t.value[s]);e.push(o)}return Ht(t.type,J(e))}function qc(t,e){const n=[],r=e=="ascii"?Gg(t.value):Nn(t.value),s=new Uint8Array(4);return Le(s,r.length,0),n.push(s),n.push(r),Ht(t.type,J(n))}function fp(t){return qc(t,"ascii")}function hp(t){return qc(t,"utf8")}function dp(t){return D(Ut(t))}function Ut(t){switch(t.type){case P.BoolTrue:case P.BoolFalse:return ep(t);case P.OptionalNone:case P.OptionalSome:return np(t);case P.Buffer:return rp(t);case P.UInt:return ip(t);case P.Int:return sp(t);case P.PrincipalStandard:return op(t);case P.PrincipalContract:return ap(t);case P.ResponseOk:case P.ResponseErr:return cp(t);case P.List:return up(t);case P.Tuple:return lp(t);case P.StringASCII:return fp(t);case P.StringUTF8:return hp(t);default:throw new He("Unable to serialize. Invalid Clarity Value.")}}const gp=t=>t.length%2?`0${t}`:t,pp=(t,e)=>t.padEnd(e,"0"),Zc=(t,e)=>t?Nn(t).length>e:!1;function $s(t){return fg(t)}const Sn=t=>Qs(Et(t)),li=t=>D(Wh(t)),yp=t=>D(Sn(t)),wp=t=>{const e=Sn(t),n=Nr(new Uint8Array([0]),new Uint8Array([e.length]),e),r=Sn(n);return D(r)},Sp=(t,e)=>{if(t>15||e.length>15)throw Error("P2SH multisig address can only contain up to 15 public keys");const n=[];n.push(80+t),e.forEach(i=>{n.push(i.length),n.push(i)}),n.push(80+e.length),n.push(174);const r=J(n),s=Sn(r);return D(s)},bp=(t,e)=>{if(t>15||e.length>15)throw Error("P2WSH multisig address can only contain up to 15 public keys");const n=[];n.push(80+t),e.forEach(u=>{n.push(u.length),n.push(u)}),n.push(80+e.length),n.push(174);const r=J(n),s=Et(r),i=[];i.push(0),i.push(s.length),i.push(s);const o=J(i),a=Sn(o);return D(a)};function mp(t){return/^[a-zA-Z]([a-zA-Z0-9]|[-_!?+<>=/*])*$|^[-+=/*]$|^[<>]=?$/.test(t)&&t.length<128}function Ep(t){const[e,n]=t.split(".");if(!e||!n)throw new Error(`Invalid contract identifier: ${t}`);return[e,n]}W.hmacSha256Sync=(t,...e)=>{const n=_e.create(Et,t);return e.forEach(r=>n.update(r)),n.digest()};function rn(t){return t=typeof t=="string"?V(t):t,{type:v.PublicKey,data:t}}function Ap(t,e,n=Q.Compressed){const r=Jg(e),s=new Nt(To(r.r),To(r.s)),i=U.fromSignature(t,s,r.recoveryId),o=n===Q.Compressed;return i.toHex(o)}function Ip(t){return typeof t=="string"?t:D(t)}const fi=Ip;function Qc(t){return(typeof t=="string"?t.length/2:t.byteLength)===Wg}function sn(t){return!fi(t).startsWith("04")}function vp(t){t=Tc(t);const e=Qc(t);return D(Sr(t.slice(0,32),e))}function xp(t){return U.fromHex(fi(t)).toHex(!0)}function Mp(t){return U.fromHex(fi(t)).toHex(!1)}function $p(t,e){t=Tc(t);const[n,r]=Ys(e,t.slice(0,32),{canonical:!0,recovered:!0});if(r==null)throw new Error("No signature recoveryId received");return $n(r,1)+Nt.fromHex(n).toCompactHex()}function hi(){return{type:v.MessageSignature,data:D(new Uint8Array(Lr))}}function Xc(t,e,n,r){const s=ci(0,t,1,[rn(e)]).hash160,i=sn(e)?Q.Compressed:Q.Uncompressed;return{hashMode:t,signer:s,nonce:ct(n),fee:ct(r),keyEncoding:i,signature:hi()}}function bn(t){return"signature"in t}function qo(t){return t===R.P2SH||t===R.P2WSH}function Np(t){return t===R.P2SHNonSequential||t===R.P2WSHNonSequential}function Zo(t){const e=$s(t);return e.nonce=0,e.fee=0,bn(e)?e.signature=hi():e.fields=[],{...e,nonce:BigInt(0),fee:BigInt(0)}}function Lp(t){const e=[t.hashMode,V(t.signer),ce(t.nonce,8),ce(t.fee,8),t.keyEncoding,ai(t.signature)];return J(e)}function Cp(t){const e=[t.hashMode,V(t.signer),ce(t.nonce,8),ce(t.fee,8)],n=ii(t.fields);e.push(oi(n));const r=new Uint8Array(2);return e0(r,t.signaturesRequired,0),e.push(r),J(e)}function Bp(t,e){const n=D(e.readBytes(20)),r=BigInt(`0x${D(e.readBytes(8))}`),s=BigInt(`0x${D(e.readBytes(8))}`),i=e.readUInt8Enum(Q,a=>{throw new gt(`Could not parse ${a} as PubKeyEncoding`)});if(t===R.P2WPKH&&i!=Q.Compressed)throw new gt("Failed to parse singlesig spending condition: incomaptible hash mode and key encoding");const o=vs(e);return{hashMode:t,signer:n,nonce:r,fee:s,keyEncoding:i,signature:o}}function _p(t,e){const n=D(e.readBytes(20)),r=BigInt("0x"+D(e.readBytes(8))),s=BigInt("0x"+D(e.readBytes(8))),i=Kc(e,v.TransactionAuthField).values;let o=!1,a=0;for(const l of i)switch(l.contents.type){case v.PublicKey:sn(l.contents.data)||(o=!0);break;case v.MessageSignature:if(l.pubKeyEncoding===Q.Uncompressed&&(o=!0),a+=1,a===65536)throw new be("Failed to parse multisig spending condition: too many signatures");break}const u=e.readUInt16BE();if(o&&(t===R.P2WSH||t===R.P2WSHNonSequential))throw new be("Uncompressed keys are not allowed in this hash mode");return{hashMode:t,signer:n,nonce:r,fee:s,fields:i,signaturesRequired:u}}function Jr(t){return bn(t)?Lp(t):Cp(t)}function ts(t){const e=t.readUInt8Enum(R,n=>{throw new gt(`Could not parse ${n} as AddressHashMode`)});return e===R.P2PKH||e===R.P2WPKH?Bp(e,t):_p(e,t)}function Wc(t,e,n,r){const i=t+D(new Uint8Array([e]))+D(ce(n,8))+D(ce(r,8));if(V(i).byteLength!==49)throw Error("Invalid signature hash length");return li(V(i))}function Jc(t,e,n){const r=33+Lr,s=sn(e.data)?Q.Compressed:Q.Uncompressed,i=t+gp(s.toString(16))+n,o=V(i);if(o.byteLength>r)throw Error("Invalid signature hash length");return li(o)}function Dp(t,e,n,r,s){const i=Wc(t,e,n,r),o=$p(s,i),a=rn(vp(s)),u=Jc(i,a,o);return{nextSig:o,nextSigHash:u}}function tu(t,e,n,r,s,i){const o=Wc(t,e,n,r),a=rn(Ap(o,i,s)),u=Jc(o,a,i);return{pubKey:a,nextSigHash:u}}function Op(){const t=Xc(R.P2PKH,"",0,0);return t.signer=L0().hash160,t.keyEncoding=Q.Compressed,t.signature=hi(),t}function Qo(t,e,n){return bn(t)?Up(t,e,n):Tp(t,e,n)}function Up(t,e,n){const{pubKey:r,nextSigHash:s}=tu(e,n,t.fee,t.nonce,t.keyEncoding,t.signature.data),i=ci(0,t.hashMode,1,[r]).hash160;if(i!==t.signer)throw new be(`Signer hash does not equal hash of public key(s): ${i} != ${t.signer}`);return s}function Tp(t,e,n){const r=[];let s=e,i=!1,o=0;for(const u of t.fields)switch(u.contents.type){case v.PublicKey:sn(u.contents.data)||(i=!0),r.push(u.contents);break;case v.MessageSignature:u.pubKeyEncoding===Q.Uncompressed&&(i=!0);const{pubKey:l,nextSigHash:f}=tu(s,n,t.fee,t.nonce,u.pubKeyEncoding,u.contents.data);if(qo(t.hashMode)&&(s=f),r.push(l),o+=1,o===65536)throw new be("Too many signatures");break}if(qo(t.hashMode)&&o!==t.signaturesRequired||Np(t.hashMode)&&o<t.signaturesRequired)throw new be("Incorrect number of signatures");if(i&&(t.hashMode===R.P2WSH||t.hashMode===R.P2WSHNonSequential))throw new be("Uncompressed keys are not allowed in this hash mode");const a=ci(0,t.hashMode,t.signaturesRequired,r).hash160;if(a!==t.signer)throw new be(`Signer hash does not equal hash of public key(s): ${a} != ${t.signer}`);return s}function eu(t){return{authType:X.Standard,spendingCondition:t}}function nu(t,e){return{authType:X.Sponsored,spendingCondition:t,sponsorSpendingCondition:e||Xc(R.P2PKH,"0".repeat(66),0,0)}}function Xo(t){if(t.spendingCondition)switch(t.authType){case X.Standard:return eu(Zo(t.spendingCondition));case X.Sponsored:return nu(Zo(t.spendingCondition),Op());default:throw new gr("Unexpected authorization type for signing")}throw new Error("Authorization missing SpendingCondition")}function Pp(t,e){switch(t.authType){case X.Standard:return Qo(t.spendingCondition,e,X.Standard);case X.Sponsored:return Qo(t.spendingCondition,e,X.Standard);default:throw new gr("Invalid origin auth type")}}function jp(t,e){switch(t.authType){case X.Standard:const n={...t.spendingCondition,fee:ct(e)};return{...t,spendingCondition:n};case X.Sponsored:const r={...t.sponsorSpendingCondition,fee:ct(e)};return{...t,sponsorSpendingCondition:r}}}function kp(t,e){const n={...t.spendingCondition,nonce:ct(e)};return{...t,spendingCondition:n}}function Hp(t,e){const n={...t.sponsorSpendingCondition,nonce:ct(e)};return{...t,sponsorSpendingCondition:n}}function Fp(t,e){const n={...e,nonce:ct(e.nonce),fee:ct(e.fee)};return{...t,sponsorSpendingCondition:n}}function zp(t){const e=[];switch(e.push(t.authType),t.authType){case X.Standard:e.push(Jr(t.spendingCondition));break;case X.Sponsored:e.push(Jr(t.spendingCondition)),e.push(Jr(t.sponsorSpendingCondition));break}return J(e)}function Rp(t){const e=t.readUInt8Enum(X,r=>{throw new gt(`Could not parse ${r} as AuthType`)});let n;switch(e){case X.Standard:return n=ts(t),eu(n);case X.Sponsored:n=ts(t);const r=ts(t);return nu(n,r)}}class Kp{constructor({auth:e,payload:n,postConditions:r=ii([]),postConditionMode:s=hr.Deny,transactionVersion:i,chainId:o,network:a="mainnet"}){a=c0(a),this.transactionVersion=i??a.transactionVersion,this.chainId=o??a.chainId,this.auth=e,"amount"in n?this.payload={...n,amount:ct(n.amount)}:this.payload=n,this.postConditionMode=s,this.postConditions=r,this.anchorMode=ht.Any}signBegin(){const e=$s(this);return e.auth=Xo(e.auth),e.txid()}verifyBegin(){const e=$s(this);return e.auth=Xo(e.auth),e.txid()}verifyOrigin(){return Pp(this.auth,this.verifyBegin())}signNextOrigin(e,n){if(this.auth.spendingCondition===void 0)throw new Error('"auth.spendingCondition" is undefined');if(this.auth.authType===void 0)throw new Error('"auth.authType" is undefined');return this.signAndAppend(this.auth.spendingCondition,e,X.Standard,n)}signNextSponsor(e,n){if(this.auth.authType===X.Sponsored)return this.signAndAppend(this.auth.sponsorSpendingCondition,e,X.Sponsored,n);throw new Error('"auth.sponsorSpendingCondition" is undefined')}appendPubkey(e){const n=typeof e=="object"&&"type"in e?e:rn(e),r=this.auth.spendingCondition;if(r&&!bn(r)){const s=sn(n.data);r.fields.push(Fe(s?Q.Compressed:Q.Uncompressed,n))}else throw new Error("Can't append public key to a singlesig condition")}signAndAppend(e,n,r,s){const{nextSig:i,nextSigHash:o}=Dp(n,r,e.fee,e.nonce,s);if(bn(e))e.signature=As(i);else{const a=Qc(s);e.fields.push(Fe(a?Q.Compressed:Q.Uncompressed,As(i)))}return o}txid(){const e=this.serializeBytes();return li(e)}setSponsor(e){if(this.auth.authType!=X.Sponsored)throw new gr("Cannot sponsor sign a non-sponsored transaction");this.auth=Fp(this.auth,e)}setFee(e){this.auth=jp(this.auth,e)}setNonce(e){this.auth=kp(this.auth,e)}setSponsorNonce(e){if(this.auth.authType!=X.Sponsored)throw new gr("Cannot sponsor sign a non-sponsored transaction");this.auth=Hp(this.auth,e)}serialize(){return D(this.serializeBytes())}serializeBytes(){if(this.transactionVersion===void 0)throw new He('"transactionVersion" is undefined');if(this.chainId===void 0)throw new He('"chainId" is undefined');if(this.auth===void 0)throw new He('"auth" is undefined');if(this.payload===void 0)throw new He('"payload" is undefined');const e=[];e.push(this.transactionVersion);const n=new Uint8Array(4);return Le(n,this.chainId,0),e.push(n),e.push(zp(this.auth)),e.push(this.anchorMode),e.push(this.postConditionMode),e.push(oi(this.postConditions)),e.push(Gc(this.payload)),J(e)}}function Vp(t){const e=lt(t,G)?t:new G(t),n=e.readUInt8Enum($e,f=>{throw new Error(`Could not parse ${f} as TransactionVersion`)}),r=e.readUInt32BE(),s=Rp(e),i=e.readUInt8Enum(ht,f=>{throw new Error(`Could not parse ${f} as AnchorMode`)}),o=e.readUInt8Enum(hr,f=>{throw new Error(`Could not parse ${f} as PostConditionMode`)}),a=Kc(e,v.PostCondition),u=R0(e),l=new Kp({transactionVersion:n,chainId:r,auth:s,payload:u,postConditions:a,postConditionMode:o});return l.anchorMode=i,l}var Ns;(function(t){t[t.eq=1]="eq",t[t.gt=2]="gt",t[t.lt=4]="lt",t[t.gte=3]="gte",t[t.lte=5]="lte",t[t.sent=16]="sent",t[t["not-sent"]=17]="not-sent"})(Ns||(Ns={}));function Gp(t){switch(t.type){case"stx-postcondition":return{type:v.PostCondition,conditionType:rt.STX,principal:t.address==="origin"?{type:v.Principal,prefix:yt.Origin}:Wr(t.address),conditionCode:es(t.condition),amount:BigInt(t.amount)};case"ft-postcondition":return{type:v.PostCondition,conditionType:rt.Fungible,principal:t.address==="origin"?{type:v.Principal,prefix:yt.Origin}:Wr(t.address),conditionCode:es(t.condition),amount:BigInt(t.amount),asset:Yo(t.asset)};case"nft-postcondition":return{type:v.PostCondition,conditionType:rt.NonFungible,principal:t.address==="origin"?{type:v.Principal,prefix:yt.Origin}:Wr(t.address),conditionCode:es(t.condition),asset:Yo(t.asset),assetName:t.assetId};default:throw new Error("Invalid post condition type")}}function es(t){return Ns[t]}function ru(t){const e=Gp(t);return F0(e)}var Ls;(function(t){t[t.Testnet=2147483648]="Testnet",t[t.Mainnet=1]="Mainnet"})(Ls||(Ls={}));Ls.Mainnet;const Yp=128,qp=128,su=16;var Cs;(function(t){t[t.Address=0]="Address",t[t.Principal=1]="Principal",t[t.LengthPrefixedString=2]="LengthPrefixedString",t[t.MemoString=3]="MemoString",t[t.AssetInfo=4]="AssetInfo",t[t.PostCondition=5]="PostCondition",t[t.PublicKey=6]="PublicKey",t[t.LengthPrefixedList=7]="LengthPrefixedList",t[t.Payload=8]="Payload",t[t.MessageSignature=9]="MessageSignature",t[t.StructuredDataSignature=10]="StructuredDataSignature",t[t.TransactionAuthField=11]="TransactionAuthField"})(Cs||(Cs={}));var Wo;(function(t){t[t.TokenTransfer=0]="TokenTransfer",t[t.SmartContract=1]="SmartContract",t[t.VersionedSmartContract=6]="VersionedSmartContract",t[t.ContractCall=2]="ContractCall",t[t.PoisonMicroblock=3]="PoisonMicroblock",t[t.Coinbase=4]="Coinbase",t[t.CoinbaseToAltRecipient=5]="CoinbaseToAltRecipient",t[t.TenureChange=7]="TenureChange",t[t.NakamotoCoinbase=8]="NakamotoCoinbase"})(Wo||(Wo={}));var Jo;(function(t){t[t.Clarity1=1]="Clarity1",t[t.Clarity2=2]="Clarity2",t[t.Clarity3=3]="Clarity3"})(Jo||(Jo={}));var vt;(function(t){t[t.OnChainOnly=1]="OnChainOnly",t[t.OffChainOnly=2]="OffChainOnly",t[t.Any=3]="Any"})(vt||(vt={}));const ns=["onChainOnly","offChainOnly","any"];ns[0]+"",vt.OnChainOnly,ns[1]+"",vt.OffChainOnly,ns[2]+"",vt.Any,vt.OnChainOnly+"",vt.OnChainOnly,vt.OffChainOnly+"",vt.OffChainOnly,vt.Any+"",vt.Any;var Bs;(function(t){t[t.Mainnet=0]="Mainnet",t[t.Testnet=128]="Testnet"})(Bs||(Bs={}));Bs.Mainnet;var ta;(function(t){t[t.Allow=1]="Allow",t[t.Deny=2]="Deny"})(ta||(ta={}));var ye;(function(t){t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible"})(ye||(ye={}));var ea;(function(t){t[t.Standard=4]="Standard",t[t.Sponsored=5]="Sponsored"})(ea||(ea={}));var na;(function(t){t[t.SerializeP2PKH=0]="SerializeP2PKH",t[t.SerializeP2SH=1]="SerializeP2SH",t[t.SerializeP2WPKH=2]="SerializeP2WPKH",t[t.SerializeP2WSH=3]="SerializeP2WSH",t[t.SerializeP2SHNonSequential=5]="SerializeP2SHNonSequential",t[t.SerializeP2WSHNonSequential=7]="SerializeP2WSHNonSequential"})(na||(na={}));var ra;(function(t){t[t.MainnetSingleSig=22]="MainnetSingleSig",t[t.MainnetMultiSig=20]="MainnetMultiSig",t[t.TestnetSingleSig=26]="TestnetSingleSig",t[t.TestnetMultiSig=21]="TestnetMultiSig"})(ra||(ra={}));var sa;(function(t){t[t.Compressed=0]="Compressed",t[t.Uncompressed=1]="Uncompressed"})(sa||(sa={}));var ia;(function(t){t[t.Equal=1]="Equal",t[t.Greater=2]="Greater",t[t.GreaterEqual=3]="GreaterEqual",t[t.Less=4]="Less",t[t.LessEqual=5]="LessEqual"})(ia||(ia={}));var oa;(function(t){t[t.Sends=16]="Sends",t[t.DoesNotSend=17]="DoesNotSend"})(oa||(oa={}));var _s;(function(t){t[t.Origin=1]="Origin",t[t.Standard=2]="Standard",t[t.Contract=3]="Contract"})(_s||(_s={}));var aa;(function(t){t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible"})(aa||(aa={}));var ca;(function(t){t.Serialization="Serialization",t.Deserialization="Deserialization",t.SignatureValidation="SignatureValidation",t.FeeTooLow="FeeTooLow",t.BadNonce="BadNonce",t.NotEnoughFunds="NotEnoughFunds",t.NoSuchContract="NoSuchContract",t.NoSuchPublicFunction="NoSuchPublicFunction",t.BadFunctionArgument="BadFunctionArgument",t.ContractAlreadyExists="ContractAlreadyExists",t.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",t.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",t.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",t.BadAddressVersionByte="BadAddressVersionByte",t.NoCoinbaseViaMempool="NoCoinbaseViaMempool",t.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",t.TooMuchChaining="TooMuchChaining",t.ConflictingNonceInMempool="ConflictingNonceInMempool",t.BadTransactionVersion="BadTransactionVersion",t.TransferRecipientCannotEqualSender="TransferRecipientCannotEqualSender",t.TransferAmountMustBePositive="TransferAmountMustBePositive",t.ServerFailureDatabase="ServerFailureDatabase",t.EstimatorError="EstimatorError",t.TemporarilyBlacklisted="TemporarilyBlacklisted",t.ServerFailureOther="ServerFailureOther"})(ca||(ca={}));function Zp(t,e,n){const r=e||1,s=n||Yp;if(fy(t,s))throw new Error(`String length exceeds maximum bytes ${s}`);return{type:Cs.LengthPrefixedString,content:t,lengthPrefixBytes:r,maxLengthBytes:s}}var nt;(function(t){t[t.Int=0]="Int",t[t.UInt=1]="UInt",t[t.Buffer=2]="Buffer",t[t.BoolTrue=3]="BoolTrue",t[t.BoolFalse=4]="BoolFalse",t[t.PrincipalStandard=5]="PrincipalStandard",t[t.PrincipalContract=6]="PrincipalContract",t[t.ResponseOk=7]="ResponseOk",t[t.ResponseErr=8]="ResponseErr",t[t.OptionalNone=9]="OptionalNone",t[t.OptionalSome=10]="OptionalSome",t[t.List=11]="List",t[t.Tuple=12]="Tuple",t[t.StringASCII=13]="StringASCII",t[t.StringUTF8=14]="StringUTF8"})(nt||(nt={}));class Qp extends Error{constructor(e){super(e),this.message=e,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class iu extends Qp{constructor(e){super(e)}}function Br(t){const e=[];return e.push(wn(Js(t.version,1))),e.push(wn(t.hash160)),Qt(e)}function Xp(t){const e=[];return e.push(t.prefix),e.push(Br(t.address)),t.prefix===_s.Contract&&e.push(mn(t.contractName)),Qt(e)}function mn(t){const e=[],n=Mn(t.content),r=n.byteLength;return e.push(wn(Js(r,t.lengthPrefixBytes))),e.push(n),Qt(e)}function Wp(t){const e=[];return e.push(Br(t.address)),e.push(mn(t.contractName)),e.push(mn(t.assetName)),Qt(e)}function ou(t){const e=[];if(e.push(t.conditionType),e.push(Xp(t.principal)),(t.conditionType===ye.Fungible||t.conditionType===ye.NonFungible)&&e.push(Wp(t.assetInfo)),t.conditionType===ye.NonFungible&&e.push(on(t.assetName)),e.push(t.conditionCode),t.conditionType===ye.STX||t.conditionType===ye.Fungible){if(t.amount>BigInt("0xffffffffffffffff"))throw new iu("The post-condition amount may not be larger than 8 bytes");e.push(Lg(t.amount,!1,8))}return Qt(e)}function Ft(t,e){return Qt([t,e])}function Jp(t){return new Uint8Array([t.type])}function ty(t){return t.type===nt.OptionalNone?new Uint8Array([t.type]):Ft(t.type,on(t.value))}function ey(t){const e=new Uint8Array(4);return Mr(e,t.buffer.length,0),Ft(t.type,ei(e,t.buffer))}function ny(t){const e=ti(Cg(t.value,BigInt(qp)),su);return Ft(t.type,e)}function ry(t){const e=ti(t.value,su);return Ft(t.type,e)}function sy(t){return Ft(t.type,Br(t.address))}function iy(t){return Ft(t.type,ei(Br(t.address),mn(t.contractName)))}function oy(t){return Ft(t.type,on(t.value))}function ay(t){const e=[],n=new Uint8Array(4);Mr(n,t.list.length,0),e.push(n);for(const r of t.list){const s=on(r);e.push(s)}return Ft(t.type,Qt(e))}function cy(t){const e=[],n=new Uint8Array(4);Mr(n,Object.keys(t.data).length,0),e.push(n);const r=Object.keys(t.data).sort((s,i)=>s.localeCompare(i));for(const s of r){const i=Zp(s);e.push(mn(i));const o=on(t.data[s]);e.push(o)}return Ft(t.type,Qt(e))}function au(t,e){const n=[],r=e=="ascii"?Og(t.data):Mn(t.data),s=new Uint8Array(4);return Mr(s,r.length,0),n.push(s),n.push(r),Ft(t.type,Qt(n))}function uy(t){return au(t,"ascii")}function ly(t){return au(t,"utf8")}function on(t){switch(t.type){case nt.BoolTrue:case nt.BoolFalse:return Jp(t);case nt.OptionalNone:case nt.OptionalSome:return ty(t);case nt.Buffer:return ey(t);case nt.UInt:return ry(t);case nt.Int:return ny(t);case nt.PrincipalStandard:return sy(t);case nt.PrincipalContract:return iy(t);case nt.ResponseOk:case nt.ResponseErr:return oy(t);case nt.List:return ay(t);case nt.Tuple:return cy(t);case nt.StringASCII:return uy(t);case nt.StringUTF8:return ly(t);default:throw new iu("Unable to serialize. Invalid Clarity Value.")}}const fy=(t,e)=>t?Mn(t).length>e:!1,hy={referrerPolicy:"origin",headers:{"x-hiro-product":"stacksjs"}};async function dy(t,e){const n={};return Object.assign(n,hy,e),await fetch(t,n)}function gy(t){let e=dy,n=[];return t.length>0&&typeof t[0]=="function"&&(e=t.shift()),t.length>0&&(n=t),{fetchLib:e,middlewares:n}}function py(...t){const{fetchLib:e,middlewares:n}=gy(t);return async(s,i)=>{let o={url:s,init:i??{}};for(const u of n)typeof u.pre=="function"&&(o=await Promise.resolve(u.pre({fetch:e,...o}))??o);let a=await e(o.url,o.init);for(const u of n)typeof u.post=="function"&&(a=await Promise.resolve(u.post({fetch:e,url:o.url,init:o.init,response:(a==null?void 0:a.clone())??a}))??a);return a}}const yy="https://api.mainnet.hiro.so",wy="https://api.testnet.hiro.so",Sy="http://localhost:3999",by=["mainnet","testnet","devnet","mocknet"];class Je{constructor(e){this.version=At.Mainnet,this.chainId=jt.Mainnet,this.bnsLookupUrl="https://api.mainnet.hiro.so",this.broadcastEndpoint="/v2/transactions",this.transferFeeEstimateEndpoint="/v2/fees/transfer",this.transactionFeeEstimateEndpoint="/v2/fees/transaction",this.accountEndpoint="/v2/accounts",this.contractAbiEndpoint="/v2/contracts/interface",this.readOnlyFunctionCallEndpoint="/v2/contracts/call-read",this.isMainnet=()=>this.version===At.Mainnet,this.getBroadcastApiUrl=()=>`${this.coreApiUrl}${this.broadcastEndpoint}`,this.getTransferFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transferFeeEstimateEndpoint}`,this.getTransactionFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transactionFeeEstimateEndpoint}`,this.getAccountApiUrl=n=>`${this.coreApiUrl}${this.accountEndpoint}/${n}?proof=0`,this.getAccountExtendedBalancesApiUrl=n=>`${this.coreApiUrl}/extended/v1/address/${n}/balances`,this.getAbiApiUrl=(n,r)=>`${this.coreApiUrl}${this.contractAbiEndpoint}/${n}/${r}`,this.getReadOnlyFunctionCallApiUrl=(n,r,s)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}/${n}/${r}/${encodeURIComponent(s)}`,this.getInfoUrl=()=>`${this.coreApiUrl}/v2/info`,this.getBlockTimeInfoUrl=()=>`${this.coreApiUrl}/extended/v1/info/network_block_times`,this.getPoxInfoUrl=()=>`${this.coreApiUrl}/v2/pox`,this.getRewardsUrl=(n,r)=>{let s=`${this.coreApiUrl}/extended/v1/burnchain/rewards/${n}`;return r&&(s=`${s}?limit=${r.limit}&offset=${r.offset}`),s},this.getRewardsTotalUrl=n=>`${this.coreApiUrl}/extended/v1/burnchain/rewards/${n}/total`,this.getRewardHoldersUrl=(n,r)=>{let s=`${this.coreApiUrl}/extended/v1/burnchain/reward_slot_holders/${n}`;return r&&(s=`${s}?limit=${r.limit}&offset=${r.offset}`),s},this.getStackerInfoUrl=(n,r)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}
    ${n}/${r}/get-stacker-info`,this.getDataVarUrl=(n,r,s)=>`${this.coreApiUrl}/v2/data_var/${n}/${r}/${s}?proof=0`,this.getMapEntryUrl=(n,r,s)=>`${this.coreApiUrl}/v2/map_entry/${n}/${r}/${s}?proof=0`,this.coreApiUrl=e.url,this.fetchFn=e.fetchFn??py()}getNameInfo(e){const n=`${this.bnsLookupUrl}/v1/names/${e}`;return this.fetchFn(n).then(r=>{if(r.status===404)throw new Error("Name not found");if(r.status!==200)throw new Error(`Bad response status: ${r.status}`);return r.json()}).then(r=>r.address?Object.assign({},r,{address:r.address}):r)}}Je.fromName=t=>{switch(t){case"mainnet":return new my;case"testnet":return new Ey;case"devnet":return new Ay;case"mocknet":return new cu;default:throw new Error(`Invalid network name provided. Must be one of the following: ${by.join(", ")}`)}};Je.fromNameOrNetwork=t=>typeof t!="string"&&"version"in t?t:Je.fromName(t);class my extends Je{constructor(e){super({url:(e==null?void 0:e.url)??yy,fetchFn:e==null?void 0:e.fetchFn}),this.version=At.Mainnet,this.chainId=jt.Mainnet}}class Ey extends Je{constructor(e){super({url:(e==null?void 0:e.url)??wy,fetchFn:e==null?void 0:e.fetchFn}),this.version=At.Testnet,this.chainId=jt.Testnet}}class cu extends Je{constructor(e){super({url:(e==null?void 0:e.url)??Sy,fetchFn:e==null?void 0:e.fetchFn}),this.version=At.Testnet,this.chainId=jt.Testnet}}const Ay=cu,Iy="modulepreload",vy=function(t){return"/"+t},ua={},la=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=vy(i),i in ua)return;ua[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let f=s.length-1;f>=0;f--){const h=s[f];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":Iy,o||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),o)return new Promise((f,h)=>{l.addEventListener("load",f),l.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},xy="connect-ui";let Wn,uu,dt=!1,Ds=!1;const Zt=(t,e="")=>()=>{},My=(t,e)=>()=>{},$y="{visibility:hidden}.hydrated{visibility:inherit}",fa={},Ny="http://www.w3.org/2000/svg",Ly="http://www.w3.org/1999/xhtml",Cy=t=>t!=null,di=t=>(t=typeof t,t==="object"||t==="function");function lu(t){var e,n,r;return(r=(n=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&r!==void 0?r:void 0}const By=(t,e,...n)=>{let r=null,s=!1,i=!1;const o=[],a=l=>{for(let f=0;f<l.length;f++)r=l[f],Array.isArray(r)?a(r):r!=null&&typeof r!="boolean"&&((s=typeof t!="function"&&!di(r))&&(r=String(r)),s&&i?o[o.length-1].$text$+=r:o.push(s?Os(null,r):r),i=s)};if(a(n),e){const l=e.className||e.class;l&&(e.class=typeof l!="object"?l:Object.keys(l).filter(f=>l[f]).join(" "))}const u=Os(t,null);return u.$attrs$=e,o.length>0&&(u.$children$=o),u},Os=(t,e)=>{const n={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return n.$attrs$=null,n},_y={},Dy=t=>t&&t.$tag$===_y,Oy=(t,e)=>t!=null&&!di(t)&&e&4?t==="false"?!1:t===""||!!t:t,Zw=t=>an(t).$hostElement$,Uy=(t,e,n)=>{const r=st.ce(e,n);return t.dispatchEvent(r),r},ha=new WeakMap,Ty=(t,e,n)=>{let r=pr.get(t);ew&&n?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,pr.set(t,r)},Py=(t,e,n,r)=>{var s;let i=fu(e);const o=pr.get(i);if(t=t.nodeType===11?t:Tt,o)if(typeof o=="string"){t=t.head||t;let a=ha.get(t),u;if(a||ha.set(t,a=new Set),!a.has(i)){{u=Tt.createElement("style"),u.innerHTML=o;const l=(s=st.$nonce$)!==null&&s!==void 0?s:lu(Tt);l!=null&&u.setAttribute("nonce",l),t.insertBefore(u,t.querySelector("link"))}a&&a.add(i)}}else t.adoptedStyleSheets.includes(o)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,o]);return i},jy=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,r=e.$flags$,s=Zt("attachStyles",e.$tagName$),i=Py(n.shadowRoot?n.shadowRoot:n.getRootNode(),e);r&10&&(n["s-sc"]=i,n.classList.add(i+"-h")),s()},fu=(t,e)=>"sc-"+t.$tagName$,da=(t,e,n,r,s,i)=>{if(n!==r){let o=pa(t,e),a=e.toLowerCase();if(e==="class"){const u=t.classList,l=ga(n),f=ga(r);u.remove(...l.filter(h=>h&&!f.includes(h))),u.add(...f.filter(h=>h&&!l.includes(h)))}else if(!o&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):pa(_r,a)?e=a.slice(2):e=a[2]+e.slice(3),n&&st.rel(t,e,n,!1),r&&st.ael(t,e,r,!1);else{const u=di(r);if((o||u&&r!==null)&&!s)try{if(t.tagName.includes("-"))t[e]=r;else{const l=r??"";e==="list"?o=!1:(n==null||t[e]!=l)&&(t[e]=l)}}catch{}r==null||r===!1?(r!==!1||t.getAttribute(e)==="")&&t.removeAttribute(e):(!o||i&4||s)&&!u&&(r=r===!0?"":r,t.setAttribute(e,r))}}},ky=/\s/,ga=t=>t?t.split(ky):[],hu=(t,e,n,r)=>{const s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,i=t&&t.$attrs$||fa,o=e.$attrs$||fa;for(r in i)r in o||da(s,r,i[r],void 0,n,e.$flags$);for(r in o)da(s,r,i[r],o[r],n,e.$flags$)},gi=(t,e,n,r)=>{const s=e.$children$[n];let i=0,o,a;if(s.$text$!==null)o=s.$elm$=Tt.createTextNode(s.$text$);else{if(dt||(dt=s.$tag$==="svg"),o=s.$elm$=Tt.createElementNS(dt?Ny:Ly,s.$tag$),dt&&s.$tag$==="foreignObject"&&(dt=!1),hu(null,s,dt),Cy(Wn)&&o["s-si"]!==Wn&&o.classList.add(o["s-si"]=Wn),s.$children$)for(i=0;i<s.$children$.length;++i)a=gi(t,s,i),a&&o.appendChild(a);s.$tag$==="svg"?dt=!1:o.tagName==="foreignObject"&&(dt=!0)}return o},du=(t,e,n,r,s,i)=>{let o=t,a;for(o.shadowRoot&&o.tagName===uu&&(o=o.shadowRoot);s<=i;++s)r[s]&&(a=gi(null,n,s),a&&(r[s].$elm$=a,o.insertBefore(a,e)))},gu=(t,e,n,r,s)=>{for(;e<=n;++e)(r=t[e])&&(s=r.$elm$,s.remove())},Hy=(t,e,n,r)=>{let s=0,i=0,o=e.length-1,a=e[0],u=e[o],l=r.length-1,f=r[0],h=r[l],y;for(;s<=o&&i<=l;)a==null?a=e[++s]:u==null?u=e[--o]:f==null?f=r[++i]:h==null?h=r[--l]:Yn(a,f)?(hn(a,f),a=e[++s],f=r[++i]):Yn(u,h)?(hn(u,h),u=e[--o],h=r[--l]):Yn(a,h)?(hn(a,h),t.insertBefore(a.$elm$,u.$elm$.nextSibling),a=e[++s],h=r[--l]):Yn(u,f)?(hn(u,f),t.insertBefore(u.$elm$,a.$elm$),u=e[--o],f=r[++i]):(y=gi(e&&e[i],n,i),f=r[++i],y&&a.$elm$.parentNode.insertBefore(y,a.$elm$));s>o?du(t,r[l+1]==null?null:r[l+1].$elm$,n,r,i,l):i>l&&gu(e,s,o)},Yn=(t,e)=>t.$tag$===e.$tag$,hn=(t,e)=>{const n=e.$elm$=t.$elm$,r=t.$children$,s=e.$children$,i=e.$tag$,o=e.$text$;o===null?(dt=i==="svg"?!0:i==="foreignObject"?!1:dt,hu(t,e,dt),r!==null&&s!==null?Hy(n,r,e,s):s!==null?(t.$text$!==null&&(n.textContent=""),du(n,null,e,s,0,s.length-1)):r!==null&&gu(r,0,r.length-1),dt&&i==="svg"&&(dt=!1)):t.$text$!==o&&(n.data=o)},Fy=(t,e)=>{const n=t.$hostElement$,r=t.$vnode$||Os(null,null),s=Dy(e)?e:By(null,null,e);uu=n.tagName,s.$tag$=null,s.$flags$|=4,t.$vnode$=s,s.$elm$=r.$elm$=n.shadowRoot||n,Wn=n["s-sc"],hn(r,s)},pu=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise(n=>t.$onRenderResolve$=n))},pi=(t,e)=>{if(t.$flags$|=16,t.$flags$&4){t.$flags$|=512;return}return pu(t,t.$ancestorComponent$),rw(()=>zy(t,e))},zy=(t,e)=>{const n=Zt("scheduleUpdate",t.$cmpMeta$.$tagName$),r=t.$lazyInstance$;let s;return n(),Gy(s,()=>Ry(t,r,e))},Ry=async(t,e,n)=>{const r=t.$hostElement$,s=Zt("update",t.$cmpMeta$.$tagName$),i=r["s-rc"];n&&jy(t);const o=Zt("render",t.$cmpMeta$.$tagName$);Ky(t,e),i&&(i.map(a=>a()),r["s-rc"]=void 0),o(),s();{const a=r["s-p"],u=()=>Vy(t);a.length===0?u():(Promise.all(a).then(u),t.$flags$|=4,a.length=0)}},Ky=(t,e,n)=>{try{e=e.render(),t.$flags$&=-17,t.$flags$|=2,Fy(t,e)}catch(r){En(r,t.$hostElement$)}return null},Vy=t=>{const e=t.$cmpMeta$.$tagName$,n=t.$hostElement$,r=Zt("postUpdate",e),s=t.$ancestorComponent$;t.$flags$&64?r():(t.$flags$|=64,wu(n),r(),t.$onReadyResolve$(n),s||yu()),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),t.$flags$&512&&wi(()=>pi(t,!1)),t.$flags$&=-517},yu=t=>{wu(Tt.documentElement),wi(()=>Uy(_r,"appload",{detail:{namespace:xy}}))},Gy=(t,e)=>t&&t.then?t.then(e):e(),wu=t=>t.classList.add("hydrated"),Yy=(t,e)=>an(t).$instanceValues$.get(e),qy=(t,e,n,r)=>{const s=an(t),i=s.$instanceValues$.get(e),o=s.$flags$,a=s.$lazyInstance$;n=Oy(n,r.$members$[e][0]);const u=Number.isNaN(i)&&Number.isNaN(n),l=n!==i&&!u;(!(o&8)||i===void 0)&&l&&(s.$instanceValues$.set(e,n),a&&(o&18)===2&&pi(s,!1))},Su=(t,e,n)=>{if(e.$members$){const r=Object.entries(e.$members$),s=t.prototype;if(r.map(([i,[o]])=>{(o&31||n&2&&o&32)&&Object.defineProperty(s,i,{get(){return Yy(this,i)},set(a){qy(this,i,a,e)},configurable:!0,enumerable:!0})}),n&1){const i=new Map;s.attributeChangedCallback=function(o,a,u){st.jmp(()=>{const l=i.get(o);if(this.hasOwnProperty(l))u=this[l],delete this[l];else if(s.hasOwnProperty(l)&&typeof this[l]=="number"&&this[l]==u)return;this[l]=u===null&&typeof this[l]=="boolean"?!1:u})},t.observedAttributes=r.filter(([o,a])=>a[0]&15).map(([o,a])=>{const u=a[1]||o;return i.set(u,o),u})}}return t},Zy=async(t,e,n,r,s)=>{if(!(e.$flags$&32)){{if(e.$flags$|=32,s=tw(n),s.then){const u=My();s=await s,u()}s.isProxied||(Su(s,n,2),s.isProxied=!0);const a=Zt("createInstance",n.$tagName$);e.$flags$|=8;try{new s(e)}catch(u){En(u)}e.$flags$&=-9,a()}if(s.style){let a=s.style;const u=fu(n);if(!pr.has(u)){const l=Zt("registerStyles",n.$tagName$);Ty(u,a,!!(n.$flags$&1)),l()}}}const i=e.$ancestorComponent$,o=()=>pi(e,!0);i&&i["s-rc"]?i["s-rc"].push(o):o()},Qy=t=>{if(!(st.$flags$&1)){const e=an(t),n=e.$cmpMeta$,r=Zt("connectedCallback",n.$tagName$);if(!(e.$flags$&1)){e.$flags$|=1;{let s=t;for(;s=s.parentNode||s.host;)if(s["s-p"]){pu(e,e.$ancestorComponent$=s);break}}n.$members$&&Object.entries(n.$members$).map(([s,[i]])=>{if(i&31&&t.hasOwnProperty(s)){const o=t[s];delete t[s],t[s]=o}}),Zy(t,e,n)}r()}},Xy=t=>{st.$flags$&1||an(t)},Wy=(t,e={})=>{var n;const r=Zt(),s=[],i=e.exclude||[],o=_r.customElements,a=Tt.head,u=a.querySelector("meta[charset]"),l=Tt.createElement("style"),f=[];let h,y=!0;Object.assign(st,e),st.$resourcesUrl$=new URL(e.resourcesUrl||"./",Tt.baseURI).href,t.map(p=>{p[1].map(b=>{const m={$flags$:b[0],$tagName$:b[1],$members$:b[2],$listeners$:b[3]};m.$members$=b[2];const x=m.$tagName$,B=class extends HTMLElement{constructor(_){super(_),_=this,Jy(_,m),m.$flags$&1&&_.attachShadow({mode:"open"})}connectedCallback(){h&&(clearTimeout(h),h=null),y?f.push(this):st.jmp(()=>Qy(this))}disconnectedCallback(){st.jmp(()=>Xy(this))}componentOnReady(){return an(this).$onReadyPromise$}};m.$lazyBundleId$=p[0],!i.includes(x)&&!o.get(x)&&(s.push(x),o.define(x,Su(B,m,1)))})});{l.innerHTML=s+$y,l.setAttribute("data-styles","");const p=(n=st.$nonce$)!==null&&n!==void 0?n:lu(Tt);p!=null&&l.setAttribute("nonce",p),a.insertBefore(l,u?u.nextSibling:a.firstChild)}y=!1,f.length?f.map(p=>p.connectedCallback()):st.jmp(()=>h=setTimeout(yu,30)),r()},yi=new WeakMap,an=t=>yi.get(t),Qw=(t,e)=>yi.set(e.$lazyInstance$=t,e),Jy=(t,e)=>{const n={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return n.$onReadyPromise$=new Promise(r=>n.$onReadyResolve$=r),t["s-p"]=[],t["s-rc"]=[],yi.set(t,n)},pa=(t,e)=>e in t,En=(t,e)=>(0,console.error)(t,e),rs=new Map,tw=(t,e,n)=>{const r=t.$tagName$.replace(/-/g,"_"),s=t.$lazyBundleId$,i=rs.get(s);if(i)return i[r];if(!n||!BUILD.hotModuleReplacement){const o=a=>(rs.set(s,a),a[r]);switch(s){case"connect-modal":return la(()=>import("./connect-modal.entry-4ba73505.js"),["assets/connect-modal.entry-4ba73505.js","assets/vendor-39f54801.js"]).then(o,En)}}return la(()=>import(`./${s}.entry.js`),[]).then(o=>(rs.set(s,o),o[r]),En)},pr=new Map,_r=typeof window<"u"?window:{},Tt=_r.document||{head:{}},st={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,r)=>t.addEventListener(e,n,r),rel:(t,e,n,r)=>t.removeEventListener(e,n,r),ce:(t,e)=>new CustomEvent(t,e)},bu=t=>Promise.resolve(t),ew=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),ya=[],mu=[],nw=(t,e)=>n=>{t.push(n),Ds||(Ds=!0,e&&st.$flags$&4?wi(Us):st.raf(Us))},wa=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){En(n)}t.length=0},Us=()=>{wa(ya),wa(mu),(Ds=ya.length>0)&&st.raf(Us)},wi=t=>bu().then(t),rw=nw(mu,!0),sw=()=>bu(),iw=(t,e)=>typeof window>"u"?Promise.resolve():sw().then(()=>Wy([["connect-modal",[[1,"connect-modal",{defaultProviders:[16],installedProviders:[16],persistSelection:[4,"persist-selection"],callback:[16],cancelCallback:[16]}]]]],e));(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();var ow=Object.defineProperty,aw=Object.defineProperties,cw=Object.getOwnPropertyDescriptors,yr=Object.getOwnPropertySymbols,Eu=Object.prototype.hasOwnProperty,Au=Object.prototype.propertyIsEnumerable,Sa=(t,e,n)=>e in t?ow(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kt=(t,e)=>{for(var n in e||(e={}))Eu.call(e,n)&&Sa(t,n,e[n]);if(yr)for(var n of yr(e))Au.call(e,n)&&Sa(t,n,e[n]);return t},ue=(t,e)=>aw(t,cw(e)),uw=(t,e)=>{var n={};for(var r in t)Eu.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&yr)for(var r of yr(t))e.indexOf(r)<0&&Au.call(t,r)&&(n[r]=t[r]);return n};function Si(){return _c(Oc())||window.StacksProvider||window.BlockstackProvider}function bi(t){return t?typeof t=="string"?xe.fromName(t):"version"in t?t:"url"in t?new gs({url:t.url}):t.transactionVersion===$e.Mainnet?new gs({url:t.client.baseUrl}):new ps({url:t.client.baseUrl}):new ps}typeof window<"u"&&(window.__CONNECT_VERSION__="__VERSION__");var lw=t=>{if(!t){let e=new Hs(["store_write"],document.location.href);t=new ur({appConfig:e})}return t},fw=async(t,e=Si())=>{if(!e)throw new Error("[Connect] No installed Stacks wallet found");let{redirectTo:n="/",manifestPath:r,onFinish:s,onCancel:i,sendToSignIn:o=!1,userSession:a,appDetails:u}=t,l=lw(a);l.isUserSignedIn()&&l.signUserOut();let f=l.generateAndStoreTransitKey(),h=l.makeAuthRequest(f,`${document.location.origin}${n}`,`${document.location.origin}${r}`,l.appConfig.scopes,void 0,void 0,{sendToSignIn:o,appDetails:u,connectVersion:"__VERSION__"});try{let y=await e.authenticationRequest(h);await l.handlePendingSignIn(y);let p=it.decodeToken(y),b=p==null?void 0:p.payload;s==null||s({authResponse:y,authResponsePayload:b,userSession:l})}catch(y){console.error("[Connect] Error during auth request",y),i==null||i()}},hw=(t=>(t.ContractCall="contract_call",t.ContractDeploy="smart_contract",t.STXTransfer="token_transfer",t))(hw||{}),dw=(t=>(t.BUFFER="buffer",t.UINT="uint",t.INT="int",t.PRINCIPAL="principal",t.BOOL="bool",t))(dw||{}),mi=t=>{let e=t;if(!e){let n=new Hs(["store_write"],document.location.href);e=new ur({appConfig:n})}return e};function gw(t){try{return mi(t).loadUserData().appPrivateKey}catch{return!1}}var pw=t=>{let e=mi(t).loadUserData().appPrivateKey,n=it.SECP256K1Client.derivePublicKey(e);return{privateKey:e,publicKey:n}};function yw(t){var e;let{stxAddress:n,userSession:r,network:s}=t;if(n)return n;if(!r||!s)return;let i=(e=r==null?void 0:r.loadUserData().profile)==null?void 0:e.stxAddress,o={[Me.Mainnet]:"mainnet",[Me.Testnet]:"testnet"},a=bi(s);return i==null?void 0:i[o[a.chainId]]}function ww(t){let e=bi(t.network),n=mi(t.userSession),r=ue(kt({},t),{network:e,userSession:n});return kt({stxAddress:yw(r)},r)}async function Sw(t,e){let{postConditions:n}=t;return n&&n.length>0&&typeof n[0]!="string"&&(typeof n[0].type=="string"?n=n.map(ru):n=n.map(r=>D(ou(r)))),new it.TokenSigner("ES256k",e).signAsync(ue(kt({},t),{postConditions:n}))}function bw(t){let{postConditions:e}=t;return e&&e.length>0&&typeof e[0]!="string"&&(typeof e[0].type=="string"?e=e.map(ru):e=e.map(n=>D(ou(n)))),it.createUnsecuredToken(ue(kt({},t),{postConditions:e}))}var mw=async({token:t,options:e},n)=>{var r,s,i;try{let o=await n.transactionRequest(t),{txRaw:a}=o,u=V(a.replace(/^0x/,"")),l=Vp(u);if("sponsored"in e&&e.sponsored){(r=e.onFinish)==null||r.call(e,ue(kt({},o),{stacksTransaction:l}));return}(s=e.onFinish)==null||s.call(e,ue(kt({},o),{stacksTransaction:l}))}catch(o){console.error("[Connect] Error during transaction request",o),(i=e.onCancel)==null||i.call(e)}},Ew=async t=>{let e=t,{functionArgs:n,appDetails:r,userSession:s}=e,i=uw(e,["functionArgs","appDetails","userSession"]),o=n.map(u=>typeof u=="string"?u:typeof u.type=="string"?dp(u):D(on(u)));if(gw(s)){let{privateKey:u,publicKey:l}=pw(s),f=ue(kt({},i),{functionArgs:o,txType:"contract_call",publicKey:l});return r&&(f.appDetails=r),Sw(f,u)}let a=ue(kt({},i),{functionArgs:o,txType:"contract_call"});return r&&(a.appDetails=r),bw(a)};async function Aw(t,e,n){let r=await e(ue(kt(kt({},ww(t)),t),{network:bi(t.network)}));return mw({token:r,options:t},n)}function Xw(t,e=Si()){if(!e)throw new Error("[Connect] No installed Stacks wallet found");return Aw(t,Ew,e)}var Iw=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ALL=1]="ALL",t[t.NONE=2]="NONE",t[t.SINGLE=3]="SINGLE",t[t.ANYONECANPAY=128]="ANYONECANPAY",t))(Iw||{}),Iu="asigna-stx",ba=(t,e)=>new Promise(n=>{function r(s){s.data.source===Iu&&s.data[e]&&(n(s.data[e]),window.removeEventListener("message",r))}window.addEventListener("message",r),window.top.postMessage(xw(t,e),"*")}),vw={authenticationRequest:async t=>ba(t,"authenticationRequest"),transactionRequest:async t=>ba(t,"transactionRequest")},xw=(t,e)=>({source:Iu,[e]:t}),Mw=()=>{typeof window>"u"||window.top!==window.self&&(window.AsignaProvider=vw)};Mw();var $w=[{id:"LeatherProvider",name:"Leather",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iMjYuODM4NyIgZmlsbD0iIzEyMTAwRiIvPgo8cGF0aCBkPSJNNzQuOTE3MSA1Mi43MTE0QzgyLjQ3NjYgNTEuNTQwOCA5My40MDg3IDQzLjU4MDQgOTMuNDA4NyAzNy4zNzYxQzkzLjQwODcgMzUuNTAzMSA5MS44OTY4IDM0LjIxNTQgODkuNjg3MSAzNC4yMTU0Qzg1LjUwMDQgMzQuMjE1NCA3OC40MDYxIDQwLjUzNjggNzQuOTE3MSA1Mi43MTE0Wk0zOS45MTEgODMuNDk5MUMzMC4wMjU2IDgzLjQ5OTEgMjkuMjExNSA5My4zMzI0IDM5LjA5NjkgOTMuMzMyNEM0My41MTYzIDkzLjMzMjQgNDguODY2MSA5MS41NzY0IDUxLjY1NzMgODguNDE1N0M0Ny41ODY4IDg0LjkwMzggNDQuMjE0MSA4My40OTkxIDM5LjkxMSA4My40OTkxWk0xMDIuODI5IDc5LjI4NDhDMTAzLjQxIDk1Ljc5MDcgOTUuMDM2OSAxMDUuMDM5IDgwLjg0ODQgMTA1LjAzOUM3Mi40NzQ4IDEwNS4wMzkgNjguMjg4MSAxMDEuODc4IDU5LjMzMyA5Ni4wMjQ5QzU0LjY4MSAxMDEuMTc2IDQ1Ljg0MjMgMTA1LjAzOSAzOC41MTU0IDEwNS4wMzlDMTMuMjc4NSAxMDUuMDM5IDE0LjMyNTIgNzIuODQ2MyA0MC4wMjczIDcyLjg0NjNDNDUuMzc3MSA3Mi44NDYzIDQ5LjkxMjggNzQuMjUxMSA1NS43Mjc3IDc3Ljg4TDU5LjU2NTYgNjQuNDE3N0M0My43NDg5IDYwLjA4NjQgMzUuODQwNSA0Ny45MTE4IDQzLjYzMjYgMzAuNDY5M0g1Ni4xOTI5QzQ5LjIxNSA0Mi4wNTg2IDUzLjk4MzIgNTEuNjU3OCA2Mi44MjIgNTIuNzExNEM2Ny41OTAzIDM1LjczNzIgNzcuODI0NiAyMi41MDkgOTEuNDMxNiAyMi41MDlDOTkuMTA3NCAyMi41MDkgMTA1LjE1NSAyNy41NDI4IDEwNS4xNTUgMzYuNjczN0MxMDUuMTU1IDUxLjMwNjYgODYuMDgxOSA2My4yNDcxIDcxLjY2MDcgNjQuNDE3N0w2NS43Mjk1IDg1LjM3MjFDNzIuNDc0OCA5My4yMTUzIDkxLjE5OSAxMDAuODI0IDkxLjE5OSA3OS4yODQ4SDEwMi44MjlaIiBmaWxsPSIjRjVGMUVEIi8+Cjwvc3ZnPgo=",webUrl:"https://leather.io",chromeWebStoreUrl:"https://chrome.google.com/webstore/detail/hiro-wallet/ldinpeekobnhjjdofggfgjlcehhmanlj",mozillaAddOnsUrl:"https://leather.io/install-extension"},{id:"XverseProviders.StacksProvider",name:"Xverse Wallet",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGZpbGw9IiMxNzE3MTciIGQ9Ik0wIDBoNjAwdjYwMEgweiIvPjxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTQ0MCA0MzUuNHYtNTFjMC0yLS44LTMuOS0yLjItNS4zTDIyMCAxNjIuMmE3LjYgNy42IDAgMCAwLTUuNC0yLjJoLTUxLjFjLTIuNSAwLTQuNiAyLTQuNiA0LjZ2NDcuM2MwIDIgLjggNCAyLjIgNS40bDc4LjIgNzcuOGE0LjYgNC42IDAgMCAxIDAgNi41bC03OSA3OC43Yy0xIC45LTEuNCAyLTEuNCAzLjJ2NTJjMCAyLjQgMiA0LjUgNC42IDQuNUgyNDljMi42IDAgNC42LTIgNC42LTQuNlY0MDVjMC0xLjIuNS0yLjQgMS40LTMuM2w0Mi40LTQyLjJhNC42IDQuNiAwIDAgMSA2LjQgMGw3OC43IDc4LjRhNy42IDcuNiAwIDAgMCA1LjQgMi4yaDQ3LjVjMi41IDAgNC42LTIgNC42LTQuNloiLz48cGF0aCBmaWxsPSIjRUU3QTMwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0zMjUuNiAyMjcuMmg0Mi44YzIuNiAwIDQuNiAyLjEgNC42IDQuNnY0Mi42YzAgNCA1IDYuMSA4IDMuMmw1OC43LTU4LjVjLjgtLjggMS4zLTIgMS4zLTMuMnYtNTEuMmMwLTIuNi0yLTQuNi00LjYtNC42TDM4NCAxNjBjLTEuMiAwLTIuNC41LTMuMyAxLjNsLTU4LjQgNTguMWE0LjYgNC42IDAgMCAwIDMuMiA3LjhaIi8+PC9nPjwvc3ZnPg==",webUrl:"https://xverse.app",chromeWebStoreUrl:"https://chrome.google.com/webstore/detail/xverse-wallet/idnnbdplmphpflfnlkomgpfbpcgelopg",googlePlayStoreUrl:"https://play.google.com/store/apps/details?id=com.secretkeylabs.xverse",iOSAppStoreUrl:"https://apps.apple.com/app/xverse-bitcoin-web3-wallet/id1552272513",mozillaAddOnsUrl:"https://www.xverse.app/download"},{id:"AsignaProvider",name:"Asigna Multisig",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMDEwMCIgZD0iTTAgMGgzMnYzMkgweiIvPjxwYXRoIGZpbGw9InVybCgjYSkiIGQ9Ik0xNS4xMSA1LjU1YTMgMyAwIDAgMC0xLjgyIDEuM2wtLjA1LjA4LS40My43Mi0uMDcuMTEtLjUuODUtLjA1LjA5LTEuMjkgMi4xOC0uMDQuMDctLjQ3LjgtLjA2LjEtLjQ2Ljc4LS4wNy4xMS0xLjYzIDIuNzYtLjA3LjExLS4zOC42Ni0uMDUuMDgtLjczIDEuMjQtLjM1LjYtLjQuNjctLjA1LjA5TDUuMSAyMC43bC0uMTEuMTgtLjE0LjIzLS4wNy4xMy0uMzMuNTUtLjA0LjA3di4wMWExLjI2IDEuMjYgMCAwIDAtLjE0LjQ3IDEuMzEgMS4zMSAwIDAgMCAxLjI0IDEuNGgxLjVsLjA1LS4wNi4wNC0uMDYuODctMS4yMS4wNS0uMDguNzctMS4wNy4wNS0uMDcuNC0uNTcuMDUtLjA2LjI0LS4zNGExLjUyIDEuNTIgMCAwIDEgMS4zOS0uNjIgMS41IDEuNSAwIDAgMSAuNjQuMiAxLjQ3IDEuNDcgMCAwIDEgLjczIDEuMjcgMS40NCAxLjQ0IDAgMCAxLS4yNy44NGwtLjYzLjg4LS4wNS4wNy0uMzIuNDUtLjA2LjA4LS4wOC4xMi0uMTIuMTYtLjA1LjA4aDIuMTNhMi4zMiAyLjMyIDAgMCAwIDEuNzctLjk2bDEuMTgtMS42My43Ny0xLjA4IDEuMy0xLjhhMS4yNCAxLjI0IDAgMCAxIC41NS0uNDNsLjA4LS4wM2ExLjMgMS4zIDAgMCAxIC4zLS4wNiAxLjI4IDEuMjggMCAwIDEgMS4xNS41NGwuMTEuMmExLjEzIDEuMTMgMCAwIDEgLjEuNDEgMS4xOSAxLjE5IDAgMCAxLS4yMy43N2wtLjAzLjA1LS41Ny44LS43Ljk4LS4yNy4zN2ExLjIyIDEuMjIgMCAwIDAtLjIuNSAxLjA1IDEuMDUgMCAwIDAtLjAyLjIzdi4wNmExLjE3IDEuMTcgMCAwIDAgLjE0LjQzbC4wMi4wNS4wNy4xYTEuNDQgMS40NCAwIDAgMCAuMS4xMWwuMDUuMDYuMDEuMDFhMS44IDEuOCAwIDAgMCAuMTQuMWMwIC4wMi4wMi4wMy4wNC4wM2ExIDEgMCAwIDAgLjA4LjA1bC4wNy4wNGExLjI1IDEuMjUgMCAwIDAgLjUuMWg2LjljLjEgMCAuMi0uMDEuMjktLjAzbC4wNi0uMDJhMS4yNyAxLjI3IDAgMCAwIC4yNy0uMS41Ny41NyAwIDAgMCAuMDctLjAzIDEuMjEgMS4yMSAwIDAgMCAuMjYtLjE5bC4wOC0uMDdhLjkyLjkyIDAgMCAwIC4xNS0uMTkgMS41NSAxLjU1IDAgMCAwIC4wOS0uMTdsLjAyLS4wNWExLjIyIDEuMjIgMCAwIDAgLjA4LS4yNnYtLjA0bC4wMi0uMDh2LS4wOGExLjMyIDEuMzIgMCAwIDAtLjItLjc0bC0xLjYtMi42NC0uMDYtLjEtLjItLjMyLS4zMy0uNTR2LS4wMWwtLjA1LS4wOC0xLjMtMi4xNS0uMDctLjEtLjA0LS4wNi0uOC0xLjMyLS4wNC0uMDctLjItLjM0LS4xLS4xNC0uMS0uMTYtLjUzLS45LS4xMy0uMi0uMDktLjE0LTIuMTctMy41Ny0uMDQtLjA3LS43Mi0xLjE5LS4wNS0uMDctLjQtLjY1YTIuNjUgMi42NSAwIDAgMC0uMy0uNCAyLjk2IDIuOTYgMCAwIDAtLjk3LS43NCAzLjA0IDMuMDQgMCAwIDAtMS4zLS4zYy0uMjUgMC0uNS4wNC0uNzQuMVoiLz48cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJNMTkgMTYuM2E1LjQ1IDUuNDUgMCAwIDAtLjgzIDEuNTZsLS4wNC4xNWExLjM2IDEuMzYgMCAwIDEgLjI4LS4xNiAxLjI0IDEuMjQgMCAwIDEgLjM4LS4wOGguMWExLjI4IDEuMjggMCAwIDEgMS4wNS41NGMuMDQuMDYuMDguMTMuMS4yYTEuMjQgMS4yNCAwIDAgMSAuMDkuMjcgMS4xOSAxLjE5IDAgMCAxLS4yLjkxbC0uMDQuMDUtLjU3Ljc5LS43Ljk5LS4yNy4zN2ExLjIzIDEuMjMgMCAwIDAtLjIuNDIgMS4wNiAxLjA2IDAgMCAwLS4wMi4zMXYuMDZhMS4xNyAxLjE3IDAgMCAwIC4xNi40Ny45My45MyAwIDAgMCAuMDcuMSAxLjUgMS41IDAgMCAwIC4xLjEybC4wNS4wNmguMDFhMS45NCAxLjk0IDAgMCAwIC4wOS4wOCAxIDEgMCAwIDAgLjE3LjFsLjA3LjA0YTEuMjUgMS4yNSAwIDAgMCAuNS4xaDYuOWMuMSAwIC4yIDAgLjI4LS4wMmwuMDctLjAyYTEuMzIgMS4zMiAwIDAgMCAuMzQtLjEzbC4xNi0uMS4wMy0uMDNhMS4yOSAxLjI5IDAgMCAwIC4yLS4yIDIuNDMgMi40MyAwIDAgMCAuMTItLjE3Yy4wMy0uMDMuMDUtLjA4LjA3LS4xMmwuMDItLjA1YTEuMjEgMS4yMSAwIDAgMCAuMDktLjN2LS4wOGwuMDEtLjA5YTEuMzIgMS4zMiAwIDAgMC0uMi0uNzNsLTEuNi0yLjY0LS4wNi0uMS0uMi0uMzItLjMzLS41NHYtLjAybC0uMDUtLjA3LTEuMy0yLjE1LS4xMi0uMDctLjA3LS4wNGE0Ljk0IDQuOTQgMCAwIDAtMi40Ni0uNjdjLTEuMDMgMC0xLjc2LjU3LTIuMjYgMS4yWiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xMi4yOSAyMS4wOGMwIC4yOS0uMDkuNTgtLjI3Ljg0bC0xLjMxIDEuODRIN2wyLjUyLTMuNTNhMS41NCAxLjU0IDAgMCAxIDIuMS0uMzZjLjQzLjI4LjY2Ljc0LjY2IDEuMloiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTEuMTYgMjEuMjVhLjU2LjU2IDAgMCAxLS41Ny41NS41Ni41NiAwIDAgMS0uNTctLjU2LjU2LjU2IDAgMCAxIC41Ny0uNTUuNTYuNTYgMCAwIDEgLjU3LjU2WiIvPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iYSIgeDE9IjE1LjIzIiB4Mj0iMTkuMyIgeTE9IjI1Ljc4IiB5Mj0iNi4xMSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM2NTIyRjQiLz48c3RvcCBvZmZzZXQ9Ii41NSIgc3RvcC1jb2xvcj0iIzlCNkJGRiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0E1ODVGRiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMjIuNTkiIHgyPSIyNC44IiB5MT0iMjQuNzEiIHkyPSIxNS41MyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM0MjFGOEIiLz48c3RvcCBvZmZzZXQ9Ii41NSIgc3RvcC1jb2xvcj0iIzcyMzBGRiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzk3NzNGRiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjwvc3ZnPg==",webUrl:"https://asigna.io",chromeWebStoreUrl:"https://stx.asigna.io/"}];function Nw(t,e=!0){return function(n,r){var s;if(r)return t(n,r);let i=Oc(),o=Si();if(i&&o)return t(n,o);if(typeof window>"u")return;iw();let a=(s=n==null?void 0:n.defaultProviders)!=null?s:$w,u=vg(a),l=document.createElement("connect-modal");l.defaultProviders=a,l.installedProviders=u,l.persistSelection=e;let f=document.body.style.overflow;document.body.style.overflow="hidden";let h=()=>{l.remove(),document.body.style.overflow=f};l.callback=p=>{h(),t(n,p)},l.cancelCallback=()=>{var p;h(),(p=n.onCancel)==null||p.call(n)},document.body.appendChild(l);let y=p=>{p.key==="Escape"&&(document.removeEventListener("keydown",y),l.remove())};document.addEventListener("keydown",y)}}var Ww=Nw(fw,!1),Ts;(function(t){t[t.Testnet=2147483648]="Testnet",t[t.Mainnet=1]="Mainnet"})(Ts||(Ts={}));Ts.Mainnet;const Lw=128;var Ce;(function(t){t[t.Address=0]="Address",t[t.Principal=1]="Principal",t[t.LengthPrefixedString=2]="LengthPrefixedString",t[t.MemoString=3]="MemoString",t[t.AssetInfo=4]="AssetInfo",t[t.PostCondition=5]="PostCondition",t[t.PublicKey=6]="PublicKey",t[t.LengthPrefixedList=7]="LengthPrefixedList",t[t.Payload=8]="Payload",t[t.MessageSignature=9]="MessageSignature",t[t.StructuredDataSignature=10]="StructuredDataSignature",t[t.TransactionAuthField=11]="TransactionAuthField"})(Ce||(Ce={}));var ma;(function(t){t[t.TokenTransfer=0]="TokenTransfer",t[t.SmartContract=1]="SmartContract",t[t.VersionedSmartContract=6]="VersionedSmartContract",t[t.ContractCall=2]="ContractCall",t[t.PoisonMicroblock=3]="PoisonMicroblock",t[t.Coinbase=4]="Coinbase",t[t.CoinbaseToAltRecipient=5]="CoinbaseToAltRecipient",t[t.TenureChange=7]="TenureChange",t[t.NakamotoCoinbase=8]="NakamotoCoinbase"})(ma||(ma={}));var Ea;(function(t){t[t.Clarity1=1]="Clarity1",t[t.Clarity2=2]="Clarity2",t[t.Clarity3=3]="Clarity3"})(Ea||(Ea={}));var xt;(function(t){t[t.OnChainOnly=1]="OnChainOnly",t[t.OffChainOnly=2]="OffChainOnly",t[t.Any=3]="Any"})(xt||(xt={}));const ss=["onChainOnly","offChainOnly","any"];ss[0]+"",xt.OnChainOnly,ss[1]+"",xt.OffChainOnly,ss[2]+"",xt.Any,xt.OnChainOnly+"",xt.OnChainOnly,xt.OffChainOnly+"",xt.OffChainOnly,xt.Any+"",xt.Any;var Ps;(function(t){t[t.Mainnet=0]="Mainnet",t[t.Testnet=128]="Testnet"})(Ps||(Ps={}));Ps.Mainnet;var Aa;(function(t){t[t.Allow=1]="Allow",t[t.Deny=2]="Deny"})(Aa||(Aa={}));var js;(function(t){t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible"})(js||(js={}));var Ia;(function(t){t[t.Standard=4]="Standard",t[t.Sponsored=5]="Sponsored"})(Ia||(Ia={}));var va;(function(t){t[t.SerializeP2PKH=0]="SerializeP2PKH",t[t.SerializeP2SH=1]="SerializeP2SH",t[t.SerializeP2WPKH=2]="SerializeP2WPKH",t[t.SerializeP2WSH=3]="SerializeP2WSH",t[t.SerializeP2SHNonSequential=5]="SerializeP2SHNonSequential",t[t.SerializeP2WSHNonSequential=7]="SerializeP2WSHNonSequential"})(va||(va={}));var xa;(function(t){t[t.MainnetSingleSig=22]="MainnetSingleSig",t[t.MainnetMultiSig=20]="MainnetMultiSig",t[t.TestnetSingleSig=26]="TestnetSingleSig",t[t.TestnetMultiSig=21]="TestnetMultiSig"})(xa||(xa={}));var Ma;(function(t){t[t.Compressed=0]="Compressed",t[t.Uncompressed=1]="Uncompressed"})(Ma||(Ma={}));var $a;(function(t){t[t.Equal=1]="Equal",t[t.Greater=2]="Greater",t[t.GreaterEqual=3]="GreaterEqual",t[t.Less=4]="Less",t[t.LessEqual=5]="LessEqual"})($a||($a={}));var Na;(function(t){t[t.Sends=16]="Sends",t[t.DoesNotSend=17]="DoesNotSend"})(Na||(Na={}));var wr;(function(t){t[t.Origin=1]="Origin",t[t.Standard=2]="Standard",t[t.Contract=3]="Contract"})(wr||(wr={}));var La;(function(t){t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible"})(La||(La={}));var Ca;(function(t){t.Serialization="Serialization",t.Deserialization="Deserialization",t.SignatureValidation="SignatureValidation",t.FeeTooLow="FeeTooLow",t.BadNonce="BadNonce",t.NotEnoughFunds="NotEnoughFunds",t.NoSuchContract="NoSuchContract",t.NoSuchPublicFunction="NoSuchPublicFunction",t.BadFunctionArgument="BadFunctionArgument",t.ContractAlreadyExists="ContractAlreadyExists",t.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",t.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",t.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",t.BadAddressVersionByte="BadAddressVersionByte",t.NoCoinbaseViaMempool="NoCoinbaseViaMempool",t.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",t.TooMuchChaining="TooMuchChaining",t.ConflictingNonceInMempool="ConflictingNonceInMempool",t.BadTransactionVersion="BadTransactionVersion",t.TransferRecipientCannotEqualSender="TransferRecipientCannotEqualSender",t.TransferAmountMustBePositive="TransferAmountMustBePositive",t.ServerFailureDatabase="ServerFailureDatabase",t.EstimatorError="EstimatorError",t.TemporarilyBlacklisted="TemporarilyBlacklisted",t.ServerFailureOther="ServerFailureOther"})(Ca||(Ca={}));function vu(t,e,n){const r=e||1,s=n||Lw;if(jw(t,s))throw new Error(`String length exceeds maximum bytes ${s}`);return{type:Ce.LengthPrefixedString,content:t,lengthPrefixBytes:r,maxLengthBytes:s}}function Dr(t){const e=xn.c32addressDecode(t);return{type:Ce.Address,version:e[0],hash160:e[1]}}function Cw(t){if(t.includes(".")){const[e,n]=t.split(".");return Bw(e,n)}else return xu(t)}function Bw(t,e){const n=Dr(t),r=vu(e);return{type:Ce.Principal,prefix:wr.Contract,address:n,contractName:r}}function xu(t){const e=Dr(t);return{type:Ce.Principal,prefix:wr.Standard,address:e}}var le;(function(t){t[t.Int=0]="Int",t[t.UInt=1]="UInt",t[t.Buffer=2]="Buffer",t[t.BoolTrue=3]="BoolTrue",t[t.BoolFalse=4]="BoolFalse",t[t.PrincipalStandard=5]="PrincipalStandard",t[t.PrincipalContract=6]="PrincipalContract",t[t.ResponseOk=7]="ResponseOk",t[t.ResponseErr=8]="ResponseErr",t[t.OptionalNone=9]="OptionalNone",t[t.OptionalSome=10]="OptionalSome",t[t.List=11]="List",t[t.Tuple=12]="Tuple",t[t.StringASCII=13]="StringASCII",t[t.StringUTF8=14]="StringUTF8"})(le||(le={}));function Jw(t){if(t.includes(".")){const[e,n]=t.split(".");return Dw(e,n)}else return _w(t)}function _w(t){const e=Dr(t);return{type:le.PrincipalStandard,address:e}}function Dw(t,e){const n=Dr(t),r=vu(e);return Ow(n,r)}function Ow(t,e){if(Mn(e.content).byteLength>=128)throw new Error("Contract name must be less than 128 bytes");return{type:le.PrincipalContract,address:t,contractName:e}}const Uw=()=>({type:le.BoolTrue}),Tw=()=>({type:le.BoolFalse}),tS=t=>t?Uw():Tw(),Ba=BigInt("0xffffffffffffffffffffffffffffffff"),Pw=BigInt(0);BigInt("0x7fffffffffffffffffffffffffffffff");BigInt("-170141183460469231731687303715884105728");const eS=t=>{const e=xr(t,!1);if(e<Pw)throw new RangeError("Cannot construct unsigned clarity integer from negative value");if(e>Ba)throw new RangeError(`Cannot construct unsigned clarity integer greater than ${Ba}`);return{type:le.UInt,value:e}},nS=t=>({type:le.StringASCII,data:t}),jw=(t,e)=>t?Mn(t).length>e:!1;function kw(t,e,n){return typeof t=="string"&&(t=Cw(t)),{type:Ce.PostCondition,conditionType:js.STX,principal:t,conditionCode:e,amount:xr(n,!1)}}function rS(t,e,n){return kw(xu(t),e,n)}export{Hs as A,$a as F,Aa as P,Ey as S,ur as U,Xw as Y,xt as a,tS as b,zw as c,_c as d,Zw as e,Ww as g,By as h,rS as m,Jw as p,Qw as r,nS as s,eS as u};
//# sourceMappingURL=stacks-3bcf8144.js.map
